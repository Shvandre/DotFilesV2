import{r as N,e3 as H,j as t,e4 as l,e5 as g,c7 as y,dI as u,dH as f,dX as S,e6 as A,e7 as T,e8 as m,e9 as w,ea as D,v as x,eb as b,ec as j,ed as h,ee as J,ef as I,i as v,eg as L,b7 as O,eh as C,ei as W,ej as E,ek as R,dG as M,el as k,aL as U,em as q,en as G,eo as P,ep as z,N as V,eq as X,er as Y,es as $,et as Q,eu as Z,ev as K,ew as tt,ex as st,ey as et,ez as nt,L as it,eA as at,eB as rt,eC as ot,eD as ct,eE as dt,eF as ut,eG as lt,eH as mt,eI as xt,eJ as jt,eK as ft}from"./main.BJ1Zz46B.js";const _t=(s,n,e,i,a)=>{const[r,o]=N.useState(i?a?.current:window);return N.useEffect(()=>{if(!s||!r)return;const c=H(()=>{if(!n&&document.documentElement.className!=="is-locked")if(r===window)window.innerHeight+window.scrollY>=document.body.offsetHeight-500&&e();else{const d=r;d.scrollTop>=d.scrollHeight-window.innerHeight-500&&e()}},50);return r.addEventListener("scroll",c),c(),()=>{r.removeEventListener("scroll",c)}},[s,i,r]),o},At=({tonTransfer:s,timestamp:n,event:e,isScam:i,status:a})=>{const r=O(),{data:o}=y(u.TON),{fiatAmount:c}=f(o,S(s.amount)),d=s.recipient.address===r.rawAddress?"received":"send";return t.jsxs(A,{event:e,children:[t.jsx(C,{isScam:i,amount:s.amount,symbol:u.TON,total:c,timestamp:n,kind:d,status:a}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[d==="received"&&t.jsx(I,{sender:s.sender}),d==="send"&&t.jsx(b,{recipient:s.recipient}),t.jsx(j,{eventId:e.eventId}),t.jsx(h,{extra:e.extra}),t.jsx(W,{comment:i?void 0:s.comment})]})]})},ht=({action:s,timestamp:n,event:e,isScam:i})=>{const{tonTransfer:a}=s;return a?t.jsx(At,{tonTransfer:a,event:e,isScam:i,timestamp:n,status:s.status}):t.jsx(l,{event:e})},yt=({action:s,timestamp:n,event:e})=>{const{t:i}=v(),{auctionBid:a}=s,r=g(),{data:o}=y(u.TON),{fiatAmount:c}=f(o,S(a?.amount.value??0));return a?t.jsxs(A,{event:e,children:[t.jsxs("div",{children:[t.jsx(T,{children:i("transaction_type_bid")}),t.jsxs(m,{children:[r(a.amount.value)," ",a.amount.tokenName]}),c&&t.jsxs(m,{children:["≈ ",c]}),t.jsx(w,{kind:"send",timestamp:n}),t.jsx(D,{status:s.status})]}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[t.jsx(L,{beneficiary:a.auction}),t.jsx(j,{eventId:e.eventId}),t.jsx(h,{extra:e.extra})]})]}):t.jsx(l,{event:e})},St=({action:s,timestamp:n,event:e})=>{const{domainRenew:i}=s;return i?t.jsxs(A,{event:e,children:[t.jsxs("div",{children:[t.jsx(T,{children:i.domain}),t.jsx(w,{kind:"send",timestamp:n}),t.jsx(D,{status:s.status})]}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[t.jsx(I,{sender:i.renewer,bounced:!0}),t.jsx(j,{eventId:e.eventId}),t.jsx(h,{extra:e.extra})]})]}):t.jsx(l,{event:e})},kt=({action:s,timestamp:n,event:e})=>{const{smartContractExec:i}=s,a=g(),{data:r}=y(u.TON),{fiatAmount:o}=f(r,S(i?.tonAttached??0));return i?t.jsxs(A,{event:e,children:[t.jsxs("div",{children:[t.jsxs(T,{children:["- ",a(i.tonAttached)," ",u.TON]}),o&&t.jsxs(m,{children:["≈ ",o]}),t.jsx(w,{kind:"call",timestamp:n}),t.jsx(D,{status:s.status})]}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[t.jsx(b,{recipient:i.contract,bounced:!0}),t.jsx(j,{eventId:e.eventId}),t.jsx(h,{extra:e.extra}),t.jsx(J,{operation:i.operation})]})]}):t.jsx(l,{event:e})},Tt=({extraCurrencyTransfer:s,timestamp:n,event:e,isScam:i,status:a})=>{const r=O(),{data:o}=y(s.currency.symbol),{fiatAmount:c}=f(o,S(s.amount,s.currency.decimals)),d=s.recipient.address===r.rawAddress?"received":"send";return t.jsxs(A,{event:e,children:[t.jsx(C,{isScam:i,amount:s.amount,decimals:s.currency.decimals,symbol:s.currency.symbol,total:c,timestamp:n,kind:d,status:a}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[d==="received"&&t.jsx(I,{sender:s.sender}),d==="send"&&t.jsx(b,{recipient:s.recipient}),t.jsx(j,{eventId:e.eventId}),t.jsx(h,{extra:e.extra}),t.jsx(W,{comment:i?void 0:s.comment})]})]})},wt=({action:s,timestamp:n,event:e,isScam:i})=>{const{extraCurrencyTransfer:a}=s;return a?t.jsx(Tt,{extraCurrencyTransfer:a,event:e,isScam:i,timestamp:n,status:s.status}):t.jsx(l,{event:e})},Dt=({depositStake:s,timestamp:n,event:e,status:i})=>{const{t:a}=v(),{data:r}=y(u.TON),o=g(),{fiatAmount:c}=f(r,S(s.amount));return t.jsxs(A,{event:e,children:[t.jsxs("div",{children:[t.jsx(T,{children:a("staking_deposit")}),t.jsxs(m,{children:["- ",o(s.amount)," ",u.TON]}),t.jsxs(m,{children:["≈ ",c]}),t.jsx(w,{kind:"send",timestamp:n}),t.jsx(D,{status:i})]}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[t.jsx(E,{pool:s.pool}),t.jsx(j,{eventId:e.eventId}),t.jsx(h,{extra:e.extra})]})]})},vt=({action:s,timestamp:n,event:e,isScam:i})=>{const{depositStake:a}=s;return a?t.jsx(Dt,{depositStake:a,timestamp:n,event:e,isScam:i,status:s.status}):t.jsx(l,{event:e})},Nt=({withdrawStake:s,timestamp:n,event:e,status:i})=>{const{t:a}=v(),{data:r}=y(u.TON),o=g(),{fiatAmount:c}=f(r,S(s.amount));return t.jsxs(A,{event:e,children:[t.jsxs("div",{children:[t.jsx(T,{children:a("staking_withdraw")}),t.jsxs(m,{children:["+ ",o(s.amount)," ",u.TON]}),t.jsxs(m,{children:["≈ ",c]}),t.jsx(w,{kind:"send",timestamp:n}),t.jsx(D,{status:i})]}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[t.jsx(E,{pool:s.pool}),t.jsx(j,{eventId:e.eventId}),t.jsx(h,{extra:e.extra})]})]})},gt=({action:s,timestamp:n,event:e,isScam:i})=>{const{withdrawStake:a}=s;return a?t.jsx(Nt,{withdrawStake:a,timestamp:n,event:e,isScam:i,status:s.status}):t.jsx(l,{event:e})},bt=({withdrawStakeRequest:s,timestamp:n,event:e,status:i})=>{const{t:a}=v(),{data:r}=y(u.TON),o=g(),{fiatAmount:c}=f(r,S(s.amount??0));return t.jsxs(A,{event:e,children:[t.jsxs("div",{children:[t.jsx(T,{children:a("activityActionModal_withdrawal_request")}),s.amount&&t.jsxs(t.Fragment,{children:[t.jsxs(m,{children:["+ ",o(s.amount)," ",u.TON]}),t.jsxs(m,{children:["≈ ",c]})]}),t.jsx(w,{kind:"send",timestamp:n}),t.jsx(D,{status:i})]}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[t.jsx(E,{pool:s.pool}),t.jsx(j,{eventId:e.eventId}),t.jsx(h,{extra:e.extra})]})]})},It=({action:s,timestamp:n,event:e,isScam:i})=>{const{withdrawStakeRequest:a}=s;return a?t.jsx(bt,{withdrawStakeRequest:a,timestamp:n,event:e,isScam:i,status:s.status}):t.jsx(l,{event:e})},Ct=({transactionHash:s,children:n})=>t.jsx(z,{url:"https://tronscan.org/#/transaction/%s",eventId:s,children:n}),Et=({timestamp:s,event:n})=>{const e=R(),{data:i}=M(),{fiatAmount:a}=f(i,n.assetAmount.relativeAmount),r=n.isScam,o=n.to===e.address?"received":"send";return t.jsxs(Ct,{transactionHash:n.transactionHash,children:[t.jsx(C,{isScam:r,decimals:n.assetAmount.asset.decimals,amount:n.assetAmount.weiAmount.toFixed(0),symbol:n.assetAmount.asset.symbol,total:n.assetAmount.asset.address===U.address?a:void 0,timestamp:s,kind:o,status:n.isFailed?k.Failed:k.Ok}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[o==="received"&&t.jsx(q,{address:n.from}),o==="send"&&t.jsx(G,{address:n.to}),t.jsx(j,{eventId:n.transactionHash}),!!n.fee&&t.jsx(P,{fee:n.fee})]})]})},Ft=s=>{switch(s.action.type){case"TonTransfer":return t.jsx(ht,{...s});case"NftItemTransfer":return t.jsx(nt,{...s});case"ContractDeploy":return t.jsx(et,{...s});case"UnSubscribe":return t.jsx(st,{...s});case"Subscribe":return t.jsx(tt,{...s});case"AuctionBid":return t.jsx(yt,{...s});case"DomainRenew":return t.jsx(St,{...s});case"SmartContractExec":return t.jsx(kt,{...s});case"JettonTransfer":return t.jsx(K,{...s});case"JettonSwap":return t.jsx(Z,{...s});case"JettonMint":return t.jsx(Q,{...s});case"JettonBurn":return t.jsx($,{...s});case"DepositStake":return t.jsx(vt,{...s});case"WithdrawStake":return t.jsx(gt,{...s});case"WithdrawStakeRequest":return t.jsx(It,{...s});case"NftPurchase":return t.jsx(Y,{...s});case"ExtraCurrencyTransfer":return t.jsx(wt,{...s});case"Unknown":return t.jsx(l,{event:s.event});default:return console.log(s),t.jsx(l,{event:s.event,children:s.action.type})}},pt=s=>{const{t:n}=v();switch(s.event.type){case"asset-transfer":return t.jsx(Et,{...s});default:return X(s.event.type),t.jsx(t.Fragment,{children:n("txActions_signRaw_types_unknownTransaction")})}},Ot=({value:s,handleClose:n})=>{const e=N.useCallback(()=>{if(s)return s.type==="tron"?t.jsx(pt,{...s}):t.jsx(Ft,{...s})},[s,n]);return t.jsx(V,{isOpen:!!s,handleClose:n,children:e})},Wt=({event:s,onClick:n,formattedDate:e})=>t.jsx(t.Fragment,{children:t.jsxs(it,{onClick:n,children:[t.jsx(Rt,{event:s,formattedDate:e}),s.inProgress&&t.jsx(at,{})]})}),Rt=({event:s,formattedDate:n})=>{const e=R();return e?s.to===e?.address?t.jsx(ot,{amount:s.assetAmount.stringRelativeAmount,sender:s.from,symbol:s.assetAmount.asset.symbol,date:n,isScam:s.isScam,status:s.isFailed?k.Failed:k.Ok}):t.jsx(ct,{amount:s.assetAmount.stringRelativeAmount,symbol:s.assetAmount.asset.symbol,recipient:s.to,date:n,isScam:s.isScam,status:s.isFailed?k.Failed:k.Ok}):t.jsx(rt,{})},Ht=({items:s})=>{const[n,e]=N.useState(void 0),{i18n:i}=v(),a=N.useMemo(()=>dt(s),[s]);return t.jsxs(t.Fragment,{children:[a.map(([r,o])=>t.jsxs(ut,{children:[t.jsx(lt,{children:mt(i.language,r,o[0].timestamp)}),o.map(({timestamp:c,event:d,type:F,key:B})=>{const p=xt(i.language,r,c);return t.jsx(jt,{children:F==="tron"?t.jsx(Wt,{event:d,formattedDate:p,onClick:()=>e({type:"tron",event:d,timestamp:d.timestamp})}):F==="ton"?t.jsx(ft,{event:d,date:p,timestamp:c,setActivity:_=>e({type:"ton",..._})}):null},B)})]},r)),t.jsx(Ot,{value:n,handleClose:()=>e(void 0)})]})};export{Ht as M,_t as u};
