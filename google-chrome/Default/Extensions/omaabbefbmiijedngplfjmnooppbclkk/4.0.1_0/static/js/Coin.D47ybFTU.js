import{dS as P,dT as H,bv as k,cy as N,c0 as E,r as i,j as e,dU as u,S as x,I as f,dV as F,bS as m,dW as B,a9 as M,dA as _,dB as U,dC as T,aD as D,dX as A,c7 as h,dY as v,dH as j,dZ as p,i as y,d_ as b,dI as w,k as C,aF as W,db as J,d$ as S,e0 as L,e1 as V,aL as I,s as z,dG as G,o as K,dv as X,A as Y,e2 as Z}from"./main.BJ1Zz46B.js";import{u as $,M as q}from"./MobileActivityList.BeMsFbJh.js";import{S as Q,R as ee,a as se,H as O}from"./TonActions.DtV0hPgg.js";import{u as te}from"./useSwapAssets.Bd_DJwwt.js";import ae from"./EmptyActivity.Bg0x5OhU.js";import{H as ne}from"./HideForState.Czycm-mQ.js";import"./useSwapMobileNotification.i_qU80ol.js";const g=({assetAddress:s,innerRef:t})=>{const{standalone:a}=M(),{refetch:n,isFetched:o,fetchNextPage:r,hasNextPage:d,isFetchingNextPage:l,data:c}=_(s);U(n,5e3,t);const R=l;return $(d,R,r,a,t),!o||!c?e.jsx(T,{}):c.length===0?e.jsx(i.Suspense,{fallback:e.jsx(T,{}),children:e.jsx(ae,{})}):e.jsxs(e.Fragment,{children:[e.jsx(q,{items:c}),R&&e.jsx(D,{size:3})]})},oe=({info:s,balance:t})=>{const[a,n]=i.useMemo(()=>[A(t.balance,s.metadata.decimals),N.Address.parse(t.jetton.address).toString()],[s,t]),{data:o}=h(n),r=v(a,s.metadata.decimals),{fiatAmount:d}=j(o,a),{description:l,image:c}=s.metadata;return e.jsx(p,{amount:r,symbol:s.metadata.symbol,price:d,description:l,image:c})},ie=({jettonAddress:s})=>{const{data:t}=P(s),{data:a}=H(s),n=k(),{data:o}=te(),r=N.Address.parse(s).toRawString(),d=n?void 0:o?.find(c=>E(c.address)===r),l=i.useRef(null);return!t||!a||!o?e.jsx(u,{}):e.jsxs(e.Fragment,{children:[e.jsx(x,{title:t.metadata.name}),e.jsxs(f,{ref:l,children:[e.jsx(oe,{balance:a,info:t}),e.jsxs(F,{children:[!n&&e.jsx(Q,{asset:t.metadata.address,chain:m.TON}),e.jsx(ee,{jetton:t.metadata.address}),e.jsx(ne,{feature:B.swap,children:d&&e.jsx(se,{fromAsset:d})})]}),e.jsx(g,{assetAddress:a.jetton.address,innerRef:l})]})]})},re=({info:{balance:s}})=>{const{t}=y(),a=i.useMemo(()=>A(s),[s]),n=v(a),{data:o}=h(w.TON),{fiatAmount:r}=j(o,a);return e.jsx(p,{amount:n,symbol:"TON",price:r,description:t("Ton_page_description"),image:"https://wallet.tonkeeper.com/img/toncoin.svg"})},ce=()=>{const{t:s}=y(),t=i.useRef(null),{data:a}=b();return a?e.jsxs(e.Fragment,{children:[e.jsx(x,{title:s("Toncoin")}),e.jsxs(f,{ref:t,children:[e.jsx(re,{info:a}),e.jsx(O,{chain:m.TON}),e.jsx(g,{innerRef:t,assetAddress:w.TON})]})]}):e.jsx(u,{activity:4})},de=()=>{const s=C();return{onOpen:i.useCallback(a=>{s.uiEvents.emit("transfer",{method:"transfer",id:Date.now(),params:{...a,from:"wallet"}})},[s])}},le=({assetAmount:s})=>{const{data:t}=G(),{fiatAmount:a}=j(t,s.relativeAmount);return e.jsx(p,{amount:s.stringRelativeAmount,symbol:s.asset.symbol,price:a,image:s.asset.image,imageNoCorners:!0})},me=z.div`
    display: flex;
    align-items: center;
    gap: 6px;
`,ue=()=>{const s=W().data?.usdt,t=i.useRef(null),a=C(),{onOpen:n}=de();return s===void 0?e.jsx(u,{}):e.jsxs(e.Fragment,{children:[e.jsx(x,{title:e.jsxs(me,{children:[s.asset.name,e.jsx(J,{children:"TRC20"})]})}),e.jsxs(f,{ref:t,children:[e.jsx(le,{assetAmount:s}),e.jsxs(F,{children:[e.jsx(S,{icon:e.jsx(L,{}),title:"wallet_send",action:()=>n({chain:m.TRON})}),e.jsx(S,{icon:e.jsx(V,{}),title:"wallet_receive",action:()=>a.uiEvents.emit("receive",{method:"receive",params:{chain:m.TRON,jetton:s.asset.id}})})]}),e.jsx(g,{assetAddress:I.address,innerRef:t})]})]})},xe=({extra:s})=>{const t=i.useMemo(()=>A(s.amount,s.preview.decimals),[s]),a=v(t),{data:n}=h(s.preview.symbol),{fiatAmount:o}=j(n,t);return e.jsx(p,{amount:a,symbol:s.preview.symbol,price:o,image:s.preview.image})},fe=({name:s})=>{const{t}=y(),a=i.useRef(null),{data:n}=b(),o=n?.extraBalance?.find(r=>r.preview.symbol===s);return o?e.jsxs(e.Fragment,{children:[e.jsx(x,{title:s}),e.jsxs(f,{ref:a,children:[e.jsx(xe,{extra:o}),e.jsx(O,{chain:m.TON}),e.jsx(g,{innerRef:a,assetAddress:o.preview.symbol})]})]}):e.jsx(u,{activity:4})},Re=()=>{const s=K(),{name:t}=X();return i.useEffect(()=>{t||s(Y.home)},[t]),t?t===I.id?e.jsx(ue,{}):t==="ton"?e.jsx(ce,{}):Z(decodeURIComponent(t))?e.jsx(ie,{jettonAddress:decodeURIComponent(t)}):e.jsx(fe,{name:t}):e.jsx(e.Fragment,{})};export{Re as default};
