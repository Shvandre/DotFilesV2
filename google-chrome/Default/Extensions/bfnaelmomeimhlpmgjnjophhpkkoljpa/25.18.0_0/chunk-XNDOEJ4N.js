import{$a as wr,$c as Ur,A as yr,Ad as yt,B as Le,Ba as hr,Db as Ve,Dc as Ge,Ib as Cr,Jc as Dr,Kb as Ir,Kc as ft,Lb as Pr,Mb as Ke,Sa as Sr,Sb as Or,Ua as br,Va as Ar,Wb as Qe,Xb as V,Xc as ye,Zb as Rr,Zc as Te,_b as Mr,id as Fr,kb as xe,mb as Er,nb as vr,nd as gt,pb as kr,rb as xr,sc as Br,w as mr,x as fr,y as Ne,z as gr,za as Tr}from"./chunk-HKKBRKQE.js";import{U as pr,a as dt,c as pt,j as mt,x as lr}from"./chunk-LWEFQGDN.js";import{Hc as po,K as tr,L as Q,Qd as X,Ua as sr,Ya as M,bb as ar,c as uo,cb as cr,db as ae,eb as G,ed as ur,hb as fe,ld as ce,oc as _e,r as lo,re as ge,sb as Fe}from"./chunk-3GZCHS7Y.js";import{p as Yt}from"./chunk-3LY6FUZT.js";import{i as Y,l as ie}from"./chunk-SK6BTSEQ.js";import{H as dr,x as Z}from"./chunk-BY5XXL4W.js";import{A as se}from"./chunk-WP4K54AS.js";import{C as O,p as rr,q as nr,r as or,s as ir,u as W,w as J,z as q}from"./chunk-UCPKAIVR.js";import{V as D,aa as er,i as Jt,u as I,x as Zt,z as Xt}from"./chunk-NL7NWYRL.js";import{a as _,b as oe,h as p}from"./chunk-57IY32VM.js";import{f as B,h as i,i as m,m as Buffer,n as s}from"./chunk-3KENBVE7.js";i();s();i();s();i();s();i();s();var Ws="userExplorerPreferenceV2";i();s();i();s();var oa="isAnalyticsOptedOut";i();s();i();s();i();s();i();s();var Nr=e=>{let{accountIdentifier:t,autoConfirmEnabled:r=!1,trustedAppsByAccount:n}=e;if(!t||!n)return;let o=Object.values(n),a=[],d=[];r?(o.forEach(l=>{l.autoConfirm&&lr(l.autoConfirm)?a.push(l):d.push(l)}),a.sort((l,c)=>(c.autoConfirm?.sessionStartTime??0)-(l.autoConfirm?.sessionStartTime??0))):d=o;let u=Zt(d.map(l=>{let c=l.lastConnectedTimestamp??0;return{timestamp:c,data:{...l,lastConnectedTimestamp:c}}}));return{autoConfirmEnabledApps:a,timeBucketedApps:u}};i();s();var Lr=(e,t)=>{if(!t||e.autoConfirm?.sessionStartTime===void 0||e.autoConfirm?.maxSessionDuration===void 0)return;let r=new Date(e.autoConfirm?.sessionStartTime+e.autoConfirm?.maxSessionDuration*1e3);return Xt(r).format("h:mm A")};i();s();var So=0;function b(e,t){let r=`atom${++So}`,n={toString(){return(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&this.debugLabel?r+":"+this.debugLabel:r}};return typeof e=="function"?n.read=e:(n.init=e,n.read=bo,n.write=Ao),t&&(n.write=t),n}function bo(e){return e(this)}function Ao(e,t,r){return t(this,typeof r=="function"?r(e(this)):r)}var Vr=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,At=e=>"init"in e,bt=e=>!!e.write,je=new WeakMap,wt=e=>{var t;return Et(e)&&!((t=je.get(e))!=null&&t[1])},wo=(e,t)=>{let r=je.get(e);if(r)r[1]=!0,r[0].forEach(n=>n(t));else if((import.meta.env?import.meta.env.MODE:void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},Eo=e=>{if(je.has(e))return;let t=[new Set,!1];je.set(e,t);let r=()=>{t[1]=!0};e.then(r,r),e.onCancel=n=>{t[0].add(n)}},Et=e=>typeof e?.then=="function",Kr=e=>"v"in e||"e"in e,qe=e=>{if("e"in e)throw e.e;if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},Qr=(e,t,r)=>{r.p.has(e)||(r.p.add(e),t.then(()=>{r.p.delete(e)},()=>{r.p.delete(e)}))},vo=(e,t,r,n)=>{var o;if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&r===e)throw new Error("[Bug] atom cannot depend on itself");t.d.set(r,n.n),wt(t.v)&&Qr(e,t.v,n),(o=n.m)==null||o.t.add(e)},ko=Symbol.for("JOTAI.EXPERIMENTAL.FLUSHSTOREHOOK"),Gr=(...e)=>{let[t,r,n,o,a,d]=e,u=S=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!S)throw new Error("Atom is undefined or null");let T=t(S);return T||(T={d:new Map,p:new Set,n:0},r(S,T),a?.(S,Ue)),T},l=new WeakMap,c=new Map,f=new Set,g=new Set,y=()=>{var S;let T=[],A=w=>{try{w()}catch(v){T.push(v)}};do{(S=Ue[ko])==null||S.call(Ue);let w=new Set,v=w.add.bind(w);c.forEach(E=>{var x;return(x=E.m)==null?void 0:x.l.forEach(v)}),c.clear(),f.forEach(v),f.clear(),g.forEach(v),g.clear(),w.forEach(A),c.size&&re()}while(c.size||f.size||g.size);if(T.length)throw T[0]},h=(S,T,A)=>{let w="v"in T,v=T.v,E=wt(T.v)?T.v:null;if(Et(A)){Eo(A);for(let x of T.d.keys())Qr(S,A,u(x));T.v=A}else T.v=A;delete T.e,(!w||!Object.is(v,T.v))&&(++T.n,E&&wo(E,A))},k=S=>{var T;let A=u(S);if(Kr(A)&&(A.m&&l.get(S)!==A.n||Array.from(A.d).every(([P,ne])=>k(P).n===ne)))return A;A.d.clear();let w=!0,v=()=>{A.m&&(ve(S,A),re(),y())},E=P=>{if(Vr(S,P)){let lt=u(P);if(!Kr(lt))if(At(P))h(P,lt,P.init);else throw new Error("no atom init");return qe(lt)}let ne=k(P);try{return qe(ne)}finally{vo(S,A,P,ne),w||v()}},x,R,L={get signal(){return x||(x=new AbortController),x.signal},get setSelf(){return(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!bt(S)&&console.warn("setSelf function cannot be used with read-only atom"),!R&&bt(S)&&(R=(...P)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&w&&console.warn("setSelf function cannot be called in sync"),!w)return ct(S,...P)}),R}};try{let P=n(S,E,L);return h(S,A,P),Et(P)&&((T=P.onCancel)==null||T.call(P,()=>x?.abort()),P.then(v,v)),A}catch(P){return delete A.v,A.e=P,++A.n,A}finally{w=!1}},C=S=>qe(k(S)),N=S=>{var T;let A=new Map;for(let w of((T=S.m)==null?void 0:T.t)||[]){let v=u(w);v.m&&A.set(w,v)}for(let w of S.p)A.set(w,u(w));return A},z=S=>{let T=[S];for(;T.length;){let A=T.pop();for(let[w,v]of N(A))l.has(w)||(l.set(w,v.n),T.push(v))}},re=()=>{var S;let T=[],A=new WeakSet,w=new WeakSet,v=Array.from(c);for(;v.length;){let[E,x]=v[v.length-1];if(w.has(E)){v.pop();continue}if(A.has(E)){l.get(E)===x.n?T.push([E,x,x.n]):(l.delete(E),c.set(E,x)),w.add(E),v.pop();continue}A.add(E);for(let[R,L]of N(x))A.has(R)||v.push([R,L])}for(let E=T.length-1;E>=0;--E){let[x,R,L]=T[E],P=!1;for(let ne of R.d.keys())if(ne!==x&&c.has(ne)){P=!0;break}P&&(k(x),ve(x,R),L!==R.n&&(c.set(x,R),(S=R.u)==null||S.call(R))),l.delete(x)}},me=(S,...T)=>{let A=!0,w=E=>qe(k(E)),v=(E,...x)=>{var R;let L=u(E);try{if(Vr(S,E)){if(!At(E))throw new Error("atom not writable");let P=L.n,ne=x[0];h(E,L,ne),ve(E,L),P!==L.n&&(c.set(E,L),(R=L.u)==null||R.call(L),z(L));return}else return me(E,...x)}finally{A||(re(),y())}};try{return o(S,w,v,...T)}finally{A=!1}},ct=(S,...T)=>{try{return me(S,...T)}finally{re(),y()}},ve=(S,T)=>{var A;if(T.m&&!wt(T.v)){for(let[w,v]of T.d)if(!T.m.d.has(w)){let E=u(w);ke(w,E).t.add(S),T.m.d.add(w),v!==E.n&&(c.set(w,E),(A=E.u)==null||A.call(E),z(E))}for(let w of T.m.d||[])if(!T.d.has(w)){T.m.d.delete(w);let v=ut(w,u(w));v?.t.delete(S)}}},ke=(S,T)=>{var A;if(!T.m){k(S);for(let w of T.d.keys())ke(w,u(w)).t.add(S);if(T.m={l:new Set,d:new Set(T.d.keys()),t:new Set},(A=T.h)==null||A.call(T),bt(S)){let w=T.m,v=()=>{let E=!0,x=(...R)=>{try{return me(S,...R)}finally{E||(re(),y())}};try{let R=d(S,x);R&&(w.u=()=>{E=!0;try{R()}finally{E=!1}})}finally{E=!1}};g.add(v)}}return T.m},ut=(S,T)=>{var A;if(T.m&&!T.m.l.size&&!Array.from(T.m.t).some(w=>{var v;return(v=u(w).m)==null?void 0:v.d.has(S)})){let w=T.m.u;w&&f.add(w),delete T.m,(A=T.h)==null||A.call(T);for(let v of T.d.keys()){let E=ut(v,u(v));E?.t.delete(S)}return}return T.m},Ue={get:C,set:ct,sub:(S,T)=>{let A=u(S),v=ke(S,A).l;return v.add(T),y(),()=>{v.delete(T),ut(S,A),y()}},unstable_derive:S=>Gr(...S(...e))};return Ue},xo=e=>{let t=new Set,r,n=0,o=e.unstable_derive((...u)=>{let[l,c,,f]=u;return r=l,u[1]=function(y,h){c(y,h);let k=h.h;h.h=()=>{k?.(),h.m?t.add(y):t.delete(y)}},u[3]=function(y,h,k,...C){return n?k(y,...C):f(y,h,k,...C)},u}),a=o.set;return Object.assign(o,{dev4_get_internal_weak_map:()=>({get:u=>{let l=r(u);if(!(!l||l.n===0))return l}}),dev4_get_mounted_atoms:()=>t,dev4_restore_atoms:u=>{a({read:()=>null,write:(c,f)=>{++n;try{for(let[g,y]of u)At(g)&&f(g,y)}finally{--n}}})}})},vt=()=>{let e=new WeakMap,t=Gr(r=>e.get(r),(r,n)=>e.set(r,n).get(r),(r,...n)=>r.read(...n),(r,...n)=>r.write(...n),(r,...n)=>{var o;return(o=r.unstable_onInit)==null?void 0:o.call(r,...n)},(r,...n)=>{var o;return(o=r.onMount)==null?void 0:o.call(r,...n)});return(import.meta.env?import.meta.env.MODE:void 0)!=="production"?xo(t):t},Ce,Wr=()=>(Ce||(Ce=vt(),(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=Ce),globalThis.__JOTAI_DEFAULT_STORE__!==Ce&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),Ce);i();s();var U=B(_(),1);var jr=(0,U.createContext)(void 0),Hr=e=>{let t=(0,U.useContext)(jr);return e?.store||t||Wr()},Ec=({children:e,store:t})=>{let r=(0,U.useRef)(void 0);return!t&&!r.current&&(r.current=vt()),(0,U.createElement)(jr.Provider,{value:t||r.current},e)},xt=e=>typeof e?.then=="function",$r=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},Co=U.default.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:($r(e),e)}),kt=new WeakMap,qr=e=>{let t=kt.get(e);return t||(t=new Promise((r,n)=>{let o=e,a=l=>c=>{o===l&&r(c)},d=l=>c=>{o===l&&n(c)},u=l=>{"onCancel"in l&&typeof l.onCancel=="function"&&l.onCancel(c=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&c===l)throw new Error("[Bug] p is not updated even after cancelation");xt(c)?(kt.set(c,t),o=c,c.then(a(c),d(c)),u(c)):r(c)})};e.then(a(e),d(e)),u(e)}),kt.set(e,t)),t};function H(e,t){let r=Hr(t),[[n,o,a],d]=(0,U.useReducer)(c=>{let f=r.get(e);return Object.is(c[0],f)&&c[1]===r&&c[2]===e?c:[f,r,e]},void 0,()=>[r.get(e),r,e]),u=n;(o!==r||a!==e)&&(d(),u=r.get(e));let l=t?.delay;if((0,U.useEffect)(()=>{let c=r.sub(e,()=>{if(typeof l=="number"){let f=r.get(e);xt(f)&&$r(qr(f)),setTimeout(d,l);return}d()});return d(),c},[r,e,l]),(0,U.useDebugValue)(u),xt(u)){let c=qr(u);return Co(c)}return u}function Ie(e,t){let r=Hr(t);return(0,U.useCallback)((...o)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return r.set(e,...o)},[r,e])}function vc(e,t){return[H(e,t),Ie(e,t)]}i();s();var Po=p.object({data:p.string(),from:p.string(),to:p.string()}),Oo=p.object({transaction:Po});async function Ro({caip19:e,amount:t,owner:r}){let n=await Y.api().post("/tokens/v1/unwrap",{owner:r,caip19:e,amount:t.toNumber()}),o=Oo.safeParse(n.data);if(!o.success){let{error:a}=o;throw O.captureError(a,"fungibles"),new Qe(`Failed to get unwrap transaction: ${a.message}`)}return o.data.transaction}var Mo=({caip19:e,amount:t,owner:r})=>q({gcTime:Ke.Medium,staleTime:1/0,enabled:r!==""&&t.isGreaterThan(0),queryKey:V.unwrapTransaction({caip19:e,amount:t,owner:r}),async queryFn(){return await Ro({caip19:e,amount:t,owner:r})}});i();s();i();s();var Bo="25.13.0",Se=`fungible-tokens-${Bo}`,zr=[Se,"token-updates"],Do=[Se,"token-details"],Yr=[Se,"portfolio-value"],Uo=[Se,"token-balance"],Fo=[Se,"infinite-token-balances"],_o=[Se,"visibility-overrides"],K={infiniteTokenBalances:({walletCaip19s:e})=>[...Fo,{walletCaip19s:e}],tokenBalance:({wallets:e,encodedCaip19:t,isSplCompressed:r})=>{let n=e.map(o=>typeof o=="string"?o:G({chainId:o.networkID,address:o.address,resourceType:"address"})).sort();return[...Uo,{walletCaip19s:n,encodedCaip19:t,isSplCompressed:r}]},tokenUpdates:({walletCaip19s:e,from:t})=>[...zr,{walletCaip19s:e,from:t}],portfolioValue:({walletCaip19s:e,include:t,exclude:r,isMainnet:n})=>[...Yr,{walletCaip19s:e,include:t,exclude:r,isMainnet:n}],visibilityOverrides:({accountId:e})=>[..._o,{accountId:e}],tokenDetails:({caip19:e,includePrice:t})=>[...Do,{caip19:e,includePrice:t}]};function No(){let e=ur(),t=_e(),r=W();return J({async mutationFn({accountId:n,mutations:o}){await Mr(e,t,{accountId:n,mutations:o})},async onSuccess(n,o){await Promise.all([r.invalidateQueries({queryKey:V.hiddenMints(o.accountId)}),r.invalidateQueries({queryKey:K.visibilityOverrides({accountId:o.accountId})})])}})}i();s();var Rt=B(po());i();s();i();s();var F=[];for(let e=0;e<256;++e)F.push((e+256).toString(16).slice(1));function Jr(e,t=0){return(F[e[t+0]]+F[e[t+1]]+F[e[t+2]]+F[e[t+3]]+"-"+F[e[t+4]]+F[e[t+5]]+"-"+F[e[t+6]]+F[e[t+7]]+"-"+F[e[t+8]]+F[e[t+9]]+"-"+F[e[t+10]]+F[e[t+11]]+F[e[t+12]]+F[e[t+13]]+F[e[t+14]]+F[e[t+15]]).toLowerCase()}i();s();var Ct,Lo=new Uint8Array(16);function It(){if(!Ct){if(typeof self.crypto>"u"||!self.crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ct=self.crypto.getRandomValues.bind(self.crypto)}return Ct(Lo)}i();s();i();s();var Vo=typeof self.crypto<"u"&&self.crypto.randomUUID&&self.crypto.randomUUID.bind(self.crypto),Pt={randomUUID:Vo};function Ko(e,t,r){if(Pt.randomUUID&&!t&&!e)return Pt.randomUUID();e=e||{};let n=e.random??e.rng?.()??It();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){if(r=r||0,r<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let o=0;o<16;++o)t[r+o]=n[o];return t}return Jr(n)}var Ot=Ko;i();s();var He={recipient:"",recipientHandle:"",addressBookRecipient:void 0,amountAsset:new D(0),amountUsd:0,transactionSpeed:"standard",solana:{references:[]},multichainTransaction:void 0},Zr=class extends Error{constructor(t){super(t),this.name="SendFungibleFlowError"}};var Xr={sendSessionId:"",encodedCaip19:void 0,fungibleKey:void 0,splTokenAccount:void 0,analyticsRecipient:void 0,sendFormValues:He,shouldShowFiatValues:!1,retryArgs:void 0,confirmedFungibleAndSender:null,gasEstimation:void 0},Mt=ge((e,t)=>({...(0,Rt.default)(Xr),resetSendSlice:()=>{let r=(0,Rt.default)(Xr);r.sendSessionId=Ot(),e(r)},setAnalyticsRecipient:r=>{e({analyticsRecipient:r})},setSendFungibleKey:(r,n,o)=>{e({fungibleKey:r,splTokenAccount:n,encodedCaip19:o})},setSendFormValues:r=>{e({sendFormValues:r})},setInputAmount:r=>{let n=t();e({sendFormValues:{...n.sendFormValues,inputAmount:r}})},setShouldShowFiatValues:r=>{e({shouldShowFiatValues:r})},setRetryArgs:r=>{e({retryArgs:r})},setGasEstimation:r=>{e({gasEstimation:r})}}));i();s();var en={collectible:void 0,sendFormValues:He,shouldRequireAmount:!1},Qo=ge(e=>({...en,resetSendSlice:()=>{e({...en})},setSendCollectible:t=>{e({collectible:t})},setSendFormValues:t=>{e({sendFormValues:t})},setShouldRequireAmount:t=>{e({shouldRequireAmount:t})}}));i();s();i();s();var Go={query:""},Wo=ge(e=>({...Go,setQuery:t=>{e({query:t})}}));i();s();i();s();i();s();var $e=B(uo(),1),rn=B(lo(),1);var tn=(0,$e.struct)([(0,$e.u8)("instruction")]);function nn(e,t,r,n=[],o=xe){let a=xr([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}],r,n),d=Buffer.alloc(tn.span);return tn.encode({instruction:kr.CloseAccount},d),new rn.TransactionInstruction({keys:a,programId:o,data:d})}var an=B(_());i();s();function on(e,t,r){return Q.PublicKey.findProgramAddressSync([e.toBuffer(),r.toBuffer(),t.toBuffer()],Er)[0]}var qo=new Qe("Unable to unwrap SOL. Wrapped SOL Token account does not exist.");function jo(){let{connection:e}=Ge(),{data:t}=X(),{solanaChainAddress:r,accountIdentifier:n}=(0,an.useMemo)(()=>({solanaChainAddress:t?.addresses.find(fe),accountIdentifier:t?.identifier??""}),[t]),o=se(),a=ce(),{t:d}=Z();return J({mutationFn:async()=>{if(!r)return Promise.reject("solanaChainAddress not loaded");let{networkID:u,address:l}=r,c=new Q.PublicKey(l),f=on(c,vr,xe);if(!await e.getAccountInfo(f))throw qo;let y=nn(f,c,c,[],xe),h=new tr.Transaction().add(y),k={ownerAddress:l,networkID:u,data:{signature:""},type:"unwrapSOL",display:{summary:{topLeft:{text:d("assetDetailUnwrappingSOL")}}}},C=await Ve({accountIdentifier:n,accountSigner:a,connection:e,feePayer:new Q.PublicKey(l),pendingTransactionInput:k,storage:o,transaction:h,useSubmissionService:!1});return{networkID:u,id:C}}})}i();s();var cn=B(_());var Ho=()=>{let{connection:e}=Ge(),{data:t}=X(),{solanaChainAddress:r,accountIdentifier:n}=(0,cn.useMemo)(()=>({solanaChainAddress:t?.addresses.find(fe),accountIdentifier:t?.identifier??""}),[t]),o=se(),a=ce(),{t:d}=Z();return J({mutationFn:async u=>{if(!r)throw new Error("solanaChainAddress not loaded");if(u.type!=="CompressedSPL")throw new Error("SPL is not compressed");let l=await Cr({owner:u.data.walletAddress,mint:u.data.mintAddress,amount:u.data.amount,programId:u.data.programId,connection:e}),{networkID:c,address:f}=r,g={ownerAddress:f,networkID:c,data:{signature:""},type:"decompress",display:{summary:{topLeft:{text:d("assetDetailClaiming")}}}};await Ve({accountIdentifier:n,accountSigner:a,connection:e,feePayer:new Q.PublicKey(f),pendingTransactionInput:g,storage:o,transaction:l,useSubmissionService:!1})}})};i();s();var Be=B(_());i();s();i();s();i();s();var be=b(new nr);function Dt(){return Dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dt.apply(this,arguments)}m.NODE_ENV!=="production"&&(be.debugPrivate=!0);var $o=(e,t,r)=>e?.suspense&&zo(t,r),zo=(e,t)=>e.isPending&&!t,Yo=({result:e,throwOnError:t,query:r})=>e.isError&&!e.isFetching&&Jo(t,[e.error,r]);function Jo(e,t){return typeof e=="function"?e(...t):!!e}var Zo=e=>e.suspense&&typeof e.staleTime!="number"?Dt({},e,{staleTime:1e3}):e;function un(e,t,r=n=>n(be)){let n=b(0),o=b(r);m.NODE_ENV!=="production"&&(o.debugPrivate=!0);let a=b(()=>new WeakMap);m.NODE_ENV!=="production"&&(a.debugPrivate=!0);let d=b(c=>{let f=c(o),g=e(c),y=f.defaultQueryOptions(g),h=c(a).get(f);return y._optimisticResults="optimistic",h&&h.setOptions(y,{listeners:!1}),Zo(y)});m.NODE_ENV!=="production"&&(d.debugPrivate=!0);let u=b(c=>{let f=c(o),g=c(d),y=c(a),h=y.get(f);if(h)return h;let k=new t(f,g);return y.set(f,k),k});m.NODE_ENV!=="production"&&(u.debugPrivate=!0);let l=b(c=>{let f=c(u),g=c(d),y=f.getOptimisticResult(g),h=b(y);return m.NODE_ENV!=="production"&&(h.debugPrivate=!0),h.onMount=k=>{let C=f.subscribe(rr.batchCalls(k));return()=>{f.getCurrentResult().isError&&f.getCurrentQuery().reset(),C()}},h});return m.NODE_ENV!=="production"&&(l.debugPrivate=!0),b(c=>{c(n);let f=c(u),g=c(d),y=c(c(l));if($o(g,y,!1))return f.fetchOptimistic(g);if(Yo({result:y,query:f.getCurrentQuery(),throwOnError:g.throwOnError}))throw y.error;return y},(c,f)=>{f(n,g=>g+1)})}function ze(e,t=r=>r(be)){return un(e,or,t)}function ln(e,t=r=>r(be)){return un(e,ir,t)}i();s();var Nl=Symbol((import.meta.env?import.meta.env.MODE:void 0)!=="production"?"RESET":"");var Ut=(e,t,r)=>(t.has(r)?t:t.set(r,e())).get(r),Xo=new WeakMap,ei=(e,t,r,n)=>{let o=Ut(()=>new WeakMap,Xo,t),a=Ut(()=>new WeakMap,o,r);return Ut(e,a,n)};function j(e,t,r=Object.is){return ei(()=>{let n=Symbol(),o=([d,u])=>{if(u===n)return t(d);let l=t(d,u);return r(u,l)?u:l},a=b(d=>{let u=d(a),l=d(e);return o([l,u])});return a.init=n,a},e,t,r)}var ti=e=>typeof e?.then=="function";function ri(e=()=>{try{return self.localStorage}catch(r){(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&typeof self<"u"&&console.warn(r);return}},t){var r;let n,o,a={getItem:(l,c)=>{var f,g;let y=k=>{if(k=k||"",n!==k){try{o=JSON.parse(k,t?.reviver)}catch{return c}n=k}return o},h=(g=(f=e())==null?void 0:f.getItem(l))!=null?g:null;return ti(h)?h.then(y):y(h)},setItem:(l,c)=>{var f;return(f=e())==null?void 0:f.setItem(l,JSON.stringify(c,t?.replacer))},removeItem:l=>{var c;return(c=e())==null?void 0:c.removeItem(l)}},d=l=>(c,f,g)=>l(c,y=>{let h;try{h=JSON.parse(y||"")}catch{h=g}f(h)}),u;try{u=(r=e())==null?void 0:r.subscribe}catch{}return!u&&typeof self<"u"&&typeof self.addEventListener=="function"&&self.Storage&&(u=(l,c)=>{if(!(e()instanceof self.Storage))return()=>{};let f=g=>{g.storageArea===e()&&g.key===l&&c(g.newValue)};return self.addEventListener("storage",f),()=>{self.removeEventListener("storage",f)}}),u&&(a.subscribe=d(u)),a}var Ll=ri();i();s();i();s();i();s();function $(e){let t=b(0),r=b(()=>({i:0}),(l,c)=>{let f=l(r);return Object.assign(f,{m:!0,peek:l,set:c}),c(t,g=>g+1),()=>{f.m=!1,d(f),u(f)}});r.onMount=l=>l();let n=b(l=>{l(t);let c=l(r);if(!c.m||c.irc||c.i&&!c.irf)return c.p;u(c);let f=new Map,g=C=>{let N=l(C);return f.set(C,N),N};g.peek=c.peek;let y=(...C)=>{try{return++c.i,c.set(...C)}finally{Array.from(f.keys(),l),--c.i}};y.recurse=(C,...N)=>{if(c.fc){if(m.NODE_ENV!=="production")throw new Error("set.recurse is not allowed in cleanup");return}try{return c.irc=!0,c.set(C,...N)}finally{c.irc=!1,Array.from(f).some(h)&&a(c)}};function h([C,N]){return l(C)!==N}++c.i;function k(){try{if(c.irf=!1,!c.m)return;d(c),c.c=o.effect(g,y)}catch(C){c.e=C,a(c)}finally{c.p=void 0,--c.i}}return c.irf?k():c.p=Promise.resolve().then(k)});if(m.NODE_ENV!=="production"){let l=function(c,f){Object.defineProperty(c,"debugLabel",{get:()=>`${o.debugLabel??"effect"}:${f}`}),c.debugPrivate=!0};l(t,"refresh"),l(r,"ref"),l(n,"base")}let o=b(l=>void l(n));return o.effect=e,o;function a(l){try{l.irf=!0,l.set(t,c=>c+1)}finally{l.irf=!1}}function d(l){if(typeof l.c=="function")try{l.fc=!0,l.c()}finally{l.fc=!1,l.c=void 0}}function u(l){if("e"in l){let c=l.e;throw delete l.e,c}}}i();s();var ni=()=>{try{return typeof chrome<"u"&&(chrome.runtime?.id!==void 0||typeof browser<"u")}catch(e){return console.error("Error checking for extension context:",e),!1}},Ft=class{browser;storage;constructor(t){if(!t||!t.storage||!t.storage.local)throw new Error("[ExtensionStorage] Invalid 'browser' object received.");this.browser=t,this.storage=this.browser.storage.local}async get(t){try{let n=(await this.storage.get(t))[t];return n==null||typeof n!="string"?null:JSON.parse(n)}catch(r){return console.error(`[ExtensionStorage.get] Error getting/parsing key (${t}):`,r),null}}async getAll(t){try{let r=await this.storage.get(t),n={};for(let o in r)if(Object.prototype.hasOwnProperty.call(r,o)){let a=r[o];if(a==null||typeof a!="string")n[o]=null;else try{n[o]=JSON.parse(a)}catch(d){console.error(`[ExtensionStorage.getAll] Error parsing key (${o}):`,d),n[o]=null}}return n}catch(r){let n=`[ExtensionStorage.getAll] Error getting keys (${t}): ${r}`;throw console.error(n),new Error(n)}}async remove(t){try{await this.storage.remove(t)}catch(r){let n=`[ExtensionStorage.remove] Error removing key(s) (${t}): ${r}`;throw console.error(n),new Error(n)}}async set(t,r){try{let n=JSON.stringify(r);await this.storage.set({[t]:n})}catch(n){let o=`[ExtensionStorage.set] Error setting/stringifying key (${t}): ${n}`;throw console.error(o),new Error(o)}}async setAll(t){try{let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=JSON.stringify(t[n]));await this.storage.set(r)}catch(r){let o=`[ExtensionStorage.setAll] Error setting/stringifying keys (${Object.keys(t)}): ${r}`;throw console.error(o),new Error(o)}}async update(t,r){if(!navigator.locks){let n=await this.get(t),o=await r(n);o===null?await this.remove(t):await this.set(t,o);return}try{await navigator.locks.request(`storage.${t}`,async n=>{let o=await this.get(t),a=await r(o);a===null?await this.remove(t):await this.set(t,a)})}catch(n){let o=`[ExtensionStorage.update] Error updating key (${t}): ${n}`;throw console.error(o),new Error(o)}}async clear(){try{await this.storage.clear()}catch(t){let r=`[ExtensionStorage.clear] Error clearing storage: ${t}`;throw console.error(r),new Error(r)}}},Ye=class{storage=self.localStorage;async get(t){try{let r=this.storage.getItem(t);return r===null||typeof r!="string"?null:JSON.parse(r)}catch(r){return console.error(`[WebLocalStorage.get] Error getting/parsing key (${t}):`,r),null}}async getAll(t){let r={},n=t??Object.keys(this.storage);for(let o of n)try{let a=this.storage.getItem(o);if(t&&a===null)continue;if(a===null||typeof a!="string")r[o]=null;else try{r[o]=JSON.parse(a)}catch(d){console.error(`[WebLocalStorage.getAll] Error parsing key (${o}):`,d),r[o]=null}}catch(a){console.error(`[WebLocalStorage.getAll] Error reading key (${o}) from storage:`,a),t||(r[o]=null)}return r}async remove(t){try{let r=Array.isArray(t)?t:[t];for(let n of r)this.storage.removeItem(n)}catch(r){let n=`[WebLocalStorage.remove] Error removing key(s) (${t}): ${r}`;throw console.error(n),new Error(n)}}async set(t,r){try{let n=JSON.stringify(r);this.storage.setItem(t,n)}catch(n){let o=`[WebLocalStorage.set] Error setting/stringifying key (${t}): ${n}`;throw console.error(o),new Error(o)}}async setAll(t){let r=!1,n=Object.keys(t);for(let o in t)if(Object.prototype.hasOwnProperty.call(t,o))try{await this.set(o,t[o])}catch{r=!0}if(r)throw new Error(`[WebLocalStorage.setAll] One or more errors occurred while setting keys (${n})`)}async update(t,r){if(!navigator.locks){let n=await this.get(t),o=await r(n);o===null?await this.remove(t):await this.set(t,o);return}try{await navigator.locks.request(`storage.${t}`,async n=>{let o=await this.get(t),a=await r(o);a===null?await this.remove(t):await this.set(t,a)})}catch(n){let o=`[WebLocalStorage.update] Error updating key (${t}): ${n}`;throw console.error(o),new Error(o)}}async clear(){try{this.storage.clear()}catch(t){let r=`[WebLocalStorage.clear] Error clearing storage: ${t}`;throw console.error(r),new Error(r)}}},_t=class{initPromise;storageImpl=null;constructor(){this.initPromise=this._initialize(),this.initPromise.catch(t=>{console.error("LocalStorage initialization failed:",t)})}async _initialize(){if(!this.storageImpl)if(ni())try{let r=(await import("./browser-polyfill-HQBVFQ4E.js")).default;if(!r||!r.storage||!r.storage.local)throw new Error("webextension-polyfill loaded but missing storage.local API.");this.storageImpl=new Ft(r)}catch{this.storageImpl=new Ye}else this.storageImpl=new Ye}async ensureInitialized(){if(await this.initPromise,!this.storageImpl)throw new Error("LocalStorage is not initialized. Initialization may have failed.")}async get(t){return await this.ensureInitialized(),this.storageImpl.get(t)}async getAll(t){return await this.ensureInitialized(),this.storageImpl.getAll(t)}async remove(t){return await this.ensureInitialized(),this.storageImpl.remove(t)}async set(t,r){return await this.ensureInitialized(),this.storageImpl.set(t,r)}async setAll(t){return await this.ensureInitialized(),this.storageImpl.setAll(t)}async update(t,r){return await this.ensureInitialized(),this.storageImpl.update(t,r)}async clear(){return await this.ensureInitialized(),this.storageImpl.clear()}},Nt=new _t;i();s();i();s();var Pe=class{namespaceKey;ttlMilliseconds;storage;onError;data={};isLoaded=!1;constructor(t){this.namespaceKey=t.namespaceKey,this.ttlMilliseconds=t.ttlMilliseconds,this.storage=t.storage,this.onError=t.onError,this._load().then(()=>{if(this._cleanupExpired())return this._save()}).catch(r=>{console.error("Failed to load data",r)})}async _load(){if(!this.isLoaded){try{let t=await this.storage.get(this.namespaceKey);t?(this.data=t,(typeof this.data!="object"||this.data===null)&&(this.onError?.(new Error("Stored data is not a valid object."),"load"),this.data={})):this.data={}}catch(t){this.onError?.(t instanceof Error?t:new Error("Failed to parse stored data"),"load"),this.data={}}this.isLoaded=!0}}async _save(){try{await this.storage.set(this.namespaceKey,this.data)}catch(t){this.onError?.(t instanceof Error?t:new Error("Failed to serialize data for storage"),"save")}}_cleanupExpired(){let t=Date.now(),r=!1;for(let n in this.data)Object.prototype.hasOwnProperty.call(this.data,n)&&this.data[n].expiresAt<=t&&(delete this.data[n],r=!0);return r}_updateExpiration(t){return this.data[t]?(this.data[t].expiresAt=Date.now()+this.ttlMilliseconds,!0):!1}async set(t,r){this.isLoaded||await this._load(),this._cleanupExpired(),this.data[t]={value:r,expiresAt:Date.now()+this.ttlMilliseconds},await this._save()}async get(t,r){this.isLoaded||await this._load();let n=this._cleanupExpired(),o=this.data[t];if(!o)return n&&await this._save(),null;let a=this._updateExpiration(t),d=r.safeParse(o.value);return d.success?((n||a)&&await this._save(),d.data):(this.onError?.(new oe(d.error.issues),`get (validation failed for key: ${t})`),delete this.data[t],await this._save(),null)}async remove(t){let r=this._cleanupExpired(),n=!1;Object.prototype.hasOwnProperty.call(this.data,t)&&(delete this.data[t],n=!0),(r||n)&&await this._save()}async clear(){this.data={},await this._save()}};var dn=new Map;function oi({storage:e,namespaceKey:t,ttlMs:r}){let n=dn.get(t);if(n)return n;if(!e)throw new Error("Storage is required");let o=new Pe({storage:e,namespaceKey:t,ttlMilliseconds:r,onError:(a,d)=>{console.error(`[PersistentStore Error - ${d}]:`,a.message),a instanceof oe&&console.error("Zod Issues:",a.issues)}});return dn.set(t,o),o}var Lt=oi;function ii({atomToStoreOffline:e,namespaceKey:t,ttlMs:r,initialValue:n,schema:o,...a}){let d=b({status:"pending",value:n}),u=b(g=>{if("offlineKey"in a)return g(a.offlineKey);let y=g(e);if("offlineKey"in y&&typeof y.offlineKey=="string")return y.offlineKey;throw new Error("No key provided")}),l=$((g,y)=>{Lt({storage:Nt,namespaceKey:`.offline.${t}`,ttlMs:r}).get(g(u),o).then(h=>{h&&y(d,{status:"offline",value:h})}).catch(h=>{console.error(h)})}),c=$((g,y)=>{g(u),y(d,{status:"pending",value:n})}),f=$((g,y)=>{let h=g(e),k=g(u);h.status==="success"&&h.data&&h.data!==g(d).value&&(y(d,{status:"live",value:h.data}),Lt({storage:Nt,namespaceKey:`.offline.${t}`,ttlMs:r}).set(k,h.data).catch(C=>{O.addBreadcrumb("tokens","Error storing offline data","error",{namespaceKey:t,error:C.toString()})}))});return j(b(g=>{let y=g(e);g(c),g(l),g(f);let h=g(d);return y.data?{status:"live",value:y.data}:{status:"offline",value:h.value}}),g=>g.value)}var Je=ii;i();s();i();s();i();s();var si=e=>Ur(e)?.[0],Ae=si;var ai=e=>M.isBitcoinNetworkID(e.decodedCaip19.chainId)&&e.decodedCaip19.resourceType==="nativeToken"?e.queriedWalletBalances.map(n=>{let o=Fe(e.decodedCaip19.chainId,n.address);return{...e,queriedWalletBalances:[n],totalQuantity:n.quantity,totalQuantityString:n.quantityString,walletAddress:n.address,legacyKey:ye.get(e.decodedCaip19.chainId).nativeTokenFungibleBalanceKey(e.decodedCaip19.chainId,o)}}):e,ci=e=>t=>t.map(e),pn=e=>t=>t.flatMap(r=>{let n=e(r);return ai(n)}),ui=e=>{let{caip19:t,...r}=e,n=ae(t);return{...r,type:t.includes("/nativeToken:")?"native":"fungible",chainName:M.getChainName(n.chainId),encodedCaip19:t,decodedCaip19:n,legacyKey:Ae(n)}},li=e=>{let{caip19:t,...r}=e,n=ae(t);return{...r,type:t.includes("/nativeToken:")?"native":"fungible",chainName:M.getChainName(n.chainId),encodedCaip19:t,decodedCaip19:n,legacyKey:Ae(n)}},di=e=>{let{caip19:t,timestamp:r,...n}=e,o=ae(t);return{...n,type:t.includes("/nativeToken:")?"native":"fungible",encodedCaip19:t,decodedCaip19:o,chainName:M.getChainName(o.chainId),timestamp:r??void 0,legacyKey:Ae(o),totalQuantity:e.postQuantity,totalQuantityString:e.postQuantityString}},kd=ci(ui),mn=pn(li),fn=pn(di);i();s();var pi=p.object({account:p.string(),quantity:p.number(),quantityString:p.string()}),mi=p.object({address:p.string(),quantity:p.number(),quantityString:p.string(),lastTransferredDate:p.coerce.date().nullish(),subaccounts:p.array(pi).optional()}),yn=p.object({price:p.number(),priceChange24h:p.number().optional(),lastUpdatedAt:p.coerce.date()}).nullish(),fi=p.object({price:p.number(),priceChange24h:p.number().optional(),lastUpdatedAt:p.coerce.date()}),Vt={name:p.string().nullish(),symbol:p.string().nullish(),decimals:p.number(),spamStatus:p.enum(["VERIFIED","NOT_VERIFIED","POSSIBLE_SPAM","SPAM"]).nullish(),logoUri:p.string().nullish(),price:yn,livePrice:fi.nullish().optional(),queriedWalletBalances:p.array(mi),extraMetadata:p.object({compression:p.object({compressed:p.boolean()}).optional(),tokenProgram:p.string().nullish(),extensions:p.array(p.unknown()).nullish()}).optional()},Oe=p.object({...Vt,type:p.enum(["native","fungible"]),totalQuantity:p.number(),totalQuantityString:p.string(),encodedCaip19:p.string(),decodedCaip19:cr,chainName:p.string(),legacyKey:p.string().nullish(),timestamp:p.string().optional(),walletAddress:p.string().optional()}),Md=Oe.omit({totalQuantity:!0,totalQuantityString:!0,queriedWalletBalances:!0,walletAddress:!0}),Tn=p.object({...Vt,caip19:p.string(),totalQuantity:p.number(),totalQuantityString:p.string()}),Bd=Tn.omit({totalQuantity:!0,totalQuantityString:!0,queriedWalletBalances:!0}),hn=p.object({items:p.array(Tn),cursor:p.string().nullish().default(null)}).transform(e=>{let{items:t,cursor:r,...n}=e;return{...n,nextCursor:r,tokens:t,updatedAt:Date.now()}}),gi=p.object({...Vt,caip19:p.string(),timestamp:p.string().nullish(),postQuantityString:p.string(),postQuantity:p.number()}),Sn=p.object({cursor:p.string().nullish().default(null),items:p.array(gi)}).transform(e=>({nextCursor:e.cursor,transfers:e.items})),Dd=p.object({totalValueUsdCentsCurrent:p.number(),totalValueUsdStringCurrent:p.string(),totalValueUsdCents24h:p.number(),totalValueUsdString24h:p.string(),totalPercentChange24h:p.number()}),Ud=p.object({totalValueUsdCentsCurrent:p.number().optional(),totalValueUsdStringCurrent:p.string().optional(),totalValueUsdCents24h:p.number().optional(),totalValueUsdString24h:p.string().optional(),totalPercentChange24h:p.number().optional()}),gn=p.object({caip19:p.string(),name:p.string(),symbol:p.string(),decimals:p.number(),logoUri:p.string().nullish().default(null),spamStatus:p.enum(["VERIFIED","NOT_VERIFIED","POSSIBLE_SPAM","SPAM"]).nullish().transform(e=>e??"NOT_VERIFIED"),createdDate:p.coerce.date().nullish().default(null),extraMetadata:p.object({isMutable:p.boolean().nullish().default(null),creators:p.array(p.object({address:p.string(),share:p.number(),verified:p.boolean()})).nullish(),tokenProgram:p.string().nullish(),extensions:p.array(p.unknown()).nullish()}),categories:p.object({id:p.string(),name:p.string(),imageUri:p.string().nullish().transform(e=>e??""),numTokens:p.number()}).array().optional()}),yi=gn.extend({price:yn,extraMetadata:gn.shape.extraMetadata.extend({id:p.string().nullish().default(null),description:p.string().nullish().default(null),marketCap:p.coerce.number().optional(),circulatingSupply:p.coerce.number().optional(),totalSupply:p.coerce.number().optional(),liquidity:p.coerce.number().optional(),holders:p.coerce.number().optional(),links:p.array(p.object({type:p.string(),url:p.string()})).optional(),volume24hUSD:p.coerce.number().optional(),volume24hUSDChangePercentage:p.coerce.number().optional(),trades24h:p.coerce.number().optional(),trades24hChangePercentage:p.coerce.number().optional(),uniqueWallets24h:p.coerce.number().optional(),uniqueWallets24hChangePercentage:p.coerce.number().optional(),top10HoldersPercent:p.coerce.number().optional(),mintable:p.boolean().optional(),freezable:p.boolean().optional(),mutableMetadata:p.boolean().optional(),ownershipRenounced:p.boolean().optional(),updateAuthority:p.string().optional()})}),bn=yi.transform(({caip19:e,...t})=>{let r=ae(e);return{...t,type:e.includes("/nativeToken:")?"native":"fungible",chainName:M.getChainName(r.chainId),encodedCaip19:e,decodedCaip19:r,legacyKey:Ae(r)??e}});async function Ti(e){let t={walletAddresses:e.walletCaip19s.join(","),includePrices:"true"};"cursor"in e&&(t.cursor=e.cursor),"fromMicroseconds"in e?t.fromTimestamp=e.fromMicroseconds.toString():"from"in e&&(t.fromTimestamp=e.from.toString());let r=await Y.api().timeout(I({seconds:30})).get("/portfolio/v1/fungibles/updates",{params:t}).then(n=>{if(ie(n))return n.data;throw new Error(n.data?.message||n.data?.error||n.statusText,{cause:n.data?.code??n.data?.name})}).catch(n=>{throw O.addBreadcrumb("tokens","getTokenBalanceUpdates","error",{message:n.message,cause:n.cause,...t}),O.captureError(n,"tokens"),n});try{return Sn.parse(r)}catch(n){throw n instanceof oe&&O.addBreadcrumb("tokens","getTokenBalanceUpdates parse error","error",{message:n.message,...n.issues?{issues:JSON.stringify(n.issues)}:{},result:JSON.stringify(r)}),n}}async function An(e){let t=[],r=()=>t.at(-1)?.nextCursor;do{let n=r(),o=await Ti(n?{walletCaip19s:e.walletCaip19s,cursor:n}:e);t.push(o)}while(r());return fn(t.flatMap(n=>n.transfers))}i();s();function Kt({newUpdates:e,existingUpdates:t={}}){return e.reduce((r,n)=>r[n.encodedCaip19]?.totalQuantityString===n.totalQuantityString?r:n.chainName==="Solana"&&n.decodedCaip19.resourceType==="address"&&n.queriedWalletBalances.some(o=>!o.subaccounts?.length)?{...r,[`${n.encodedCaip19}-compressed`]:n}:n?{...r,[n.encodedCaip19]:n}:r,t)}i();s();function hi(e){let t=e.match(/(.*\d{2}:\d{2}:\d{2})\.(?<fraction>\d+)Z/);if(!t||!t.groups?.fraction)throw new Error("Invalid date format");let r=new Date(e).getTime(),a=t.groups.fraction.padEnd(6,"0").slice(-3);return r*1e3+parseInt(a,10)}var Qt=hi;i();s();var Si=b(!1),wn=Si;i();s();i();s();i();s();var bi=I({minutes:5}),Re=0;function dp(){if(!Re){Re=Math.floor(Math.random()*1e6);return}Re++}async function Gt({walletCaip19s:e,fungibleCaip19s:t,cursor:r,cacheBust:n}){let o={walletAddresses:e.join(","),includePrices:"true"};r&&(o.cursor=r),(n||Re)&&(o.cacheBust=n?.toString()||Re.toString()),t&&t.length>0&&(o.fungibleAddresses=t.sort().join(","));try{let a=await Y.api().timeout(I({seconds:30})).get("/portfolio/v1/fungibles/balances",{params:o}).then(u=>{if(ie(u))return u.data;throw new Error(u.data?.message||u.data?.error||u.statusText,{cause:u.data?.code})}),d=hn.parse(a);return{...d,tokens:mn(d.tokens)}}catch(a){throw a instanceof Error&&(O.addBreadcrumb("tokens","getTokenBalances","error",{...o,message:a.message,...typeof a.cause=="string"||typeof a.cause=="number"?{cause:a.cause}:{}}),O.captureError(a,"tokens")),a}}function En({walletCaip19s:e,isEnabled:t=!0,cacheBust:r}){return{staleTime:bi,gcTime:I({days:3}),queryKey:K.infiniteTokenBalances({walletCaip19s:e}),enabled:t&&!!e.length,queryFn:async({pageParam:n})=>Gt({walletCaip19s:e,cursor:n,cacheBust:r}),initialPageParam:"",getNextPageParam:n=>n?.nextCursor||void 0}}function vn(e){let{walletCaip19s:t,encodedCaip19:r,queryOptions:n={enabled:!0}}=e;return{staleTime:I({seconds:10}),gcTime:I({days:3}),queryKey:K.tokenBalance({wallets:t,encodedCaip19:r}),enabled:n.enabled&&!!t.length,queryFn:async()=>(await Gt({walletCaip19s:t,fungibleCaip19s:[r]})).tokens}}i();s();i();s();var Ai=b(null),Ze=Ai;var wi=b(e=>{let t=e(Ze);return t?t.addresses.map(r=>G({chainId:r.networkID,address:r.address,resourceType:"address"})).sort():[]}),we=wi;var Ei=ln(e=>{let t=e(we);return En({walletCaip19s:t})}),te=Ei;var vi=b(e=>{let{data:t}=e(te),r=t?.pages[0];return!r||!r.tokens.length?0:r.updatedAt}),kn=vi;i();s();var ki=j(Ze,e=>e?.identifier),le=ki;var xi=1e3,xn=5e3,Cn=Math.ceil(xn*2.25);function In(e){return I(e)*1e3}function Ci(e){if(!e?.length)return null;let t=new Date(Date.now()-Cn).toISOString();return Math.floor(Math.max(...e.map(({timestamp:r})=>Qt(r||t))))}function Ii(e){let t=Ci(e);return t?t-In({seconds:1}):null}var Pi=ze(e=>{let t=e(be),r=e(kn),n=Math.floor(r-I({minutes:10})),o=e(we),a=e(wn),d=n>Date.now()-I({days:10}),u=K.tokenUpdates({walletCaip19s:o,from:n}),l=async()=>{let c=t.getQueryData(u)?.lastTimestamp;if(!c){let h=new Date(n-Cn).toISOString();return{updates:{},lastTimestamp:Qt(h)}}let f=await An({walletCaip19s:o,fromMicroseconds:c-In({seconds:30})}),g=t.getQueryData(u)?.updates??{};return{updates:Kt({newUpdates:f,existingUpdates:g}),lastTimestamp:Math.max(Ii(f)??0,c)}};return{meta:{fetchCount:0},enabled:d&&!a&&o.length>0,queryKey:u,refetchInterval:c=>{let f=Number(c.meta?.fetchCount??0);return c.meta&&(c.meta.fetchCount=f+1),Math.min(Math.max(f*250,xi),xn)},queryFn:l}}),Oi=Je({atomToStoreOffline:Pi,offlineKey:b(e=>`${e(le)??""}:token-balance-updates`),namespaceKey:"fungible-tokens",ttlMs:I({days:10}),initialValue:{updates:{},lastTimestamp:0},schema:p.object({updates:p.record(p.string(),Oe),lastTimestamp:p.number()})}),Ri=j(Oi,e=>e?.updates??{},(e,t)=>JSON.stringify(e)===JSON.stringify(t)),Xe=Ri;i();s();i();s();function et(e){return t=>{let r=!1,n={...t};for(let[o,a]of Object.entries(e)){let d=a?.price,u=a?.lastUpdatedAt?new Date(a.lastUpdatedAt):null;if(!d||!u)continue;let l=t[o]?.price!==d&&(!t[o]?.lastUpdatedAt||u>t[o].lastUpdatedAt);r=r||l,l&&(n[o]={price:a.price,priceChange24h:a.priceChange24h,lastUpdatedAt:u})}return r?n:t}}i();s();var Mi=b(e=>{let{data:t,status:r}=e(te);return{data:t?.pages.flatMap(n=>n.tokens),status:r}}),Bi=Je({atomToStoreOffline:Mi,offlineKey:b(e=>`${e(le)??""}:infinite-tokens`),namespaceKey:"fungible-tokens",ttlMs:I({days:10}),initialValue:[],schema:p.array(Oe)}),de=Bi;var tt=b({}),Di=b(e=>e(de).slice(-100).reduce((n,o)=>(o.price&&(n[o.encodedCaip19]=o.price),n),{})),Ui=$((e,t)=>{let r=e(Di);!r||Object.keys(r).length===0||t(tt,et(r))}),Fi=b(e=>{let t=e(Xe);return Object.values(t).reduce((n,o)=>(o.price&&(n[o.encodedCaip19]=o.price),n),{})}),_i=$((e,t)=>{let r=e(Fi);!r||Object.keys(r).length===0||t(tt,et(r))}),Ni=b(e=>(e(Ui),e(_i),e(tt)),(e,t,r)=>{t(tt,r)}),pe=Ni;i();s();i();s();var Li=j(te,e=>e.hasNextPage),rt=Li;var Me=b(1/0),nt=b(e=>(e(Vi),e(Ki),e(rt)?e(Me):0),(e,t,r)=>{if(r===null){t(Me,1/0);return}let n=Math.min(e(Me),r);n!==e(Me)&&t(Me,n)}),Pn=nt,Vi=$((e,t)=>{let{hasNextPage:r}=e(te),n=e(de),o=e(pe);if(n.length>0&&!r){t(nt,0);return}let a=n.slice(-100).filter(d=>d.type==="fungible").map(d=>{let u=o[d.encodedCaip19]??d.price;return u?d.totalQuantity*u.price/10**d.decimals:1/0});t(nt,Math.min(...a))}),Ki=$((e,t)=>{e(le)&&t(nt,1/0)});function Qi(e,t){if(e.type==="native"&&t.type!=="native")return-1;if(e.type!=="native"&&t.type==="native")return 1;if(e.type==="native"&&t.type==="native")return e.name&&t.name?e.name.localeCompare(t.name):0}function Gi(e,t){if(!e&&t)return 1;if(e&&!t)return-1}function On(e,t){if(e&&t)return e.localeCompare(t);if(e&&!t)return-1;if(!e&&t)return 1}function Rn(e,t){if(e!==t)return t-e}function Wi(e){return{totalQuantity:e.totalQuantity,totalQuantityString:e.totalQuantityString}}var qi=b(e=>{let t=e(de),r=e(Xe),n=new Set(Object.keys(r));if(t.length===0)return[];let o=t.map(a=>{let d=a.extraMetadata?.compression?.compressed?`${a.encodedCaip19}-compressed`:a.encodedCaip19,u=r[d];return u?(n.delete(d),{...a,...Wi(u)}):a});return n.forEach(a=>{let d=r[a];d&&o.push(d)}),o}),ji=b(e=>{let t=e(pe),r=e(qi),n=e(Pn),o=r.filter(a=>a.totalQuantity>0||a.type==="native").map(a=>({...a,livePrice:t[a.encodedCaip19]??a.price})).sort((a,d)=>{let u=a.livePrice?.price,l=d.livePrice?.price,c=Gi(u,l);if(c)return c;let f=a.totalQuantity/10**a.decimals,g=d.totalQuantity/10**d.decimals;if(!u&&!l){let C=Qi(a,d);if(C)return C;let N=Rn(f,g);if(N)return N;let z=On(a.name,d.name);return z||0}let y=(u??0)*f,h=(l??0)*g,k=Rn(y,h);return k||(On(a.name,d.name)??0)});return n?o.filter(a=>{let d=a.livePrice?.price,u=a.totalQuantity/10**a.decimals;return(d??0)*u>=n}):o}),Ee=ji;i();s();function Hi(e){if(e)return typeof e=="string"||typeof e=="number"?new Date(e):e}function $i(e,{key:t,newPriceData:r}){let n=e[t];if(!r||n?.price===r?.price)return e;let o=Hi(r.lastUpdatedAt);return!o||!(!n?.lastUpdatedAt||o>n.lastUpdatedAt)?e:{...e,[t]:{price:r.price,priceChange24h:r.priceChange24h??r.usd_24h_change,lastUpdatedAt:o}}}var ot=$i;var zi=(e,t,r)=>{let n=e.extraMetadata?.compression?.compressed,o=t.extraMetadata?.compression?.compressed;if(n!==o)return r?n?-1:1:n?1:-1},Yi=(e,t,r)=>{let n=e.legacyKey===r,o=t.legacyKey===r;if(n!==o)return n?-1:1},Ji=({isSplCompressed:e,legacyKey:t},r)=>r.length?r.length===1?r[0]:[...r].sort((o,a)=>{if(e!==void 0&&(o.encodedCaip19.includes("solana:")||a.encodedCaip19.includes("solana:"))){let d=zi(o,a,e);if(d)return d}if(t){let d=Yi(o,a,t);if(d)return d}return a.totalQuantity-o.totalQuantity})[0]:null,Mn=e=>{let t=H(we),r=H(Ee),n=(0,Be.useMemo)(()=>r.filter(u=>u.encodedCaip19===e.encodedCaip19&&(!e.legacyKey||u.legacyKey===e.legacyKey)),[e.encodedCaip19,e.legacyKey]),o=vn({...e,walletCaip19s:t});o.refetchInterval||(o.refetchInterval=I({seconds:3}));let a=q({...o,select:u=>Ji(e,u),placeholderData:n}),d=Ie(pe);return(0,Be.useEffect)(()=>{let u=a.data;u&&!a.isPlaceholderData&&u.price&&d(l=>{let c=u.encodedCaip19,f=u.price;return ot(l,{key:c,newPriceData:f})})},[a.data,a.isPlaceholderData,d]),a},it=({networkID:e,queryOptions:t,addressType:r})=>{let n={chainId:e,slip44:M.getSlip44(e),resourceType:"nativeToken"},o=ye.get(e).nativeTokenFungibleBalanceKey(e,r)??null,a=G(n);return Mn({encodedCaip19:a,legacyKey:o,queryOptions:t})},Zi=()=>{let{data:e}=X(),t=(0,Be.useMemo)(()=>e?.addresses.find(r=>M.isSolanaNetworkID(r.networkID)),[e]);return it({networkID:t?.networkID||"solana:101",addressType:t?.addressType})};i();s();i();s();i();s();i();s();function Wt(e,t){return{gcTime:Ke.Long,staleTime:1/0,enabled:!!t&&!!e,queryKey:K.visibilityOverrides({accountId:t??""}),async queryFn(){return!t||!e?new Map:await Rr(e,t)}}}i();s();var Xi=b(null),Bn=Xi;var es=new Map,Dn=ze(e=>{let t=e(Bn),r=e(le);return Wt(t,r)}),Un=j(Dn,e=>e.status),ts=b(e=>e(Dn).data??es),Fn=ts;var rs=b(e=>{let{isLoading:t}=e(te),r=e(de),n=e(Un);return t&&r.length===0||n==="pending"}),_n=j(rs,e=>e);function Nn(){let e=H(Ee),t=H(_n),r=H(rt),n=H(Fn);return{isLoading:t,hasNextPage:r,fungibleTokens:e,visibilityOverrides:n}}i();s();i();s();var Ln=B(_());var ns=({wallets:e,encodedCaip19:t,isSplCompressed:r=!1})=>{let n=W();return(0,Ln.useCallback)(()=>void n.invalidateQueries({queryKey:K.tokenBalance({wallets:e,encodedCaip19:t,isSplCompressed:r})}),[n,e,t,r])},os=ns;i();s();function Vn({tokens:e}){return Or({tokens:e}).catch(t=>{throw O.addBreadcrumb("tokens","getTokenPrices","error",{message:t.message,cause:t.cause,tokens:e.map(G).join(",")}),O.captureError(t,"tokens"),t})}i();s();var De=B(_());i();s();i();s();function is(e){let t={message:"Failed to parse token details response"};if(e instanceof oe)try{t.zodIssuesJson=JSON.stringify(e.issues.map(r=>({path:r.path.join("."),message:r.message,code:r.code})))}catch{t.zodIssuesJson="Failed to stringify Zod issues"}else t.errorMessage=e instanceof Error?e.message:String(e);return t}var Kn=is;function Qn(e){return e.resourceType==="nativeToken"?`/fungibles/v1/${e.chainId}/${e.resourceType}/${e.slip44}`:`/fungibles/v1/${e.chainId}/${e.resourceType}/${e.address}`}function ss(e){return Qn(ae(e))}function as(e){let t=new URLSearchParams,r="encodedCaip19"in e?ss(e.encodedCaip19):Qn(e.decodedCaip19);return e.includePrice&&t.append("includePrice","true"),e.includeFungibleDetails&&t.append("includeFungibleDetails","true"),[r,{params:t}]}async function qt(e){let t=await Y.api().timeout(I({seconds:10})).get(...as(e)).then(r=>{if(ie(r))return r.data;throw new Error(r.data?.message||r.data?.error||r.statusText,{cause:r.data?.code})}).catch(r=>{throw O.addBreadcrumb("tokens","getTokenDetails","error",{message:r.message,cause:r.cause,..."encodedCaip19"in e&&{caip19:e.encodedCaip19},..."decodedCaip19"in e&&{caip19:G(e.decodedCaip19)}}),O.captureError(r,"tokens"),r});try{return bn.parse(t)}catch(r){console.error(r);let n=Kn(r);throw"encodedCaip19"in e&&typeof e.encodedCaip19=="string"?n.caip19=e.encodedCaip19:"decodedCaip19"in e&&(n.caip19=G(e.decodedCaip19)),O.addBreadcrumb("tokens","getTokenDetails.ParseError","error",n),r}}function cs({caip19:e,includePrice:t}){let r=(0,De.useMemo)(()=>typeof e=="string"?e:G(e),[e]),n=H(Ee),o=(0,De.useMemo)(()=>{let u=n.find(l=>l.encodedCaip19===r);return u?{chainName:u.chainName,encodedCaip19:r,decodedCaip19:u.decodedCaip19,type:u.type,categories:[],price:u.price,symbol:u.symbol??"",name:u.name??"",decimals:u.decimals,legacyKey:u.legacyKey??r,spamStatus:u.spamStatus??"NOT_VERIFIED",logoUri:u.logoUri??null,extraMetadata:{description:"",id:"",isMutable:!0,...u.extraMetadata},createdDate:null}:null},[r,t]),a=q({...t&&{refetchInterval:I({seconds:5})},queryKey:K.tokenDetails({caip19:r,includePrice:t}),queryFn:async()=>await qt(typeof e=="string"?{encodedCaip19:e,includeFungibleDetails:!0,includePrice:t}:{decodedCaip19:e,includeFungibleDetails:!0,includePrice:t}),...o&&{placeholderData:o}}),d=Ie(pe);return(0,De.useEffect)(()=>{let u=a.data;u&&!a.isPlaceholderData&&t&&u.price&&d(l=>{let c=u.encodedCaip19,f=u.price;return ot(l,{key:c,newPriceData:f})})},[a.data,a.isPlaceholderData,d,t]),a}var us=cs;i();s();var $t=B(_());i();s();var jt=new D(0),Ht=({chainAddress:e,type:t,balance:r,decimals:n,recipient:o,gasEstimation:a,clampToZero:d=!0})=>{let{data:u,isPending:l}=ft(e);if(!t||!r)return jt;let c=new D(r).multipliedBy(er(n));if(!Te(t))return c;if(!a)return;let f=new D(0);if(Ne(a))f=c.minus(new D(a.value));else if(yr(a)){let{gasLimit:g,maxFeePerGas:y,l1Fee:h=new D(0)}=a,k=g.times(y).plus(h);f=c.minus(k)}else if(Le(a)){if(!e||l)return;let g=e.addressType,y=u?.safeToSendUtxos??[],h=fr(a.btcPerKilobyte),k=o&&sr.safeParse(o).success?o:"bc1p",N=[{value:y.reduce((re,me)=>re.plus(new D(me.value)),new D(0)).toNumber(),address:k}],z=Sr(g,y,N,h.toNumber(),[]);if(z.type==="error")f=new D(z.maxAmount).integerValue(D.ROUND_DOWN);else{let{inputs:re,fee:me}=z;f=re.reduce((ve,ke)=>ve.plus(new D(ke.value)),new D(0)).minus(me).integerValue(D.ROUND_DOWN)}}else if(gr(a))f=c.minus(a.gasBudget);else return Jt(a);return f.isGreaterThan(jt)?f:d?jt:f};var ls=({networkID:e,addressType:t,gasEstimation:r,transactionValue:n=new D(0),recipient:o})=>{let{data:a,isLoading:d,isError:u}=it({networkID:e,addressType:t}),l=ye.get(e).nativeFungibleTokenType,c="unknown",f="",g=(0,$t.useMemo)(()=>{let h=a?.queriedWalletBalances[0]?.address;if(!h)return;let k=Fe(e,h);return{networkID:e,address:h,addressType:k}},[a?.queriedWalletBalances,e]),y=Ht({chainAddress:g,type:l,balance:a?.totalQuantityString?new D(a?.totalQuantityString):void 0,decimals:a?.decimals??0,recipient:o,gasEstimation:r,clampToZero:!1});return!u&&a&&y&&(y.gte(n)?c="sufficient":c="insufficient",f=a?.symbol||""),(0,$t.useMemo)(()=>({hasSufficientFunds:c,nativeTokenSymbol:f,isLoading:d,isError:u}),[c,f,d,u])};i();s();var Hn=B(_());i();s();var zt=B(_());i();s();var Gn=({chainAddresses:e=[]})=>{let t=V.tokensErrorCount(e);return q({queryKey:t,initialData:0})};i();s();var ds=({errors:e})=>e;function Wn({chainAddresses:e,queryOptions:t}){return Fr({select:ds,chainAddresses:e,queryOptions:t})}var qn=3,ps=1,jn=({networkID:e,chainAddresses:t=[]})=>{let{data:r=[]}=Wn({chainAddresses:t}),{data:n=0}=Gn({chainAddresses:t}),o=n>=qn,{data:a=0}=Br(),d=a>=qn,u=r.length===ps&&r.some(f=>f.code==="TokensTrimmed"),{t:l}=Z(),c=(0,zt.useMemo)(()=>{if(o)return l("partialErrorGeneric");let f=r.filter(y=>e?y.details.chainId===e:!0),g=f.length+(d?1:0);return g?g>1?l("partialErrorGeneric"):d?l("partialErrorTokenPrices"):u?l("partialErrorTokensTrimmed"):e?l("partialErrorTokenDetail"):l("partialErrorBalanceChainName",{chainName:M.getChainName(f[0].details.chainId)}):""},[o,r,d,e,u,l]);return(0,zt.useMemo)(()=>({partialErrorMessage:c,shouldShowPartialError:c!==""}),[c])};function ms(e){let{onTappingBuy:t,onTappingReceive:r,onTappingSend:n,onTappingSwap:o,account:a}=e,{shouldShowPartialError:d,partialErrorMessage:u}=jn({chainAddresses:a?.addresses});return{ctaActions:fs({onTappingBuy:t,onTappingReceive:r,onTappingSend:n,onTappingSwap:o}),shouldShowPartialError:d,partialErrorMessage:u}}function fs(e){let{t}=Z();return(0,Hn.useMemo)(()=>{let n=[];return n.push({text:t("commandSend"),type:"send",onClick:e.onTappingSend}),n.push({text:t("commandSwap"),type:"swap",onClick:e.onTappingSwap}),n.push({text:t("commandReceive"),type:"receive",onClick:e.onTappingReceive}),n.push({text:t("commandBuy"),type:"buy",onClick:e.onTappingBuy}),n.sort((o,a)=>(yt.get(o.type)??100)-(yt.get(a.type)??100)),{primary:n,more:[]}},[t,e.onTappingSend,e.onTappingSwap,e.onTappingReceive,e.onTappingBuy])}i();s();var $n=B(_());var gs=({networkID:e,unsignedTransaction:t,pendingActivityRows:r,accountIdentifier:n,accountSigner:o,storage:a,includeCallPayload:d})=>({accountSigner:o,accountIdentifier:n,networkID:e,unsignedTransaction:t,...d&&{callPayload:{from:t.from,to:t.to,data:t.data,value:t.value}},pendingTransactionInput:{ownerAddress:t.from,networkID:e,data:{nonce:"",unsignedTransaction:t,hash:""},type:"swap",display:{summary:r}},storage:a}),ys=async({t:e,fungible:t,unsignedUnwrapTx:r,gasEstimation:n,storage:o,accountMetadata:a,accountSigner:d})=>{if(!r)throw new Error("Unsigned unwrap transaction is required");if(!n)throw new Error("Gas estimation is required");let{chain:u,balance:l}=t.data;if(!M.isEthereumNetworkID(u.id))throw new Error(`Chain is not supported: ${u.id}`);let c=u.id,f={topRight:{text:`+${l} ${u.symbol}`},topLeft:{text:e("transactionsPendingSwapping")},bottomRight:{text:`-${l} ${t.data.symbol}`},bottomLeft:{text:`${t.data.name}`}},g=Yt.parse({type:"0x2",chainId:M.getEVMNetworkIDValue(c),gas:`0x${n.gasLimit.toString(16)}`,maxFeePerGas:`0x${n.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${n.maxPriorityFeePerGas.toString(16)}`,...r}),y=gs({storage:o,accountSigner:d,pendingActivityRows:f,includeCallPayload:!1,networkID:c,unsignedTransaction:g,accountIdentifier:a.accountIdentifier});return wr(y)},Ts=()=>{let{data:e}=X();return(0,$n.useMemo)(()=>{let r=e?.type,n=e?.name??"",o=e?.identifier??"";return{accountName:n,accountType:r,accountIdentifier:o}},[e])},hs=e=>{let t=se(),r=W(),{t:n}=Z(),o=Ts(),a=ce();return J({async mutationFn({fungible:d,unsignedUnwrapTx:u,gasEstimation:l}){return await ys({t:n,fungible:d,unsignedUnwrapTx:u,gasEstimation:l,accountMetadata:o,storage:t,accountSigner:a})},async onSuccess(){await r.invalidateQueries({queryKey:V.tokens(e)})}})};i();s();i();s();i();s();var zn=()=>{let{setRetryArgs:e}=Mt();return t=>{if(t instanceof Ar){let{successfulTxIds:r}=t,[n,o]=r;e({type:"BRC20",commitTxId:n,revealTxId:o})}}};function Ss(){let e=se(),{data:t}=X({select:d=>d.identifier}),r=zn(),n=Dr(),o=ce();return J({mutationFn:async({multichainTransaction:d,pendingTransactionInput:u,senderAddress:l,gasEstimation:c})=>{if(!t)throw new Error("No account identifier found");let{networkID:f}=d,g=await Tr.get(f).onBeforeSend({multichainTransaction:d,gasEstimation:c}),y=await Pr({accountIdentifier:t,accountSigner:o,multichainTransaction:g,networkID:f,pendingTransactionInput:u,senderAddress:l,storage:e,utxoManager:n});return Ir(f,y)},onError(d){d instanceof Error&&(O.captureError(d,"fungibles"),d instanceof br&&r(d))}})}i();s();var Yn=B(_());var bs=(e,t,r)=>{let n=W(),{fungibles:o}=gt({keys:[e]}),a=o.length===1?o[0]:void 0;(0,Yn.useEffect)(()=>{if(!a)return;let{type:d,data:u}=a,{balance:l,decimals:c,chain:f}=u,{id:g}=f,y=Te(d)===!0;if(!r||!l||y||l.isEqualTo(t))return;let h=V.transferFungibleLoggingContext(e),k={transactionId:r,decimals:c,chainId:g,isNativeToken:y,previousBalance:l,fungibleKey:e};n.setQueryData(h,k)},[r])};i();s();var Jn=I({minutes:1}),As=(e,t=!0)=>{let r=V.solanaBalance(e);return q({enabled:!!e&&t&&fe(e),gcTime:Jn,staleTime:Jn,queryKey:r,async queryFn(){if(!e)throw new Error("No chain address provided");if(fe(e))return hr(e.networkID).getBalance(new Q.PublicKey(e.address));throw new Error(`SOL balance not implemented for ${e.networkID}`)}})};i();s();i();s();var Zn=B(_());var ws=e=>{let{data:t}=pr();return(0,Zn.useMemo)(()=>{if(!e||!t)return;let r=e.data.chain.id,n=t.explorers[r]??dt.get(r).defaultExplorer,o,a;if(Te(e.type))a="address",o=e.data.walletAddress;else switch(e.type){case"SuiCoin":{a="token",o=e.data.contractAddress;break}case"ERC20":{a="address",o=e.data.contractAddress;break}case"SPL":case"CompressedSPL":{a="address",o=e.data.mintAddress;break}case"BRC20":return{explorerName:"Unisat",explorerUrl:`https://unisat.io/brc20?q=${e.data.walletAddress}`}}let d=mt({networkID:r,endpoint:a,explorerType:n,param:o});return{explorerName:pt[n],explorerUrl:d}},[e,t])};i();s();var Xn=B(_());var Es=e=>{let t=W();return(0,Xn.useCallback)(()=>t.invalidateQueries({queryKey:V.tokens(e)}),[t,e])};i();s();var eo=B(_()),vs=(e,t)=>(0,eo.useMemo)(()=>{if(e)if(Le(e)){let r=mr(e).toNumber().toLocaleString("en-US");return{leftSubtext:void 0,leftSubtextColor:void 0,rightSubtext:t("satsAmount",{sats:r.toString()})}}else return Ne(e)&&e.highFees?{leftSubtext:t("notificationTransactionApprovalNetworkFeeHighWarning"),leftSubtextColor:dr.colors.legacy.accentWarning,rightSubtext:""}:void 0},[e,t]);i();s();var ks=B(_());i();s();i();s();var co=B(_());i();s();var at=(o=>(o.FAIL_SEVERE="FAIL_SEVERE",o.FAIL_HIGH="FAIL_HIGH",o.NO_ACTION="NO_ACTION",o.DATA_NOT_FOUND="DATA_NOT_FOUND",o))(at||{}),xs=p.object({action:p.nativeEnum(at),address:ar,expirationUnixtimeInSec:p.number().nullish().default(null)}),to=p.object({addressScreenResults:p.array(xs)}),st=class extends Error{constructor(t){super(t),this.name="WalletScreenError"}};i();s();i();s();var Cs="@phantom/wallet-screening",ro=`${Cs}:wallet-screen-action`,no={walletScreenAction(e){return[ro,e]}};i();s();var oo=new Error("Failed to fetch wallet screen action.");async function io(e){try{let t=await Y.api().post("/wallet_screen/v1",e);if(!ie(t))throw oo;let r=t.data;return to.parse(r)}catch{throw oo}}var so=I({days:7}),ao=e=>{let t=e!==void 0&&M.isMainnetNetworkID(e.networkID),r=[];if(e!==void 0){let u=M.isEVMNetworkID(e.networkID)?e.address.toLowerCase():e.address;r=[{chainId:e.networkID,address:u,resourceType:"address"}]}let n={addresses:r},o=W(),a=no.walletScreenAction(n),d=[a[0]];return q({enabled:t,queryKey:a,gcTime:so,staleTime:so,refetchInterval:!1,refetchOnMount:!1,async queryFn(){if(Is(o,d))return"FAIL_SEVERE";let l=await io(n);return Ps(l)}})},Is=(e,t)=>{let r=e.getQueriesData({queryKey:t,exact:!1}),n=!1;for(let[o,a]of r){let d=a;if(d&&d==="FAIL_SEVERE"){n=!0;break}}return n},Ps=e=>{let t=e.addressScreenResults;return t.some(r=>r.action==="FAIL_SEVERE")?"FAIL_SEVERE":t.some(r=>r.action==="FAIL_HIGH")?"FAIL_HIGH":t.some(r=>r.action==="NO_ACTION")?"NO_ACTION":"DATA_NOT_FOUND"};var Os=(e,t)=>{let r=_e(),{data:n}=ao(e);switch((0,co.useEffect)(()=>{n&&e&&r.capture("walletScreened",{data:{walletScreen:{action:n.toString(),surface:t},chainId:M.getChainID(e.networkID),networkId:e.networkID}})},[n,e,t,r]),n){case"FAIL_SEVERE":case"FAIL_HIGH":throw new st(`Transaction disabled: ${t}`);case"NO_ACTION":case"DATA_NOT_FOUND":return}};i();s();i();s();export{Nr as a,Lr as b,nn as c,b as d,Hr as e,Ec as f,H as g,Ie as h,vc as i,be as j,ze as k,j as l,Mo as m,K as n,No as o,Zr as p,Mt as q,Qo as r,Ss as s,bs as t,Ht as u,jo as v,Ho as w,As as x,ws as y,os as z,kd as A,Bd as B,Dd as C,Ud as D,bi as E,dp as F,$ as G,Je as H,wn as I,Ze as J,we as K,te as L,le as M,Pi as N,pe as O,rt as P,Ee as Q,Mn as R,Zi as S,Vn as T,Bn as U,Fn as V,_n as W,Nn as X,us as Y,ls as Z,jn as _,ms as $,Es as aa,vs as ba,hs as ca,st as da,ro as ea,Os as fa};
//# sourceMappingURL=chunk-XNDOEJ4N.js.map
