import{a as Ji,b as Jn,c as ur,d as B0,e as dr,f as _0,g as n1,h as di,j as Kd,k as cc,m as pM,n as yM,o as mM,r as pf,s as yf,t as i1,u as gM}from"./chunk-3LY6FUZT.js";import{A as M0,D as KM,E as D0,G as FM,H as HM,I as d1,J as h1,c as EM,d as IM,e as s1,f as kM,g as TM,h as _i,i as _n,l as a1,n as UM,o as RM,q as xa,r as LM,s as VM}from"./chunk-SK6BTSEQ.js";import{A as jre,a as dM,b as hM,d as mf,e as OM,f as Dre,g as e4,h as Ore,i as Ure,j as Rre,k as qM,l as Lre,m as Vre,n as Kre,o as Fre,p as t4,q as jM,r as Hre,s as qre,x as hu}from"./chunk-BY5XXL4W.js";import{A as ht,B as MM,C as DM,F as Xi,G as Q6,H as f1,P as uc,Q as l1,b as Ho,g as G6,h as $6,i as PM,j as BM,k as c1,l as Y6,m as Cre,n as Nre,o as Mre,p as u1,q as Ci,u as CM,v as Z6,x as J6,y as NM,z as X6}from"./chunk-WP4K54AS.js";import{C as oe,J as bs,a as oM,b as sM,c as Ire,d as aM,e as cM,g as uM,h as r1,i as fM,j as lM,k as Xm,o as _M,u as Ce,w as Ne,z as Yt}from"./chunk-UCPKAIVR.js";import{U as N0,V as Qm,a as W6,i as Ae,k as z6,l as bM,u as C0}from"./chunk-NL7NWYRL.js";import{B as xM,D as Bre,E as _re,F as wM,G as SM,K as vM,O as AM,a as Fr,h as R,j as kre,l as Tre,r as Pre,s as o1}from"./chunk-57IY32VM.js";import{c as W,d as j6,e as du,f as re,h as l,i as E,j as Are,k as Ere,l as Bn,m as Buffer,n as d}from"./chunk-3KENBVE7.js";var tg=W(L0=>{"use strict";l();d();var r4=Are(),U0=Ere(),WM=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;L0.Buffer=ne;L0.SlowBuffer=Zre;L0.INSPECT_MAX_BYTES=50;var p1=2147483647;L0.kMaxLength=p1;ne.TYPED_ARRAY_SUPPORT=Wre();!ne.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Wre(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(ne.prototype,"parent",{enumerable:!0,get:function(){if(ne.isBuffer(this))return this.buffer}});Object.defineProperty(ne.prototype,"offset",{enumerable:!0,get:function(){if(ne.isBuffer(this))return this.byteOffset}});function pu(e){if(e>p1)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,ne.prototype),t}function ne(e,t,r){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return s4(e)}return YM(e,t,r)}ne.poolSize=8192;function YM(e,t,r){if(typeof e=="string")return Gre(e,t);if(ArrayBuffer.isView(e))return $re(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(fc(e,ArrayBuffer)||e&&fc(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(fc(e,SharedArrayBuffer)||e&&fc(e.buffer,SharedArrayBuffer)))return i4(e,t,r);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(n!=null&&n!==e)return ne.from(n,t,r);let i=Yre(e);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return ne.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}ne.from=function(e,t,r){return YM(e,t,r)};Object.setPrototypeOf(ne.prototype,Uint8Array.prototype);Object.setPrototypeOf(ne,Uint8Array);function ZM(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function zre(e,t,r){return ZM(e),e<=0?pu(e):t!==void 0?typeof r=="string"?pu(e).fill(t,r):pu(e).fill(t):pu(e)}ne.alloc=function(e,t,r){return zre(e,t,r)};function s4(e){return ZM(e),pu(e<0?0:a4(e)|0)}ne.allocUnsafe=function(e){return s4(e)};ne.allocUnsafeSlow=function(e){return s4(e)};function Gre(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!ne.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let r=JM(e,t)|0,n=pu(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}function n4(e){let t=e.length<0?0:a4(e.length)|0,r=pu(t);for(let n=0;n<t;n+=1)r[n]=e[n]&255;return r}function $re(e){if(fc(e,Uint8Array)){let t=new Uint8Array(e);return i4(t.buffer,t.byteOffset,t.byteLength)}return n4(e)}function i4(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return t===void 0&&r===void 0?n=new Uint8Array(e):r===void 0?n=new Uint8Array(e,t):n=new Uint8Array(e,t,r),Object.setPrototypeOf(n,ne.prototype),n}function Yre(e){if(ne.isBuffer(e)){let t=a4(e.length)|0,r=pu(t);return r.length===0||e.copy(r,0,0,t),r}if(e.length!==void 0)return typeof e.length!="number"||u4(e.length)?pu(0):n4(e);if(e.type==="Buffer"&&Array.isArray(e.data))return n4(e.data)}function a4(e){if(e>=p1)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+p1.toString(16)+" bytes");return e|0}function Zre(e){return+e!=e&&(e=0),ne.alloc(+e)}ne.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==ne.prototype};ne.compare=function(t,r){if(fc(t,Uint8Array)&&(t=ne.from(t,t.offset,t.byteLength)),fc(r,Uint8Array)&&(r=ne.from(r,r.offset,r.byteLength)),!ne.isBuffer(t)||!ne.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===r)return 0;let n=t.length,i=r.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(t[o]!==r[o]){n=t[o],i=r[o];break}return n<i?-1:i<n?1:0};ne.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};ne.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return ne.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<t.length;++n)r+=t[n].length;let i=ne.allocUnsafe(r),o=0;for(n=0;n<t.length;++n){let s=t[n];if(fc(s,Uint8Array))o+s.length>i.length?(ne.isBuffer(s)||(s=ne.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(ne.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function JM(e,t){if(ne.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||fc(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return o4(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return sD(e).length;default:if(i)return n?-1:o4(e).length;t=(""+t).toLowerCase(),i=!0}}ne.byteLength=JM;function Jre(e,t,r){let n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return ane(this,t,r);case"utf8":case"utf-8":return QM(this,t,r);case"ascii":return one(this,t,r);case"latin1":case"binary":return sne(this,t,r);case"base64":return nne(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return cne(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}ne.prototype._isBuffer=!0;function Fd(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}ne.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<t;r+=2)Fd(this,r,r+1);return this};ne.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<t;r+=4)Fd(this,r,r+3),Fd(this,r+1,r+2);return this};ne.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<t;r+=8)Fd(this,r,r+7),Fd(this,r+1,r+6),Fd(this,r+2,r+5),Fd(this,r+3,r+4);return this};ne.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?QM(this,0,t):Jre.apply(this,arguments)};ne.prototype.toLocaleString=ne.prototype.toString;ne.prototype.equals=function(t){if(!ne.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:ne.compare(this,t)===0};ne.prototype.inspect=function(){let t="",r=L0.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"};WM&&(ne.prototype[WM]=ne.prototype.inspect);ne.prototype.compare=function(t,r,n,i,o){if(fc(t,Uint8Array)&&(t=ne.from(t,t.offset,t.byteLength)),!ne.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(r===void 0&&(r=0),n===void 0&&(n=t?t.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),r<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===t)return 0;let s=o-i,a=n-r,c=Math.min(s,a),u=this.slice(i,o),h=t.slice(r,n);for(let f=0;f<c;++f)if(u[f]!==h[f]){s=u[f],a=h[f];break}return s<a?-1:a<s?1:0};function XM(e,t,r,n,i){if(e.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,u4(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof t=="string"&&(t=ne.from(t,n)),ne.isBuffer(t))return t.length===0?-1:zM(e,t,r,n,i);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):zM(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function zM(e,t,r,n,i){let o=1,s=e.length,a=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;o=2,s/=2,a/=2,r/=2}function c(h,f){return o===1?h[f]:h.readUInt16BE(f*o)}let u;if(i){let h=-1;for(u=r;u<s;u++)if(c(e,u)===c(t,h===-1?0:u-h)){if(h===-1&&(h=u),u-h+1===a)return h*o}else h!==-1&&(u-=u-h),h=-1}else for(r+a>s&&(r=s-a),u=r;u>=0;u--){let h=!0;for(let f=0;f<a;f++)if(c(e,u+f)!==c(t,f)){h=!1;break}if(h)return u}return-1}ne.prototype.includes=function(t,r,n){return this.indexOf(t,r,n)!==-1};ne.prototype.indexOf=function(t,r,n){return XM(this,t,r,n,!0)};ne.prototype.lastIndexOf=function(t,r,n){return XM(this,t,r,n,!1)};function Xre(e,t,r,n){r=Number(r)||0;let i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let o=t.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let a=parseInt(t.substr(s*2,2),16);if(u4(a))return s;e[r+s]=a}return s}function Qre(e,t,r,n){return y1(o4(t,e.length-r),e,r,n)}function ene(e,t,r,n){return y1(dne(t),e,r,n)}function tne(e,t,r,n){return y1(sD(t),e,r,n)}function rne(e,t,r,n){return y1(hne(t,e.length-r),e,r,n)}ne.prototype.write=function(t,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-r;if((n===void 0||n>o)&&(n=o),t.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return Xre(this,t,r,n);case"utf8":case"utf-8":return Qre(this,t,r,n);case"ascii":case"latin1":case"binary":return ene(this,t,r,n);case"base64":return tne(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return rne(this,t,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};ne.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function nne(e,t,r){return t===0&&r===e.length?r4.fromByteArray(e):r4.fromByteArray(e.slice(t,r))}function QM(e,t,r){r=Math.min(e.length,r);let n=[],i=t;for(;i<r;){let o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){let c,u,h,f;switch(a){case 1:o<128&&(s=o);break;case 2:c=e[i+1],(c&192)===128&&(f=(o&31)<<6|c&63,f>127&&(s=f));break;case 3:c=e[i+1],u=e[i+2],(c&192)===128&&(u&192)===128&&(f=(o&15)<<12|(c&63)<<6|u&63,f>2047&&(f<55296||f>57343)&&(s=f));break;case 4:c=e[i+1],u=e[i+2],h=e[i+3],(c&192)===128&&(u&192)===128&&(h&192)===128&&(f=(o&15)<<18|(c&63)<<12|(u&63)<<6|h&63,f>65535&&f<1114112&&(s=f))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=a}return ine(n)}var GM=4096;function ine(e){let t=e.length;if(t<=GM)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=GM));return r}function one(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]&127);return n}function sne(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function ane(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=t;o<r;++o)i+=pne[e[o]];return i}function cne(e,t,r){let n=e.slice(t,r),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}ne.prototype.slice=function(t,r){let n=this.length;t=~~t,r=r===void 0?n:~~r,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<t&&(r=t);let i=this.subarray(t,r);return Object.setPrototypeOf(i,ne.prototype),i};function Xn(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}ne.prototype.readUintLE=ne.prototype.readUIntLE=function(t,r,n){t=t>>>0,r=r>>>0,n||Xn(t,r,this.length);let i=this[t],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[t+s]*o;return i};ne.prototype.readUintBE=ne.prototype.readUIntBE=function(t,r,n){t=t>>>0,r=r>>>0,n||Xn(t,r,this.length);let i=this[t+--r],o=1;for(;r>0&&(o*=256);)i+=this[t+--r]*o;return i};ne.prototype.readUint8=ne.prototype.readUInt8=function(t,r){return t=t>>>0,r||Xn(t,1,this.length),this[t]};ne.prototype.readUint16LE=ne.prototype.readUInt16LE=function(t,r){return t=t>>>0,r||Xn(t,2,this.length),this[t]|this[t+1]<<8};ne.prototype.readUint16BE=ne.prototype.readUInt16BE=function(t,r){return t=t>>>0,r||Xn(t,2,this.length),this[t]<<8|this[t+1]};ne.prototype.readUint32LE=ne.prototype.readUInt32LE=function(t,r){return t=t>>>0,r||Xn(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};ne.prototype.readUint32BE=ne.prototype.readUInt32BE=function(t,r){return t=t>>>0,r||Xn(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};ne.prototype.readBigUInt64LE=gf(function(t){t=t>>>0,R0(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&eg(t,this.length-8);let i=r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,o=this[++t]+this[++t]*2**8+this[++t]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});ne.prototype.readBigUInt64BE=gf(function(t){t=t>>>0,R0(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&eg(t,this.length-8);let i=r*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],o=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});ne.prototype.readIntLE=function(t,r,n){t=t>>>0,r=r>>>0,n||Xn(t,r,this.length);let i=this[t],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[t+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*r)),i};ne.prototype.readIntBE=function(t,r,n){t=t>>>0,r=r>>>0,n||Xn(t,r,this.length);let i=r,o=1,s=this[t+--i];for(;i>0&&(o*=256);)s+=this[t+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*r)),s};ne.prototype.readInt8=function(t,r){return t=t>>>0,r||Xn(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};ne.prototype.readInt16LE=function(t,r){t=t>>>0,r||Xn(t,2,this.length);let n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};ne.prototype.readInt16BE=function(t,r){t=t>>>0,r||Xn(t,2,this.length);let n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};ne.prototype.readInt32LE=function(t,r){return t=t>>>0,r||Xn(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};ne.prototype.readInt32BE=function(t,r){return t=t>>>0,r||Xn(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};ne.prototype.readBigInt64LE=gf(function(t){t=t>>>0,R0(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&eg(t,this.length-8);let i=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});ne.prototype.readBigInt64BE=gf(function(t){t=t>>>0,R0(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&eg(t,this.length-8);let i=(r<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(i)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n)});ne.prototype.readFloatLE=function(t,r){return t=t>>>0,r||Xn(t,4,this.length),U0.read(this,t,!0,23,4)};ne.prototype.readFloatBE=function(t,r){return t=t>>>0,r||Xn(t,4,this.length),U0.read(this,t,!1,23,4)};ne.prototype.readDoubleLE=function(t,r){return t=t>>>0,r||Xn(t,8,this.length),U0.read(this,t,!0,52,8)};ne.prototype.readDoubleBE=function(t,r){return t=t>>>0,r||Xn(t,8,this.length),U0.read(this,t,!1,52,8)};function vo(e,t,r,n,i,o){if(!ne.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}ne.prototype.writeUintLE=ne.prototype.writeUIntLE=function(t,r,n,i){if(t=+t,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;vo(this,t,r,n,a,0)}let o=1,s=0;for(this[r]=t&255;++s<n&&(o*=256);)this[r+s]=t/o&255;return r+n};ne.prototype.writeUintBE=ne.prototype.writeUIntBE=function(t,r,n,i){if(t=+t,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;vo(this,t,r,n,a,0)}let o=n-1,s=1;for(this[r+o]=t&255;--o>=0&&(s*=256);)this[r+o]=t/s&255;return r+n};ne.prototype.writeUint8=ne.prototype.writeUInt8=function(t,r,n){return t=+t,r=r>>>0,n||vo(this,t,r,1,255,0),this[r]=t&255,r+1};ne.prototype.writeUint16LE=ne.prototype.writeUInt16LE=function(t,r,n){return t=+t,r=r>>>0,n||vo(this,t,r,2,65535,0),this[r]=t&255,this[r+1]=t>>>8,r+2};ne.prototype.writeUint16BE=ne.prototype.writeUInt16BE=function(t,r,n){return t=+t,r=r>>>0,n||vo(this,t,r,2,65535,0),this[r]=t>>>8,this[r+1]=t&255,r+2};ne.prototype.writeUint32LE=ne.prototype.writeUInt32LE=function(t,r,n){return t=+t,r=r>>>0,n||vo(this,t,r,4,4294967295,0),this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255,r+4};ne.prototype.writeUint32BE=ne.prototype.writeUInt32BE=function(t,r,n){return t=+t,r=r>>>0,n||vo(this,t,r,4,4294967295,0),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};function eD(e,t,r,n,i){oD(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o=o>>8,e[r++]=o,o=o>>8,e[r++]=o,o=o>>8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s=s>>8,e[r++]=s,s=s>>8,e[r++]=s,s=s>>8,e[r++]=s,r}function tD(e,t,r,n,i){oD(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o=o>>8,e[r+6]=o,o=o>>8,e[r+5]=o,o=o>>8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s=s>>8,e[r+2]=s,s=s>>8,e[r+1]=s,s=s>>8,e[r]=s,r+8}ne.prototype.writeBigUInt64LE=gf(function(t,r=0){return eD(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))});ne.prototype.writeBigUInt64BE=gf(function(t,r=0){return tD(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))});ne.prototype.writeIntLE=function(t,r,n,i){if(t=+t,r=r>>>0,!i){let c=Math.pow(2,8*n-1);vo(this,t,r,n,c-1,-c)}let o=0,s=1,a=0;for(this[r]=t&255;++o<n&&(s*=256);)t<0&&a===0&&this[r+o-1]!==0&&(a=1),this[r+o]=(t/s>>0)-a&255;return r+n};ne.prototype.writeIntBE=function(t,r,n,i){if(t=+t,r=r>>>0,!i){let c=Math.pow(2,8*n-1);vo(this,t,r,n,c-1,-c)}let o=n-1,s=1,a=0;for(this[r+o]=t&255;--o>=0&&(s*=256);)t<0&&a===0&&this[r+o+1]!==0&&(a=1),this[r+o]=(t/s>>0)-a&255;return r+n};ne.prototype.writeInt8=function(t,r,n){return t=+t,r=r>>>0,n||vo(this,t,r,1,127,-128),t<0&&(t=255+t+1),this[r]=t&255,r+1};ne.prototype.writeInt16LE=function(t,r,n){return t=+t,r=r>>>0,n||vo(this,t,r,2,32767,-32768),this[r]=t&255,this[r+1]=t>>>8,r+2};ne.prototype.writeInt16BE=function(t,r,n){return t=+t,r=r>>>0,n||vo(this,t,r,2,32767,-32768),this[r]=t>>>8,this[r+1]=t&255,r+2};ne.prototype.writeInt32LE=function(t,r,n){return t=+t,r=r>>>0,n||vo(this,t,r,4,2147483647,-2147483648),this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24,r+4};ne.prototype.writeInt32BE=function(t,r,n){return t=+t,r=r>>>0,n||vo(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};ne.prototype.writeBigInt64LE=gf(function(t,r=0){return eD(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});ne.prototype.writeBigInt64BE=gf(function(t,r=0){return tD(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function rD(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function nD(e,t,r,n,i){return t=+t,r=r>>>0,i||rD(e,t,r,4,34028234663852886e22,-34028234663852886e22),U0.write(e,t,r,n,23,4),r+4}ne.prototype.writeFloatLE=function(t,r,n){return nD(this,t,r,!0,n)};ne.prototype.writeFloatBE=function(t,r,n){return nD(this,t,r,!1,n)};function iD(e,t,r,n,i){return t=+t,r=r>>>0,i||rD(e,t,r,8,17976931348623157e292,-17976931348623157e292),U0.write(e,t,r,n,52,8),r+8}ne.prototype.writeDoubleLE=function(t,r,n){return iD(this,t,r,!0,n)};ne.prototype.writeDoubleBE=function(t,r,n){return iD(this,t,r,!1,n)};ne.prototype.copy=function(t,r,n,i){if(!ne.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=t.length&&(r=t.length),r||(r=0),i>0&&i<n&&(i=n),i===n||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-r<i-n&&(i=t.length-r+n);let o=i-n;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(t,this.subarray(n,i),r),o};ne.prototype.fill=function(t,r,n,i){if(typeof t=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!ne.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(t.length===1){let s=t.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(t=s)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);let o;if(typeof t=="number")for(o=r;o<n;++o)this[o]=t;else{let s=ne.isBuffer(t)?t:ne.from(t,i),a=s.length;if(a===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-r;++o)this[o+r]=s[o%a]}return this};var O0={};function c4(e,t,r){O0[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}c4("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);c4("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError);c4("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=$M(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=$M(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n},RangeError);function $M(e){let t="",r=e.length,n=e[0]==="-"?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function une(e,t,r){R0(t,"offset"),(e[t]===void 0||e[t+r]===void 0)&&eg(t,e.length-(r+1))}function oD(e,t,r,n,i,o){if(e>r||e<t){let s=typeof t=="bigint"?"n":"",a;throw o>3?t===0||t===BigInt(0)?a=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:a=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:a=`>= ${t}${s} and <= ${r}${s}`,new O0.ERR_OUT_OF_RANGE("value",a,e)}une(n,i,o)}function R0(e,t){if(typeof e!="number")throw new O0.ERR_INVALID_ARG_TYPE(t,"number",e)}function eg(e,t,r){throw Math.floor(e)!==e?(R0(e,r),new O0.ERR_OUT_OF_RANGE(r||"offset","an integer",e)):t<0?new O0.ERR_BUFFER_OUT_OF_BOUNDS:new O0.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}var fne=/[^+/0-9A-Za-z-_]/g;function lne(e){if(e=e.split("=")[0],e=e.trim().replace(fne,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function o4(e,t){t=t||1/0;let r,n=e.length,i=null,o=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function dne(e){let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r)&255);return t}function hne(e,t){let r,n,i,o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function sD(e){return r4.toByteArray(lne(e))}function y1(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function fc(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function u4(e){return e!==e}var pne=function(){let e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function gf(e){return typeof BigInt>"u"?yne:e}function yne(){throw new Error("BigInt not supported")}});var g1=W(Qi=>{"use strict";l();d();Object.defineProperty(Qi,"__esModule",{value:!0});Qi.output=Qi.exists=Qi.hash=Qi.bytes=Qi.bool=Qi.number=void 0;function m1(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}Qi.number=m1;function aD(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}Qi.bool=aD;function f4(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}Qi.bytes=f4;function cD(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");m1(e.outputLen),m1(e.blockLen)}Qi.hash=cD;function uD(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}Qi.exists=uD;function fD(e,t){f4(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Qi.output=fD;var mne={number:m1,bool:aD,bytes:f4,hash:cD,exists:uD,output:fD};Qi.default=mne});var lD=W(b1=>{"use strict";l();d();Object.defineProperty(b1,"__esModule",{value:!0});b1.crypto=void 0;b1.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0}});var V0=W(Tt=>{"use strict";l();d();Object.defineProperty(Tt,"__esModule",{value:!0});Tt.randomBytes=Tt.wrapConstructorWithOpts=Tt.wrapConstructor=Tt.checkOpts=Tt.Hash=Tt.concatBytes=Tt.toBytes=Tt.utf8ToBytes=Tt.asyncLoop=Tt.nextTick=Tt.hexToBytes=Tt.bytesToHex=Tt.isLE=Tt.rotr=Tt.createView=Tt.u32=Tt.u8=void 0;var x1=lD(),gne=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);Tt.u8=gne;var bne=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));Tt.u32=bne;var xne=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);Tt.createView=xne;var wne=(e,t)=>e<<32-t|e>>>t;Tt.rotr=wne;Tt.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Tt.isLE)throw new Error("Non little-endian hardware is not supported");var Sne=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function vne(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=Sne[e[r]];return t}Tt.bytesToHex=vne;function Ane(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}Tt.hexToBytes=Ane;var Ene=async()=>{};Tt.nextTick=Ene;async function Ine(e,t,r){let n=Date.now();for(let i=0;i<e;i++){r(i);let o=Date.now()-n;o>=0&&o<t||(await(0,Tt.nextTick)(),n+=o)}}Tt.asyncLoop=Ine;function dD(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}Tt.utf8ToBytes=dD;function d4(e){if(typeof e=="string"&&(e=dD(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}Tt.toBytes=d4;function kne(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}Tt.concatBytes=kne;var l4=class{clone(){return this._cloneInto()}};Tt.Hash=l4;var Tne=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function Pne(e,t){if(t!==void 0&&(typeof t!="object"||!Tne(t)))throw new TypeError("Options should be object or undefined");return Object.assign(e,t)}Tt.checkOpts=Pne;function Bne(e){let t=n=>e().update(d4(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}Tt.wrapConstructor=Bne;function _ne(e){let t=(n,i)=>e(i).update(d4(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}Tt.wrapConstructorWithOpts=_ne;function Cne(e=32){if(x1.crypto.web)return x1.crypto.web.getRandomValues(new Uint8Array(e));if(x1.crypto.node)return new Uint8Array(x1.crypto.node.randomBytes(e).buffer);throw new Error("The environment doesn't have randomBytes function")}Tt.randomBytes=Cne});var y4=W(w1=>{"use strict";l();d();Object.defineProperty(w1,"__esModule",{value:!0});w1.SHA2=void 0;var h4=g1(),rg=V0();function Nne(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var p4=class extends rg.Hash{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,rg.createView)(this.buffer)}update(t){h4.default.exists(this);let{view:r,buffer:n,blockLen:i}=this;t=(0,rg.toBytes)(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=(0,rg.createView)(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){h4.default.exists(this),h4.default.output(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let f=s;f<i;f++)r[f]=0;Nne(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=(0,rg.createView)(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,h[f],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};w1.SHA2=p4});var b4=W(xs=>{"use strict";l();d();Object.defineProperty(xs,"__esModule",{value:!0});xs.add=xs.toBig=xs.split=xs.fromBig=void 0;var S1=BigInt(2**32-1),m4=BigInt(32);function g4(e,t=!1){return t?{h:Number(e&S1),l:Number(e>>m4&S1)}:{h:Number(e>>m4&S1)|0,l:Number(e&S1)|0}}xs.fromBig=g4;function hD(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:o,l:s}=g4(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}xs.split=hD;var Mne=(e,t)=>BigInt(e>>>0)<<m4|BigInt(t>>>0);xs.toBig=Mne;var Dne=(e,t,r)=>e>>>r,One=(e,t,r)=>e<<32-r|t>>>r,Une=(e,t,r)=>e>>>r|t<<32-r,Rne=(e,t,r)=>e<<32-r|t>>>r,Lne=(e,t,r)=>e<<64-r|t>>>r-32,Vne=(e,t,r)=>e>>>r-32|t<<64-r,Kne=(e,t)=>t,Fne=(e,t)=>e,Hne=(e,t,r)=>e<<r|t>>>32-r,qne=(e,t,r)=>t<<r|e>>>32-r,jne=(e,t,r)=>t<<r-32|e>>>64-r,Wne=(e,t,r)=>e<<r-32|t>>>64-r;function pD(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}xs.add=pD;var zne=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Gne=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,$ne=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),Yne=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,Zne=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),Jne=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0,Xne={fromBig:g4,split:hD,toBig:xs.toBig,shrSH:Dne,shrSL:One,rotrSH:Une,rotrSL:Rne,rotrBH:Lne,rotrBL:Vne,rotr32H:Kne,rotr32L:Fne,rotlSH:Hne,rotlSL:qne,rotlBH:jne,rotlBL:Wne,add:pD,add3L:zne,add3H:Gne,add4L:$ne,add4H:Yne,add5H:Jne,add5L:Zne};xs.default=Xne});var yD=W(ws=>{"use strict";l();d();Object.defineProperty(ws,"__esModule",{value:!0});ws.sha384=ws.sha512_256=ws.sha512_224=ws.sha512=ws.SHA512=void 0;var Qne=y4(),At=b4(),v1=V0(),[eie,tie]=At.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),bf=new Uint32Array(80),xf=new Uint32Array(80),Hd=class extends Qne.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:u,El:h,Fh:f,Fl:m,Gh:b,Gl:w,Hh:S,Hl:P}=this;return[t,r,n,i,o,s,a,c,u,h,f,m,b,w,S,P]}set(t,r,n,i,o,s,a,c,u,h,f,m,b,w,S,P){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=h|0,this.Fh=f|0,this.Fl=m|0,this.Gh=b|0,this.Gl=w|0,this.Hh=S|0,this.Hl=P|0}process(t,r){for(let C=0;C<16;C++,r+=4)bf[C]=t.getUint32(r),xf[C]=t.getUint32(r+=4);for(let C=16;C<80;C++){let L=bf[C-15]|0,V=xf[C-15]|0,j=At.default.rotrSH(L,V,1)^At.default.rotrSH(L,V,8)^At.default.shrSH(L,V,7),$=At.default.rotrSL(L,V,1)^At.default.rotrSL(L,V,8)^At.default.shrSL(L,V,7),H=bf[C-2]|0,Y=xf[C-2]|0,B=At.default.rotrSH(H,Y,19)^At.default.rotrBH(H,Y,61)^At.default.shrSH(H,Y,6),p=At.default.rotrSL(H,Y,19)^At.default.rotrBL(H,Y,61)^At.default.shrSL(H,Y,6),g=At.default.add4L($,p,xf[C-7],xf[C-16]),x=At.default.add4H(g,j,B,bf[C-7],bf[C-16]);bf[C]=x|0,xf[C]=g|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:u,Dl:h,Eh:f,El:m,Fh:b,Fl:w,Gh:S,Gl:P,Hh:N,Hl:O}=this;for(let C=0;C<80;C++){let L=At.default.rotrSH(f,m,14)^At.default.rotrSH(f,m,18)^At.default.rotrBH(f,m,41),V=At.default.rotrSL(f,m,14)^At.default.rotrSL(f,m,18)^At.default.rotrBL(f,m,41),j=f&b^~f&S,$=m&w^~m&P,H=At.default.add5L(O,V,$,tie[C],xf[C]),Y=At.default.add5H(H,N,L,j,eie[C],bf[C]),B=H|0,p=At.default.rotrSH(n,i,28)^At.default.rotrBH(n,i,34)^At.default.rotrBH(n,i,39),g=At.default.rotrSL(n,i,28)^At.default.rotrBL(n,i,34)^At.default.rotrBL(n,i,39),x=n&o^n&a^o&a,A=i&s^i&c^s&c;N=S|0,O=P|0,S=b|0,P=w|0,b=f|0,w=m|0,{h:f,l:m}=At.default.add(u|0,h|0,Y|0,B|0),u=a|0,h=c|0,a=o|0,c=s|0,o=n|0,s=i|0;let v=At.default.add3L(B,g,A);n=At.default.add3H(v,Y,p,x),i=v|0}({h:n,l:i}=At.default.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=At.default.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:c}=At.default.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:h}=At.default.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:f,l:m}=At.default.add(this.Eh|0,this.El|0,f|0,m|0),{h:b,l:w}=At.default.add(this.Fh|0,this.Fl|0,b|0,w|0),{h:S,l:P}=At.default.add(this.Gh|0,this.Gl|0,S|0,P|0),{h:N,l:O}=At.default.add(this.Hh|0,this.Hl|0,N|0,O|0),this.set(n,i,o,s,a,c,u,h,f,m,b,w,S,P,N,O)}roundClean(){bf.fill(0),xf.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};ws.SHA512=Hd;var x4=class extends Hd{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},w4=class extends Hd{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},S4=class extends Hd{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};ws.sha512=(0,v1.wrapConstructor)(()=>new Hd);ws.sha512_224=(0,v1.wrapConstructor)(()=>new x4);ws.sha512_256=(0,v1.wrapConstructor)(()=>new w4);ws.sha384=(0,v1.wrapConstructor)(()=>new S4)});var BD=W(jt=>{"use strict";l();d();Object.defineProperty(jt,"__esModule",{value:!0});jt.utils=jt.curve25519=jt.getSharedSecret=jt.sync=jt.verify=jt.sign=jt.getPublicKey=jt.Signature=jt.Point=jt.RistrettoPoint=jt.ExtendedPoint=jt.CURVE=void 0;var rie=Xm(),an=BigInt(0),Nt=BigInt(1),vf=BigInt(2),nie=BigInt(8),mD=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),hr=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:mD,n:mD,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")});jt.CURVE=hr;var SD=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),ng=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),T7e=BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),iie=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),oie=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),sie=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),aie=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),bn=class e{constructor(t,r,n,i){this.x=t,this.y=r,this.z=n,this.t=i}static fromAffine(t){if(!(t instanceof Hr))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(Hr.ZERO)?e.ZERO:new e(t.x,t.y,Nt,ie(t.x*t.y))}static toAffineBatch(t){let r=fie(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){bD(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t,c=ie(r*a),u=ie(o*i),h=ie(n*a),f=ie(s*i);return c===u&&h===f}negate(){return new e(ie(-this.x),this.y,this.z,ie(-this.t))}double(){let{x:t,y:r,z:n}=this,{a:i}=hr,o=ie(t*t),s=ie(r*r),a=ie(vf*ie(n*n)),c=ie(i*o),u=t+r,h=ie(ie(u*u)-o-s),f=c+s,m=f-a,b=c-s,w=ie(h*m),S=ie(f*b),P=ie(h*b),N=ie(m*f);return new e(w,S,N,P)}add(t){bD(t);let{x:r,y:n,z:i,t:o}=this,{x:s,y:a,z:c,t:u}=t,h=ie((n-r)*(a+s)),f=ie((n+r)*(a-s)),m=ie(f-h);if(m===an)return this.double();let b=ie(i*vf*u),w=ie(o*vf*c),S=w+b,P=f+h,N=w-b,O=ie(S*m),C=ie(P*N),L=ie(S*N),V=ie(m*P);return new e(O,C,V,L)}subtract(t){return this.add(t.negate())}precomputeWindow(t){let r=1+256/t,n=[],i=this,o=i;for(let s=0;s<r;s++){o=i,n.push(o);for(let a=1;a<2**(t-1);a++)o=o.add(i),n.push(o);i=o.double()}return n}wNAF(t,r){!r&&this.equals(e.BASE)&&(r=Hr.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&I4.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=e.normalizeZ(i),I4.set(r,i)));let o=e.ZERO,s=e.BASE,a=1+256/n,c=2**(n-1),u=BigInt(2**n-1),h=2**n,f=BigInt(n);for(let m=0;m<a;m++){let b=m*c,w=Number(t&u);t>>=f,w>c&&(w-=h,t+=Nt);let S=b,P=b+Math.abs(w)-1,N=m%2!==0,O=w<0;w===0?s=s.add(gD(N,i[S])):o=o.add(gD(O,i[P]))}return e.normalizeZ([o,s])[0]}multiply(t,r){return this.wNAF(H0(t,hr.l),r)}multiplyUnsafe(t){let r=H0(t,hr.l,!1),n=e.BASE,i=e.ZERO;if(r===an)return i;if(this.equals(i)||r===Nt)return this;if(this.equals(n))return this.wNAF(r);let o=i,s=this;for(;r>an;)r&Nt&&(o=o.add(s)),s=s.double(),r>>=Nt;return o}isSmallOrder(){return this.multiplyUnsafe(hr.h).equals(e.ZERO)}isTorsionFree(){let t=this.multiplyUnsafe(hr.l/vf).double();return hr.l%vf&&(t=t.add(this)),t.equals(e.ZERO)}toAffine(t){let{x:r,y:n,z:i}=this,o=this.equals(e.ZERO);t==null&&(t=o?nie:I1(i));let s=ie(r*t),a=ie(n*t),c=ie(i*t);if(o)return Hr.ZERO;if(c!==Nt)throw new Error("invZ was invalid");return new Hr(s,a)}fromRistrettoBytes(){A4()}toRistrettoBytes(){A4()}fromRistrettoHash(){A4()}};jt.ExtendedPoint=bn;bn.BASE=new bn(hr.Gx,hr.Gy,Nt,ie(hr.Gx*hr.Gy));bn.ZERO=new bn(an,Nt,Nt,an);function gD(e,t){let r=t.negate();return e?r:t}function bD(e){if(!(e instanceof bn))throw new TypeError("ExtendedPoint expected")}function v4(e){if(!(e instanceof Af))throw new TypeError("RistrettoPoint expected")}function A4(){throw new Error("Legacy method: switch to RistrettoPoint")}var Af=class e{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){let{d:r}=hr,n=ie(ng*t*t),i=ie((n+Nt)*sie),o=BigInt(-1),s=ie((o-r*n)*ie(n+r)),{isValid:a,value:c}=T4(i,s),u=ie(c*t);Sf(u)||(u=ie(-u)),a||(c=u),a||(o=n);let h=ie(o*(n-Nt)*aie-s),f=c*c,m=ie((c+c)*s),b=ie(h*iie),w=ie(Nt-f),S=ie(Nt+f);return new bn(ie(m*S),ie(w*b),ie(b*S),ie(m*w))}static hashToCurve(t){t=Sa(t,64);let r=E4(t.slice(0,32)),n=this.calcElligatorRistrettoMap(r),i=E4(t.slice(32,64)),o=this.calcElligatorRistrettoMap(i);return new e(n.add(o))}static fromHex(t){t=Sa(t,32);let{a:r,d:n}=hr,i="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",o=E4(t);if(!lie(K0(o),t)||Sf(o))throw new Error(i);let s=ie(o*o),a=ie(Nt+r*s),c=ie(Nt-r*s),u=ie(a*a),h=ie(c*c),f=ie(r*n*u-h),{isValid:m,value:b}=wD(ie(f*h)),w=ie(b*c),S=ie(b*w*f),P=ie((o+o)*w);Sf(P)&&(P=ie(-P));let N=ie(a*S),O=ie(P*N);if(!m||Sf(O)||N===an)throw new Error(i);return new e(new bn(P,N,Nt,O))}toRawBytes(){let{x:t,y:r,z:n,t:i}=this.ep,o=ie(ie(n+r)*ie(n-r)),s=ie(t*r),a=ie(s*s),{value:c}=wD(ie(o*a)),u=ie(c*o),h=ie(c*s),f=ie(u*h*i),m;if(Sf(i*f)){let w=ie(r*ng),S=ie(t*ng);t=w,r=S,m=ie(u*oie)}else m=h;Sf(t*f)&&(r=ie(-r));let b=ie((n-r)*m);return Sf(b)&&(b=ie(-b)),K0(b)}toHex(){return og(this.toRawBytes())}toString(){return this.toHex()}equals(t){v4(t);let r=this.ep,n=t.ep,i=ie(r.x*n.y)===ie(r.y*n.x),o=ie(r.y*n.y)===ie(r.x*n.x);return i||o}add(t){return v4(t),new e(this.ep.add(t.ep))}subtract(t){return v4(t),new e(this.ep.subtract(t.ep))}multiply(t){return new e(this.ep.multiply(t))}multiplyUnsafe(t){return new e(this.ep.multiplyUnsafe(t))}};jt.RistrettoPoint=Af;Af.BASE=new Af(bn.BASE);Af.ZERO=new Af(bn.ZERO);var I4=new WeakMap,Hr=class e{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,I4.delete(this)}static fromHex(t,r=!0){let{d:n,P:i}=hr;t=Sa(t,32);let o=t.slice();o[31]=t[31]&-129;let s=jd(o);if(r&&s>=i)throw new Error("Expected 0 < hex < P");if(!r&&s>=SD)throw new Error("Expected 0 < hex < 2**256");let a=ie(s*s),c=ie(a-Nt),u=ie(n*a+Nt),{isValid:h,value:f}=T4(c,u);if(!h)throw new Error("Point.fromHex: invalid y coordinate");let m=(f&Nt)===Nt;return(t[31]&128)!==0!==m&&(f=ie(-f)),new e(f,s)}static async fromPrivateKey(t){return(await sg(t)).point}toRawBytes(){let t=K0(this.y);return t[31]|=this.x&Nt?128:0,t}toHex(){return og(this.toRawBytes())}toX25519(){let{y:t}=this,r=ie((Nt+t)*I1(Nt-t));return K0(r)}isTorsionFree(){return bn.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new e(ie(-this.x),this.y)}add(t){return bn.fromAffine(this).add(bn.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return bn.fromAffine(this).multiply(t,this).toAffine()}};jt.Point=Hr;Hr.BASE=new Hr(hr.Gx,hr.Gy);Hr.ZERO=new Hr(an,Nt);var qd=class e{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromHex(t){let r=Sa(t,64),n=Hr.fromHex(r.slice(0,32),!1),i=jd(r.slice(32,64));return new e(n,i)}assertValidity(){let{r:t,s:r}=this;if(!(t instanceof Hr))throw new Error("Expected Point instance");return H0(r,hr.l,!1),this}toRawBytes(){let t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(K0(this.s),32),t}toHex(){return og(this.toRawBytes())}};jt.Signature=qd;function xD(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var cie=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function og(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=cie[e[r]];return t}function k4(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function vD(e){let r=e.toString(16).padStart(64,"0");return k4(r)}function K0(e){return vD(e).reverse()}function Sf(e){return(ie(e)&Nt)===Nt}function jd(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+og(Uint8Array.from(e).reverse()))}var uie=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function E4(e){return ie(jd(e)&uie)}function ie(e,t=hr.P){let r=e%t;return r>=an?r:t+r}function I1(e,t=hr.P){if(e===an||t<=an)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=ie(e,t),n=t,i=an,o=Nt,s=Nt,a=an;for(;r!==an;){let u=n/r,h=n%r,f=i-s*u,m=o-a*u;n=r,r=h,i=s,o=a,s=f,a=m}if(n!==Nt)throw new Error("invert: does not exist");return ie(i,t)}function fie(e,t=hr.P){let r=new Array(e.length),n=e.reduce((o,s,a)=>s===an?o:(r[a]=o,ie(o*s,t)),Nt),i=I1(n,t);return e.reduceRight((o,s,a)=>s===an?o:(r[a]=ie(o*r[a],t),ie(o*s,t)),i),r}function wa(e,t){let{P:r}=hr,n=e;for(;t-- >an;)n*=n,n%=r;return n}function AD(e){let{P:t}=hr,r=BigInt(5),n=BigInt(10),i=BigInt(20),o=BigInt(40),s=BigInt(80),c=e*e%t*e%t,u=wa(c,vf)*c%t,h=wa(u,Nt)*e%t,f=wa(h,r)*h%t,m=wa(f,n)*f%t,b=wa(m,i)*m%t,w=wa(b,o)*b%t,S=wa(w,s)*w%t,P=wa(S,s)*w%t,N=wa(P,n)*f%t;return{pow_p_5_8:wa(N,vf)*e%t,b2:c}}function T4(e,t){let r=ie(t*t*t),n=ie(r*r*t),i=AD(e*n).pow_p_5_8,o=ie(e*r*i),s=ie(t*o*o),a=o,c=ie(o*ng),u=s===e,h=s===ie(-e),f=s===ie(-e*ng);return u&&(o=a),(h||f)&&(o=c),Sf(o)&&(o=ie(-o)),{isValid:u||h,value:o}}function wD(e){return T4(Nt,e)}function F0(e){return ie(jd(e),hr.l)}function lie(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Sa(e,t){let r=e instanceof Uint8Array?Uint8Array.from(e):k4(e);if(typeof t=="number"&&r.length!==t)throw new Error(`Expected ${t} bytes`);return r}function H0(e,t,r=!0){if(!t)throw new TypeError("Specify max value");if(typeof e=="number"&&Number.isSafeInteger(e)&&(e=BigInt(e)),typeof e=="bigint"&&e<t){if(r){if(an<e)return e}else if(an<=e)return e}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function ED(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function die(e){return jd(ED(Sa(e,32)))}function ID(e){if(e=typeof e=="bigint"||typeof e=="number"?vD(H0(e,SD)):Sa(e),e.length!==32)throw new Error("Expected 32 bytes");return e}function kD(e){let t=ED(e.slice(0,32)),r=e.slice(32,64),n=F0(t),i=Hr.BASE.multiply(n),o=i.toRawBytes();return{head:t,prefix:r,scalar:n,point:i,pointBytes:o}}var ig;function E1(...e){if(typeof ig!="function")throw new Error("utils.sha512Sync must be set to use sync methods");return ig(...e)}async function sg(e){return kD(await jt.utils.sha512(ID(e)))}function P4(e){return kD(E1(ID(e)))}async function hie(e){return(await sg(e)).pointBytes}jt.getPublicKey=hie;function pie(e){return P4(e).pointBytes}async function yie(e,t){e=Sa(e);let{prefix:r,scalar:n,pointBytes:i}=await sg(t),o=F0(await jt.utils.sha512(r,e)),s=Hr.BASE.multiply(o),a=F0(await jt.utils.sha512(s.toRawBytes(),i,e)),c=ie(o+a*n,hr.l);return new qd(s,c).toRawBytes()}jt.sign=yie;function mie(e,t){e=Sa(e);let{prefix:r,scalar:n,pointBytes:i}=P4(t),o=F0(E1(r,e)),s=Hr.BASE.multiply(o),a=F0(E1(s.toRawBytes(),i,e)),c=ie(o+a*n,hr.l);return new qd(s,c).toRawBytes()}function TD(e,t,r){t=Sa(t),r instanceof Hr||(r=Hr.fromHex(r,!1));let{r:n,s:i}=e instanceof qd?e.assertValidity():qd.fromHex(e),o=bn.BASE.multiplyUnsafe(i);return{r:n,s:i,SB:o,pub:r,msg:t}}function PD(e,t,r,n){let i=F0(n),o=bn.fromAffine(e).multiplyUnsafe(i);return bn.fromAffine(t).add(o).subtract(r).multiplyUnsafe(hr.h).equals(bn.ZERO)}async function gie(e,t,r){let{r:n,SB:i,msg:o,pub:s}=TD(e,t,r),a=await jt.utils.sha512(n.toRawBytes(),s.toRawBytes(),o);return PD(s,n,i,a)}jt.verify=gie;function bie(e,t,r){let{r:n,SB:i,msg:o,pub:s}=TD(e,t,r),a=E1(n.toRawBytes(),s.toRawBytes(),o);return PD(s,n,i,a)}jt.sync={getExtendedPublicKey:P4,getPublicKey:pie,sign:mie,verify:bie};async function xie(e,t){let{head:r}=await sg(e),n=Hr.fromHex(t).toX25519();return jt.curve25519.scalarMult(r,n)}jt.getSharedSecret=xie;Hr.BASE._setWindowSize(8);function A1(e,t,r){let n=ie(e*(t-r));return t=ie(t-n),r=ie(r+n),[t,r]}function wie(e,t){let{P:r}=hr,n=H0(e,r),i=H0(t,r),o=BigInt(121665),s=n,a=Nt,c=an,u=n,h=Nt,f=an,m;for(let P=BigInt(254);P>=an;P--){let N=i>>P&Nt;f^=N,m=A1(f,a,u),a=m[0],u=m[1],m=A1(f,c,h),c=m[0],h=m[1],f=N;let O=a+c,C=ie(O*O),L=a-c,V=ie(L*L),j=C-V,$=u+h,H=u-h,Y=ie(H*O),B=ie($*L),p=Y+B,g=Y-B;u=ie(p*p),h=ie(s*ie(g*g)),a=ie(C*V),c=ie(j*(C+ie(o*j)))}m=A1(f,a,u),a=m[0],u=m[1],m=A1(f,c,h),c=m[0],h=m[1];let{pow_p_5_8:b,b2:w}=AD(c),S=ie(wa(b,BigInt(3))*w);return ie(a*S)}function Sie(e){return K0(ie(e,hr.P))}function vie(e){let t=Sa(e,32);return t[31]&=127,jd(t)}jt.curve25519={BASE_POINT_U:"0900000000000000000000000000000000000000000000000000000000000000",scalarMult(e,t){let r=vie(t),n=die(e),i=wie(r,n);if(i===an)throw new Error("Invalid private or public key received");return Sie(i)},scalarMultBase(e){return jt.curve25519.scalarMult(e,jt.curve25519.BASE_POINT_U)}};var wf={node:rie,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};jt.utils={bytesToHex:og,hexToBytes:k4,concatBytes:xD,getExtendedPublicKey:sg,mod:ie,invert:I1,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:e=>{if(e=Sa(e),e.length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return ie(jd(e),hr.l-Nt)+Nt},randomBytes:(e=32)=>{if(wf.web)return wf.web.getRandomValues(new Uint8Array(e));if(wf.node){let{randomBytes:t}=wf.node;return new Uint8Array(t(e).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>jt.utils.randomBytes(32),sha512:async(...e)=>{let t=xD(...e);if(wf.web){let r=await wf.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(r)}else{if(wf.node)return Uint8Array.from(wf.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(e=8,t=Hr.BASE){let r=t.equals(Hr.BASE)?t:new Hr(t.x,t.y);return r._setWindowSize(e),r.multiply(vf),r},sha512Sync:void 0};Object.defineProperties(jt.utils,{sha512Sync:{configurable:!1,get(){return ig},set(e){ig||(ig=e)}}})});var _D=W(q0=>{"use strict";l();d();Object.defineProperty(q0,"__esModule",{value:!0});q0.sha224=q0.sha256=void 0;var Aie=y4(),Ss=V0(),Eie=(e,t,r)=>e&t^~e&r,Iie=(e,t,r)=>e&t^e&r^t&r,kie=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ef=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),If=new Uint32Array(64),k1=class extends Aie.SHA2{constructor(){super(64,32,8,!1),this.A=Ef[0]|0,this.B=Ef[1]|0,this.C=Ef[2]|0,this.D=Ef[3]|0,this.E=Ef[4]|0,this.F=Ef[5]|0,this.G=Ef[6]|0,this.H=Ef[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let f=0;f<16;f++,r+=4)If[f]=t.getUint32(r,!1);for(let f=16;f<64;f++){let m=If[f-15],b=If[f-2],w=(0,Ss.rotr)(m,7)^(0,Ss.rotr)(m,18)^m>>>3,S=(0,Ss.rotr)(b,17)^(0,Ss.rotr)(b,19)^b>>>10;If[f]=S+If[f-7]+w+If[f-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:h}=this;for(let f=0;f<64;f++){let m=(0,Ss.rotr)(a,6)^(0,Ss.rotr)(a,11)^(0,Ss.rotr)(a,25),b=h+m+Eie(a,c,u)+kie[f]+If[f]|0,S=((0,Ss.rotr)(n,2)^(0,Ss.rotr)(n,13)^(0,Ss.rotr)(n,22))+Iie(n,i,o)|0;h=u,u=c,c=a,a=s+b|0,s=o,o=i,i=n,n=b+S|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,o,s,a,c,u,h)}roundClean(){If.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},B4=class extends k1{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};q0.sha256=(0,Ss.wrapConstructor)(()=>new k1);q0.sha224=(0,Ss.wrapConstructor)(()=>new B4)});var CD=W(N4=>{"use strict";l();d();function yu(e,t,r){return t<=e&&e<=r}function C1(e){if(e===void 0)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function Tie(e){for(var t=String(e),r=t.length,n=0,i=[];n<r;){var o=t.charCodeAt(n);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(n===r-1)i.push(65533);else{var s=e.charCodeAt(n+1);if(56320<=s&&s<=57343){var a=o&1023,c=s&1023;i.push(65536+(a<<10)+c),n+=1}else i.push(65533)}n+=1}return i}function Pie(e){for(var t="",r=0;r<e.length;++r){var n=e[r];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var T1=-1;function C4(e){this.tokens=[].slice.call(e)}C4.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():T1},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};var j0=-1;function _4(e,t){if(e)throw TypeError("Decoder error");return t||65533}var P1="utf-8";function B1(e,t){if(!(this instanceof B1))return new B1(e,t);if(e=e!==void 0?String(e).toLowerCase():P1,e!==P1)throw new Error("Encoding not supported. Only utf-8 is supported");t=C1(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}B1.prototype={decode:function(t,r){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),r=C1(r),this._streaming||(this._decoder=new Bie({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!r.stream;for(var i=new C4(n),o=[],s;!i.endOfStream()&&(s=this._decoder.handler(i,i.read()),s!==j0);)s!==null&&(Array.isArray(s)?o.push.apply(o,s):o.push(s));if(!this._streaming){do{if(s=this._decoder.handler(i,i.read()),s===j0)break;s!==null&&(Array.isArray(s)?o.push.apply(o,s):o.push(s))}while(!i.endOfStream());this._decoder=null}return o.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(o[0]===65279?(this._BOMseen=!0,o.shift()):this._BOMseen=!0),Pie(o)}};function _1(e,t){if(!(this instanceof _1))return new _1(e,t);if(e=e!==void 0?String(e).toLowerCase():P1,e!==P1)throw new Error("Encoding not supported. Only utf-8 is supported");t=C1(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}_1.prototype={encode:function(t,r){t=t?String(t):"",r=C1(r),this._streaming||(this._encoder=new _ie(this._options)),this._streaming=!!r.stream;for(var n=[],i=new C4(Tie(t)),o;!i.endOfStream()&&(o=this._encoder.handler(i,i.read()),o!==j0);)Array.isArray(o)?n.push.apply(n,o):n.push(o);if(!this._streaming){for(;o=this._encoder.handler(i,i.read()),o!==j0;)Array.isArray(o)?n.push.apply(n,o):n.push(o);this._encoder=null}return new Uint8Array(n)}};function Bie(e){var t=e.fatal,r=0,n=0,i=0,o=128,s=191;this.handler=function(a,c){if(c===T1&&i!==0)return i=0,_4(t);if(c===T1)return j0;if(i===0){if(yu(c,0,127))return c;if(yu(c,194,223))i=1,r=c-192;else if(yu(c,224,239))c===224&&(o=160),c===237&&(s=159),i=2,r=c-224;else if(yu(c,240,244))c===240&&(o=144),c===244&&(s=143),i=3,r=c-240;else return _4(t);return r=r<<6*i,null}if(!yu(c,o,s))return r=i=n=0,o=128,s=191,a.prepend(c),_4(t);if(o=128,s=191,n+=1,r+=c-128<<6*(i-n),n!==i)return null;var u=r;return r=i=n=0,u}}function _ie(e){var t=e.fatal;this.handler=function(r,n){if(n===T1)return j0;if(yu(n,0,127))return n;var i,o;yu(n,128,2047)?(i=1,o=192):yu(n,2048,65535)?(i=2,o=224):yu(n,65536,1114111)&&(i=3,o=240);for(var s=[(n>>6*i)+o];i>0;){var a=n>>6*(i-1);s.push(128|a&63),i-=1}return s}}N4.TextEncoder=_1;N4.TextDecoder=B1});var UD=W(gr=>{"use strict";l();d();var Cie=gr&&gr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Nie=gr&&gr.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),lc=gr&&gr.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},Mie=gr&&gr.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Cie(t,e,r);return Nie(t,e),t},ND=gr&&gr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gr,"__esModule",{value:!0});gr.deserializeUnchecked=gr.deserialize=gr.serialize=gr.BinaryReader=gr.BinaryWriter=gr.BorshError=gr.baseDecode=gr.baseEncode=void 0;var kf=ND(r1()),MD=ND(Ho()),Die=Mie(CD()),Oie=typeof TextDecoder!="function"?Die.TextDecoder:TextDecoder,Uie=new Oie("utf-8",{fatal:!0});function Rie(e){return typeof e=="string"&&(e=Buffer.from(e,"utf8")),MD.default.encode(Buffer.from(e))}gr.baseEncode=Rie;function Lie(e){return Buffer.from(MD.default.decode(e))}gr.baseDecode=Lie;var M4=1024,hi=class extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}};gr.BorshError=hi;var N1=class{constructor(){this.buf=Buffer.alloc(M4),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(M4)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new kf.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new kf.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new kf.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new kf.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(M4)]),this.length+=t.length}writeString(t){this.maybeResize();let r=Buffer.from(t,"utf8");this.writeU32(r.length),this.writeBuffer(r)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,r){this.maybeResize(),this.writeU32(t.length);for(let n of t)this.maybeResize(),r(n)}toArray(){return this.buf.subarray(0,this.length)}};gr.BinaryWriter=N1;function dc(e,t,r){let n=r.value;r.value=function(...i){try{return n.apply(this,i)}catch(o){if(o instanceof RangeError){let s=o.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(s)>=0)throw new hi("Reached the end of buffer when deserializing")}throw o}}}var eo=class{constructor(t){this.buf=t,this.offset=0}readU8(){let t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){let t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){let t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){let t=this.readBuffer(8);return new kf.default(t,"le")}readU128(){let t=this.readBuffer(16);return new kf.default(t,"le")}readU256(){let t=this.readBuffer(32);return new kf.default(t,"le")}readU512(){let t=this.readBuffer(64);return new kf.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new hi(`Expected buffer length ${t} isn't within bounds`);let r=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,r}readString(){let t=this.readU32(),r=this.readBuffer(t);try{return Uie.decode(r)}catch(n){throw new hi(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){let r=this.readU32(),n=Array();for(let i=0;i<r;++i)n.push(t());return n}};lc([dc],eo.prototype,"readU8",null);lc([dc],eo.prototype,"readU16",null);lc([dc],eo.prototype,"readU32",null);lc([dc],eo.prototype,"readU64",null);lc([dc],eo.prototype,"readU128",null);lc([dc],eo.prototype,"readU256",null);lc([dc],eo.prototype,"readU512",null);lc([dc],eo.prototype,"readString",null);lc([dc],eo.prototype,"readFixedArray",null);lc([dc],eo.prototype,"readArray",null);gr.BinaryReader=eo;function DD(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Wd(e,t,r,n,i){try{if(typeof n=="string")i[`write${DD(n)}`](r);else if(n instanceof Array)if(typeof n[0]=="number"){if(r.length!==n[0])throw new hi(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(n.length===2&&typeof n[1]=="number"){if(r.length!==n[1])throw new hi(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let o=0;o<n[1];o++)Wd(e,null,r[o],n[0],i)}else i.writeArray(r,o=>{Wd(e,t,o,n[0],i)});else if(n.kind!==void 0)switch(n.kind){case"option":{r==null?i.writeU8(0):(i.writeU8(1),Wd(e,t,r,n.type,i));break}case"map":{i.writeU32(r.size),r.forEach((o,s)=>{Wd(e,t,s,n.key,i),Wd(e,t,o,n.value,i)});break}default:throw new hi(`FieldType ${n} unrecognized`)}else OD(e,r,i)}catch(o){throw o instanceof hi&&o.addToFieldPath(t),o}}function OD(e,t,r){if(typeof t.borshSerialize=="function"){t.borshSerialize(r);return}let n=e.get(t.constructor);if(!n)throw new hi(`Class ${t.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([i,o])=>{Wd(e,i,t[i],o,r)});else if(n.kind==="enum"){let i=t[n.field];for(let o=0;o<n.values.length;++o){let[s,a]=n.values[o];if(s===i){r.writeU8(o),Wd(e,s,t[s],a,r);break}}}else throw new hi(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function Vie(e,t,r=N1){let n=new r;return OD(e,t,n),n.toArray()}gr.serialize=Vie;function zd(e,t,r,n){try{if(typeof r=="string")return n[`read${DD(r)}`]();if(r instanceof Array){if(typeof r[0]=="number")return n.readFixedArray(r[0]);if(typeof r[1]=="number"){let i=[];for(let o=0;o<r[1];o++)i.push(zd(e,null,r[0],n));return i}else return n.readArray(()=>zd(e,t,r[0],n))}if(r.kind==="option")return n.readU8()?zd(e,t,r.type,n):void 0;if(r.kind==="map"){let i=new Map,o=n.readU32();for(let s=0;s<o;s++){let a=zd(e,t,r.key,n),c=zd(e,t,r.value,n);i.set(a,c)}return i}return D4(e,r,n)}catch(i){throw i instanceof hi&&i.addToFieldPath(t),i}}function D4(e,t,r){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(r);let n=e.get(t);if(!n)throw new hi(`Class ${t.name} is missing in schema`);if(n.kind==="struct"){let i={};for(let[o,s]of e.get(t).fields)i[o]=zd(e,o,s,r);return new t(i)}if(n.kind==="enum"){let i=r.readU8();if(i>=n.values.length)throw new hi(`Enum index: ${i} is out of range`);let[o,s]=n.values[i],a=zd(e,o,s,r);return new t({[o]:a})}throw new hi(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function Kie(e,t,r,n=eo){let i=new n(r),o=D4(e,t,i);if(i.offset<r.length)throw new hi(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return o}gr.deserialize=Kie;function Fie(e,t,r,n=eo){let i=new n(r);return D4(e,t,i)}gr.deserializeUnchecked=Fie});var dg=W(X=>{"use strict";l();d();Object.defineProperty(X,"__esModule",{value:!0});X.s16=X.s8=X.nu64be=X.u48be=X.u40be=X.u32be=X.u24be=X.u16be=X.nu64=X.u48=X.u40=X.u32=X.u24=X.u16=X.u8=X.offset=X.greedy=X.Constant=X.UTF8=X.CString=X.Blob=X.Boolean=X.BitField=X.BitStructure=X.VariantLayout=X.Union=X.UnionLayoutDiscriminator=X.UnionDiscriminator=X.Structure=X.Sequence=X.DoubleBE=X.Double=X.FloatBE=X.Float=X.NearInt64BE=X.NearInt64=X.NearUInt64BE=X.NearUInt64=X.IntBE=X.Int=X.UIntBE=X.UInt=X.OffsetLayout=X.GreedyCount=X.ExternalLayout=X.bindConstructorLayout=X.nameWithProperty=X.Layout=X.uint8ArrayToBuffer=X.checkUint8Array=void 0;X.constant=X.utf8=X.cstr=X.blob=X.unionLayoutDiscriminator=X.union=X.seq=X.bits=X.struct=X.f64be=X.f64=X.f32be=X.f32=X.ns64be=X.s48be=X.s40be=X.s32be=X.s24be=X.s16be=X.ns64=X.s48=X.s40=X.s32=X.s24=void 0;var U4=Bn();function G0(e){if(!(e instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}X.checkUint8Array=G0;function Qt(e){return G0(e),U4.Buffer.from(e.buffer,e.byteOffset,e.length)}X.uint8ArrayToBuffer=Qt;var sr=class{constructor(t,r){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=r}makeDestinationObject(){return{}}getSpan(t,r){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){let r=Object.create(this.constructor.prototype);return Object.assign(r,this),r.property=t,r}fromArray(t){}};X.Layout=sr;function R4(e,t){return t.property?e+"["+t.property+"]":e}X.nameWithProperty=R4;function Hie(e,t){if(typeof e!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(e,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof sr))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value(r,n){return t.encode(this,r,n)},writable:!0}),Object.defineProperty(e,"decode",{value(r,n){return t.decode(r,n)},writable:!0})}X.bindConstructorLayout=Hie;var Ni=class extends sr{isCount(){throw new Error("ExternalLayout is abstract")}};X.ExternalLayout=Ni;var M1=class extends Ni{constructor(t=1,r){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,r),this.elementSpan=t}isCount(){return!0}decode(t,r=0){G0(t);let n=t.length-r;return Math.floor(n/this.elementSpan)}encode(t,r,n){return 0}};X.GreedyCount=M1;var ag=class extends Ni{constructor(t,r=0,n){if(!(t instanceof sr))throw new TypeError("layout must be a Layout");if(!Number.isInteger(r))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=r}isCount(){return this.layout instanceof Ao||this.layout instanceof qo}decode(t,r=0){return this.layout.decode(t,r+this.offset)}encode(t,r,n=0){return this.layout.encode(t,r,n+this.offset)}};X.OffsetLayout=ag;var Ao=class extends sr{constructor(t,r){if(super(t,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,r=0){return Qt(t).readUIntLE(r,this.span)}encode(t,r,n=0){return Qt(r).writeUIntLE(t,n,this.span),this.span}};X.UInt=Ao;var qo=class extends sr{constructor(t,r){if(super(t,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,r=0){return Qt(t).readUIntBE(r,this.span)}encode(t,r,n=0){return Qt(r).writeUIntBE(t,n,this.span),this.span}};X.UIntBE=qo;var mu=class extends sr{constructor(t,r){if(super(t,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,r=0){return Qt(t).readIntLE(r,this.span)}encode(t,r,n=0){return Qt(r).writeIntLE(t,n,this.span),this.span}};X.Int=mu;var Tf=class extends sr{constructor(t,r){if(super(t,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,r=0){return Qt(t).readIntBE(r,this.span)}encode(t,r,n=0){return Qt(r).writeIntBE(t,n,this.span),this.span}};X.IntBE=Tf;var O4=Math.pow(2,32);function Z1(e){let t=Math.floor(e/O4),r=e-t*O4;return{hi32:t,lo32:r}}function J1(e,t){return e*O4+t}var D1=class extends sr{constructor(t){super(8,t)}decode(t,r=0){let n=Qt(t),i=n.readUInt32LE(r),o=n.readUInt32LE(r+4);return J1(o,i)}encode(t,r,n=0){let i=Z1(t),o=Qt(r);return o.writeUInt32LE(i.lo32,n),o.writeUInt32LE(i.hi32,n+4),8}};X.NearUInt64=D1;var O1=class extends sr{constructor(t){super(8,t)}decode(t,r=0){let n=Qt(t),i=n.readUInt32BE(r),o=n.readUInt32BE(r+4);return J1(i,o)}encode(t,r,n=0){let i=Z1(t),o=Qt(r);return o.writeUInt32BE(i.hi32,n),o.writeUInt32BE(i.lo32,n+4),8}};X.NearUInt64BE=O1;var U1=class extends sr{constructor(t){super(8,t)}decode(t,r=0){let n=Qt(t),i=n.readUInt32LE(r),o=n.readInt32LE(r+4);return J1(o,i)}encode(t,r,n=0){let i=Z1(t),o=Qt(r);return o.writeUInt32LE(i.lo32,n),o.writeInt32LE(i.hi32,n+4),8}};X.NearInt64=U1;var R1=class extends sr{constructor(t){super(8,t)}decode(t,r=0){let n=Qt(t),i=n.readInt32BE(r),o=n.readUInt32BE(r+4);return J1(i,o)}encode(t,r,n=0){let i=Z1(t),o=Qt(r);return o.writeInt32BE(i.hi32,n),o.writeUInt32BE(i.lo32,n+4),8}};X.NearInt64BE=R1;var L1=class extends sr{constructor(t){super(4,t)}decode(t,r=0){return Qt(t).readFloatLE(r)}encode(t,r,n=0){return Qt(r).writeFloatLE(t,n),4}};X.Float=L1;var V1=class extends sr{constructor(t){super(4,t)}decode(t,r=0){return Qt(t).readFloatBE(r)}encode(t,r,n=0){return Qt(r).writeFloatBE(t,n),4}};X.FloatBE=V1;var K1=class extends sr{constructor(t){super(8,t)}decode(t,r=0){return Qt(t).readDoubleLE(r)}encode(t,r,n=0){return Qt(r).writeDoubleLE(t,n),8}};X.Double=K1;var F1=class extends sr{constructor(t){super(8,t)}decode(t,r=0){return Qt(t).readDoubleBE(r)}encode(t,r,n=0){return Qt(r).writeDoubleBE(t,n),8}};X.DoubleBE=F1;var H1=class extends sr{constructor(t,r,n){if(!(t instanceof sr))throw new TypeError("elementLayout must be a Layout");if(!(r instanceof Ni&&r.isCount()||Number.isInteger(r)&&0<=r))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(r instanceof Ni)&&0<t.span&&(i=r*t.span),super(i,n),this.elementLayout=t,this.count=r}getSpan(t,r=0){if(0<=this.span)return this.span;let n=0,i=this.count;if(i instanceof Ni&&(i=i.decode(t,r)),0<this.elementLayout.span)n=i*this.elementLayout.span;else{let o=0;for(;o<i;)n+=this.elementLayout.getSpan(t,r+n),++o}return n}decode(t,r=0){let n=[],i=0,o=this.count;for(o instanceof Ni&&(o=o.decode(t,r));i<o;)n.push(this.elementLayout.decode(t,r)),r+=this.elementLayout.getSpan(t,r),i+=1;return n}encode(t,r,n=0){let i=this.elementLayout,o=t.reduce((s,a)=>s+i.encode(a,r,n+s),0);return this.count instanceof Ni&&this.count.encode(t.length,r,n),o}};X.Sequence=H1;var q1=class extends sr{constructor(t,r,n){if(!(Array.isArray(t)&&t.reduce((o,s)=>o&&s instanceof sr,!0)))throw new TypeError("fields must be array of Layout instances");typeof r=="boolean"&&n===void 0&&(n=r,r=void 0);for(let o of t)if(0>o.span&&o.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=t.reduce((o,s)=>o+s.getSpan(),0)}catch{}super(i,r),this.fields=t,this.decodePrefixes=!!n}getSpan(t,r=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((i,o)=>{let s=o.getSpan(t,r);return r+=s,i+s},0)}catch{throw new RangeError("indeterminate span")}return n}decode(t,r=0){G0(t);let n=this.makeDestinationObject();for(let i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(t,r)),r+=i.getSpan(t,r),this.decodePrefixes&&t.length===r)break;return n}encode(t,r,n=0){let i=n,o=0,s=0;for(let a of this.fields){let c=a.span;if(s=0<c?c:0,a.property!==void 0){let u=t[a.property];u!==void 0&&(s=a.encode(u,r,n),0>c&&(c=a.getSpan(r,n)))}o=n,n+=c}return o+s-i}fromArray(t){let r=this.makeDestinationObject();for(let n of this.fields)n.property!==void 0&&0<t.length&&(r[n.property]=t.shift());return r}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(let r of this.fields)if(r.property===t)return r}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let r=0;for(let n of this.fields){if(n.property===t)return r;0>n.span?r=-1:0<=r&&(r+=n.span)}}};X.Structure=q1;var cg=class{constructor(t){this.property=t}decode(t,r){throw new Error("UnionDiscriminator is abstract")}encode(t,r,n){throw new Error("UnionDiscriminator is abstract")}};X.UnionDiscriminator=cg;var z0=class extends cg{constructor(t,r){if(!(t instanceof Ni&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(r||t.property||"variant"),this.layout=t}decode(t,r){return this.layout.decode(t,r)}encode(t,r,n){return this.layout.encode(t,r,n)}};X.UnionLayoutDiscriminator=z0;var ug=class extends sr{constructor(t,r,n){let i;if(t instanceof Ao||t instanceof qo)i=new z0(new ag(t));else if(t instanceof Ni&&t.isCount())i=new z0(t);else if(t instanceof cg)i=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(r===void 0&&(r=null),!(r===null||r instanceof sr))throw new TypeError("defaultLayout must be null or a Layout");if(r!==null){if(0>r.span)throw new Error("defaultLayout must have constant span");r.property===void 0&&(r=r.replicate("content"))}let o=-1;r&&(o=r.span,0<=o&&(t instanceof Ao||t instanceof qo)&&(o+=i.layout.span)),super(o,n),this.discriminator=i,this.usesPrefixDiscriminator=t instanceof Ao||t instanceof qo,this.defaultLayout=r,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return s(a)},this.configGetSourceVariant=function(a){s=a.bind(this)}}getSpan(t,r=0){if(0<=this.span)return this.span;let n=this.getVariant(t,r);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,r)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;let r=this.registry[t[this.discriminator.property]];if(r&&(!r.layout||r.property&&Object.prototype.hasOwnProperty.call(t,r.property)))return r}else for(let r in this.registry){let n=this.registry[r];if(n.property&&Object.prototype.hasOwnProperty.call(t,n.property))return n}throw new Error("unable to infer src variant")}decode(t,r=0){let n,i=this.discriminator,o=i.decode(t,r),s=this.registry[o];if(s===void 0){let a=this.defaultLayout,c=0;this.usesPrefixDiscriminator&&(c=i.layout.span),n=this.makeDestinationObject(),n[i.property]=o,n[a.property]=a.decode(t,r+c)}else n=s.decode(t,r);return n}encode(t,r,n=0){let i=this.getSourceVariant(t);if(i===void 0){let o=this.discriminator,s=this.defaultLayout,a=0;return this.usesPrefixDiscriminator&&(a=o.layout.span),o.encode(t[o.property],r,n),a+s.encode(t[s.property],r,n+a)}return i.encode(t,r,n)}addVariant(t,r,n){let i=new j1(this,t,r,n);return this.registry[t]=i,i}getVariant(t,r=0){let n;return t instanceof Uint8Array?n=this.discriminator.decode(t,r):n=t,this.registry[n]}};X.Union=ug;var j1=class extends sr{constructor(t,r,n,i){if(!(t instanceof ug))throw new TypeError("union must be a Union");if(!Number.isInteger(r)||0>r)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&i===void 0&&(i=n,n=null),n){if(!(n instanceof sr))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let o=t.span;0>t.span&&(o=n?n.span:0,0<=o&&t.usesPrefixDiscriminator&&(o+=t.discriminator.layout.span)),super(o,i),this.union=t,this.variant=r,this.layout=n||null}getSpan(t,r=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(t,r+n)),n+i}decode(t,r=0){let n=this.makeDestinationObject();if(this!==this.union.getVariant(t,r))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,r+i):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,r,n=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,r,n);let o=i;if(this.layout&&(this.layout.encode(t[this.property],r,n+i),o+=this.layout.getSpan(r,n+i),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(t){if(this.layout)return this.layout.fromArray(t)}};X.VariantLayout=j1;function W0(e){return 0>e&&(e+=4294967296),e}var fg=class extends sr{constructor(t,r,n){if(!(t instanceof Ao||t instanceof qo))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof r=="string"&&n===void 0&&(n=r,r=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,n),this.word=t,this.msb=!!r,this.fields=[];let i=0;this._packedSetValue=function(o){return i=W0(o),this},this._packedGetValue=function(){return i}}decode(t,r=0){let n=this.makeDestinationObject(),i=this.word.decode(t,r);this._packedSetValue(i);for(let o of this.fields)o.property!==void 0&&(n[o.property]=o.decode(t));return n}encode(t,r,n=0){let i=this.word.decode(r,n);this._packedSetValue(i);for(let o of this.fields)if(o.property!==void 0){let s=t[o.property];s!==void 0&&o.encode(s)}return this.word.encode(this._packedGetValue(),r,n)}addField(t,r){let n=new lg(this,t,r);return this.fields.push(n),n}addBoolean(t){let r=new W1(this,t);return this.fields.push(r),r}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(let r of this.fields)if(r.property===t)return r}};X.BitStructure=fg;var lg=class{constructor(t,r,n){if(!(t instanceof fg))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(r)||0>=r)throw new TypeError("bits must be positive integer");let i=8*t.span,o=t.fields.reduce((s,a)=>s+a.bits,0);if(r+o>i)throw new Error("bits too long for span remainder ("+(i-o)+" of "+i+" remain)");this.container=t,this.bits=r,this.valueMask=(1<<r)-1,r===32&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=i-o-r),this.wordMask=W0(this.valueMask<<this.start),this.property=n}decode(t,r){let n=this.container._packedGetValue();return W0(n&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==W0(t&this.valueMask))throw new TypeError(R4("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let r=this.container._packedGetValue(),n=W0(t<<this.start);this.container._packedSetValue(W0(r&~this.wordMask)|n)}};X.BitField=lg;var W1=class extends lg{constructor(t,r){super(t,1,r)}decode(t,r){return!!super.decode(t,r)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};X.Boolean=W1;var z1=class extends sr{constructor(t,r){if(!(t instanceof Ni&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof Ni||(n=t),super(n,r),this.length=t}getSpan(t,r){let n=this.span;return 0>n&&(n=this.length.decode(t,r)),n}decode(t,r=0){let n=this.span;return 0>n&&(n=this.length.decode(t,r)),Qt(t).slice(r,r+n)}encode(t,r,n){let i=this.length;if(this.length instanceof Ni&&(i=t.length),!(t instanceof Uint8Array&&i===t.length))throw new TypeError(R4("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(n+i>r.length)throw new RangeError("encoding overruns Uint8Array");let o=Qt(t);return Qt(r).write(o.toString("hex"),n,i,"hex"),this.length instanceof Ni&&this.length.encode(i,r,n),i}};X.Blob=z1;var G1=class extends sr{constructor(t){super(-1,t)}getSpan(t,r=0){G0(t);let n=r;for(;n<t.length&&t[n]!==0;)n+=1;return 1+n-r}decode(t,r=0){let n=this.getSpan(t,r);return Qt(t).slice(r,r+n-1).toString("utf-8")}encode(t,r,n=0){typeof t!="string"&&(t=String(t));let i=U4.Buffer.from(t,"utf8"),o=i.length;if(n+o>r.length)throw new RangeError("encoding overruns Buffer");let s=Qt(r);return i.copy(s,n),s[n+o]=0,o+1}};X.CString=G1;var $1=class extends sr{constructor(t,r){if(typeof t=="string"&&r===void 0&&(r=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,r),this.maxSpan=t}getSpan(t,r=0){return G0(t),t.length-r}decode(t,r=0){let n=this.getSpan(t,r);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return Qt(t).slice(r,r+n).toString("utf-8")}encode(t,r,n=0){typeof t!="string"&&(t=String(t));let i=U4.Buffer.from(t,"utf8"),o=i.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(n+o>r.length)throw new RangeError("encoding overruns Buffer");return i.copy(Qt(r),n),o}};X.UTF8=$1;var Y1=class extends sr{constructor(t,r){super(0,r),this.value=t}decode(t,r){return this.value}encode(t,r,n){return 0}};X.Constant=Y1;X.greedy=(e,t)=>new M1(e,t);X.offset=(e,t,r)=>new ag(e,t,r);X.u8=e=>new Ao(1,e);X.u16=e=>new Ao(2,e);X.u24=e=>new Ao(3,e);X.u32=e=>new Ao(4,e);X.u40=e=>new Ao(5,e);X.u48=e=>new Ao(6,e);X.nu64=e=>new D1(e);X.u16be=e=>new qo(2,e);X.u24be=e=>new qo(3,e);X.u32be=e=>new qo(4,e);X.u40be=e=>new qo(5,e);X.u48be=e=>new qo(6,e);X.nu64be=e=>new O1(e);X.s8=e=>new mu(1,e);X.s16=e=>new mu(2,e);X.s24=e=>new mu(3,e);X.s32=e=>new mu(4,e);X.s40=e=>new mu(5,e);X.s48=e=>new mu(6,e);X.ns64=e=>new U1(e);X.s16be=e=>new Tf(2,e);X.s24be=e=>new Tf(3,e);X.s32be=e=>new Tf(4,e);X.s40be=e=>new Tf(5,e);X.s48be=e=>new Tf(6,e);X.ns64be=e=>new R1(e);X.f32=e=>new L1(e);X.f32be=e=>new V1(e);X.f64=e=>new K1(e);X.f64be=e=>new F1(e);X.struct=(e,t,r)=>new q1(e,t,r);X.bits=(e,t,r)=>new fg(e,t,r);X.seq=(e,t,r)=>new H1(e,t,r);X.union=(e,t,r)=>new ug(e,t,r);X.unionLayoutDiscriminator=(e,t)=>new z0(e,t);X.blob=(e,t)=>new z1(e,t);X.cstr=e=>new G1(e);X.utf8=(e,t)=>new $1(e,t);X.constant=(e,t)=>new Y1(e,t)});var L4=W($0=>{"use strict";l();d();Object.defineProperty($0,"__esModule",{value:!0});var X1;function qie(e){{let t=Buffer.from(e);t.reverse();let r=t.toString("hex");return r.length===0?BigInt(0):BigInt(`0x${r}`)}return X1.toBigInt(e,!1)}$0.toBigIntLE=qie;function jie(e){{let t=e.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}return X1.toBigInt(e,!0)}$0.toBigIntBE=jie;function Wie(e,t){{let r=e.toString(16),n=Buffer.from(r.padStart(t*2,"0").slice(0,t*2),"hex");return n.reverse(),n}return X1.fromBigInt(e,Buffer.allocUnsafe(t),!1)}$0.toBufferLE=Wie;function zie(e,t){{let r=e.toString(16);return Buffer.from(r.padStart(t*2,"0").slice(0,t*2),"hex")}return X1.fromBigInt(e,Buffer.allocUnsafe(t),!0)}$0.toBufferBE=zie});var jD=W(Me=>{"use strict";l();d();Object.defineProperty(Me,"__esModule",{value:!0});var Q1=class extends TypeError{constructor(t,r){let n,{message:i,...o}=t,{path:s}=t,a=s.length===0?i:"At path: "+s.join(".")+" -- "+i;super(a),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>{var c;return(c=n)!=null?c:n=[t,...r()]}}};function Gie(e){return va(e)&&typeof e[Symbol.iterator]=="function"}function va(e){return typeof e=="object"&&e!=null}function RD(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function Cn(e){return typeof e=="string"?JSON.stringify(e):""+e}function $ie(e){let{done:t,value:r}=e.next();return t?void 0:r}function Yie(e,t,r,n){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});let{path:i,branch:o}=t,{type:s}=r,{refinement:a,message:c="Expected a value of type `"+s+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+Cn(n)+"`"}=e;return{value:n,type:s,refinement:a,key:i[i.length-1],path:i,branch:o,...e,message:c}}function*V4(e,t,r,n){Gie(e)||(e=[e]);for(let i of e){let o=Yie(i,t,r,n);o&&(yield o)}}function*K4(e,t,r={}){let{path:n=[],branch:i=[e],coerce:o=!1,mask:s=!1}=r,a={path:n,branch:i};if(o&&(e=t.coercer(e,a),s&&t.type!=="type"&&va(t.schema)&&va(e)&&!Array.isArray(e)))for(let u in e)t.schema[u]===void 0&&delete e[u];let c=!0;for(let u of t.validator(e,a))c=!1,yield[u,void 0];for(let[u,h,f]of t.entries(e,a)){let m=K4(h,f,{path:u===void 0?n:[...n,u],branch:u===void 0?i:[...i,h],coerce:o,mask:s});for(let b of m)b[0]?(c=!1,yield[b[0],void 0]):o&&(h=b[1],u===void 0?e=h:e instanceof Map?e.set(u,h):e instanceof Set?e.add(h):va(e)&&(e[u]=h))}if(c)for(let u of t.refiner(e,a))c=!1,yield[u,void 0];c&&(yield[void 0,e])}var Xr=class{constructor(t){let{type:r,schema:n,validator:i,refiner:o,coercer:s=c=>c,entries:a=function*(){}}=t;this.type=r,this.schema=n,this.entries=a,this.coercer=s,i?this.validator=(c,u)=>{let h=i(c,u);return V4(h,u,this,c)}:this.validator=()=>[],o?this.refiner=(c,u)=>{let h=o(c,u);return V4(h,u,this,c)}:this.refiner=()=>[]}assert(t){return LD(t,this)}create(t){return VD(t,this)}is(t){return F4(t,this)}mask(t){return KD(t,this)}validate(t,r={}){return Y0(t,this,r)}};function LD(e,t){let r=Y0(e,t);if(r[0])throw r[0]}function VD(e,t){let r=Y0(e,t,{coerce:!0});if(r[0])throw r[0];return r[1]}function KD(e,t){let r=Y0(e,t,{coerce:!0,mask:!0});if(r[0])throw r[0];return r[1]}function F4(e,t){return!Y0(e,t)[0]}function Y0(e,t,r={}){let n=K4(e,t,r),i=$ie(n);return i[0]?[new Q1(i[0],function*(){for(let s of n)s[0]&&(yield s[0])}),void 0]:[void 0,i[1]]}function Zie(...e){let t=e.map(n=>n.schema),r=Object.assign({},...t);return hg(r)}function jo(e,t){return new Xr({type:e,schema:null,validator:t})}function Jie(e,t){return new Xr({...e,refiner:(r,n)=>r===void 0||e.refiner(r,n),validator(r,n){return r===void 0?!0:(t(r,n),e.validator(r,n))}})}function Xie(e){return new Xr({type:"dynamic",schema:null,*entries(t,r){yield*e(t,r).entries(t,r)},validator(t,r){return e(t,r).validator(t,r)},coercer(t,r){return e(t,r).coercer(t,r)}})}function Qie(e){let t;return new Xr({type:"lazy",schema:null,*entries(r,n){var i;(i=t)!=null||(t=e()),yield*t.entries(r,n)},validator(r,n){var i;return(i=t)!=null||(t=e()),t.validator(r,n)},coercer(r,n){var i;return(i=t)!=null||(t=e()),t.coercer(r,n)}})}function eoe(e,t){let{schema:r}=e,n={...r};for(let i of t)delete n[i];return hg(n)}function toe(e){let t=e instanceof Xr?{...e.schema}:{...e};for(let r in t)t[r]=FD(t[r]);return hg(t)}function roe(e,t){let{schema:r}=e,n={};for(let i of t)n[i]=r[i];return hg(n)}function noe(e,t){return console.warn("superstruct@0.11 - The `struct` helper has been renamed to `define`."),jo(e,t)}function ioe(){return jo("any",()=>!0)}function ooe(e){return new Xr({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(let[r,n]of t.entries())yield[r,n,e]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+Cn(t)}})}function soe(){return jo("boolean",e=>typeof e=="boolean")}function aoe(){return jo("date",e=>e instanceof Date&&!isNaN(e.getTime())||"Expected a valid `Date` object, but received: "+Cn(e))}function coe(e){let t={},r=e.map(n=>Cn(n)).join();for(let n of e)t[n]=n;return new Xr({type:"enums",schema:t,validator(n){return e.includes(n)||"Expected one of `"+r+"`, but received: "+Cn(n)}})}function uoe(){return jo("func",e=>typeof e=="function"||"Expected a function, but received: "+Cn(e))}function foe(e){return jo("instance",t=>t instanceof e||"Expected a `"+e.name+"` instance, but received: "+Cn(t))}function loe(){return jo("integer",e=>typeof e=="number"&&!isNaN(e)&&Number.isInteger(e)||"Expected an integer, but received: "+Cn(e))}function doe(e){return new Xr({type:"intersection",schema:null,*entries(t,r){for(let n of e)yield*n.entries(t,r)},*validator(t,r){for(let n of e)yield*n.validator(t,r)},*refiner(t,r){for(let n of e)yield*n.refiner(t,r)}})}function hoe(e){let t=Cn(e),r=typeof e;return new Xr({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?e:null,validator(n){return n===e||"Expected the literal `"+t+"`, but received: "+Cn(n)}})}function poe(e,t){return new Xr({type:"map",schema:null,*entries(r){if(e&&t&&r instanceof Map)for(let[n,i]of r.entries())yield[n,n,e],yield[n,i,t]},coercer(r){return r instanceof Map?new Map(r):r},validator(r){return r instanceof Map||"Expected a `Map` object, but received: "+Cn(r)}})}function H4(){return jo("never",()=>!1)}function yoe(e){return new Xr({...e,validator:(t,r)=>t===null||e.validator(t,r),refiner:(t,r)=>t===null||e.refiner(t,r)})}function moe(){return jo("number",e=>typeof e=="number"&&!isNaN(e)||"Expected a number, but received: "+Cn(e))}function hg(e){let t=e?Object.keys(e):[],r=H4();return new Xr({type:"object",schema:e||null,*entries(n){if(e&&va(n)){let i=new Set(Object.keys(n));for(let o of t)i.delete(o),yield[o,n[o],e[o]];for(let o of i)yield[o,n[o],r]}},validator(n){return va(n)||"Expected an object, but received: "+Cn(n)},coercer(n){return va(n)?{...n}:n}})}function FD(e){return new Xr({...e,validator:(t,r)=>t===void 0||e.validator(t,r),refiner:(t,r)=>t===void 0||e.refiner(t,r)})}function goe(e,t){return new Xr({type:"record",schema:null,*entries(r){if(va(r))for(let n in r){let i=r[n];yield[n,n,e],yield[n,i,t]}},validator(r){return va(r)||"Expected an object, but received: "+Cn(r)}})}function boe(){return jo("regexp",e=>e instanceof RegExp)}function xoe(e){return new Xr({type:"set",schema:null,*entries(t){if(e&&t instanceof Set)for(let r of t)yield[r,r,e]},coercer(t){return t instanceof Set?new Set(t):t},validator(t){return t instanceof Set||"Expected a `Set` object, but received: "+Cn(t)}})}function HD(){return jo("string",e=>typeof e=="string"||"Expected a string, but received: "+Cn(e))}function woe(e){let t=H4();return new Xr({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){let n=Math.max(e.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],e[i]||t]}},validator(r){return Array.isArray(r)||"Expected an array, but received: "+Cn(r)}})}function Soe(e){let t=Object.keys(e);return new Xr({type:"type",schema:e,*entries(r){if(va(r))for(let n of t)yield[n,r[n],e[n]]},validator(r){return va(r)||"Expected an object, but received: "+Cn(r)}})}function voe(e){let t=e.map(r=>r.type).join(" | ");return new Xr({type:"union",schema:null,validator(r,n){let i=[];for(let o of e){let[...s]=K4(r,o,n),[a]=s;if(a[0])for(let[c]of s)c&&i.push(c);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+Cn(r),...i]}})}function qD(){return jo("unknown",()=>!0)}function q4(e,t,r){return new Xr({...e,coercer:(n,i)=>F4(n,t)?e.coercer(r(n,i),i):e.coercer(n,i)})}function Aoe(e,t,r={}){return q4(e,qD(),n=>{let i=typeof t=="function"?t():t;if(n===void 0)return i;if(!r.strict&&RD(n)&&RD(i)){let o={...n},s=!1;for(let a in i)o[a]===void 0&&(o[a]=i[a],s=!0);if(s)return o}return n})}function Eoe(e){return q4(e,HD(),t=>t.trim())}function Ioe(e){let t="Expected an empty "+e.type;return Z0(e,"empty",r=>{if(r instanceof Map||r instanceof Set){let{size:n}=r;return n===0||t+" but received one with a size of `"+n+"`"}else{let{length:n}=r;return n===0||t+" but received one with a length of `"+n+"`"}})}function koe(e,t,r={}){let{exclusive:n}=r;return Z0(e,"max",i=>n?i<t:i<=t||"Expected a "+e.type+" greater than "+(n?"":"or equal to ")+t+" but received `"+i+"`")}function Toe(e,t,r={}){let{exclusive:n}=r;return Z0(e,"min",i=>n?i>t:i>=t||"Expected a "+e.type+" greater than "+(n?"":"or equal to ")+t+" but received `"+i+"`")}function Poe(e,t){return Z0(e,"pattern",r=>t.test(r)||"Expected a "+e.type+" matching `/"+t.source+'/` but received "'+r+'"')}function Boe(e,t,r=t){let n="Expected a "+e.type,i=t===r?"of `"+t+"`":"between `"+t+"` and `"+r+"`";return Z0(e,"size",o=>{if(typeof o=="number"||o instanceof Date)return t<=o&&o<=r||n+" "+i+" but received `"+o+"`";if(o instanceof Map||o instanceof Set){let{size:s}=o;return t<=s&&s<=r||n+" with a size "+i+" but received one with a size of `"+s+"`"}else{let{length:s}=o;return t<=s&&s<=r||n+" with a length "+i+" but received one with a length of `"+s+"`"}})}function Z0(e,t,r){return new Xr({...e,*refiner(n,i){yield*e.refiner(n,i);let o=r(n,i),s=V4(o,i,e,n);for(let a of s)yield{...a,refinement:t}}})}Me.Struct=Xr;Me.StructError=Q1;Me.any=ioe;Me.array=ooe;Me.assert=LD;Me.assign=Zie;Me.boolean=soe;Me.coerce=q4;Me.create=VD;Me.date=aoe;Me.defaulted=Aoe;Me.define=jo;Me.deprecated=Jie;Me.dynamic=Xie;Me.empty=Ioe;Me.enums=coe;Me.func=uoe;Me.instance=foe;Me.integer=loe;Me.intersection=doe;Me.is=F4;Me.lazy=Qie;Me.literal=hoe;Me.map=poe;Me.mask=KD;Me.max=koe;Me.min=Toe;Me.never=H4;Me.nullable=yoe;Me.number=moe;Me.object=hg;Me.omit=eoe;Me.optional=FD;Me.partial=toe;Me.pattern=Poe;Me.pick=roe;Me.record=goe;Me.refine=Z0;Me.regexp=boe;Me.set=xoe;Me.size=Boe;Me.string=HD;Me.struct=noe;Me.trimmed=Eoe;Me.tuple=woe;Me.type=Soe;Me.union=voe;Me.unknown=qD;Me.validate=Y0});var W4=W(j4=>{"use strict";l();d();Object.defineProperty(j4,"__esModule",{value:!0});j4.default=Coe;var e2,_oe=new Uint8Array(16);function Coe(){if(!e2&&(e2=typeof self.crypto<"u"&&self.crypto.getRandomValues&&self.crypto.getRandomValues.bind(self.crypto),!e2))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e2(_oe)}});var WD=W(t2=>{"use strict";l();d();Object.defineProperty(t2,"__esModule",{value:!0});t2.default=void 0;var Noe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;t2.default=Noe});var pg=W(r2=>{"use strict";l();d();Object.defineProperty(r2,"__esModule",{value:!0});r2.default=void 0;var Moe=Doe(WD());function Doe(e){return e&&e.__esModule?e:{default:e}}function Ooe(e){return typeof e=="string"&&Moe.default.test(e)}var Uoe=Ooe;r2.default=Uoe});var mg=W(yg=>{"use strict";l();d();Object.defineProperty(yg,"__esModule",{value:!0});yg.default=void 0;yg.unsafeStringify=zD;var Roe=Loe(pg());function Loe(e){return e&&e.__esModule?e:{default:e}}var pi=[];for(let e=0;e<256;++e)pi.push((e+256).toString(16).slice(1));function zD(e,t=0){return pi[e[t+0]]+pi[e[t+1]]+pi[e[t+2]]+pi[e[t+3]]+"-"+pi[e[t+4]]+pi[e[t+5]]+"-"+pi[e[t+6]]+pi[e[t+7]]+"-"+pi[e[t+8]]+pi[e[t+9]]+"-"+pi[e[t+10]]+pi[e[t+11]]+pi[e[t+12]]+pi[e[t+13]]+pi[e[t+14]]+pi[e[t+15]]}function Voe(e,t=0){let r=zD(e,t);if(!(0,Roe.default)(r))throw TypeError("Stringified UUID is invalid");return r}var Koe=Voe;yg.default=Koe});var $D=W(n2=>{"use strict";l();d();Object.defineProperty(n2,"__esModule",{value:!0});n2.default=void 0;var Foe=qoe(W4()),Hoe=mg();function qoe(e){return e&&e.__esModule?e:{default:e}}var GD,z4,G4=0,$4=0;function joe(e,t,r){let n=t&&r||0,i=t||new Array(16);e=e||{};let o=e.node||GD,s=e.clockseq!==void 0?e.clockseq:z4;if(o==null||s==null){let m=e.random||(e.rng||Foe.default)();o==null&&(o=GD=[m[0]|1,m[1],m[2],m[3],m[4],m[5]]),s==null&&(s=z4=(m[6]<<8|m[7])&16383)}let a=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:$4+1,u=a-G4+(c-$4)/1e4;if(u<0&&e.clockseq===void 0&&(s=s+1&16383),(u<0||a>G4)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");G4=a,$4=c,z4=s,a+=122192928e5;let h=((a&268435455)*1e4+c)%4294967296;i[n++]=h>>>24&255,i[n++]=h>>>16&255,i[n++]=h>>>8&255,i[n++]=h&255;let f=a/4294967296*1e4&268435455;i[n++]=f>>>8&255,i[n++]=f&255,i[n++]=f>>>24&15|16,i[n++]=f>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let m=0;m<6;++m)i[n+m]=o[m];return t||(0,Hoe.unsafeStringify)(i)}var Woe=joe;n2.default=Woe});var Y4=W(i2=>{"use strict";l();d();Object.defineProperty(i2,"__esModule",{value:!0});i2.default=void 0;var zoe=Goe(pg());function Goe(e){return e&&e.__esModule?e:{default:e}}function $oe(e){if(!(0,zoe.default)(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var Yoe=$oe;i2.default=Yoe});var Z4=W(Gd=>{"use strict";l();d();Object.defineProperty(Gd,"__esModule",{value:!0});Gd.URL=Gd.DNS=void 0;Gd.default=ese;var Zoe=mg(),Joe=Xoe(Y4());function Xoe(e){return e&&e.__esModule?e:{default:e}}function Qoe(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var YD="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Gd.DNS=YD;var ZD="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Gd.URL=ZD;function ese(e,t,r){function n(i,o,s,a){var c;if(typeof i=="string"&&(i=Qoe(i)),typeof o=="string"&&(o=(0,Joe.default)(o)),((c=o)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=r(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,s){a=a||0;for(let h=0;h<16;++h)s[a+h]=u[h];return s}return(0,Zoe.unsafeStringify)(u)}try{n.name=e}catch{}return n.DNS=YD,n.URL=ZD,n}});var XD=W(s2=>{"use strict";l();d();Object.defineProperty(s2,"__esModule",{value:!0});s2.default=void 0;function tse(e){if(typeof e=="string"){let t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return rse(nse(ise(e),e.length*8))}function rse(e){let t=[],r=e.length*32,n="0123456789abcdef";for(let i=0;i<r;i+=8){let o=e[i>>5]>>>i%32&255,s=parseInt(n.charAt(o>>>4&15)+n.charAt(o&15),16);t.push(s)}return t}function JD(e){return(e+64>>>9<<4)+14+1}function nse(e,t){e[t>>5]|=128<<t%32,e[JD(t)-1]=t;let r=1732584193,n=-271733879,i=-1732584194,o=271733878;for(let s=0;s<e.length;s+=16){let a=r,c=n,u=i,h=o;r=Mi(r,n,i,o,e[s],7,-680876936),o=Mi(o,r,n,i,e[s+1],12,-389564586),i=Mi(i,o,r,n,e[s+2],17,606105819),n=Mi(n,i,o,r,e[s+3],22,-1044525330),r=Mi(r,n,i,o,e[s+4],7,-176418897),o=Mi(o,r,n,i,e[s+5],12,1200080426),i=Mi(i,o,r,n,e[s+6],17,-1473231341),n=Mi(n,i,o,r,e[s+7],22,-45705983),r=Mi(r,n,i,o,e[s+8],7,1770035416),o=Mi(o,r,n,i,e[s+9],12,-1958414417),i=Mi(i,o,r,n,e[s+10],17,-42063),n=Mi(n,i,o,r,e[s+11],22,-1990404162),r=Mi(r,n,i,o,e[s+12],7,1804603682),o=Mi(o,r,n,i,e[s+13],12,-40341101),i=Mi(i,o,r,n,e[s+14],17,-1502002290),n=Mi(n,i,o,r,e[s+15],22,1236535329),r=Di(r,n,i,o,e[s+1],5,-165796510),o=Di(o,r,n,i,e[s+6],9,-1069501632),i=Di(i,o,r,n,e[s+11],14,643717713),n=Di(n,i,o,r,e[s],20,-373897302),r=Di(r,n,i,o,e[s+5],5,-701558691),o=Di(o,r,n,i,e[s+10],9,38016083),i=Di(i,o,r,n,e[s+15],14,-660478335),n=Di(n,i,o,r,e[s+4],20,-405537848),r=Di(r,n,i,o,e[s+9],5,568446438),o=Di(o,r,n,i,e[s+14],9,-1019803690),i=Di(i,o,r,n,e[s+3],14,-187363961),n=Di(n,i,o,r,e[s+8],20,1163531501),r=Di(r,n,i,o,e[s+13],5,-1444681467),o=Di(o,r,n,i,e[s+2],9,-51403784),i=Di(i,o,r,n,e[s+7],14,1735328473),n=Di(n,i,o,r,e[s+12],20,-1926607734),r=Oi(r,n,i,o,e[s+5],4,-378558),o=Oi(o,r,n,i,e[s+8],11,-2022574463),i=Oi(i,o,r,n,e[s+11],16,1839030562),n=Oi(n,i,o,r,e[s+14],23,-35309556),r=Oi(r,n,i,o,e[s+1],4,-1530992060),o=Oi(o,r,n,i,e[s+4],11,1272893353),i=Oi(i,o,r,n,e[s+7],16,-155497632),n=Oi(n,i,o,r,e[s+10],23,-1094730640),r=Oi(r,n,i,o,e[s+13],4,681279174),o=Oi(o,r,n,i,e[s],11,-358537222),i=Oi(i,o,r,n,e[s+3],16,-722521979),n=Oi(n,i,o,r,e[s+6],23,76029189),r=Oi(r,n,i,o,e[s+9],4,-640364487),o=Oi(o,r,n,i,e[s+12],11,-421815835),i=Oi(i,o,r,n,e[s+15],16,530742520),n=Oi(n,i,o,r,e[s+2],23,-995338651),r=Ui(r,n,i,o,e[s],6,-198630844),o=Ui(o,r,n,i,e[s+7],10,1126891415),i=Ui(i,o,r,n,e[s+14],15,-1416354905),n=Ui(n,i,o,r,e[s+5],21,-57434055),r=Ui(r,n,i,o,e[s+12],6,1700485571),o=Ui(o,r,n,i,e[s+3],10,-1894986606),i=Ui(i,o,r,n,e[s+10],15,-1051523),n=Ui(n,i,o,r,e[s+1],21,-2054922799),r=Ui(r,n,i,o,e[s+8],6,1873313359),o=Ui(o,r,n,i,e[s+15],10,-30611744),i=Ui(i,o,r,n,e[s+6],15,-1560198380),n=Ui(n,i,o,r,e[s+13],21,1309151649),r=Ui(r,n,i,o,e[s+4],6,-145523070),o=Ui(o,r,n,i,e[s+11],10,-1120210379),i=Ui(i,o,r,n,e[s+2],15,718787259),n=Ui(n,i,o,r,e[s+9],21,-343485551),r=Pf(r,a),n=Pf(n,c),i=Pf(i,u),o=Pf(o,h)}return[r,n,i,o]}function ise(e){if(e.length===0)return[];let t=e.length*8,r=new Uint32Array(JD(t));for(let n=0;n<t;n+=8)r[n>>5]|=(e[n/8]&255)<<n%32;return r}function Pf(e,t){let r=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(r>>16)<<16|r&65535}function ose(e,t){return e<<t|e>>>32-t}function o2(e,t,r,n,i,o){return Pf(ose(Pf(Pf(t,e),Pf(n,o)),i),r)}function Mi(e,t,r,n,i,o,s){return o2(t&r|~t&n,e,t,i,o,s)}function Di(e,t,r,n,i,o,s){return o2(t&n|r&~n,e,t,i,o,s)}function Oi(e,t,r,n,i,o,s){return o2(t^r^n,e,t,i,o,s)}function Ui(e,t,r,n,i,o,s){return o2(r^(t|~n),e,t,i,o,s)}var sse=tse;s2.default=sse});var eO=W(a2=>{"use strict";l();d();Object.defineProperty(a2,"__esModule",{value:!0});a2.default=void 0;var ase=QD(Z4()),cse=QD(XD());function QD(e){return e&&e.__esModule?e:{default:e}}var use=(0,ase.default)("v3",48,cse.default),fse=use;a2.default=fse});var tO=W(c2=>{"use strict";l();d();Object.defineProperty(c2,"__esModule",{value:!0});c2.default=void 0;var lse=typeof self.crypto<"u"&&self.crypto.randomUUID&&self.crypto.randomUUID.bind(self.crypto),dse={randomUUID:lse};c2.default=dse});var iO=W(u2=>{"use strict";l();d();Object.defineProperty(u2,"__esModule",{value:!0});u2.default=void 0;var rO=nO(tO()),hse=nO(W4()),pse=mg();function nO(e){return e&&e.__esModule?e:{default:e}}function yse(e,t,r){if(rO.default.randomUUID&&!t&&!e)return rO.default.randomUUID();e=e||{};let n=e.random||(e.rng||hse.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return(0,pse.unsafeStringify)(n)}var mse=yse;u2.default=mse});var oO=W(f2=>{"use strict";l();d();Object.defineProperty(f2,"__esModule",{value:!0});f2.default=void 0;function gse(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function J4(e,t){return e<<t|e>>>32-t}function bse(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let s=unescape(encodeURIComponent(e));e=[];for(let a=0;a<s.length;++a)e.push(s.charCodeAt(a))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,i=Math.ceil(n/16),o=new Array(i);for(let s=0;s<i;++s){let a=new Uint32Array(16);for(let c=0;c<16;++c)a[c]=e[s*64+c*4]<<24|e[s*64+c*4+1]<<16|e[s*64+c*4+2]<<8|e[s*64+c*4+3];o[s]=a}o[i-1][14]=(e.length-1)*8/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=(e.length-1)*8&4294967295;for(let s=0;s<i;++s){let a=new Uint32Array(80);for(let b=0;b<16;++b)a[b]=o[s][b];for(let b=16;b<80;++b)a[b]=J4(a[b-3]^a[b-8]^a[b-14]^a[b-16],1);let c=r[0],u=r[1],h=r[2],f=r[3],m=r[4];for(let b=0;b<80;++b){let w=Math.floor(b/20),S=J4(c,5)+gse(w,u,h,f)+m+t[w]+a[b]>>>0;m=f,f=h,h=J4(u,30)>>>0,u=c,c=S}r[0]=r[0]+c>>>0,r[1]=r[1]+u>>>0,r[2]=r[2]+h>>>0,r[3]=r[3]+f>>>0,r[4]=r[4]+m>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var xse=bse;f2.default=xse});var aO=W(l2=>{"use strict";l();d();Object.defineProperty(l2,"__esModule",{value:!0});l2.default=void 0;var wse=sO(Z4()),Sse=sO(oO());function sO(e){return e&&e.__esModule?e:{default:e}}var vse=(0,wse.default)("v5",80,Sse.default),Ase=vse;l2.default=Ase});var cO=W(d2=>{"use strict";l();d();Object.defineProperty(d2,"__esModule",{value:!0});d2.default=void 0;var Ese="00000000-0000-0000-0000-000000000000";d2.default=Ese});var uO=W(h2=>{"use strict";l();d();Object.defineProperty(h2,"__esModule",{value:!0});h2.default=void 0;var Ise=kse(pg());function kse(e){return e&&e.__esModule?e:{default:e}}function Tse(e){if(!(0,Ise.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}var Pse=Tse;h2.default=Pse});var X4=W(Aa=>{"use strict";l();d();Object.defineProperty(Aa,"__esModule",{value:!0});Object.defineProperty(Aa,"NIL",{enumerable:!0,get:function(){return Mse.default}});Object.defineProperty(Aa,"parse",{enumerable:!0,get:function(){return Rse.default}});Object.defineProperty(Aa,"stringify",{enumerable:!0,get:function(){return Use.default}});Object.defineProperty(Aa,"v1",{enumerable:!0,get:function(){return Bse.default}});Object.defineProperty(Aa,"v3",{enumerable:!0,get:function(){return _se.default}});Object.defineProperty(Aa,"v4",{enumerable:!0,get:function(){return Cse.default}});Object.defineProperty(Aa,"v5",{enumerable:!0,get:function(){return Nse.default}});Object.defineProperty(Aa,"validate",{enumerable:!0,get:function(){return Ose.default}});Object.defineProperty(Aa,"version",{enumerable:!0,get:function(){return Dse.default}});var Bse=gu($D()),_se=gu(eO()),Cse=gu(iO()),Nse=gu(aO()),Mse=gu(cO()),Dse=gu(uO()),Ose=gu(pg()),Use=gu(mg()),Rse=gu(Y4());function gu(e){return e&&e.__esModule?e:{default:e}}});var lO=W((qCe,fO)=>{"use strict";l();d();var Lse=X4().v4,Vse=function(e,t,r,n){if(typeof e!="string")throw new TypeError(e+" must be a string");n=n||{};let i=typeof n.version=="number"?n.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");let o={method:e};if(i===2&&(o.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");o.params=t}if(typeof r>"u"){let s=typeof n.generator=="function"?n.generator:function(){return Lse()};o.id=s(o,n)}else i===2&&r===null?n.notificationIdNull&&(o.id=null):o.id=r;return o};fO.exports=Vse});var hO=W((zCe,dO)=>{"use strict";l();d();var Kse=X4().v4,Fse=lO(),gg=function(e,t){if(!(this instanceof gg))return new gg(e,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return Kse()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=e};dO.exports=gg;gg.prototype.request=function(e,t,r,n){let i=this,o=null,s=Array.isArray(e)&&typeof t=="function";if(this.options.version===1&&s)throw new TypeError("JSON-RPC 1.0 does not support batching");if(s||!s&&e&&typeof e=="object"&&typeof t=="function")n=t,o=e;else{typeof r=="function"&&(n=r,r=void 0);let u=typeof n=="function";try{o=Fse(e,t,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(h){if(u)return n(h);throw h}if(!u)return o}let c;try{c=JSON.stringify(o,this.options.replacer)}catch(u){return n(u)}return this.callServer(c,function(u,h){i._parseResponse(u,h,n)}),o};gg.prototype._parseResponse=function(e,t,r){if(e){r(e);return}if(!t)return r();let n;try{n=JSON.parse(t,this.options.reviver)}catch(i){return r(i)}if(r.length===3)if(Array.isArray(n)){let i=function(s){return typeof s.error<"u"},o=function(s){return!i(s)};return r(null,n.filter(i),n.filter(o))}else return r(null,n.error,n.result);r(null,n)}});var J0=W((YCe,bu)=>{l();d();function Q4(e){"@babel/helpers - typeof";return bu.exports=Q4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bu.exports.__esModule=!0,bu.exports.default=bu.exports,Q4(e)}bu.exports=Q4,bu.exports.__esModule=!0,bu.exports.default=bu.exports});var yO=W((XCe,xu)=>{l();d();var Hse=J0().default;function pO(){"use strict";xu.exports=pO=function(){return e},xu.exports.__esModule=!0,xu.exports.default=xu.exports;var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(g,x,A){g[x]=A.value},i=typeof Symbol=="function"?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function c(g,x,A){return Object.defineProperty(g,x,{value:A,enumerable:!0,configurable:!0,writable:!0}),g[x]}try{c({},"")}catch{c=function(A,v,_){return A[v]=_}}function u(g,x,A,v){var _=x&&x.prototype instanceof m?x:m,D=Object.create(_.prototype),T=new Y(v||[]);return n(D,"_invoke",{value:V(g,A,T)}),D}function h(g,x,A){try{return{type:"normal",arg:g.call(x,A)}}catch(v){return{type:"throw",arg:v}}}e.wrap=u;var f={};function m(){}function b(){}function w(){}var S={};c(S,o,function(){return this});var P=Object.getPrototypeOf,N=P&&P(P(B([])));N&&N!==t&&r.call(N,o)&&(S=N);var O=w.prototype=m.prototype=Object.create(S);function C(g){["next","throw","return"].forEach(function(x){c(g,x,function(A){return this._invoke(x,A)})})}function L(g,x){function A(_,D,T,y){var I=h(g[_],g,D);if(I.type!=="throw"){var q=I.arg,K=q.value;return K&&Hse(K)=="object"&&r.call(K,"__await")?x.resolve(K.__await).then(function(F){A("next",F,T,y)},function(F){A("throw",F,T,y)}):x.resolve(K).then(function(F){q.value=F,T(q)},function(F){return A("throw",F,T,y)})}y(I.arg)}var v;n(this,"_invoke",{value:function(D,T){function y(){return new x(function(I,q){A(D,T,I,q)})}return v=v?v.then(y,y):y()}})}function V(g,x,A){var v="suspendedStart";return function(_,D){if(v==="executing")throw new Error("Generator is already running");if(v==="completed"){if(_==="throw")throw D;return p()}for(A.method=_,A.arg=D;;){var T=A.delegate;if(T){var y=j(T,A);if(y){if(y===f)continue;return y}}if(A.method==="next")A.sent=A._sent=A.arg;else if(A.method==="throw"){if(v==="suspendedStart")throw v="completed",A.arg;A.dispatchException(A.arg)}else A.method==="return"&&A.abrupt("return",A.arg);v="executing";var I=h(g,x,A);if(I.type==="normal"){if(v=A.done?"completed":"suspendedYield",I.arg===f)continue;return{value:I.arg,done:A.done}}I.type==="throw"&&(v="completed",A.method="throw",A.arg=I.arg)}}}function j(g,x){var A=x.method,v=g.iterator[A];if(v===void 0)return x.delegate=null,A==="throw"&&g.iterator.return&&(x.method="return",x.arg=void 0,j(g,x),x.method==="throw")||A!=="return"&&(x.method="throw",x.arg=new TypeError("The iterator does not provide a '"+A+"' method")),f;var _=h(v,g.iterator,x.arg);if(_.type==="throw")return x.method="throw",x.arg=_.arg,x.delegate=null,f;var D=_.arg;return D?D.done?(x[g.resultName]=D.value,x.next=g.nextLoc,x.method!=="return"&&(x.method="next",x.arg=void 0),x.delegate=null,f):D:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,f)}function $(g){var x={tryLoc:g[0]};1 in g&&(x.catchLoc=g[1]),2 in g&&(x.finallyLoc=g[2],x.afterLoc=g[3]),this.tryEntries.push(x)}function H(g){var x=g.completion||{};x.type="normal",delete x.arg,g.completion=x}function Y(g){this.tryEntries=[{tryLoc:"root"}],g.forEach($,this),this.reset(!0)}function B(g){if(g){var x=g[o];if(x)return x.call(g);if(typeof g.next=="function")return g;if(!isNaN(g.length)){var A=-1,v=function _(){for(;++A<g.length;)if(r.call(g,A))return _.value=g[A],_.done=!1,_;return _.value=void 0,_.done=!0,_};return v.next=v}}return{next:p}}function p(){return{value:void 0,done:!0}}return b.prototype=w,n(O,"constructor",{value:w,configurable:!0}),n(w,"constructor",{value:b,configurable:!0}),b.displayName=c(w,a,"GeneratorFunction"),e.isGeneratorFunction=function(g){var x=typeof g=="function"&&g.constructor;return!!x&&(x===b||(x.displayName||x.name)==="GeneratorFunction")},e.mark=function(g){return Object.setPrototypeOf?Object.setPrototypeOf(g,w):(g.__proto__=w,c(g,a,"GeneratorFunction")),g.prototype=Object.create(O),g},e.awrap=function(g){return{__await:g}},C(L.prototype),c(L.prototype,s,function(){return this}),e.AsyncIterator=L,e.async=function(g,x,A,v,_){_===void 0&&(_=Promise);var D=new L(u(g,x,A,v),_);return e.isGeneratorFunction(x)?D:D.next().then(function(T){return T.done?T.value:D.next()})},C(O),c(O,a,"Generator"),c(O,o,function(){return this}),c(O,"toString",function(){return"[object Generator]"}),e.keys=function(g){var x=Object(g),A=[];for(var v in x)A.push(v);return A.reverse(),function _(){for(;A.length;){var D=A.pop();if(D in x)return _.value=D,_.done=!1,_}return _.done=!0,_}},e.values=B,Y.prototype={constructor:Y,reset:function(x){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(H),!x)for(var A in this)A.charAt(0)==="t"&&r.call(this,A)&&!isNaN(+A.slice(1))&&(this[A]=void 0)},stop:function(){this.done=!0;var x=this.tryEntries[0].completion;if(x.type==="throw")throw x.arg;return this.rval},dispatchException:function(x){if(this.done)throw x;var A=this;function v(q,K){return T.type="throw",T.arg=x,A.next=q,K&&(A.method="next",A.arg=void 0),!!K}for(var _=this.tryEntries.length-1;_>=0;--_){var D=this.tryEntries[_],T=D.completion;if(D.tryLoc==="root")return v("end");if(D.tryLoc<=this.prev){var y=r.call(D,"catchLoc"),I=r.call(D,"finallyLoc");if(y&&I){if(this.prev<D.catchLoc)return v(D.catchLoc,!0);if(this.prev<D.finallyLoc)return v(D.finallyLoc)}else if(y){if(this.prev<D.catchLoc)return v(D.catchLoc,!0)}else{if(!I)throw new Error("try statement without catch or finally");if(this.prev<D.finallyLoc)return v(D.finallyLoc)}}}},abrupt:function(x,A){for(var v=this.tryEntries.length-1;v>=0;--v){var _=this.tryEntries[v];if(_.tryLoc<=this.prev&&r.call(_,"finallyLoc")&&this.prev<_.finallyLoc){var D=_;break}}D&&(x==="break"||x==="continue")&&D.tryLoc<=A&&A<=D.finallyLoc&&(D=null);var T=D?D.completion:{};return T.type=x,T.arg=A,D?(this.method="next",this.next=D.finallyLoc,f):this.complete(T)},complete:function(x,A){if(x.type==="throw")throw x.arg;return x.type==="break"||x.type==="continue"?this.next=x.arg:x.type==="return"?(this.rval=this.arg=x.arg,this.method="return",this.next="end"):x.type==="normal"&&A&&(this.next=A),f},finish:function(x){for(var A=this.tryEntries.length-1;A>=0;--A){var v=this.tryEntries[A];if(v.finallyLoc===x)return this.complete(v.completion,v.afterLoc),H(v),f}},catch:function(x){for(var A=this.tryEntries.length-1;A>=0;--A){var v=this.tryEntries[A];if(v.tryLoc===x){var _=v.completion;if(_.type==="throw"){var D=_.arg;H(v)}return D}}throw new Error("illegal catch attempt")},delegateYield:function(x,A,v){return this.delegate={iterator:B(x),resultName:A,nextLoc:v},this.method==="next"&&(this.arg=void 0),f}},e}xu.exports=pO,xu.exports.__esModule=!0,xu.exports.default=xu.exports});var gO=W((tNe,mO)=>{l();d();var p2=yO()();mO.exports=p2;try{regeneratorRuntime=p2}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=p2:Function("r","regeneratorRuntime = r")(p2)}});var xO=W((iNe,bg)=>{l();d();function bO(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(u){r(u);return}a.done?t(c):Promise.resolve(c).then(n,i)}function qse(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function s(c){bO(o,n,i,s,a,"next",c)}function a(c){bO(o,n,i,s,a,"throw",c)}s(void 0)})}}bg.exports=qse,bg.exports.__esModule=!0,bg.exports.default=bg.exports});var eI=W((aNe,xg)=>{l();d();function jse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}xg.exports=jse,xg.exports.__esModule=!0,xg.exports.default=xg.exports});var SO=W((fNe,wg)=>{l();d();var wO=J0().default;function Wse(e,t){if(wO(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(wO(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}wg.exports=Wse,wg.exports.__esModule=!0,wg.exports.default=wg.exports});var vO=W((hNe,Sg)=>{l();d();var zse=J0().default,Gse=SO();function $se(e){var t=Gse(e,"string");return zse(t)==="symbol"?t:String(t)}Sg.exports=$se,Sg.exports.__esModule=!0,Sg.exports.default=Sg.exports});var tI=W((mNe,vg)=>{l();d();var Yse=vO();function AO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Yse(n.key),n)}}function Zse(e,t,r){return t&&AO(e.prototype,t),r&&AO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}vg.exports=Zse,vg.exports.__esModule=!0,vg.exports.default=vg.exports});var EO=W((xNe,wu)=>{l();d();function rI(e,t){return wu.exports=rI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},wu.exports.__esModule=!0,wu.exports.default=wu.exports,rI(e,t)}wu.exports=rI,wu.exports.__esModule=!0,wu.exports.default=wu.exports});var nI=W((vNe,Ag)=>{l();d();var Jse=EO();function Xse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jse(e,t)}Ag.exports=Xse,Ag.exports.__esModule=!0,Ag.exports.default=Ag.exports});var IO=W((INe,Eg)=>{l();d();function Qse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Eg.exports=Qse,Eg.exports.__esModule=!0,Eg.exports.default=Eg.exports});var iI=W((PNe,Ig)=>{l();d();var eae=J0().default,tae=IO();function rae(e,t){if(t&&(eae(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tae(e)}Ig.exports=rae,Ig.exports.__esModule=!0,Ig.exports.default=Ig.exports});var sI=W((CNe,Su)=>{l();d();function oI(e){return Su.exports=oI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Su.exports.__esModule=!0,Su.exports.default=Su.exports,oI(e)}Su.exports=oI,Su.exports.__esModule=!0,Su.exports.default=Su.exports});var TO=W(m2=>{"use strict";l();d();var _f=dM();Object.defineProperty(m2,"__esModule",{value:!0});m2.default=void 0;var Bf=_f(gO()),y2=_f(xO()),nae=_f(J0()),iae=_f(eI()),oae=_f(tI()),sae=_f(nI()),aae=_f(iI()),kO=_f(sI()),cae=hM();function uae(e){var t=fae();return function(){var n=(0,kO.default)(e),i;if(t){var o=(0,kO.default)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,aae.default)(this,i)}}function fae(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var lae=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},dae=function(e){(0,sae.default)(r,e);var t=uae(r);function r(n){var i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ws://localhost:8080",s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;(0,iae.default)(this,r);var c=s.autoconnect,u=c===void 0?!0:c,h=s.reconnect,f=h===void 0?!0:h,m=s.reconnect_interval,b=m===void 0?1e3:m,w=s.max_reconnects,S=w===void 0?5:w,P=lae(s,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return i=t.call(this),i.webSocketFactory=n,i.queue={},i.rpc_id=0,i.address=o,i.autoconnect=u,i.ready=!1,i.reconnect=f,i.reconnect_timer_id=void 0,i.reconnect_interval=b,i.max_reconnects=S,i.rest_options=P,i.current_reconnects=0,i.generate_request_id=a||function(){return++i.rpc_id},i.autoconnect&&i._connect(i.address,Object.assign({autoconnect:i.autoconnect,reconnect:i.reconnect,reconnect_interval:i.reconnect_interval,max_reconnects:i.max_reconnects},i.rest_options)),i}return(0,oae.default)(r,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(i,o,s,a){var c=this;return!a&&(0,nae.default)(s)==="object"&&(a=s,s=null),new Promise(function(u,h){if(!c.ready)return h(new Error("socket not ready"));var f=c.generate_request_id(i,o),m={jsonrpc:"2.0",method:i,params:o||null,id:f};c.socket.send(JSON.stringify(m),a,function(b){if(b)return h(b);c.queue[f]={promise:[u,h]},s&&(c.queue[f].timeout=setTimeout(function(){delete c.queue[f],h(new Error("reply timeout"))},s))})})}},{key:"login",value:function(){var n=(0,y2.default)(Bf.default.mark(function o(s){var a;return Bf.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.call("rpc.login",s);case 2:if(a=u.sent,a){u.next=5;break}throw new Error("authentication failed");case 5:return u.abrupt("return",a);case 6:case"end":return u.stop()}},o,this)}));function i(o){return n.apply(this,arguments)}return i}()},{key:"listMethods",value:function(){var n=(0,y2.default)(Bf.default.mark(function o(){return Bf.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.call("__listMethods");case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},o,this)}));function i(){return n.apply(this,arguments)}return i}()},{key:"notify",value:function(i,o){var s=this;return new Promise(function(a,c){if(!s.ready)return c(new Error("socket not ready"));var u={jsonrpc:"2.0",method:i,params:o||null};s.socket.send(JSON.stringify(u),function(h){if(h)return c(h);a()})})}},{key:"subscribe",value:function(){var n=(0,y2.default)(Bf.default.mark(function o(s){var a;return Bf.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return typeof s=="string"&&(s=[s]),u.next=3,this.call("rpc.on",s);case 3:if(a=u.sent,!(typeof s=="string"&&a[s]!=="ok")){u.next=6;break}throw new Error("Failed subscribing to an event '"+s+"' with: "+a[s]);case 6:return u.abrupt("return",a);case 7:case"end":return u.stop()}},o,this)}));function i(o){return n.apply(this,arguments)}return i}()},{key:"unsubscribe",value:function(){var n=(0,y2.default)(Bf.default.mark(function o(s){var a;return Bf.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return typeof s=="string"&&(s=[s]),u.next=3,this.call("rpc.off",s);case 3:if(a=u.sent,!(typeof s=="string"&&a[s]!=="ok")){u.next=6;break}throw new Error("Failed unsubscribing from an event with: "+a);case 6:return u.abrupt("return",a);case 7:case"end":return u.stop()}},o,this)}));function i(o){return n.apply(this,arguments)}return i}()},{key:"close",value:function(i,o){this.socket.close(i||1e3,o)}},{key:"_connect",value:function(i,o){var s=this;clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(i,o),this.socket.addEventListener("open",function(){s.ready=!0,s.emit("open"),s.current_reconnects=0}),this.socket.addEventListener("message",function(a){var c=a.data;c instanceof ArrayBuffer&&(c=Buffer.from(c).toString());try{c=JSON.parse(c)}catch{return}if(c.notification&&s.listeners(c.notification).length){if(!Object.keys(c.params).length)return s.emit(c.notification);var u=[c.notification];if(c.params.constructor===Object)u.push(c.params);else for(var h=0;h<c.params.length;h++)u.push(c.params[h]);return Promise.resolve().then(function(){s.emit.apply(s,u)})}if(!s.queue[c.id])return c.method&&c.params?Promise.resolve().then(function(){s.emit(c.method,c.params)}):void 0;"error"in c=="result"in c&&s.queue[c.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),s.queue[c.id].timeout&&clearTimeout(s.queue[c.id].timeout),c.error?s.queue[c.id].promise[1](c.error):s.queue[c.id].promise[0](c.result),delete s.queue[c.id]}),this.socket.addEventListener("error",function(a){return s.emit("error",a)}),this.socket.addEventListener("close",function(a){var c=a.code,u=a.reason;s.ready&&setTimeout(function(){return s.emit("close",c,u)},0),s.ready=!1,s.socket=void 0,c!==1e3&&(s.current_reconnects++,s.reconnect&&(s.max_reconnects>s.current_reconnects||s.max_reconnects===0)&&(s.reconnect_timer_id=setTimeout(function(){return s._connect(i,o)},s.reconnect_interval)))})}}]),r}(cae.EventEmitter);m2.default=dae});var BO=W(aI=>{"use strict";l();d();var kg=dM();Object.defineProperty(aI,"__esModule",{value:!0});aI.default=Sae;var hae=kg(eI()),pae=kg(tI()),yae=kg(nI()),mae=kg(iI()),PO=kg(sI()),gae=hM();function bae(e){var t=xae();return function(){var n=(0,PO.default)(e),i;if(t){var o=(0,PO.default)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,mae.default)(this,i)}}function xae(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var wae=function(e){(0,yae.default)(r,e);var t=bae(r);function r(n,i,o){var s;return(0,hae.default)(this,r),s=t.call(this),s.socket=new self.WebSocket(n,o),s.socket.onopen=function(){return s.emit("open")},s.socket.onmessage=function(a){return s.emit("message",a.data)},s.socket.onerror=function(a){return s.emit("error",a)},s.socket.onclose=function(a){s.emit("close",a.code,a.reason)},s}return(0,pae.default)(r,[{key:"send",value:function(i,o,s){var a=s||o;try{this.socket.send(i),a()}catch(c){a(c)}}},{key:"close",value:function(i,o){this.socket.close(i,o)}},{key:"addEventListener",value:function(i,o,s){this.socket.addEventListener(i,o,s)}}]),r}(gae.EventEmitter);function Sae(e,t){return new wae(e,t)}});var RO=W(kr=>{"use strict";l();d();Object.defineProperty(kr,"__esModule",{value:!0});kr.shake256=kr.shake128=kr.keccak_512=kr.keccak_384=kr.keccak_256=kr.keccak_224=kr.sha3_512=kr.sha3_384=kr.sha3_256=kr.sha3_224=kr.Keccak=kr.keccakP=void 0;var X0=g1(),Bg=b4(),Pg=V0(),[NO,MO,DO]=[[],[],[]],vae=BigInt(0),Tg=BigInt(1),Aae=BigInt(2),Eae=BigInt(7),Iae=BigInt(256),kae=BigInt(113);for(let e=0,t=Tg,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],NO.push(2*(5*n+r)),MO.push((e+1)*(e+2)/2%64);let i=vae;for(let o=0;o<7;o++)t=(t<<Tg^(t>>Eae)*kae)%Iae,t&Aae&&(i^=Tg<<(Tg<<BigInt(o))-Tg);DO.push(i)}var[Tae,Pae]=Bg.default.split(DO,!0),_O=(e,t,r)=>r>32?Bg.default.rotlBH(e,t,r):Bg.default.rotlSH(e,t,r),CO=(e,t,r)=>r>32?Bg.default.rotlBL(e,t,r):Bg.default.rotlSL(e,t,r);function OO(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let s=0;s<10;s++)r[s]=e[s]^e[s+10]^e[s+20]^e[s+30]^e[s+40];for(let s=0;s<10;s+=2){let a=(s+8)%10,c=(s+2)%10,u=r[c],h=r[c+1],f=_O(u,h,1)^r[a],m=CO(u,h,1)^r[a+1];for(let b=0;b<50;b+=10)e[s+b]^=f,e[s+b+1]^=m}let i=e[2],o=e[3];for(let s=0;s<24;s++){let a=MO[s],c=_O(i,o,a),u=CO(i,o,a),h=NO[s];i=e[h],o=e[h+1],e[h]=c,e[h+1]=u}for(let s=0;s<50;s+=10){for(let a=0;a<10;a++)r[a]=e[s+a];for(let a=0;a<10;a++)e[s+a]^=~r[(a+2)%10]&r[(a+4)%10]}e[0]^=Tae[n],e[1]^=Pae[n]}r.fill(0)}kr.keccakP=OO;var _g=class e extends Pg.Hash{constructor(t,r,n,i=!1,o=24){if(super(),this.blockLen=t,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,X0.default.number(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,Pg.u32)(this.state)}keccak(){OO(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){X0.default.exists(this);let{blockLen:r,state:n}=this;t=(0,Pg.toBytes)(t);let i=t.length;for(let o=0;o<i;){let s=Math.min(r-this.pos,i-o);for(let a=0;a<s;a++)n[this.pos++]^=t[o++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:r,pos:n,blockLen:i}=this;t[n]^=r,r&128&&n===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){X0.default.exists(this,!1),X0.default.bytes(t),this.finish();let r=this.state,{blockLen:n}=this;for(let i=0,o=t.length;i<o;){this.posOut>=n&&this.keccak();let s=Math.min(n-this.posOut,o-i);t.set(r.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return X0.default.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(X0.default.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:r,suffix:n,outputLen:i,rounds:o,enableXOF:s}=this;return t||(t=new e(r,n,i,s,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=n,t.outputLen=i,t.enableXOF=s,t.destroyed=this.destroyed,t}};kr.Keccak=_g;var Cf=(e,t,r)=>(0,Pg.wrapConstructor)(()=>new _g(t,e,r));kr.sha3_224=Cf(6,144,224/8);kr.sha3_256=Cf(6,136,256/8);kr.sha3_384=Cf(6,104,384/8);kr.sha3_512=Cf(6,72,512/8);kr.keccak_224=Cf(1,144,224/8);kr.keccak_256=Cf(1,136,256/8);kr.keccak_384=Cf(1,104,384/8);kr.keccak_512=Cf(1,72,512/8);var UO=(e,t,r)=>(0,Pg.wrapConstructorWithOpts)((n={})=>new _g(t,e,n.dkLen===void 0?r:n.dkLen,!0));kr.shake128=UO(31,168,128/8);kr.shake256=UO(31,136,256/8)});var VO=W(Cg=>{"use strict";l();d();Object.defineProperty(Cg,"__esModule",{value:!0});Cg.hmac=void 0;var g2=g1(),LO=V0(),b2=class extends LO.Hash{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,g2.default.hash(t);let n=(0,LO.toBytes)(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return g2.default.exists(this),this.iHash.update(t),this}digestInto(t){g2.default.exists(this),g2.default.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Bae=(e,t,r)=>new b2(e,t).update(r).digest();Cg.hmac=Bae;Cg.hmac.create=(e,t)=>new b2(e,t)});var lI=W(Lt=>{"use strict";l();d();Object.defineProperty(Lt,"__esModule",{value:!0});Lt.utils=Lt.schnorr=Lt.verify=Lt.signSync=Lt.sign=Lt.getSharedSecret=Lt.recoverPublicKey=Lt.getPublicKey=Lt.Signature=Lt.Point=Lt.CURVE=void 0;var _ae=Xm(),Wt=BigInt(0),Cr=BigInt(1),Df=BigInt(2),Mg=BigInt(3),KO=BigInt(8),br=Object.freeze({a:Wt,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:Cr,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});Lt.CURVE=br;var FO=(e,t)=>(e+t/Df)/t,x2={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){let{n:t}=br,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Cr*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=FO(o*e,t),c=FO(-n*e,t),u=me(e-a*r-c*i,t),h=me(-a*n-c*o,t),f=u>s,m=h>s;if(f&&(u=t-u),m&&(h=t-h),u>s||h>s)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:f,k1:u,k2neg:m,k2:h}}},Ea=32,Yd=32,$O=32,E2=Ea+1,I2=2*Ea+1;function HO(e){let{a:t,b:r}=br,n=me(e*e),i=me(n*e);return me(i+t*e+r)}var w2=br.a===Wt,Og=class extends Error{constructor(t){super(t)}};function qO(e){if(!(e instanceof to))throw new TypeError("JacobianPoint expected")}var to=class e{constructor(t,r,n){this.x=t,this.y=r,this.z=n}static fromAffine(t){if(!(t instanceof Tr))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(Tr.ZERO)?e.ZERO:new e(t.x,t.y,Cr)}static toAffineBatch(t){let r=Oae(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return e.toAffineBatch(t).map(e.fromAffine)}equals(t){qO(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t,c=me(i*i),u=me(a*a),h=me(r*u),f=me(o*c),m=me(me(n*a)*u),b=me(me(s*i)*c);return h===f&&m===b}negate(){return new e(this.x,me(-this.y),this.z)}double(){let{x:t,y:r,z:n}=this,i=me(t*t),o=me(r*r),s=me(o*o),a=t+o,c=me(Df*(me(a*a)-i-s)),u=me(Mg*i),h=me(u*u),f=me(h-Df*c),m=me(u*(c-f)-KO*s),b=me(Df*r*n);return new e(f,m,b)}add(t){qO(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t;if(o===Wt||s===Wt)return this;if(r===Wt||n===Wt)return t;let c=me(i*i),u=me(a*a),h=me(r*u),f=me(o*c),m=me(me(n*a)*u),b=me(me(s*i)*c),w=me(f-h),S=me(b-m);if(w===Wt)return S===Wt?this.double():e.ZERO;let P=me(w*w),N=me(w*P),O=me(h*P),C=me(S*S-N-Df*O),L=me(S*(O-C)-m*N),V=me(i*a*w);return new e(C,L,V)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){let r=e.ZERO;if(typeof t=="bigint"&&t===Wt)return r;let n=zO(t);if(n===Cr)return this;if(!w2){let f=r,m=this;for(;n>Wt;)n&Cr&&(f=f.add(m)),m=m.double(),n>>=Cr;return f}let{k1neg:i,k1:o,k2neg:s,k2:a}=x2.splitScalar(n),c=r,u=r,h=this;for(;o>Wt||a>Wt;)o&Cr&&(c=c.add(h)),a&Cr&&(u=u.add(h)),h=h.double(),o>>=Cr,a>>=Cr;return i&&(c=c.negate()),s&&(u=u.negate()),u=new e(me(u.x*x2.beta),u.y,u.z),c.add(u)}precomputeWindow(t){let r=w2?128/t+1:256/t+1,n=[],i=this,o=i;for(let s=0;s<r;s++){o=i,n.push(o);for(let a=1;a<2**(t-1);a++)o=o.add(i),n.push(o);i=o.double()}return n}wNAF(t,r){!r&&this.equals(e.BASE)&&(r=Tr.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&cI.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=e.normalizeZ(i),cI.set(r,i)));let o=e.ZERO,s=e.BASE,a=1+(w2?128/n:256/n),c=2**(n-1),u=BigInt(2**n-1),h=2**n,f=BigInt(n);for(let m=0;m<a;m++){let b=m*c,w=Number(t&u);t>>=f,w>c&&(w-=h,t+=Cr);let S=b,P=b+Math.abs(w)-1,N=m%2!==0,O=w<0;w===0?s=s.add(S2(N,i[S])):o=o.add(S2(O,i[P]))}return{p:o,f:s}}multiply(t,r){let n=zO(t),i,o;if(w2){let{k1neg:s,k1:a,k2neg:c,k2:u}=x2.splitScalar(n),{p:h,f}=this.wNAF(a,r),{p:m,f:b}=this.wNAF(u,r);h=S2(s,h),m=S2(c,m),m=new e(me(m.x*x2.beta),m.y,m.z),i=h.add(m),o=f.add(b)}else{let{p:s,f:a}=this.wNAF(n,r);i=s,o=a}return e.normalizeZ([i,o])[0]}toAffine(t){let{x:r,y:n,z:i}=this,o=this.equals(e.ZERO);t==null&&(t=o?KO:ip(i));let s=t,a=me(s*s),c=me(a*s),u=me(r*a),h=me(n*c),f=me(i*s);if(o)return Tr.ZERO;if(f!==Cr)throw new Error("invZ was invalid");return new Tr(u,h)}};to.BASE=new to(br.Gx,br.Gy,Cr);to.ZERO=new to(Wt,Cr,Wt);function S2(e,t){let r=t.negate();return e?r:t}var cI=new WeakMap,Tr=class e{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,cI.delete(this)}hasEvenY(){return this.y%Df===Wt}static fromCompressedHex(t){let r=t.length===32,n=zo(r?t:t.subarray(1));if(!A2(n))throw new Error("Point is not on curve");let i=HO(n),o=Dae(i),s=(o&Cr)===Cr;r?s&&(o=me(-o)):(t[0]&1)===1!==s&&(o=me(-o));let a=new e(n,o);return a.assertValidity(),a}static fromUncompressedHex(t){let r=zo(t.subarray(1,Ea+1)),n=zo(t.subarray(Ea+1,Ea*2+1)),i=new e(r,n);return i.assertValidity(),i}static fromHex(t){let r=hc(t),n=r.length,i=r[0];if(n===Ea)return this.fromCompressedHex(r);if(n===E2&&(i===2||i===3))return this.fromCompressedHex(r);if(n===I2&&i===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-${E2} compressed bytes or ${I2} uncompressed bytes, not ${n}`)}static fromPrivateKey(t){return e.BASE.multiply(Zd(t))}static fromSignature(t,r,n){let{r:i,s:o}=ZO(r);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");let s=uI(hc(t)),{n:a}=br,c=n===2||n===3?i+a:i,u=ip(c,a),h=me(-s*u,a),f=me(o*u,a),m=n&1?"03":"02",b=e.fromHex(m+Of(c)),w=e.BASE.multiplyAndAddUnsafe(b,h,f);if(!w)throw new Error("Cannot recover signature: point at infinify");return w.assertValidity(),w}toRawBytes(t=!1){return Uf(this.toHex(t))}toHex(t=!1){let r=Of(this.x);return t?`${this.hasEvenY()?"02":"03"}${r}`:`04${r}${Of(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let t="Point is not on elliptic curve",{x:r,y:n}=this;if(!A2(r)||!A2(n))throw new Error(t);let i=me(n*n),o=HO(r);if(me(i-o)!==Wt)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new e(this.x,me(-this.y))}double(){return to.fromAffine(this).double().toAffine()}add(t){return to.fromAffine(this).add(to.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return to.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,r,n){let i=to.fromAffine(this),o=r===Wt||r===Cr||this!==e.BASE?i.multiplyUnsafe(r):i.multiply(r),s=to.fromAffine(t).multiplyUnsafe(n),a=o.add(s);return a.equals(to.ZERO)?void 0:a.toAffine()}};Lt.Point=Tr;Tr.BASE=new Tr(br.Gx,br.Gy);Tr.ZERO=new Tr(Wt,Wt);function jO(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function WO(e){if(e.length<2||e[0]!==2)throw new Error(`Invalid signature integer tag: ${ep(e)}`);let t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:zo(r),left:e.subarray(t+2)}}function Cae(e){if(e.length<2||e[0]!=48)throw new Error(`Invalid signature tag: ${ep(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");let{data:t,left:r}=WO(e.subarray(2)),{data:n,left:i}=WO(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${ep(i)}`);return{r:t,s:n}}var $d=class e{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromCompact(t){let r=t instanceof Uint8Array,n="Signature.fromCompact";if(typeof t!="string"&&!r)throw new TypeError(`${n}: Expected string or Uint8Array`);let i=r?ep(t):t;if(i.length!==128)throw new Error(`${n}: Expected 64-byte hex`);return new e(k2(i.slice(0,64)),k2(i.slice(64,128)))}static fromDER(t){let r=t instanceof Uint8Array;if(typeof t!="string"&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:n,s:i}=Cae(r?t:Uf(t));return new e(n,i)}static fromHex(t){return this.fromDER(t)}assertValidity(){let{r:t,s:r}=this;if(!rp(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!rp(r))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let t=br.n>>Cr;return this.s>t}normalizeS(){return this.hasHighS()?new e(this.r,me(-this.s,br.n)):this}toDERRawBytes(){return Uf(this.toDERHex())}toDERHex(){let t=jO(Ng(this.s)),r=jO(Ng(this.r)),n=t.length/2,i=r.length/2,o=Ng(n),s=Ng(i);return`30${Ng(i+n+4)}02${s}${r}02${o}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Uf(this.toCompactHex())}toCompactHex(){return Of(this.r)+Of(this.s)}};Lt.Signature=$d;function Mf(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var Nae=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ep(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=Nae[e[r]];return t}var Mae=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Of(e){if(typeof e!="bigint")throw new Error("Expected bigint");if(!(Wt<=e&&e<Mae))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function tp(e){let t=Uf(Of(e));if(t.length!==32)throw new Error("Error: expected 32 bytes");return t}function Ng(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function k2(e){if(typeof e!="string")throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function Uf(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function zo(e){return k2(ep(e))}function hc(e){return e instanceof Uint8Array?Uint8Array.from(e):Uf(e)}function zO(e){if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if(typeof e=="bigint"&&rp(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function me(e,t=br.P){let r=e%t;return r>=Wt?r:t+r}function vs(e,t){let{P:r}=br,n=e;for(;t-- >Wt;)n*=n,n%=r;return n}function Dae(e){let{P:t}=br,r=BigInt(6),n=BigInt(11),i=BigInt(22),o=BigInt(23),s=BigInt(44),a=BigInt(88),c=e*e*e%t,u=c*c*e%t,h=vs(u,Mg)*u%t,f=vs(h,Mg)*u%t,m=vs(f,Df)*c%t,b=vs(m,n)*m%t,w=vs(b,i)*b%t,S=vs(w,s)*w%t,P=vs(S,a)*S%t,N=vs(P,s)*w%t,O=vs(N,Mg)*u%t,C=vs(O,o)*b%t,L=vs(C,r)*c%t,V=vs(L,Df);if(V*V%t!==e)throw new Error("Cannot find square root");return V}function ip(e,t=br.P){if(e===Wt||t<=Wt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=me(e,t),n=t,i=Wt,o=Cr,s=Cr,a=Wt;for(;r!==Wt;){let u=n/r,h=n%r,f=i-s*u,m=o-a*u;n=r,r=h,i=s,o=a,s=f,a=m}if(n!==Cr)throw new Error("invert: does not exist");return me(i,t)}function Oae(e,t=br.P){let r=new Array(e.length),n=e.reduce((o,s,a)=>s===Wt?o:(r[a]=o,me(o*s,t)),Cr),i=ip(n,t);return e.reduceRight((o,s,a)=>s===Wt?o:(r[a]=me(o*r[a],t),me(o*s,t)),i),r}function Uae(e){let t=e.length*8-Yd*8,r=zo(e);return t>0?r>>BigInt(t):r}function uI(e,t=!1){let r=Uae(e);if(t)return r;let{n}=br;return r>=n?r-n:r}var Q0,Dg,T2=class{constructor(t,r){if(this.hashLen=t,this.qByteLen=r,typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(t).fill(1),this.k=new Uint8Array(t).fill(0),this.counter=0}hmac(...t){return Lt.utils.hmacSha256(this.k,...t)}hmacSync(...t){return Dg(this.k,...t)}checkSync(){if(typeof Dg!="function")throw new Og("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(t=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),t.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(t=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),t.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){this.incr();let t=0,r=[];for(;t<this.qByteLen;){this.v=await this.hmac(this.v);let n=this.v.slice();r.push(n),t+=this.v.length}return Mf(...r)}generateSync(){this.checkSync(),this.incr();let t=0,r=[];for(;t<this.qByteLen;){this.v=this.hmacSync(this.v);let n=this.v.slice();r.push(n),t+=this.v.length}return Mf(...r)}};function rp(e){return Wt<e&&e<br.n}function A2(e){return Wt<e&&e<br.P}function YO(e,t,r,n=!0){let{n:i}=br,o=uI(e,!0);if(!rp(o))return;let s=ip(o,i),a=Tr.BASE.multiply(o),c=me(a.x,i);if(c===Wt)return;let u=me(s*me(t+r*c,i),i);if(u===Wt)return;let h=new $d(c,u),f=(a.x===h.r?0:2)|Number(a.y&Cr);return n&&h.hasHighS()&&(h=h.normalizeS(),f^=1),{sig:h,recovery:f}}function Zd(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if(typeof e=="string"){if(e.length!==2*Yd)throw new Error("Expected 32 bytes of private key");t=k2(e)}else if(e instanceof Uint8Array){if(e.length!==Yd)throw new Error("Expected 32 bytes of private key");t=zo(e)}else throw new TypeError("Expected valid private key");if(!rp(t))throw new Error("Expected private key: 0 < key < n");return t}function fI(e){return e instanceof Tr?(e.assertValidity(),e):Tr.fromHex(e)}function ZO(e){if(e instanceof $d)return e.assertValidity(),e;try{return $d.fromDER(e)}catch{return $d.fromCompact(e)}}function Rae(e,t=!1){return Tr.fromPrivateKey(e).toRawBytes(t)}Lt.getPublicKey=Rae;function Lae(e,t,r,n=!1){return Tr.fromSignature(e,t,r).toRawBytes(n)}Lt.recoverPublicKey=Lae;function GO(e){let t=e instanceof Uint8Array,r=typeof e=="string",n=(t||r)&&e.length;return t?n===E2||n===I2:r?n===E2*2||n===I2*2:e instanceof Tr}function Vae(e,t,r=!1){if(GO(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!GO(t))throw new TypeError("getSharedSecret: second arg must be public key");let n=fI(t);return n.assertValidity(),n.multiply(Zd(e)).toRawBytes(r)}Lt.getSharedSecret=Vae;function JO(e){let t=e.length>Ea?e.slice(0,Ea):e;return zo(t)}function Kae(e){let t=JO(e),r=me(t,br.n);return XO(r<Wt?t:r)}function XO(e){return tp(e)}function QO(e,t,r){if(e==null)throw new Error(`sign: expected valid message hash, not "${e}"`);let n=hc(e),i=Zd(t),o=[XO(i),Kae(n)];if(r!=null){r===!0&&(r=Lt.utils.randomBytes(Ea));let c=hc(r);if(c.length!==Ea)throw new Error(`sign: Expected ${Ea} bytes of extra data`);o.push(c)}let s=Mf(...o),a=JO(n);return{seed:s,m:a,d:i}}function eU(e,t){let{sig:r,recovery:n}=e,{der:i,recovered:o}=Object.assign({canonical:!0,der:!0},t),s=i?r.toDERRawBytes():r.toCompactRawBytes();return o?[s,n]:s}async function Fae(e,t,r={}){let{seed:n,m:i,d:o}=QO(e,t,r.extraEntropy),s=new T2($O,Yd);await s.reseed(n);let a;for(;!(a=YO(await s.generate(),i,o,r.canonical));)await s.reseed();return eU(a,r)}Lt.sign=Fae;function Hae(e,t,r={}){let{seed:n,m:i,d:o}=QO(e,t,r.extraEntropy),s=new T2($O,Yd);s.reseedSync(n);let a;for(;!(a=YO(s.generateSync(),i,o,r.canonical));)s.reseedSync();return eU(a,r)}Lt.signSync=Hae;var qae={strict:!0};function jae(e,t,r,n=qae){let i;try{i=ZO(e),t=hc(t)}catch{return!1}let{r:o,s}=i;if(n.strict&&i.hasHighS())return!1;let a=uI(t),c;try{c=fI(r)}catch{return!1}let{n:u}=br,h=ip(s,u),f=me(a*h,u),m=me(o*h,u),b=Tr.BASE.multiplyAndAddUnsafe(c,f,m);return b?me(b.x,u)===o:!1}Lt.verify=jae;function P2(e){return me(zo(e),br.n)}var np=class e{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromHex(t){let r=hc(t);if(r.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${r.length}`);let n=zo(r.subarray(0,32)),i=zo(r.subarray(32,64));return new e(n,i)}assertValidity(){let{r:t,s:r}=this;if(!A2(t)||!rp(r))throw new Error("Invalid signature")}toHex(){return Of(this.r)+Of(this.s)}toRawBytes(){return Uf(this.toHex())}};function Wae(e){return Tr.fromPrivateKey(e).toRawX()}var B2=class{constructor(t,r,n=Lt.utils.randomBytes()){if(t==null)throw new TypeError(`sign: Expected valid message, not "${t}"`);this.m=hc(t);let{x:i,scalar:o}=this.getScalar(Zd(r));if(this.px=i,this.d=o,this.rand=hc(n),this.rand.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(t){let r=Tr.fromPrivateKey(t),n=r.hasEvenY()?t:br.n-t;return{point:r,scalar:n,x:r.toRawX()}}initNonce(t,r){return tp(t^zo(r))}finalizeNonce(t){let r=me(zo(t),br.n);if(r===Wt)throw new Error("sign: Creation of signature failed. k is zero");let{point:n,x:i,scalar:o}=this.getScalar(r);return{R:n,rx:i,k:o}}finalizeSig(t,r,n,i){return new np(t.x,me(r+n*i,br.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){let{m:t,d:r,px:n,rand:i}=this,o=Lt.utils.taggedHash,s=this.initNonce(r,await o(Nf.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(await o(Nf.nonce,s,n,t)),h=P2(await o(Nf.challenge,c,n,t)),f=this.finalizeSig(a,u,h,r);return await nU(f,t,n)||this.error(),f}calcSync(){let{m:t,d:r,px:n,rand:i}=this,o=Lt.utils.taggedHashSync,s=this.initNonce(r,o(Nf.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(o(Nf.nonce,s,n,t)),h=P2(o(Nf.challenge,c,n,t)),f=this.finalizeSig(a,u,h,r);return iU(f,t,n)||this.error(),f}};async function zae(e,t,r){return new B2(e,t,r).calc()}function Gae(e,t,r){return new B2(e,t,r).calcSync()}function tU(e,t,r){let n=e instanceof np,i=n?e:np.fromHex(e);return n&&i.assertValidity(),{...i,m:hc(t),P:fI(r)}}function rU(e,t,r,n){let i=Tr.BASE.multiplyAndAddUnsafe(t,Zd(r),me(-n,br.n));return!(!i||!i.hasEvenY()||i.x!==e)}async function nU(e,t,r){try{let{r:n,s:i,m:o,P:s}=tU(e,t,r),a=P2(await Lt.utils.taggedHash(Nf.challenge,tp(n),s.toRawX(),o));return rU(n,s,i,a)}catch{return!1}}function iU(e,t,r){try{let{r:n,s:i,m:o,P:s}=tU(e,t,r),a=P2(Lt.utils.taggedHashSync(Nf.challenge,tp(n),s.toRawX(),o));return rU(n,s,i,a)}catch(n){if(n instanceof Og)throw n;return!1}}Lt.schnorr={Signature:np,getPublicKey:Wae,sign:zae,verify:nU,signSync:Gae,verifySync:iU};Tr.BASE._setWindowSize(8);var Wo={node:_ae,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Nf={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},v2={};Lt.utils={bytesToHex:ep,hexToBytes:Uf,concatBytes:Mf,mod:me,invert:ip,isValidPrivateKey(e){try{return Zd(e),!0}catch{return!1}},_bigintTo32Bytes:tp,_normalizePrivateKey:Zd,hashToPrivateKey:e=>{e=hc(e);let t=Yd+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");let r=me(zo(e),br.n-Cr)+Cr;return tp(r)},randomBytes:(e=32)=>{if(Wo.web)return Wo.web.getRandomValues(new Uint8Array(e));if(Wo.node){let{randomBytes:t}=Wo.node;return Uint8Array.from(t(e))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Lt.utils.hashToPrivateKey(Lt.utils.randomBytes(Yd+8)),precompute(e=8,t=Tr.BASE){let r=t===Tr.BASE?t:new Tr(t.x,t.y);return r._setWindowSize(e),r.multiply(Mg),r},sha256:async(...e)=>{if(Wo.web){let t=await Wo.web.subtle.digest("SHA-256",Mf(...e));return new Uint8Array(t)}else if(Wo.node){let{createHash:t}=Wo.node,r=t("sha256");return e.forEach(n=>r.update(n)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(Wo.web){let r=await Wo.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=Mf(...t),i=await Wo.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}else if(Wo.node){let{createHmac:r}=Wo.node,n=r("sha256",e);return t.forEach(i=>n.update(i)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let r=v2[e];if(r===void 0){let n=await Lt.utils.sha256(Uint8Array.from(e,i=>i.charCodeAt(0)));r=Mf(n,n),v2[e]=r}return Lt.utils.sha256(r,...t)},taggedHashSync:(e,...t)=>{if(typeof Q0!="function")throw new Og("sha256Sync is undefined, you need to set it");let r=v2[e];if(r===void 0){let n=Q0(Uint8Array.from(e,i=>i.charCodeAt(0)));r=Mf(n,n),v2[e]=r}return Q0(r,...t)},_JacobianPoint:to};Object.defineProperties(Lt.utils,{sha256Sync:{configurable:!1,get(){return Q0},set(e){Q0||(Q0=e)}},hmacSha256Sync:{configurable:!1,get(){return Dg},set(e){Dg||(Dg=e)}}})});var $2=W(de=>{"use strict";l();d();Object.defineProperty(de,"__esModule",{value:!0});var De=tg(),$ae=yD(),Yae=BD(),Zae=r1(),Jae=Ho(),bI=_D(),dI=UD(),vU=dg(),xI=L4(),k=jD(),Xae=hO(),Qae=TO(),ece=BO(),oU=RO(),tce=VO(),rce=lI();function $g(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function LI(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}var Vf=LI(Yae),sU=$g(Zae),yi=$g(Jae),z=LI(vU),nce=$g(Xae),ice=$g(Qae),oce=$g(ece),j2=LI(rce);Vf.utils.sha512Sync=(...e)=>$ae.sha512(Vf.utils.concatBytes(...e));var sce=Vf.utils.randomPrivateKey,aU=()=>{let e=Vf.utils.randomPrivateKey(),t=D2(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}},D2=Vf.sync.getPublicKey;function cU(e){try{return Vf.Point.fromHex(e,!0),!0}catch{return!1}}var VI=(e,t)=>Vf.sync.sign(e,t.slice(0,32)),ace=Vf.sync.verify,Et=e=>De.Buffer.isBuffer(e)?e:e instanceof Uint8Array?De.Buffer.from(e.buffer,e.byteOffset,e.byteLength):De.Buffer.from(e),Vg=class{constructor(t){Object.assign(this,t)}encode(){return De.Buffer.from(dI.serialize(Lg,this))}static decode(t){return dI.deserialize(Lg,this,t)}static decodeUnchecked(t){return dI.deserializeUnchecked(Lg,this,t)}},wI=class extends Vg{constructor(t){if(super(t),this.enum="",Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(r=>{this.enum=r})}},Lg=new Map,AU,EU=32,gc=32;function cce(e){return e._bn!==void 0}var uU=1;AU=Symbol.toStringTag;var pe=class e extends Vg{constructor(t){if(super({}),this._bn=void 0,cce(t))this._bn=t._bn;else{if(typeof t=="string"){let r=yi.default.decode(t);if(r.length!=gc)throw new Error("Invalid public key input");this._bn=new sU.default(r)}else this._bn=new sU.default(t);if(this._bn.byteLength()>gc)throw new Error("Invalid public key input")}}static unique(){let t=new e(uU);return uU+=1,new e(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return yi.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){let t=this._bn.toArrayLike(De.Buffer);if(t.length===gc)return t;let r=De.Buffer.alloc(32);return t.copy(r,32-t.length),r}get[AU](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,r,n){let i=De.Buffer.concat([t.toBuffer(),De.Buffer.from(r),n.toBuffer()]),o=bI.sha256(i);return new e(o)}static createProgramAddressSync(t,r){let n=De.Buffer.alloc(0);t.forEach(function(o){if(o.length>EU)throw new TypeError("Max seed length exceeded");n=De.Buffer.concat([n,Et(o)])}),n=De.Buffer.concat([n,r.toBuffer(),De.Buffer.from("ProgramDerivedAddress")]);let i=bI.sha256(n);if(cU(i))throw new Error("Invalid seeds, address must fall off the curve");return new e(i)}static async createProgramAddress(t,r){return this.createProgramAddressSync(t,r)}static findProgramAddressSync(t,r){let n=255,i;for(;n!=0;){try{let o=t.concat(De.Buffer.from([n]));i=this.createProgramAddressSync(o,r)}catch(o){if(o instanceof TypeError)throw o;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,r){return this.findProgramAddressSync(t,r)}static isOnCurve(t){let r=new e(t);return cU(r.toBytes())}};pe.default=new pe("11111111111111111111111111111111");Lg.set(pe,{kind:"struct",fields:[["_bn","u256"]]});var SI=class{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){let r=Et(t);if(t.length!==64)throw new Error("bad secret key size");this._publicKey=r.slice(32,64),this._secretKey=r.slice(0,32)}else this._secretKey=Et(sce()),this._publicKey=Et(D2(this._secretKey))}get publicKey(){return new pe(this._publicKey)}get secretKey(){return De.Buffer.concat([this._secretKey,this._publicKey],64)}},uce=new pe("BPFLoader1111111111111111111111111111111111"),Lf=1232,W2=127,Kg=64,Fg=class extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}};Object.defineProperty(Fg.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var Hg=class extends Error{constructor(t,r){super(`Transaction was not confirmed in ${r.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}};Object.defineProperty(Hg.prototype,"name",{value:"TransactionExpiredTimeoutError"});var Rf=class extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}};Object.defineProperty(Rf.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});var Qd=class{constructor(t,r){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=r}keySegments(){let t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(let r of this.keySegments()){if(t<r.length)return r[t];t-=r.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");let n=new Map;this.keySegments().flat().forEach((o,s)=>{n.set(o.toBase58(),s)});let i=o=>{let s=n.get(o.toBase58());if(s===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return s};return t.map(o=>({programIdIndex:i(o.programId),accountKeyIndexes:o.keys.map(s=>i(s.pubkey)),data:o.data}))}},Mt=(e="publicKey")=>z.blob(32,e),fce=(e="signature")=>z.blob(64,e),Xd=(e="string")=>{let t=z.struct([z.u32("length"),z.u32("lengthPadding"),z.blob(z.offset(z.u32(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t),i=t;return i.decode=(o,s)=>r(o,s).chars.toString(),i.encode=(o,s,a)=>{let c={chars:De.Buffer.from(o,"utf8")};return n(c,s,a)},i.alloc=o=>z.u32().span+z.u32().span+De.Buffer.from(o,"utf8").length,i},lce=(e="authorized")=>z.struct([Mt("staker"),Mt("withdrawer")],e),dce=(e="lockup")=>z.struct([z.ns64("unixTimestamp"),z.ns64("epoch"),Mt("custodian")],e),hce=(e="voteInit")=>z.struct([Mt("nodePubkey"),Mt("authorizedVoter"),Mt("authorizedWithdrawer"),z.u8("commission")],e),pce=(e="voteAuthorizeWithSeedArgs")=>z.struct([z.u32("voteAuthorizationType"),Mt("currentAuthorityDerivedKeyOwnerPubkey"),Xd("currentAuthorityDerivedKeySeed"),Mt("newAuthorized")],e);function IU(e,t){let r=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(t[i.property]);if("count"in i&&"elementLayout"in i){let o=t[i.property];if(Array.isArray(o))return o.length*r(i.elementLayout)}else if("fields"in i)return IU({layout:i},t[i.property]);return 0},n=0;return e.layout.fields.forEach(i=>{n+=r(i)}),n}function Eo(e){let t=0,r=0;for(;;){let n=e.shift();if(t|=(n&127)<<r*7,r+=1,!(n&128))break}return t}function Go(e,t){let r=t;for(;;){let n=r&127;if(r>>=7,r==0){e.push(n);break}else n|=128,e.push(n)}}function er(e,t){if(!e)throw new Error(t||"Assertion failed")}var O2=class e{constructor(t,r){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=r}static compile(t,r){let n=new Map,i=s=>{let a=s.toBase58(),c=n.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,c)),c},o=i(r);o.isSigner=!0,o.isWritable=!0;for(let s of t){i(s.programId).isInvoked=!0;for(let a of s.keys){let c=i(a.pubkey);c.isSigner||=a.isSigner,c.isWritable||=a.isWritable}}return new e(r,n)}getMessageComponents(){let t=[...this.keyMetaMap.entries()];er(t.length<=256,"Max static account keys length exceeded");let r=t.filter(([,c])=>c.isSigner&&c.isWritable),n=t.filter(([,c])=>c.isSigner&&!c.isWritable),i=t.filter(([,c])=>!c.isSigner&&c.isWritable),o=t.filter(([,c])=>!c.isSigner&&!c.isWritable),s={numRequiredSignatures:r.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:o.length};{er(r.length>0,"Expected at least one writable signer key");let[c]=r[0];er(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}let a=[...r.map(([c])=>new pe(c)),...n.map(([c])=>new pe(c)),...i.map(([c])=>new pe(c)),...o.map(([c])=>new pe(c))];return[s,a]}extractTableLookup(t){let[r,n]=this.drainKeysFoundInLookupTable(t.state.addresses,s=>!s.isSigner&&!s.isInvoked&&s.isWritable),[i,o]=this.drainKeysFoundInLookupTable(t.state.addresses,s=>!s.isSigner&&!s.isInvoked&&!s.isWritable);if(!(r.length===0&&i.length===0))return[{accountKey:t.key,writableIndexes:r,readonlyIndexes:i},{writable:n,readonly:o}]}drainKeysFoundInLookupTable(t,r){let n=new Array,i=new Array;for(let[o,s]of this.keyMetaMap.entries())if(r(s)){let a=new pe(o),c=t.findIndex(u=>u.equals(a));c>=0&&(er(c<256,"Max lookup table index exceeded"),n.push(c),i.push(a),this.keyMetaMap.delete(o))}return[n,i]}},kU="Reached end of buffer unexpectedly";function yc(e){if(e.length===0)throw new Error(kU);return e.shift()}function Io(e,...t){let[r]=t;if(t.length===2?r+(t[1]??0)>e.length:r>=e.length)throw new Error(kU);return e.splice(...t)}var bc=class e{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(r=>new pe(r)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(r=>this.indexToProgramIds.set(r.programIdIndex,this.accountKeys[r.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:yi.default.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Qd(this.staticAccountKeys)}static compile(t){let r=O2.compile(t.instructions,t.payerKey),[n,i]=r.getMessageComponents(),s=new Qd(i).compileInstructions(t.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:yi.default.encode(a.data)}));return new e({header:n,accountKeys:i,recentBlockhash:t.recentBlockhash,instructions:s})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){let r=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){let n=t-r,o=this.accountKeys.length-r-this.header.numReadonlyUnsignedAccounts;return n<o}else{let n=r-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,r)=>!this.isProgramId(r))}serialize(){let t=this.accountKeys.length,r=[];Go(r,t);let n=this.instructions.map(f=>{let{accounts:m,programIdIndex:b}=f,w=Array.from(yi.default.decode(f.data)),S=[];Go(S,m.length);let P=[];return Go(P,w.length),{programIdIndex:b,keyIndicesCount:De.Buffer.from(S),keyIndices:m,dataLength:De.Buffer.from(P),data:w}}),i=[];Go(i,n.length);let o=De.Buffer.alloc(Lf);De.Buffer.from(i).copy(o);let s=i.length;n.forEach(f=>{let b=z.struct([z.u8("programIdIndex"),z.blob(f.keyIndicesCount.length,"keyIndicesCount"),z.seq(z.u8("keyIndex"),f.keyIndices.length,"keyIndices"),z.blob(f.dataLength.length,"dataLength"),z.seq(z.u8("userdatum"),f.data.length,"data")]).encode(f,o,s);s+=b}),o=o.slice(0,s);let a=z.struct([z.blob(1,"numRequiredSignatures"),z.blob(1,"numReadonlySignedAccounts"),z.blob(1,"numReadonlyUnsignedAccounts"),z.blob(r.length,"keyCount"),z.seq(Mt("key"),t,"keys"),Mt("recentBlockhash")]),c={numRequiredSignatures:De.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:De.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:De.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:De.Buffer.from(r),keys:this.accountKeys.map(f=>Et(f.toBytes())),recentBlockhash:yi.default.decode(this.recentBlockhash)},u=De.Buffer.alloc(2048),h=a.encode(c,u);return o.copy(u,h),u.slice(0,h+o.length)}static from(t){let r=[...t],n=yc(r);if(n!==(n&W2))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let i=yc(r),o=yc(r),s=Eo(r),a=[];for(let m=0;m<s;m++){let b=Io(r,0,gc);a.push(new pe(De.Buffer.from(b)))}let c=Io(r,0,gc),u=Eo(r),h=[];for(let m=0;m<u;m++){let b=yc(r),w=Eo(r),S=Io(r,0,w),P=Eo(r),N=Io(r,0,P),O=yi.default.encode(De.Buffer.from(N));h.push({programIdIndex:b,accounts:S,data:O})}let f={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:o},recentBlockhash:yi.default.encode(De.Buffer.from(c)),accountKeys:a,instructions:h};return new e(f)}},op=class e{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(let r of this.addressTableLookups)t+=r.readonlyIndexes.length+r.writableIndexes.length;return t}getAccountKeys(t){let r;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");r=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)r=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Qd(this.staticAccountKeys,r)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){let r=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){let i=t-n,o=this.addressTableLookups.reduce((s,a)=>s+a.writableIndexes.length,0);return i<o}else if(t>=this.header.numRequiredSignatures){let i=t-r,s=n-r-this.header.numReadonlyUnsignedAccounts;return i<s}else{let i=r-this.header.numReadonlySignedAccounts;return t<i}}resolveAddressTableLookups(t){let r={writable:[],readonly:[]};for(let n of this.addressTableLookups){let i=t.find(o=>o.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(let o of n.writableIndexes)if(o<i.state.addresses.length)r.writable.push(i.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${n.accountKey.toBase58()}`);for(let o of n.readonlyIndexes)if(o<i.state.addresses.length)r.readonly.push(i.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${n.accountKey.toBase58()}`)}return r}static compile(t){let r=O2.compile(t.instructions,t.payerKey),n=new Array,i={writable:new Array,readonly:new Array},o=t.addressLookupTableAccounts||[];for(let h of o){let f=r.extractTableLookup(h);if(f!==void 0){let[m,{writable:b,readonly:w}]=f;n.push(m),i.writable.push(...b),i.readonly.push(...w)}}let[s,a]=r.getMessageComponents(),u=new Qd(a,i).compileInstructions(t.instructions);return new e({header:s,staticAccountKeys:a,recentBlockhash:t.recentBlockhash,compiledInstructions:u,addressTableLookups:n})}serialize(){let t=Array();Go(t,this.staticAccountKeys.length);let r=this.serializeInstructions(),n=Array();Go(n,this.compiledInstructions.length);let i=this.serializeAddressTableLookups(),o=Array();Go(o,this.addressTableLookups.length);let s=z.struct([z.u8("prefix"),z.struct([z.u8("numRequiredSignatures"),z.u8("numReadonlySignedAccounts"),z.u8("numReadonlyUnsignedAccounts")],"header"),z.blob(t.length,"staticAccountKeysLength"),z.seq(Mt(),this.staticAccountKeys.length,"staticAccountKeys"),Mt("recentBlockhash"),z.blob(n.length,"instructionsLength"),z.blob(r.length,"serializedInstructions"),z.blob(o.length,"addressTableLookupsLength"),z.blob(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(Lf),u=s.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(h=>h.toBytes()),recentBlockhash:yi.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:r,addressTableLookupsLength:new Uint8Array(o),serializedAddressTableLookups:i},a);return a.slice(0,u)}serializeInstructions(){let t=0,r=new Uint8Array(Lf);for(let n of this.compiledInstructions){let i=Array();Go(i,n.accountKeyIndexes.length);let o=Array();Go(o,n.data.length);let s=z.struct([z.u8("programIdIndex"),z.blob(i.length,"encodedAccountKeyIndexesLength"),z.seq(z.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),z.blob(o.length,"encodedDataLength"),z.blob(n.data.length,"data")]);t+=s.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(o),data:n.data},r,t)}return r.slice(0,t)}serializeAddressTableLookups(){let t=0,r=new Uint8Array(Lf);for(let n of this.addressTableLookups){let i=Array();Go(i,n.writableIndexes.length);let o=Array();Go(o,n.readonlyIndexes.length);let s=z.struct([Mt("accountKey"),z.blob(i.length,"encodedWritableIndexesLength"),z.seq(z.u8(),n.writableIndexes.length,"writableIndexes"),z.blob(o.length,"encodedReadonlyIndexesLength"),z.seq(z.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=s.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(o),readonlyIndexes:n.readonlyIndexes},r,t)}return r.slice(0,t)}static deserialize(t){let r=[...t],n=yc(r),i=n&W2;er(n!==i,"Expected versioned message but received legacy message");let o=i;er(o===0,`Expected versioned message with version 0 but found version ${o}`);let s={numRequiredSignatures:yc(r),numReadonlySignedAccounts:yc(r),numReadonlyUnsignedAccounts:yc(r)},a=[],c=Eo(r);for(let w=0;w<c;w++)a.push(new pe(Io(r,0,gc)));let u=yi.default.encode(Io(r,0,gc)),h=Eo(r),f=[];for(let w=0;w<h;w++){let S=yc(r),P=Eo(r),N=Io(r,0,P),O=Eo(r),C=new Uint8Array(Io(r,0,O));f.push({programIdIndex:S,accountKeyIndexes:N,data:C})}let m=Eo(r),b=[];for(let w=0;w<m;w++){let S=new pe(Io(r,0,gc)),P=Eo(r),N=Io(r,0,P),O=Eo(r),C=Io(r,0,O);b.push({accountKey:S,writableIndexes:N,readonlyIndexes:C})}return new e({header:s,staticAccountKeys:a,recentBlockhash:u,compiledInstructions:f,addressTableLookups:b})}},KI={deserializeMessageVersion(e){let t=e[0],r=t&W2;return r===t?"legacy":r},deserialize:e=>{let t=KI.deserializeMessageVersion(e);if(t==="legacy")return bc.from(e);if(t===0)return op.deserialize(e);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};de.TransactionStatus=void 0;(function(e){e[e.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",e[e.PROCESSED=1]="PROCESSED",e[e.TIMED_OUT=2]="TIMED_OUT",e[e.NONCE_INVALID=3]="NONCE_INVALID"})(de.TransactionStatus||(de.TransactionStatus={}));var yce=De.Buffer.alloc(Kg).fill(0),yr=class{constructor(t){this.keys=void 0,this.programId=void 0,this.data=De.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:r,isWritable:n})=>({pubkey:t.toJSON(),isSigner:r,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}},pr=class e{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){let{minContextSlot:r,nonceInfo:n}=t;this.minNonceContextSlot=r,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){let{blockhash:r,lastValidBlockHeight:n}=t;this.recentBlockhash=r,this.lastValidBlockHeight=n}else{let{recentBlockhash:r,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=r}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(r=>{"instructions"in r?this.instructions=this.instructions.concat(r.instructions):"data"in r&&"programId"in r&&"keys"in r?this.instructions.push(r):this.instructions.push(new yr(r))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,r;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?r=[this.nonceInfo.nonceInstruction,...this.instructions]:r=this.instructions):(t=this.recentBlockhash,r=this.instructions),!t)throw new Error("Transaction recentBlockhash required");r.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let S=0;S<r.length;S++)if(r[S].programId===void 0)throw new Error(`Transaction instruction index ${S} has undefined program id`);let i=[],o=[];r.forEach(S=>{S.keys.forEach(N=>{o.push({...N})});let P=S.programId.toString();i.includes(P)||i.push(P)}),i.forEach(S=>{o.push({pubkey:new pe(S),isSigner:!1,isWritable:!1})});let s=[];o.forEach(S=>{let P=S.pubkey.toString(),N=s.findIndex(O=>O.pubkey.toString()===P);N>-1?(s[N].isWritable=s[N].isWritable||S.isWritable,s[N].isSigner=s[N].isSigner||S.isSigner):s.push(S)}),s.sort(function(S,P){return S.isSigner!==P.isSigner?S.isSigner?-1:1:S.isWritable!==P.isWritable?S.isWritable?-1:1:S.pubkey.toBase58().localeCompare(P.pubkey.toBase58())});let a=s.findIndex(S=>S.pubkey.equals(n));if(a>-1){let[S]=s.splice(a,1);S.isSigner=!0,S.isWritable=!0,s.unshift(S)}else s.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(let S of this.signatures){let P=s.findIndex(N=>N.pubkey.equals(S.publicKey));if(P>-1)s[P].isSigner||(s[P].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${S.publicKey.toString()}`)}let c=0,u=0,h=0,f=[],m=[];s.forEach(({pubkey:S,isSigner:P,isWritable:N})=>{P?(f.push(S.toString()),c+=1,N||(u+=1)):(m.push(S.toString()),N||(h+=1))});let b=f.concat(m),w=r.map(S=>{let{data:P,programId:N}=S;return{programIdIndex:b.indexOf(N.toString()),accounts:S.keys.map(O=>b.indexOf(O.pubkey.toString())),data:yi.default.encode(P)}});return w.forEach(S=>{er(S.programIdIndex>=0),S.accounts.forEach(P=>er(P>=0))}),new bc({header:{numRequiredSignatures:c,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:h},accountKeys:b,recentBlockhash:t,instructions:w})}_compile(){let t=this.compileMessage(),r=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===r.length&&this.signatures.every((i,o)=>r[o].equals(i.publicKey))||(this.signatures=r.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");let r=new Set;this.signatures=t.filter(n=>{let i=n.toString();return r.has(i)?!1:(r.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");let r=new Set,n=[];for(let o of t){let s=o.publicKey.toString();r.has(s)||(r.add(s),n.push(o))}this.signatures=n.map(o=>({signature:null,publicKey:o.publicKey}));let i=this._compile();this._partialSign(i,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");let r=new Set,n=[];for(let o of t){let s=o.publicKey.toString();r.has(s)||(r.add(s),n.push(o))}let i=this._compile();this._partialSign(i,...n)}_partialSign(t,...r){let n=t.serialize();r.forEach(i=>{let o=VI(n,i.secretKey);this._addSignature(i.publicKey,Et(o))})}addSignature(t,r){this._compile(),this._addSignature(t,r)}_addSignature(t,r){er(r.length===64);let n=this.signatures.findIndex(i=>t.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=De.Buffer.from(r)}verifySignatures(t){return this._verifySignatures(this.serializeMessage(),t===void 0?!0:t)}_verifySignatures(t,r){for(let{signature:n,publicKey:i}of this.signatures)if(n===null){if(r)return!1}else if(!ace(n,t,i.toBytes()))return!1;return!0}serialize(t){let{requireAllSignatures:r,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),i=this.serializeMessage();if(n&&!this._verifySignatures(i,r))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(t){let{signatures:r}=this,n=[];Go(n,r.length);let i=n.length+r.length*64+t.length,o=De.Buffer.alloc(i);return er(r.length<256),De.Buffer.from(n).copy(o,0),r.forEach(({signature:s},a)=>{s!==null&&(er(s.length===64,"signature has invalid length"),De.Buffer.from(s).copy(o,n.length+a*64))}),t.copy(o,n.length+r.length*64),er(o.length<=Lf,`Transaction too large: ${o.length} > ${Lf}`),o}get keys(){return er(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return er(this.instructions.length===1),this.instructions[0].programId}get data(){return er(this.instructions.length===1),this.instructions[0].data}static from(t){let r=[...t],n=Eo(r),i=[];for(let o=0;o<n;o++){let s=Io(r,0,Kg);i.push(yi.default.encode(De.Buffer.from(s)))}return e.populate(bc.from(r),i)}static populate(t,r=[]){let n=new e;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),r.forEach((i,o)=>{let s={signature:i==yi.default.encode(yce)?null:yi.default.decode(i),publicKey:t.accountKeys[o]};n.signatures.push(s)}),t.instructions.forEach(i=>{let o=i.accounts.map(s=>{let a=t.accountKeys[s];return{pubkey:a,isSigner:n.signatures.some(c=>c.publicKey.toString()===a.toString())||t.isAccountSigner(s),isWritable:t.isAccountWritable(s)}});n.instructions.push(new yr({keys:o,programId:t.accountKeys[i.programIdIndex],data:yi.default.decode(i.data)}))}),n._message=t,n._json=n.toJSON(),n}},vI=class e{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,r){let{header:n,compiledInstructions:i,recentBlockhash:o}=t,{numRequiredSignatures:s,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:c}=n,u=s-a;er(u>0,"Message header is invalid");let h=t.staticAccountKeys.length-s-c;er(h>=0,"Message header is invalid");let f=t.getAccountKeys(r),m=f.get(0);if(m===void 0)throw new Error("Failed to decompile message because no account keys were found");let b=[];for(let w of i){let S=[];for(let N of w.accountKeyIndexes){let O=f.get(N);if(O===void 0)throw new Error(`Failed to find key for account key index ${N}`);let C=N<s,L;C?L=N<u:N<f.staticAccountKeys.length?L=N-s<h:L=N-f.staticAccountKeys.length<f.accountKeysFromLookups.writable.length,S.push({pubkey:O,isSigner:N<n.numRequiredSignatures,isWritable:L})}let P=f.get(w.programIdIndex);if(P===void 0)throw new Error(`Failed to find program id for program id index ${w.programIdIndex}`);b.push(new yr({programId:P,data:Et(w.data),keys:S}))}return new e({payerKey:m,instructions:b,recentBlockhash:o})}compileToLegacyMessage(){return bc.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return op.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}},AI=class e{get version(){return this.message.version}constructor(t,r){if(this.signatures=void 0,this.message=void 0,r!==void 0)er(r.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=r;else{let n=[];for(let i=0;i<t.header.numRequiredSignatures;i++)n.push(new Uint8Array(Kg));this.signatures=n}this.message=t}serialize(){let t=this.message.serialize(),r=Array();Go(r,this.signatures.length);let n=z.struct([z.blob(r.length,"encodedSignaturesLength"),z.seq(fce(),this.signatures.length,"signatures"),z.blob(t.length,"serializedMessage")]),i=new Uint8Array(2048),o=n.encode({encodedSignaturesLength:new Uint8Array(r),signatures:this.signatures,serializedMessage:t},i);return i.slice(0,o)}static deserialize(t){let r=[...t],n=[],i=Eo(r);for(let s=0;s<i;s++)n.push(new Uint8Array(Io(r,0,Kg)));let o=KI.deserialize(new Uint8Array(r));return new e(o,n)}sign(t){let r=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(let i of t){let o=n.findIndex(s=>s.equals(i.publicKey));er(o>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[o]=VI(r,i.secretKey)}}addSignature(t,r){er(r.byteLength===64,"Signature must be 64 bytes long");let i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(o=>o.equals(t));er(i>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=r}},pc=new pe("SysvarC1ock11111111111111111111111111111111"),mce=new pe("SysvarEpochSchedu1e111111111111111111111111"),gce=new pe("Sysvar1nstructions1111111111111111111111111"),C2=new pe("SysvarRecentB1ockHashes11111111111111111111"),sp=new pe("SysvarRent111111111111111111111111111111111"),bce=new pe("SysvarRewards111111111111111111111111111111"),xce=new pe("SysvarS1otHashes111111111111111111111111111"),wce=new pe("SysvarS1otHistory11111111111111111111111111"),N2=new pe("SysvarStakeHistory1111111111111111111111111");async function M2(e,t,r,n){let i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},o=await e.sendTransaction(t,r,i),s;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)s=(await e.confirmTransaction({abortSignal:n?.abortSignal,signature:o,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},n&&n.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){let{nonceInstruction:a}=t.nonceInfo,c=a.keys[0].pubkey;s=(await e.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:c,nonceValue:t.nonceInfo.nonce,signature:o},n&&n.commitment)).value}else n?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),s=(await e.confirmTransaction(o,n&&n.commitment)).value;if(s.err)throw new Error(`Transaction ${o} failed (${JSON.stringify(s)})`);return o}function Jd(e){return new Promise(t=>setTimeout(t,e))}function Zt(e,t){let r=e.layout.span>=0?e.layout.span:IU(e,t),n=De.Buffer.alloc(r),i=Object.assign({instruction:e.index},t);return e.layout.encode(i,n),n}function fr(e,t){let r;try{r=e.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(r.instruction!==e.index)throw new Error(`invalid instruction; instruction index mismatch ${r.instruction} != ${e.index}`);return r}var TU=z.nu64("lamportsPerSignature"),PU=z.struct([z.u32("version"),z.u32("state"),Mt("authorizedPubkey"),Mt("nonce"),z.struct([TU],"feeCalculator")]),EI=PU.span,U2=class e{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){let r=PU.decode(Et(t),0);return new e({authorizedPubkey:new pe(r.authorizedPubkey),nonce:new pe(r.nonce).toString(),feeCalculator:r.feeCalculator})}},Sce=e=>{let t=e.decode.bind(e),r=e.encode.bind(e);return{decode:t,encode:r}},vce=e=>t=>{let r=vU.blob(e,t),{encode:n,decode:i}=Sce(r),o=r;return o.decode=(s,a)=>{let c=i(s,a);return xI.toBigIntLE(De.Buffer.from(c))},o.encode=(s,a,c)=>{let u=xI.toBufferLE(s,e);return n(u,a,c)},o},ap=vce(8),II=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=z.u32("instruction").decode(t.data),i;for(let[o,s]of Object.entries(Pr))if(s.index==n){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{lamports:r,space:n,programId:i}=fr(Pr.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:r,space:n,programId:new pe(i)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{lamports:r}=fr(Pr.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:r}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:r,seed:n,programId:i}=fr(Pr.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:r,seed:n,programId:new pe(i)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{space:r}=fr(Pr.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:r}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{base:r,seed:n,space:i,programId:o}=fr(Pr.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new pe(r),seed:n,space:i,programId:new pe(o)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{programId:r}=fr(Pr.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new pe(r)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{base:r,seed:n,programId:i}=fr(Pr.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new pe(r),seed:n,programId:new pe(i)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{base:r,seed:n,lamports:i,space:o,programId:s}=fr(Pr.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new pe(r),seed:n,lamports:i,space:o,programId:new pe(s)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{authorized:r}=fr(Pr.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new pe(r)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),fr(Pr.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);let{lamports:r}=fr(Pr.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:r}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{authorized:r}=fr(Pr.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new pe(r)}}static checkProgramId(t){if(!t.equals(Ri.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,r){if(t.length<r)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${r}`)}},Pr=Object.freeze({Create:{index:0,layout:z.struct([z.u32("instruction"),z.ns64("lamports"),z.ns64("space"),Mt("programId")])},Assign:{index:1,layout:z.struct([z.u32("instruction"),Mt("programId")])},Transfer:{index:2,layout:z.struct([z.u32("instruction"),ap("lamports")])},CreateWithSeed:{index:3,layout:z.struct([z.u32("instruction"),Mt("base"),Xd("seed"),z.ns64("lamports"),z.ns64("space"),Mt("programId")])},AdvanceNonceAccount:{index:4,layout:z.struct([z.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:z.struct([z.u32("instruction"),z.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:z.struct([z.u32("instruction"),Mt("authorized")])},AuthorizeNonceAccount:{index:7,layout:z.struct([z.u32("instruction"),Mt("authorized")])},Allocate:{index:8,layout:z.struct([z.u32("instruction"),z.ns64("space")])},AllocateWithSeed:{index:9,layout:z.struct([z.u32("instruction"),Mt("base"),Xd("seed"),z.ns64("space"),Mt("programId")])},AssignWithSeed:{index:10,layout:z.struct([z.u32("instruction"),Mt("base"),Xd("seed"),Mt("programId")])},TransferWithSeed:{index:11,layout:z.struct([z.u32("instruction"),ap("lamports"),Xd("seed"),Mt("programId")])},UpgradeNonceAccount:{index:12,layout:z.struct([z.u32("instruction")])}}),Ri=class e{constructor(){}static createAccount(t){let r=Pr.Create,n=Zt(r,{lamports:t.lamports,space:t.space,programId:Et(t.programId.toBuffer())});return new yr({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(t){let r,n;if("basePubkey"in t){let i=Pr.TransferWithSeed;r=Zt(i,{lamports:BigInt(t.lamports),seed:t.seed,programId:Et(t.programId.toBuffer())}),n=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{let i=Pr.Transfer;r=Zt(i,{lamports:BigInt(t.lamports)}),n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new yr({keys:n,programId:this.programId,data:r})}static assign(t){let r,n;if("basePubkey"in t){let i=Pr.AssignWithSeed;r=Zt(i,{base:Et(t.basePubkey.toBuffer()),seed:t.seed,programId:Et(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{let i=Pr.Assign;r=Zt(i,{programId:Et(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new yr({keys:n,programId:this.programId,data:r})}static createAccountWithSeed(t){let r=Pr.CreateWithSeed,n=Zt(r,{base:Et(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:Et(t.programId.toBuffer())}),i=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey!=t.fromPubkey&&i.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new yr({keys:i,programId:this.programId,data:n})}static createNonceAccount(t){let r=new pr;"basePubkey"in t&&"seed"in t?r.add(e.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:EI,programId:this.programId})):r.add(e.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:EI,programId:this.programId}));let n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return r.add(this.nonceInitialize(n)),r}static nonceInitialize(t){let r=Pr.InitializeNonceAccount,n=Zt(r,{authorized:Et(t.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:C2,isSigner:!1,isWritable:!1},{pubkey:sp,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new yr(i)}static nonceAdvance(t){let r=Pr.AdvanceNonceAccount,n=Zt(r),i={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:C2,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new yr(i)}static nonceWithdraw(t){let r=Pr.WithdrawNonceAccount,n=Zt(r,{lamports:t.lamports});return new yr({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:C2,isSigner:!1,isWritable:!1},{pubkey:sp,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(t){let r=Pr.AuthorizeNonceAccount,n=Zt(r,{authorized:Et(t.newAuthorizedPubkey.toBuffer())});return new yr({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(t){let r,n;if("basePubkey"in t){let i=Pr.AllocateWithSeed;r=Zt(i,{base:Et(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:Et(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{let i=Pr.Allocate;r=Zt(i,{space:t.space}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new yr({keys:n,programId:this.programId,data:r})}};Ri.programId=new pe("11111111111111111111111111111111");var Ace=Lf-300,cp=class e{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/e.chunkSize)+1+1)}static async load(t,r,n,i,o){{let f=await t.getMinimumBalanceForRentExemption(o.length),m=await t.getAccountInfo(n.publicKey,"confirmed"),b=null;if(m!==null){if(m.executable)return console.error("Program load failed, account is already executable"),!1;m.data.length!==o.length&&(b=b||new pr,b.add(Ri.allocate({accountPubkey:n.publicKey,space:o.length}))),m.owner.equals(i)||(b=b||new pr,b.add(Ri.assign({accountPubkey:n.publicKey,programId:i}))),m.lamports<f&&(b=b||new pr,b.add(Ri.transfer({fromPubkey:r.publicKey,toPubkey:n.publicKey,lamports:f-m.lamports})))}else b=new pr().add(Ri.createAccount({fromPubkey:r.publicKey,newAccountPubkey:n.publicKey,lamports:f>0?f:1,space:o.length,programId:i}));b!==null&&await M2(t,b,[r,n],{commitment:"confirmed"})}let s=z.struct([z.u32("instruction"),z.u32("offset"),z.u32("bytesLength"),z.u32("bytesLengthPadding"),z.seq(z.u8("byte"),z.offset(z.u32(),-8),"bytes")]),a=e.chunkSize,c=0,u=o,h=[];for(;u.length>0;){let f=u.slice(0,a),m=De.Buffer.alloc(a+16);s.encode({instruction:0,offset:c,bytes:f,bytesLength:0,bytesLengthPadding:0},m);let b=new pr().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:m});h.push(M2(t,b,[r,n],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await Jd(1e3/4),c+=a,u=u.slice(a)}await Promise.all(h);{let f=z.struct([z.u32("instruction")]),m=De.Buffer.alloc(f.span);f.encode({instruction:1},m);let b=new pr().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:sp,isSigner:!1,isWritable:!1}],programId:i,data:m});await M2(t,b,[r,n],{commitment:"confirmed"})}return!0}};cp.chunkSize=Ace;var Ece=new pe("BPFLoader2111111111111111111111111111111111"),kI=class{static getMinNumSignatures(t){return cp.getMinNumSignatures(t)}static load(t,r,n,i,o){return cp.load(t,r,n,o,i)}},Ice=Object.prototype.toString,kce=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};function Rg(e,t){var r,n,i,o,s,a,c;if(e===!0)return"true";if(e===!1)return"false";switch(typeof e){case"object":if(e===null)return null;if(e.toJSON&&typeof e.toJSON=="function")return Rg(e.toJSON(),t);if(c=Ice.call(e),c==="[object Array]"){for(i="[",n=e.length-1,r=0;r<n;r++)i+=Rg(e[r],!0)+",";return n>-1&&(i+=Rg(e[r],!0)),i+"]"}else if(c==="[object Object]"){for(o=kce(e).sort(),n=o.length,i="",r=0;r<n;)s=o[r],a=Rg(e[s],!1),a!==void 0&&(i&&(i+=","),i+=JSON.stringify(s)+":"+a),r++;return"{"+i+"}"}else return JSON.stringify(e);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(e);default:return isFinite(e)?e:null}}var Tce=function(e){var t=Rg(e,!1);if(t!==void 0)return""+t},Pce=Tce,Ug=32;function hI(e){let t=0;for(;e>1;)e/=2,t++;return t}function Bce(e){return e===0?1:(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e|=e>>32,e+1)}var R2=class{constructor(t,r,n,i,o){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=r,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=o}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){let r=hI(Bce(t+Ug+1))-hI(Ug)-1,n=this.getSlotsInEpoch(r),i=t-(n-Ug);return[r,i]}else{let r=t-this.firstNormalSlot,n=Math.floor(r/this.slotsPerEpoch),i=this.firstNormalEpoch+n,o=r%this.slotsPerEpoch;return[i,o]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Ug:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+hI(Ug)):this.slotsPerEpoch}},qg=class extends Error{constructor(t,r){super(t),this.logs=void 0,this.logs=r}},_ce={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016},Ee=class extends Error{constructor({code:t,message:r,data:n},i){super(i!=null?`${i}: ${r}`:r),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}},Cce=globalThis.fetch,TI=class extends ice.default{constructor(t,r,n){let i=o=>{let s=oce.default(o,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...r});return"socket"in s?this.underlyingSocket=s.socket:this.underlyingSocket=s,s};super(i,t,r,n),this.underlyingSocket=void 0}call(...t){let r=this.underlyingSocket?.readyState;return r===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}notify(...t){let r=this.underlyingSocket?.readyState;return r===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}},Nce=160,Mce=64,Dce=Nce/Mce,Oce=1e3/Dce;function Uce(e,t){let r;try{r=e.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(r.typeIndex!==e.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${e.index}`);return r}var fU=56,jg=class{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){let t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){let r=Uce(Rce,t),n=t.length-fU;er(n>=0,"lookup table is invalid"),er(n%32===0,"lookup table is invalid");let i=n/32,{addresses:o}=z.struct([z.seq(Mt(),i,"addresses")]).decode(t.slice(fU));return{deactivationSlot:r.deactivationSlot,lastExtendedSlot:r.lastExtendedSlot,lastExtendedSlotStartIndex:r.lastExtendedStartIndex,authority:r.authority.length!==0?new pe(r.authority[0]):void 0,addresses:o.map(s=>new pe(s))}}},Rce={index:1,layout:z.struct([z.u32("typeIndex"),ap("deactivationSlot"),z.nu64("lastExtendedSlot"),z.u8("lastExtendedStartIndex"),z.u8(),z.seq(Mt(),z.offset(z.u8(),-1),"authority")])},Lce=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Vce(e){let t=e.match(Lce);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${e}\``);let[r,n,i,o]=t,s=e.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),c=a==null?"":`:${a+1}`;return`${s}//${n}${c}${o}`}var wn=k.coerce(k.instance(pe),k.string(),e=>new pe(e)),BU=k.tuple([k.string(),k.literal("base64")]),FI=k.coerce(k.instance(De.Buffer),BU,e=>De.Buffer.from(e[0],"base64")),_U=30*1e3;function Kce(e){if(/^https?:/.test(e)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return e}function Qr(e){let t,r;if(typeof e=="string")t=e;else if(e){let{commitment:n,...i}=e;t=n,r=i}return{commitment:t,config:r}}function CU(e){return k.union([k.type({jsonrpc:k.literal("2.0"),id:k.string(),result:e}),k.type({jsonrpc:k.literal("2.0"),id:k.string(),error:k.type({code:k.unknown(),message:k.string(),data:k.optional(k.any())})})])}var Fce=CU(k.unknown());function kt(e){return k.coerce(CU(e),Fce,t=>"error"in t?t:{...t,result:k.create(t.result,e)})}function xn(e){return kt(k.type({context:k.type({slot:k.number()}),value:e}))}function z2(e){return k.type({context:k.type({slot:k.number()}),value:e})}function pI(e,t){return e===0?new op({header:t.header,staticAccountKeys:t.accountKeys.map(r=>new pe(r)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(r=>({programIdIndex:r.programIdIndex,accountKeyIndexes:r.accounts,data:yi.default.decode(r.data)})),addressTableLookups:t.addressTableLookups}):new bc(t)}var Hce=k.type({foundation:k.number(),foundationTerm:k.number(),initial:k.number(),taper:k.number(),terminal:k.number()}),qce=kt(k.array(k.nullable(k.type({epoch:k.number(),effectiveSlot:k.number(),amount:k.number(),postBalance:k.number(),commission:k.optional(k.nullable(k.number()))})))),jce=k.type({total:k.number(),validator:k.number(),foundation:k.number(),epoch:k.number()}),Wce=k.type({epoch:k.number(),slotIndex:k.number(),slotsInEpoch:k.number(),absoluteSlot:k.number(),blockHeight:k.optional(k.number()),transactionCount:k.optional(k.number())}),zce=k.type({slotsPerEpoch:k.number(),leaderScheduleSlotOffset:k.number(),warmup:k.boolean(),firstNormalEpoch:k.number(),firstNormalSlot:k.number()}),Gce=k.record(k.string(),k.array(k.number())),th=k.nullable(k.union([k.type({}),k.string()])),$ce=k.type({err:th}),Yce=k.literal("receivedSignature"),Zce=k.type({"solana-core":k.string(),"feature-set":k.optional(k.number())}),lU=xn(k.type({err:k.nullable(k.union([k.type({}),k.string()])),logs:k.nullable(k.array(k.string())),accounts:k.optional(k.nullable(k.array(k.nullable(k.type({executable:k.boolean(),owner:k.string(),lamports:k.number(),data:k.array(k.string()),rentEpoch:k.optional(k.number())}))))),unitsConsumed:k.optional(k.number()),returnData:k.optional(k.nullable(k.type({programId:k.string(),data:k.tuple([k.string(),k.literal("base64")])})))})),Jce=xn(k.type({byIdentity:k.record(k.string(),k.array(k.number())),range:k.type({firstSlot:k.number(),lastSlot:k.number()})}));function Xce(e,t,r,n,i,o){let s=r||Cce,a;o!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return n&&(c=async(h,f)=>{let m=await new Promise((b,w)=>{try{n(h,f,(S,P)=>b([S,P]))}catch(S){w(S)}});return await s(...m)}),new nce.default(async(h,f)=>{let m={method:"POST",body:h,agent:a,headers:Object.assign({"Content-Type":"application/json"},t||{},Jue)};try{let b=5,w,S=500;for(;c?w=await c(e,m):w=await s(e,m),!(w.status!==429||i===!0||(b-=1,b===0));)console.log(`Server responded with ${w.status} ${w.statusText}.  Retrying after ${S}ms delay...`),await Jd(S),S*=2;let P=await w.text();w.ok?f(null,P):f(new Error(`${w.status} ${w.statusText}: ${P}`))}catch(b){b instanceof Error&&f(b)}},{})}function Qce(e){return(t,r)=>new Promise((n,i)=>{e.request(t,r,(o,s)=>{if(o){i(o);return}n(s)})})}function eue(e){return t=>new Promise((r,n)=>{t.length===0&&r([]);let i=t.map(o=>e.request(o.methodName,o.args));e.request(i,(o,s)=>{if(o){n(o);return}r(s)})})}var tue=kt(Hce),rue=kt(jce),nue=kt(Wce),iue=kt(zce),oue=kt(Gce),sue=kt(k.number()),aue=xn(k.type({total:k.number(),circulating:k.number(),nonCirculating:k.number(),nonCirculatingAccounts:k.array(wn)})),PI=k.type({amount:k.string(),uiAmount:k.nullable(k.number()),decimals:k.number(),uiAmountString:k.optional(k.string())}),cue=xn(k.array(k.type({address:wn,amount:k.string(),uiAmount:k.nullable(k.number()),decimals:k.number(),uiAmountString:k.optional(k.string())}))),uue=xn(k.array(k.type({pubkey:wn,account:k.type({executable:k.boolean(),owner:wn,lamports:k.number(),data:FI,rentEpoch:k.number()})}))),BI=k.type({program:k.string(),parsed:k.unknown(),space:k.number()}),fue=xn(k.array(k.type({pubkey:wn,account:k.type({executable:k.boolean(),owner:wn,lamports:k.number(),data:BI,rentEpoch:k.number()})}))),lue=xn(k.array(k.type({lamports:k.number(),address:wn}))),Wg=k.type({executable:k.boolean(),owner:wn,lamports:k.number(),data:FI,rentEpoch:k.number()}),due=k.type({pubkey:wn,account:Wg}),hue=k.coerce(k.union([k.instance(De.Buffer),BI]),k.union([BU,BI]),e=>Array.isArray(e)?k.create(e,FI):e),_I=k.type({executable:k.boolean(),owner:wn,lamports:k.number(),data:hue,rentEpoch:k.number()}),pue=k.type({pubkey:wn,account:_I}),yue=k.type({state:k.union([k.literal("active"),k.literal("inactive"),k.literal("activating"),k.literal("deactivating")]),active:k.number(),inactive:k.number()}),mue=kt(k.array(k.type({signature:k.string(),slot:k.number(),err:th,memo:k.nullable(k.string()),blockTime:k.optional(k.nullable(k.number()))}))),gue=kt(k.array(k.type({signature:k.string(),slot:k.number(),err:th,memo:k.nullable(k.string()),blockTime:k.optional(k.nullable(k.number()))}))),bue=k.type({subscription:k.number(),result:z2(Wg)}),xue=k.type({pubkey:wn,account:Wg}),wue=k.type({subscription:k.number(),result:z2(xue)}),Sue=k.type({parent:k.number(),slot:k.number(),root:k.number()}),vue=k.type({subscription:k.number(),result:Sue}),Aue=k.union([k.type({type:k.union([k.literal("firstShredReceived"),k.literal("completed"),k.literal("optimisticConfirmation"),k.literal("root")]),slot:k.number(),timestamp:k.number()}),k.type({type:k.literal("createdBank"),parent:k.number(),slot:k.number(),timestamp:k.number()}),k.type({type:k.literal("frozen"),slot:k.number(),timestamp:k.number(),stats:k.type({numTransactionEntries:k.number(),numSuccessfulTransactions:k.number(),numFailedTransactions:k.number(),maxTransactionsPerEntry:k.number()})}),k.type({type:k.literal("dead"),slot:k.number(),timestamp:k.number(),err:k.string()})]),Eue=k.type({subscription:k.number(),result:Aue}),Iue=k.type({subscription:k.number(),result:z2(k.union([$ce,Yce]))}),kue=k.type({subscription:k.number(),result:k.number()}),Tue=k.type({pubkey:k.string(),gossip:k.nullable(k.string()),tpu:k.nullable(k.string()),rpc:k.nullable(k.string()),version:k.nullable(k.string())}),dU=k.type({votePubkey:k.string(),nodePubkey:k.string(),activatedStake:k.number(),epochVoteAccount:k.boolean(),epochCredits:k.array(k.tuple([k.number(),k.number(),k.number()])),commission:k.number(),lastVote:k.number(),rootSlot:k.nullable(k.number())}),Pue=kt(k.type({current:k.array(dU),delinquent:k.array(dU)})),Bue=k.union([k.literal("processed"),k.literal("confirmed"),k.literal("finalized")]),_ue=k.type({slot:k.number(),confirmations:k.nullable(k.number()),err:th,confirmationStatus:k.optional(Bue)}),Cue=xn(k.array(k.nullable(_ue))),Nue=kt(k.number()),NU=k.type({accountKey:wn,writableIndexes:k.array(k.number()),readonlyIndexes:k.array(k.number())}),HI=k.type({signatures:k.array(k.string()),message:k.type({accountKeys:k.array(k.string()),header:k.type({numRequiredSignatures:k.number(),numReadonlySignedAccounts:k.number(),numReadonlyUnsignedAccounts:k.number()}),instructions:k.array(k.type({accounts:k.array(k.number()),data:k.string(),programIdIndex:k.number()})),recentBlockhash:k.string(),addressTableLookups:k.optional(k.array(NU))})}),MU=k.type({pubkey:wn,signer:k.boolean(),writable:k.boolean(),source:k.optional(k.union([k.literal("transaction"),k.literal("lookupTable")]))}),DU=k.type({accountKeys:k.array(MU),signatures:k.array(k.string())}),OU=k.type({parsed:k.unknown(),program:k.string(),programId:wn}),UU=k.type({accounts:k.array(wn),data:k.string(),programId:wn}),Mue=k.union([UU,OU]),Due=k.union([k.type({parsed:k.unknown(),program:k.string(),programId:k.string()}),k.type({accounts:k.array(k.string()),data:k.string(),programId:k.string()})]),RU=k.coerce(Mue,Due,e=>"accounts"in e?k.create(e,UU):k.create(e,OU)),LU=k.type({signatures:k.array(k.string()),message:k.type({accountKeys:k.array(MU),instructions:k.array(RU),recentBlockhash:k.string(),addressTableLookups:k.optional(k.nullable(k.array(NU)))})}),L2=k.type({accountIndex:k.number(),mint:k.string(),owner:k.optional(k.string()),uiTokenAmount:PI}),VU=k.type({writable:k.array(wn),readonly:k.array(wn)}),G2=k.type({err:th,fee:k.number(),innerInstructions:k.optional(k.nullable(k.array(k.type({index:k.number(),instructions:k.array(k.type({accounts:k.array(k.number()),data:k.string(),programIdIndex:k.number()}))})))),preBalances:k.array(k.number()),postBalances:k.array(k.number()),logMessages:k.optional(k.nullable(k.array(k.string()))),preTokenBalances:k.optional(k.nullable(k.array(L2))),postTokenBalances:k.optional(k.nullable(k.array(L2))),loadedAddresses:k.optional(VU),computeUnitsConsumed:k.optional(k.number())}),qI=k.type({err:th,fee:k.number(),innerInstructions:k.optional(k.nullable(k.array(k.type({index:k.number(),instructions:k.array(RU)})))),preBalances:k.array(k.number()),postBalances:k.array(k.number()),logMessages:k.optional(k.nullable(k.array(k.string()))),preTokenBalances:k.optional(k.nullable(k.array(L2))),postTokenBalances:k.optional(k.nullable(k.array(L2))),loadedAddresses:k.optional(VU),computeUnitsConsumed:k.optional(k.number())}),lp=k.union([k.literal(0),k.literal("legacy")]),rh=k.type({pubkey:k.string(),lamports:k.number(),postBalance:k.nullable(k.number()),rewardType:k.nullable(k.string()),commission:k.optional(k.nullable(k.number()))}),Oue=kt(k.nullable(k.type({blockhash:k.string(),previousBlockhash:k.string(),parentSlot:k.number(),transactions:k.array(k.type({transaction:HI,meta:k.nullable(G2),version:k.optional(lp)})),rewards:k.optional(k.array(rh)),blockTime:k.nullable(k.number()),blockHeight:k.nullable(k.number())}))),Uue=kt(k.nullable(k.type({blockhash:k.string(),previousBlockhash:k.string(),parentSlot:k.number(),rewards:k.optional(k.array(rh)),blockTime:k.nullable(k.number()),blockHeight:k.nullable(k.number())}))),Rue=kt(k.nullable(k.type({blockhash:k.string(),previousBlockhash:k.string(),parentSlot:k.number(),transactions:k.array(k.type({transaction:DU,meta:k.nullable(G2),version:k.optional(lp)})),rewards:k.optional(k.array(rh)),blockTime:k.nullable(k.number()),blockHeight:k.nullable(k.number())}))),Lue=kt(k.nullable(k.type({blockhash:k.string(),previousBlockhash:k.string(),parentSlot:k.number(),transactions:k.array(k.type({transaction:LU,meta:k.nullable(qI),version:k.optional(lp)})),rewards:k.optional(k.array(rh)),blockTime:k.nullable(k.number()),blockHeight:k.nullable(k.number())}))),Vue=kt(k.nullable(k.type({blockhash:k.string(),previousBlockhash:k.string(),parentSlot:k.number(),transactions:k.array(k.type({transaction:DU,meta:k.nullable(qI),version:k.optional(lp)})),rewards:k.optional(k.array(rh)),blockTime:k.nullable(k.number()),blockHeight:k.nullable(k.number())}))),Kue=kt(k.nullable(k.type({blockhash:k.string(),previousBlockhash:k.string(),parentSlot:k.number(),rewards:k.optional(k.array(rh)),blockTime:k.nullable(k.number()),blockHeight:k.nullable(k.number())}))),Fue=kt(k.nullable(k.type({blockhash:k.string(),previousBlockhash:k.string(),parentSlot:k.number(),transactions:k.array(k.type({transaction:HI,meta:k.nullable(G2)})),rewards:k.optional(k.array(rh)),blockTime:k.nullable(k.number())}))),hU=kt(k.nullable(k.type({blockhash:k.string(),previousBlockhash:k.string(),parentSlot:k.number(),signatures:k.array(k.string()),blockTime:k.nullable(k.number())}))),yI=kt(k.nullable(k.type({slot:k.number(),meta:G2,blockTime:k.optional(k.nullable(k.number())),transaction:HI,version:k.optional(lp)}))),_2=kt(k.nullable(k.type({slot:k.number(),transaction:LU,meta:k.nullable(qI),blockTime:k.optional(k.nullable(k.number())),version:k.optional(lp)}))),Hue=xn(k.type({blockhash:k.string(),feeCalculator:k.type({lamportsPerSignature:k.number()})})),que=xn(k.type({blockhash:k.string(),lastValidBlockHeight:k.number()})),jue=k.type({slot:k.number(),numTransactions:k.number(),numSlots:k.number(),samplePeriodSecs:k.number()}),Wue=kt(k.array(jue)),zue=xn(k.nullable(k.type({feeCalculator:k.type({lamportsPerSignature:k.number()})}))),Gue=kt(k.string()),$ue=kt(k.string()),Yue=k.type({err:th,logs:k.array(k.string()),signature:k.string()}),Zue=k.type({result:z2(Yue),subscription:k.number()}),Jue={"solana-client":"js/1.73.5"},CI=class{constructor(t,r){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set;let n,i,o,s,a,c;r&&typeof r=="string"?this._commitment=r:r&&(this._commitment=r.commitment,this._confirmTransactionInitialTimeout=r.confirmTransactionInitialTimeout,n=r.wsEndpoint,i=r.httpHeaders,o=r.fetch,s=r.fetchMiddleware,a=r.disableRetryOnRateLimit,c=r.httpAgent),this._rpcEndpoint=Kce(t),this._rpcWsEndpoint=n||Vce(t),this._rpcClient=Xce(t,i,o,s,a,c),this._rpcRequest=Qce(this._rpcClient),this._rpcBatchRequest=eue(this._rpcClient),this._rpcWebSocket=new TI(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,r){let{commitment:n,config:i}=Qr(r),o=this._buildArgs([t.toBase58()],n,void 0,i),s=await this._rpcRequest("getBalance",o),a=k.create(s,xn(k.number()));if("error"in a)throw new Ee(a.error,`failed to get balance for ${t.toBase58()}`);return a.result}async getBalance(t,r){return await this.getBalanceAndContext(t,r).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+n)})}async getBlockTime(t){let r=await this._rpcRequest("getBlockTime",[t]),n=k.create(r,kt(k.nullable(k.number())));if("error"in n)throw new Ee(n.error,`failed to get block time for slot ${t}`);return n.result}async getMinimumLedgerSlot(){let t=await this._rpcRequest("minimumLedgerSlot",[]),r=k.create(t,kt(k.number()));if("error"in r)throw new Ee(r.error,"failed to get minimum ledger slot");return r.result}async getFirstAvailableBlock(){let t=await this._rpcRequest("getFirstAvailableBlock",[]),r=k.create(t,sue);if("error"in r)throw new Ee(r.error,"failed to get first available block");return r.result}async getSupply(t){let r={};typeof t=="string"?r={commitment:t}:t?r={...t,commitment:t&&t.commitment||this.commitment}:r={commitment:this.commitment};let n=await this._rpcRequest("getSupply",[r]),i=k.create(n,aue);if("error"in i)throw new Ee(i.error,"failed to get supply");return i.result}async getTokenSupply(t,r){let n=this._buildArgs([t.toBase58()],r),i=await this._rpcRequest("getTokenSupply",n),o=k.create(i,xn(PI));if("error"in o)throw new Ee(o.error,"failed to get token supply");return o.result}async getTokenAccountBalance(t,r){let n=this._buildArgs([t.toBase58()],r),i=await this._rpcRequest("getTokenAccountBalance",n),o=k.create(i,xn(PI));if("error"in o)throw new Ee(o.error,"failed to get token account balance");return o.result}async getTokenAccountsByOwner(t,r,n){let{commitment:i,config:o}=Qr(n),s=[t.toBase58()];"mint"in r?s.push({mint:r.mint.toBase58()}):s.push({programId:r.programId.toBase58()});let a=this._buildArgs(s,i,"base64",o),c=await this._rpcRequest("getTokenAccountsByOwner",a),u=k.create(c,uue);if("error"in u)throw new Ee(u.error,`failed to get token accounts owned by account ${t.toBase58()}`);return u.result}async getParsedTokenAccountsByOwner(t,r,n){let i=[t.toBase58()];"mint"in r?i.push({mint:r.mint.toBase58()}):i.push({programId:r.programId.toBase58()});let o=this._buildArgs(i,n,"jsonParsed"),s=await this._rpcRequest("getTokenAccountsByOwner",o),a=k.create(s,fue);if("error"in a)throw new Ee(a.error,`failed to get token accounts owned by account ${t.toBase58()}`);return a.result}async getLargestAccounts(t){let r={...t,commitment:t&&t.commitment||this.commitment},n=r.filter||r.commitment?[r]:[],i=await this._rpcRequest("getLargestAccounts",n),o=k.create(i,lue);if("error"in o)throw new Ee(o.error,"failed to get largest accounts");return o.result}async getTokenLargestAccounts(t,r){let n=this._buildArgs([t.toBase58()],r),i=await this._rpcRequest("getTokenLargestAccounts",n),o=k.create(i,cue);if("error"in o)throw new Ee(o.error,"failed to get token largest accounts");return o.result}async getAccountInfoAndContext(t,r){let{commitment:n,config:i}=Qr(r),o=this._buildArgs([t.toBase58()],n,"base64",i),s=await this._rpcRequest("getAccountInfo",o),a=k.create(s,xn(k.nullable(Wg)));if("error"in a)throw new Ee(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getParsedAccountInfo(t,r){let{commitment:n,config:i}=Qr(r),o=this._buildArgs([t.toBase58()],n,"jsonParsed",i),s=await this._rpcRequest("getAccountInfo",o),a=k.create(s,xn(k.nullable(_I)));if("error"in a)throw new Ee(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getAccountInfo(t,r){try{return(await this.getAccountInfoAndContext(t,r)).value}catch(n){throw new Error("failed to get info about account "+t.toBase58()+": "+n)}}async getMultipleParsedAccounts(t,r){let{commitment:n,config:i}=Qr(r),o=t.map(u=>u.toBase58()),s=this._buildArgs([o],n,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",s),c=k.create(a,xn(k.array(k.nullable(_I))));if("error"in c)throw new Ee(c.error,`failed to get info for accounts ${o}`);return c.result}async getMultipleAccountsInfoAndContext(t,r){let{commitment:n,config:i}=Qr(r),o=t.map(u=>u.toBase58()),s=this._buildArgs([o],n,"base64",i),a=await this._rpcRequest("getMultipleAccounts",s),c=k.create(a,xn(k.array(k.nullable(Wg))));if("error"in c)throw new Ee(c.error,`failed to get info for accounts ${o}`);return c.result}async getMultipleAccountsInfo(t,r){return(await this.getMultipleAccountsInfoAndContext(t,r)).value}async getStakeActivation(t,r,n){let{commitment:i,config:o}=Qr(r),s=this._buildArgs([t.toBase58()],i,void 0,{...o,epoch:n??o?.epoch}),a=await this._rpcRequest("getStakeActivation",s),c=k.create(a,kt(yue));if("error"in c)throw new Ee(c.error,`failed to get Stake Activation ${t.toBase58()}`);return c.result}async getProgramAccounts(t,r){let{commitment:n,config:i}=Qr(r),{encoding:o,...s}=i||{},a=this._buildArgs([t.toBase58()],n,o||"base64",s),c=await this._rpcRequest("getProgramAccounts",a),u=k.create(c,kt(k.array(due)));if("error"in u)throw new Ee(u.error,`failed to get accounts owned by program ${t.toBase58()}`);return u.result}async getParsedProgramAccounts(t,r){let{commitment:n,config:i}=Qr(r),o=this._buildArgs([t.toBase58()],n,"jsonParsed",i),s=await this._rpcRequest("getProgramAccounts",o),a=k.create(s,kt(k.array(pue)));if("error"in a)throw new Ee(a.error,`failed to get accounts owned by program ${t.toBase58()}`);return a.result}async confirmTransaction(t,r){let n;if(typeof t=="string")n=t;else{let o=t;if(o.abortSignal?.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let i;try{i=yi.default.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return er(i.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:r||this.commitment,signature:n}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:r||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:r||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((r,n)=>{t!=null&&(t.aborted?n(t.reason):t.addEventListener("abort",()=>{n(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:r}){let n,i,o=!1,s=new Promise((c,u)=>{try{n=this.onSignature(r,(f,m)=>{n=void 0;let b={context:m,value:f};c({__type:de.TransactionStatus.PROCESSED,response:b})},t);let h=new Promise(f=>{n==null?f():i=this._onSubscriptionStateChange(n,m=>{m==="subscribed"&&f()})});(async()=>{if(await h,o)return;let f=await this.getSignatureStatus(r);if(o||f==null)return;let{context:m,value:b}=f;if(b!=null)if(b?.err)u(b.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(b.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(b.confirmationStatus==="processed"||b.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}o=!0,c({__type:de.TransactionStatus.PROCESSED,response:{context:m,value:b}})}})()}catch(h){u(h)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:s}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:r,lastValidBlockHeight:n,signature:i}}){let o=!1,s=new Promise(f=>{let m=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let b=await m();if(!o){for(;b<=n;)if(await Jd(1e3),o||(b=await m(),o))return;f({__type:de.TransactionStatus.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:t,signature:i}),u=this.getCancellationPromise(r),h;try{let f=await Promise.race([u,c,s]);if(f.__type===de.TransactionStatus.PROCESSED)h=f.response;else throw new Fg(i)}finally{o=!0,a()}return h}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:r,minContextSlot:n,nonceAccountPubkey:i,nonceValue:o,signature:s}}){let a=!1,c=new Promise(b=>{let w=o,S=null,P=async()=>{try{let{context:N,value:O}=await this.getNonceAndContext(i,{commitment:t,minContextSlot:n});return S=N.slot,O?.nonce}catch{return w}};(async()=>{if(w=await P(),!a)for(;;){if(o!==w){b({__type:de.TransactionStatus.NONCE_INVALID,slotInWhichNonceDidAdvance:S});return}if(await Jd(2e3),a||(w=await P(),a))return}})()}),{abortConfirmation:u,confirmationPromise:h}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),f=this.getCancellationPromise(r),m;try{let b=await Promise.race([f,h,c]);if(b.__type===de.TransactionStatus.PROCESSED)m=b.response;else{let w;for(;;){let S=await this.getSignatureStatus(s);if(S==null)break;if(S.context.slot<(b.slotInWhichNonceDidAdvance??n)){await Jd(400);continue}w=S;break}if(w?.value){let S=t||"finalized",{confirmationStatus:P}=w.value;switch(S){case"processed":case"recent":if(P!=="processed"&&P!=="confirmed"&&P!=="finalized")throw new Rf(s);break;case"confirmed":case"single":case"singleGossip":if(P!=="confirmed"&&P!=="finalized")throw new Rf(s);break;case"finalized":case"max":case"root":if(P!=="finalized")throw new Rf(s);break;default:}m={context:w.context,value:{err:w.value.err}}}else throw new Rf(s)}}finally{a=!0,u()}return m}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:r}){let n,i=new Promise(c=>{let u=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{u=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>c({__type:de.TransactionStatus.TIMED_OUT,timeoutMs:u}),u)}),{abortConfirmation:o,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:t,signature:r}),a;try{let c=await Promise.race([s,i]);if(c.__type===de.TransactionStatus.PROCESSED)a=c.response;else throw new Hg(r,c.timeoutMs/1e3)}finally{clearTimeout(n),o()}return a}async getClusterNodes(){let t=await this._rpcRequest("getClusterNodes",[]),r=k.create(t,kt(k.array(Tue)));if("error"in r)throw new Ee(r.error,"failed to get cluster nodes");return r.result}async getVoteAccounts(t){let r=this._buildArgs([],t),n=await this._rpcRequest("getVoteAccounts",r),i=k.create(n,Pue);if("error"in i)throw new Ee(i.error,"failed to get vote accounts");return i.result}async getSlot(t){let{commitment:r,config:n}=Qr(t),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getSlot",i),s=k.create(o,kt(k.number()));if("error"in s)throw new Ee(s.error,"failed to get slot");return s.result}async getSlotLeader(t){let{commitment:r,config:n}=Qr(t),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getSlotLeader",i),s=k.create(o,kt(k.string()));if("error"in s)throw new Ee(s.error,"failed to get slot leader");return s.result}async getSlotLeaders(t,r){let n=[t,r],i=await this._rpcRequest("getSlotLeaders",n),o=k.create(i,kt(k.array(wn)));if("error"in o)throw new Ee(o.error,"failed to get slot leaders");return o.result}async getSignatureStatus(t,r){let{context:n,value:i}=await this.getSignatureStatuses([t],r);er(i.length===1);let o=i[0];return{context:n,value:o}}async getSignatureStatuses(t,r){let n=[t];r&&n.push(r);let i=await this._rpcRequest("getSignatureStatuses",n),o=k.create(i,Cue);if("error"in o)throw new Ee(o.error,"failed to get signature status");return o.result}async getTransactionCount(t){let{commitment:r,config:n}=Qr(t),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getTransactionCount",i),s=k.create(o,kt(k.number()));if("error"in s)throw new Ee(s.error,"failed to get transaction count");return s.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){let r=this._buildArgs([],t),n=await this._rpcRequest("getInflationGovernor",r),i=k.create(n,tue);if("error"in i)throw new Ee(i.error,"failed to get inflation");return i.result}async getInflationReward(t,r,n){let{commitment:i,config:o}=Qr(n),s=this._buildArgs([t.map(u=>u.toBase58())],i,void 0,{...o,epoch:r??o?.epoch}),a=await this._rpcRequest("getInflationReward",s),c=k.create(a,qce);if("error"in c)throw new Ee(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){let t=await this._rpcRequest("getInflationRate",[]),r=k.create(t,rue);if("error"in r)throw new Ee(r.error,"failed to get inflation rate");return r.result}async getEpochInfo(t){let{commitment:r,config:n}=Qr(t),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getEpochInfo",i),s=k.create(o,nue);if("error"in s)throw new Ee(s.error,"failed to get epoch info");return s.result}async getEpochSchedule(){let t=await this._rpcRequest("getEpochSchedule",[]),r=k.create(t,iue);if("error"in r)throw new Ee(r.error,"failed to get epoch schedule");let n=r.result;return new R2(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){let t=await this._rpcRequest("getLeaderSchedule",[]),r=k.create(t,oue);if("error"in r)throw new Ee(r.error,"failed to get leader schedule");return r.result}async getMinimumBalanceForRentExemption(t,r){let n=this._buildArgs([t],r),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),o=k.create(i,Nue);return"error"in o?(console.warn("Unable to fetch minimum balance for rent exemption"),0):o.result}async getRecentBlockhashAndContext(t){let r=this._buildArgs([],t),n=await this._rpcRequest("getRecentBlockhash",r),i=k.create(n,Hue);if("error"in i)throw new Ee(i.error,"failed to get recent blockhash");return i.result}async getRecentPerformanceSamples(t){let r=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),n=k.create(r,Wue);if("error"in n)throw new Ee(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(t,r){let n=this._buildArgs([t],r),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),o=k.create(i,zue);if("error"in o)throw new Ee(o.error,"failed to get fee calculator");let{context:s,value:a}=o.result;return{context:s,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(t,r){let n=Et(t.serialize()).toString("base64"),i=this._buildArgs([n],r),o=await this._rpcRequest("getFeeForMessage",i),s=k.create(o,xn(k.nullable(k.number())));if("error"in s)throw new Ee(s.error,"failed to get fee for message");if(s.result===null)throw new Error("invalid blockhash");return s.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(r){throw new Error("failed to get recent blockhash: "+r)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(r){throw new Error("failed to get recent blockhash: "+r)}}async getLatestBlockhashAndContext(t){let{commitment:r,config:n}=Qr(t),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getLatestBlockhash",i),s=k.create(o,que);if("error"in s)throw new Ee(s.error,"failed to get latest blockhash");return s.result}async getVersion(){let t=await this._rpcRequest("getVersion",[]),r=k.create(t,kt(Zce));if("error"in r)throw new Ee(r.error,"failed to get version");return r.result}async getGenesisHash(){let t=await this._rpcRequest("getGenesisHash",[]),r=k.create(t,kt(k.string()));if("error"in r)throw new Ee(r.error,"failed to get genesis hash");return r.result}async getBlock(t,r){let{commitment:n,config:i}=Qr(r),o=this._buildArgsAtLeastConfirmed([t],n,void 0,i),s=await this._rpcRequest("getBlock",o);try{switch(i?.transactionDetails){case"accounts":{let a=k.create(s,Rue);if("error"in a)throw a.error;return a.result}case"none":{let a=k.create(s,Uue);if("error"in a)throw a.error;return a.result}default:{let a=k.create(s,Oue);if("error"in a)throw a.error;let{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:u,meta:h,version:f})=>({meta:h,transaction:{...u,message:pI(f,u.message)},version:f}))}:null}}}catch(a){throw new Ee(a,"failed to get confirmed block")}}async getParsedBlock(t,r){let{commitment:n,config:i}=Qr(r),o=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",i),s=await this._rpcRequest("getBlock",o);try{switch(i?.transactionDetails){case"accounts":{let a=k.create(s,Vue);if("error"in a)throw a.error;return a.result}case"none":{let a=k.create(s,Kue);if("error"in a)throw a.error;return a.result}default:{let a=k.create(s,Lue);if("error"in a)throw a.error;return a.result}}}catch(a){throw new Ee(a,"failed to get block")}}async getBlockHeight(t){let{commitment:r,config:n}=Qr(t),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getBlockHeight",i),s=k.create(o,kt(k.number()));if("error"in s)throw new Ee(s.error,"failed to get block height information");return s.result}async getBlockProduction(t){let r,n;if(typeof t=="string")n=t;else if(t){let{commitment:a,...c}=t;n=a,r=c}let i=this._buildArgs([],n,"base64",r),o=await this._rpcRequest("getBlockProduction",i),s=k.create(o,Jce);if("error"in s)throw new Ee(s.error,"failed to get block production information");return s.result}async getTransaction(t,r){let{commitment:n,config:i}=Qr(r),o=this._buildArgsAtLeastConfirmed([t],n,void 0,i),s=await this._rpcRequest("getTransaction",o),a=k.create(s,yI);if("error"in a)throw new Ee(a.error,"failed to get transaction");let c=a.result;return c&&{...c,transaction:{...c.transaction,message:pI(c.version,c.transaction.message)}}}async getParsedTransaction(t,r){let{commitment:n,config:i}=Qr(r),o=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",i),s=await this._rpcRequest("getTransaction",o),a=k.create(s,_2);if("error"in a)throw new Ee(a.error,"failed to get transaction");return a.result}async getParsedTransactions(t,r){let{commitment:n,config:i}=Qr(r),o=t.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,"jsonParsed",i)}));return(await this._rpcBatchRequest(o)).map(c=>{let u=k.create(c,_2);if("error"in u)throw new Ee(u.error,"failed to get transactions");return u.result})}async getTransactions(t,r){let{commitment:n,config:i}=Qr(r),o=t.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,void 0,i)}));return(await this._rpcBatchRequest(o)).map(c=>{let u=k.create(c,yI);if("error"in u)throw new Ee(u.error,"failed to get transactions");let h=u.result;return h&&{...h,transaction:{...h.transaction,message:pI(h.version,h.transaction.message)}}})}async getConfirmedBlock(t,r){let n=this._buildArgsAtLeastConfirmed([t],r),i=await this._rpcRequest("getConfirmedBlock",n),o=k.create(i,Fue);if("error"in o)throw new Ee(o.error,"failed to get confirmed block");let s=o.result;if(!s)throw new Error("Confirmed block "+t+" not found");let a={...s,transactions:s.transactions.map(({transaction:c,meta:u})=>{let h=new bc(c.message);return{meta:u,transaction:{...c,message:h}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:u})=>({meta:u,transaction:pr.populate(c.message,c.signatures)}))}}async getBlocks(t,r,n){let i=this._buildArgsAtLeastConfirmed(r!==void 0?[t,r]:[t],n),o=await this._rpcRequest("getBlocks",i),s=k.create(o,kt(k.array(k.number())));if("error"in s)throw new Ee(s.error,"failed to get blocks");return s.result}async getBlockSignatures(t,r){let n=this._buildArgsAtLeastConfirmed([t],r,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),o=k.create(i,hU);if("error"in o)throw new Ee(o.error,"failed to get block");let s=o.result;if(!s)throw new Error("Block "+t+" not found");return s}async getConfirmedBlockSignatures(t,r){let n=this._buildArgsAtLeastConfirmed([t],r,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getConfirmedBlock",n),o=k.create(i,hU);if("error"in o)throw new Ee(o.error,"failed to get confirmed block");let s=o.result;if(!s)throw new Error("Confirmed block "+t+" not found");return s}async getConfirmedTransaction(t,r){let n=this._buildArgsAtLeastConfirmed([t],r),i=await this._rpcRequest("getConfirmedTransaction",n),o=k.create(i,yI);if("error"in o)throw new Ee(o.error,"failed to get transaction");let s=o.result;if(!s)return s;let a=new bc(s.transaction.message),c=s.transaction.signatures;return{...s,transaction:pr.populate(a,c)}}async getParsedConfirmedTransaction(t,r){let n=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed"),i=await this._rpcRequest("getConfirmedTransaction",n),o=k.create(i,_2);if("error"in o)throw new Ee(o.error,"failed to get confirmed transaction");return o.result}async getParsedConfirmedTransactions(t,r){let n=t.map(s=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([s],r,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(s=>{let a=k.create(s,_2);if("error"in a)throw new Ee(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(t,r,n){let i={},o=await this.getFirstAvailableBlock();for(;!("until"in i)&&(r--,!(r<=0||r<o));)try{let c=await this.getConfirmedBlockSignatures(r,"finalized");c.signatures.length>0&&(i.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let s=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>s));)try{let c=await this.getConfirmedBlockSignatures(n);c.signatures.length>0&&(i.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(t,i)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(t,r,n){let i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,r),o=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),s=k.create(o,mue);if("error"in s)throw new Ee(s.error,"failed to get confirmed signatures for address");return s.result}async getSignaturesForAddress(t,r,n){let i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,r),o=await this._rpcRequest("getSignaturesForAddress",i),s=k.create(o,gue);if("error"in s)throw new Ee(s.error,"failed to get signatures for address");return s.result}async getAddressLookupTable(t,r){let{context:n,value:i}=await this.getAccountInfoAndContext(t,r),o=null;return i!==null&&(o=new jg({key:t,state:jg.deserialize(i.data)})),{context:n,value:o}}async getNonceAndContext(t,r){let{context:n,value:i}=await this.getAccountInfoAndContext(t,r),o=null;return i!==null&&(o=U2.fromAccountData(i.data)),{context:n,value:o}}async getNonce(t,r){return await this.getNonceAndContext(t,r).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+n)})}async requestAirdrop(t,r){let n=await this._rpcRequest("requestAirdrop",[t.toBase58(),r]),i=k.create(n,Gue);if("error"in i)throw new Ee(i.error,`airdrop to ${t.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await Jd(100);let n=Date.now()-this._blockhashInfo.lastFetch>=_U;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{let t=Date.now(),r=this._blockhashInfo.latestBlockhash,n=r?r.blockhash:null;for(let i=0;i<50;i++){let o=await this.getLatestBlockhash("finalized");if(n!==o.blockhash)return this._blockhashInfo={latestBlockhash:o,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},o;await Jd(Oce/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){let{commitment:r,config:n}=Qr(t),i=this._buildArgs([],r,"base64",n),o=await this._rpcRequest("getStakeMinimumDelegation",i),s=k.create(o,xn(k.number()));if("error"in s)throw new Ee(s.error,"failed to get stake minimum delegation");return s.result}async simulateTransaction(t,r,n){if("message"in t){let S=t.serialize(),P=De.Buffer.from(S).toString("base64");if(Array.isArray(r)||n!==void 0)throw new Error("Invalid arguments");let N=r||{};N.encoding="base64","commitment"in N||(N.commitment=this.commitment);let O=[P,N],C=await this._rpcRequest("simulateTransaction",O),L=k.create(C,lU);if("error"in L)throw new Error("failed to simulate transaction: "+L.error.message);return L.result}let i;if(t instanceof pr){let w=t;i=new pr,i.feePayer=w.feePayer,i.instructions=t.instructions,i.nonceInfo=w.nonceInfo,i.signatures=w.signatures}else i=pr.populate(t),i._message=i._json=void 0;if(r!==void 0&&!Array.isArray(r))throw new Error("Invalid arguments");let o=r;if(i.nonceInfo&&o)i.sign(...o);else{let w=this._disableBlockhashCaching;for(;;){let S=await this._blockhashWithExpiryBlockHeight(w);if(i.lastValidBlockHeight=S.lastValidBlockHeight,i.recentBlockhash=S.blockhash,!o)break;if(i.sign(...o),!i.signature)throw new Error("!signature");let P=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(P)&&!this._blockhashInfo.transactionSignatures.includes(P)){this._blockhashInfo.simulatedSignatures.push(P);break}else w=!0}}let s=i._compile(),a=s.serialize(),u=i._serialize(a).toString("base64"),h={encoding:"base64",commitment:this.commitment};if(n){let w=(Array.isArray(n)?n:s.nonProgramIds()).map(S=>S.toBase58());h.accounts={encoding:"base64",addresses:w}}o&&(h.sigVerify=!0);let f=[u,h],m=await this._rpcRequest("simulateTransaction",f),b=k.create(m,lU);if("error"in b){let w;if("data"in b.error&&(w=b.error.data.logs,w&&Array.isArray(w))){let S=`
    `,P=S+w.join(S);console.error(b.error.message,P)}throw new qg("failed to simulate transaction: "+b.error.message,w)}return b.result}async sendTransaction(t,r,n){if("version"in t){if(r&&Array.isArray(r))throw new Error("Invalid arguments");let s=t.serialize();return await this.sendRawTransaction(s,r)}if(r===void 0||!Array.isArray(r))throw new Error("Invalid arguments");let i=r;if(t.nonceInfo)t.sign(...i);else{let s=this._disableBlockhashCaching;for(;;){let a=await this._blockhashWithExpiryBlockHeight(s);if(t.lastValidBlockHeight=a.lastValidBlockHeight,t.recentBlockhash=a.blockhash,t.sign(...i),!t.signature)throw new Error("!signature");let c=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))s=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}let o=t.serialize();return await this.sendRawTransaction(o,n)}async sendRawTransaction(t,r){let n=Et(t).toString("base64");return await this.sendEncodedTransaction(n,r)}async sendEncodedTransaction(t,r){let n={encoding:"base64"},i=r&&r.skipPreflight,o=r&&r.preflightCommitment||this.commitment;r&&r.maxRetries!=null&&(n.maxRetries=r.maxRetries),r&&r.minContextSlot!=null&&(n.minContextSlot=r.minContextSlot),i&&(n.skipPreflight=i),o&&(n.preflightCommitment=o);let s=[t,n],a=await this._rpcRequest("sendTransaction",s),c=k.create(a,$ue);if("error"in c){let u;throw"data"in c.error&&(u=c.error.data.logs),new qg("failed to send transaction: "+c.error.message,u)}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([r,n])=>{this._setSubscription(r,{...n,state:"pending"})})}_setSubscription(t,r){let n=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=r,n!==r.state){let i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(o=>{try{o(r.state)}catch{}})}}_onSubscriptionStateChange(t,r){let n=this._subscriptionHashByClientSubscriptionId[t];if(n==null)return()=>{};let i=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return i.add(r),()=>{i.delete(r),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}let t=this._rpcWebSocketGeneration,r=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{let i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{let{args:o,method:s}=i;try{this._setSubscription(n,{...i,state:"subscribing"});let a=await this._rpcWebSocket.call(s,o);this._setSubscription(n,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(a instanceof Error&&console.error(`${s} error for argument`,o,a.message),!r())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{let{serverSubscriptionId:o,unsubscribeMethod:s}=i;if(this._subscriptionsAutoDisposedByRpc.has(o))this._subscriptionsAutoDisposedByRpc.delete(o);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(s,[o])}catch(a){if(a instanceof Error&&console.error(`${s} error:`,a.message),!r())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,r){let n=this._subscriptionCallbacksByServerSubscriptionId[t];n!==void 0&&n.forEach(i=>{try{i(...r)}catch(o){console.error(o)}})}_wsOnAccountNotification(t){let{result:r,subscription:n}=k.create(t,bue);this._handleServerNotification(n,[r.value,r.context])}_makeSubscription(t,r){let n=this._nextClientSubscriptionId++,i=Pce([t.method,r]),o=this._subscriptionsByHash[i];return o===void 0?this._subscriptionsByHash[i]={...t,args:r,callbacks:new Set([t.callback]),state:"pending"}:o.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];let s=this._subscriptionsByHash[i];er(s!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),s.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(t,r,n){let i=this._buildArgs([t.toBase58()],n||this._commitment||"finalized","base64");return this._makeSubscription({callback:r,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},i)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){let{result:r,subscription:n}=k.create(t,wue);this._handleServerNotification(n,[{accountId:r.value.pubkey,accountInfo:r.value.account},r.context])}onProgramAccountChange(t,r,n,i){let o=this._buildArgs([t.toBase58()],n||this._commitment||"finalized","base64",i?{filters:i}:void 0);return this._makeSubscription({callback:r,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},o)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,r,n){let i=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],n||this._commitment||"finalized");return this._makeSubscription({callback:r,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){let{result:r,subscription:n}=k.create(t,Zue);this._handleServerNotification(n,[r.value,r.context])}_wsOnSlotNotification(t){let{result:r,subscription:n}=k.create(t,vue);this._handleServerNotification(n,[r])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){let{result:r,subscription:n}=k.create(t,Eue);this._handleServerNotification(n,[r])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,r){let n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${r}' events could not be found.`)}_buildArgs(t,r,n,i){let o=r||this._commitment;if(o||n||i){let s={};n&&(s.encoding=n),o&&(s.commitment=o),i&&(s=Object.assign(s,i)),t.push(s)}return t}_buildArgsAtLeastConfirmed(t,r,n,i){let o=r||this._commitment;if(o&&!["confirmed","finalized"].includes(o))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,r,n,i)}_wsOnSignatureNotification(t){let{result:r,subscription:n}=k.create(t,Iue);r.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,r.value==="receivedSignature"?[{type:"received"},r.context]:[{type:"status",result:r.value},r.context])}onSignature(t,r,n){let i=this._buildArgs([t],n||this._commitment||"finalized"),o=this._makeSubscription({callback:(s,a)=>{if(s.type==="status"){r(s.result,a);try{this.removeSignatureListener(o)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return o}onSignatureWithOptions(t,r,n){let{commitment:i,...o}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},s=this._buildArgs([t],i,void 0,o),a=this._makeSubscription({callback:(c,u)=>{r(c,u);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return a}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){let{result:r,subscription:n}=k.create(t,kue);this._handleServerNotification(n,[r])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}},V2=class e{constructor(t){this._keypair=void 0,this._keypair=t??aU()}static generate(){return new e(aU())}static fromSecretKey(t,r){if(t.byteLength!==64)throw new Error("bad secret key size");let n=t.slice(32,64);if(!r||!r.skipValidation){let i=t.slice(0,32),o=D2(i);for(let s=0;s<32;s++)if(n[s]!==o[s])throw new Error("provided secretKey is invalid")}return new e({publicKey:n,secretKey:t})}static fromSeed(t){let r=D2(t),n=new Uint8Array(64);return n.set(t),n.set(r,32),new e({publicKey:r,secretKey:n})}get publicKey(){return new pe(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}},vu=Object.freeze({CreateLookupTable:{index:0,layout:z.struct([z.u32("instruction"),ap("recentSlot"),z.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:z.struct([z.u32("instruction")])},ExtendLookupTable:{index:2,layout:z.struct([z.u32("instruction"),ap(),z.seq(Mt(),z.offset(z.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:z.struct([z.u32("instruction")])},CloseLookupTable:{index:4,layout:z.struct([z.u32("instruction")])}}),NI=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=z.u32("instruction").decode(t.data),i;for(let[o,s]of Object.entries(vu))if(s.index==n){i=o;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);let{recentSlot:r}=fr(vu.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(r)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);let{addresses:r}=fr(vu.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:r.map(n=>new pe(n))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(zg.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,r){if(t.length<r)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${r}`)}},zg=class{constructor(){}static createLookupTable(t){let[r,n]=pe.findProgramAddressSync([t.authority.toBuffer(),xI.toBufferLE(BigInt(t.recentSlot),8)],this.programId),i=vu.CreateLookupTable,o=Zt(i,{recentSlot:BigInt(t.recentSlot),bumpSeed:n}),s=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Ri.programId,isSigner:!1,isWritable:!1}];return[new yr({programId:this.programId,keys:s,data:o}),r]}static freezeLookupTable(t){let r=vu.FreezeLookupTable,n=Zt(r),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new yr({programId:this.programId,keys:i,data:n})}static extendLookupTable(t){let r=vu.ExtendLookupTable,n=Zt(r,{addresses:t.addresses.map(o=>o.toBytes())}),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&i.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Ri.programId,isSigner:!1,isWritable:!1}),new yr({programId:this.programId,keys:i,data:n})}static deactivateLookupTable(t){let r=vu.DeactivateLookupTable,n=Zt(r),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new yr({programId:this.programId,keys:i,data:n})}static closeLookupTable(t){let r=vu.CloseLookupTable,n=Zt(r),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new yr({programId:this.programId,keys:i,data:n})}};zg.programId=new pe("AddressLookupTab1e1111111111111111111111111");var MI=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=z.u8("instruction").decode(t.data),i;for(let[o,s]of Object.entries(mc))if(s.index==n){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(t){this.checkProgramId(t.programId);let{units:r,additionalFee:n}=fr(mc.RequestUnits,t.data);return{units:r,additionalFee:n}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);let{bytes:r}=fr(mc.RequestHeapFrame,t.data);return{bytes:r}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);let{units:r}=fr(mc.SetComputeUnitLimit,t.data);return{units:r}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);let{microLamports:r}=fr(mc.SetComputeUnitPrice,t.data);return{microLamports:r}}static checkProgramId(t){if(!t.equals(Gg.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}},mc=Object.freeze({RequestUnits:{index:0,layout:z.struct([z.u8("instruction"),z.u32("units"),z.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:z.struct([z.u8("instruction"),z.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:z.struct([z.u8("instruction"),z.u32("units")])},SetComputeUnitPrice:{index:3,layout:z.struct([z.u8("instruction"),ap("microLamports")])}}),Gg=class{constructor(){}static requestUnits(t){let r=mc.RequestUnits,n=Zt(r,t);return new yr({keys:[],programId:this.programId,data:n})}static requestHeapFrame(t){let r=mc.RequestHeapFrame,n=Zt(r,t);return new yr({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(t){let r=mc.SetComputeUnitLimit,n=Zt(r,t);return new yr({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(t){let r=mc.SetComputeUnitPrice,n=Zt(r,{microLamports:BigInt(t.microLamports)});return new yr({keys:[],programId:this.programId,data:n})}};Gg.programId=new pe("ComputeBudget111111111111111111111111111111");var pU=64,yU=32,mU=64,gU=z.struct([z.u8("numSignatures"),z.u8("padding"),z.u16("signatureOffset"),z.u16("signatureInstructionIndex"),z.u16("publicKeyOffset"),z.u16("publicKeyInstructionIndex"),z.u16("messageDataOffset"),z.u16("messageDataSize"),z.u16("messageInstructionIndex")]),K2=class e{constructor(){}static createInstructionWithPublicKey(t){let{publicKey:r,message:n,signature:i,instructionIndex:o}=t;er(r.length===yU,`Public Key must be ${yU} bytes but received ${r.length} bytes`),er(i.length===mU,`Signature must be ${mU} bytes but received ${i.length} bytes`);let s=gU.span,a=s+r.length,c=a+i.length,u=1,h=De.Buffer.alloc(c+n.length),f=o??65535;return gU.encode({numSignatures:u,padding:0,signatureOffset:a,signatureInstructionIndex:f,publicKeyOffset:s,publicKeyInstructionIndex:f,messageDataOffset:c,messageDataSize:n.length,messageInstructionIndex:f},h),h.fill(r,s),h.fill(i,a),h.fill(n,c),new yr({keys:[],programId:e.programId,data:h})}static createInstructionWithPrivateKey(t){let{privateKey:r,message:n,instructionIndex:i}=t;er(r.length===pU,`Private key must be ${pU} bytes but received ${r.length} bytes`);try{let o=V2.fromSecretKey(r),s=o.publicKey.toBytes(),a=VI(n,o.secretKey);return this.createInstructionWithPublicKey({publicKey:s,message:n,signature:a,instructionIndex:i})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};K2.programId=new pe("Ed25519SigVerify111111111111111111111111111");j2.utils.hmacSha256Sync=(e,...t)=>{let r=tce.hmac.create(bI.sha256,e);return t.forEach(n=>r.update(n)),r.digest()};var Xue=(e,t)=>j2.signSync(e,t,{der:!1,recovered:!0});j2.utils.isValidPrivateKey;var Que=j2.getPublicKey,bU=32,mI=20,xU=64,efe=11,gI=z.struct([z.u8("numSignatures"),z.u16("signatureOffset"),z.u8("signatureInstructionIndex"),z.u16("ethAddressOffset"),z.u8("ethAddressInstructionIndex"),z.u16("messageDataOffset"),z.u16("messageDataSize"),z.u8("messageInstructionIndex"),z.blob(20,"ethAddress"),z.blob(64,"signature"),z.u8("recoveryId")]),F2=class e{constructor(){}static publicKeyToEthAddress(t){er(t.length===xU,`Public key must be ${xU} bytes but received ${t.length} bytes`);try{return De.Buffer.from(oU.keccak_256(Et(t))).slice(-mI)}catch(r){throw new Error(`Error constructing Ethereum address: ${r}`)}}static createInstructionWithPublicKey(t){let{publicKey:r,message:n,signature:i,recoveryId:o,instructionIndex:s}=t;return e.createInstructionWithEthAddress({ethAddress:e.publicKeyToEthAddress(r),message:n,signature:i,recoveryId:o,instructionIndex:s})}static createInstructionWithEthAddress(t){let{ethAddress:r,message:n,signature:i,recoveryId:o,instructionIndex:s=0}=t,a;typeof r=="string"?r.startsWith("0x")?a=De.Buffer.from(r.substr(2),"hex"):a=De.Buffer.from(r,"hex"):a=r,er(a.length===mI,`Address must be ${mI} bytes but received ${a.length} bytes`);let c=1+efe,u=c,h=c+a.length,f=h+i.length+1,m=1,b=De.Buffer.alloc(gI.span+n.length);return gI.encode({numSignatures:m,signatureOffset:h,signatureInstructionIndex:s,ethAddressOffset:u,ethAddressInstructionIndex:s,messageDataOffset:f,messageDataSize:n.length,messageInstructionIndex:s,signature:Et(i),ethAddress:Et(a),recoveryId:o},b),b.fill(Et(n),gI.span),new yr({keys:[],programId:e.programId,data:b})}static createInstructionWithPrivateKey(t){let{privateKey:r,message:n,instructionIndex:i}=t;er(r.length===bU,`Private key must be ${bU} bytes but received ${r.length} bytes`);try{let o=Et(r),s=Que(o,!1).slice(1),a=De.Buffer.from(oU.keccak_256(Et(n))),[c,u]=Xue(a,o);return this.createInstructionWithPublicKey({publicKey:s,message:n,signature:c,recoveryId:u,instructionIndex:i})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};F2.programId=new pe("KeccakSecp256k11111111111111111111111111111");var KU=new pe("StakeConfig11111111111111111111111111111111"),H2=class{constructor(t,r){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=r}},eh=class{constructor(t,r,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=r,this.custodian=n}};eh.default=new eh(0,0,pe.default);var DI=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=z.u32("instruction").decode(t.data),i;for(let[o,s]of Object.entries(Qn))if(s.index==n){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{authorized:r,lockup:n}=fr(Qn.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new H2(new pe(r.staker),new pe(r.withdrawer)),lockup:new eh(n.unixTimestamp,n.epoch,new pe(n.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),fr(Qn.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{newAuthorized:r,stakeAuthorizationType:n}=fr(Qn.Authorize,t.data),i={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new pe(r),stakeAuthorizationType:{index:n}};return t.keys.length>3&&(i.custodianPubkey=t.keys[3].pubkey),i}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{newAuthorized:r,stakeAuthorizationType:n,authoritySeed:i,authorityOwner:o}=fr(Qn.AuthorizeWithSeed,t.data),s={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:i,authorityOwner:new pe(o),newAuthorizedPubkey:new pe(r),stakeAuthorizationType:{index:n}};return t.keys.length>3&&(s.custodianPubkey=t.keys[3].pubkey),s}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:r}=fr(Qn.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:r}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),fr(Qn.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);let{lamports:r}=fr(Qn.Withdraw,t.data),n={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:r};return t.keys.length>5&&(n.custodianPubkey=t.keys[5].pubkey),n}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),fr(Qn.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(up.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,r){if(t.length<r)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${r}`)}},Qn=Object.freeze({Initialize:{index:0,layout:z.struct([z.u32("instruction"),lce(),dce()])},Authorize:{index:1,layout:z.struct([z.u32("instruction"),Mt("newAuthorized"),z.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:z.struct([z.u32("instruction")])},Split:{index:3,layout:z.struct([z.u32("instruction"),z.ns64("lamports")])},Withdraw:{index:4,layout:z.struct([z.u32("instruction"),z.ns64("lamports")])},Deactivate:{index:5,layout:z.struct([z.u32("instruction")])},Merge:{index:7,layout:z.struct([z.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:z.struct([z.u32("instruction"),Mt("newAuthorized"),z.u32("stakeAuthorizationType"),Xd("authoritySeed"),Mt("authorityOwner")])}}),tfe=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),up=class{constructor(){}static initialize(t){let{stakePubkey:r,authorized:n,lockup:i}=t,o=i||eh.default,s=Qn.Initialize,a=Zt(s,{authorized:{staker:Et(n.staker.toBuffer()),withdrawer:Et(n.withdrawer.toBuffer())},lockup:{unixTimestamp:o.unixTimestamp,epoch:o.epoch,custodian:Et(o.custodian.toBuffer())}}),c={keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:sp,isSigner:!1,isWritable:!1}],programId:this.programId,data:a};return new yr(c)}static createAccountWithSeed(t){let r=new pr;r.add(Ri.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));let{stakePubkey:n,authorized:i,lockup:o}=t;return r.add(this.initialize({stakePubkey:n,authorized:i,lockup:o}))}static createAccount(t){let r=new pr;r.add(Ri.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));let{stakePubkey:n,authorized:i,lockup:o}=t;return r.add(this.initialize({stakePubkey:n,authorized:i,lockup:o}))}static delegate(t){let{stakePubkey:r,authorizedPubkey:n,votePubkey:i}=t,o=Qn.Delegate,s=Zt(o);return new pr().add({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:pc,isSigner:!1,isWritable:!1},{pubkey:N2,isSigner:!1,isWritable:!1},{pubkey:KU,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static authorize(t){let{stakePubkey:r,authorizedPubkey:n,newAuthorizedPubkey:i,stakeAuthorizationType:o,custodianPubkey:s}=t,a=Qn.Authorize,c=Zt(a,{newAuthorized:Et(i.toBuffer()),stakeAuthorizationType:o.index}),u=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:pc,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return s&&u.push({pubkey:s,isSigner:!1,isWritable:!1}),new pr().add({keys:u,programId:this.programId,data:c})}static authorizeWithSeed(t){let{stakePubkey:r,authorityBase:n,authoritySeed:i,authorityOwner:o,newAuthorizedPubkey:s,stakeAuthorizationType:a,custodianPubkey:c}=t,u=Qn.AuthorizeWithSeed,h=Zt(u,{newAuthorized:Et(s.toBuffer()),stakeAuthorizationType:a.index,authoritySeed:i,authorityOwner:Et(o.toBuffer())}),f=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:pc,isSigner:!1,isWritable:!1}];return c&&f.push({pubkey:c,isSigner:!1,isWritable:!1}),new pr().add({keys:f,programId:this.programId,data:h})}static splitInstruction(t){let{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:o}=t,s=Qn.Split,a=Zt(s,{lamports:o});return new yr({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static split(t){let r=new pr;return r.add(Ri.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t){let{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:o,seed:s,lamports:a}=t,c=new pr;return c.add(Ri.allocate({accountPubkey:i,basePubkey:o,seed:s,space:this.space,programId:this.programId})),c.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:a}))}static merge(t){let{stakePubkey:r,sourceStakePubKey:n,authorizedPubkey:i}=t,o=Qn.Merge,s=Zt(o);return new pr().add({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:pc,isSigner:!1,isWritable:!1},{pubkey:N2,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static withdraw(t){let{stakePubkey:r,authorizedPubkey:n,toPubkey:i,lamports:o,custodianPubkey:s}=t,a=Qn.Withdraw,c=Zt(a,{lamports:o}),u=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:pc,isSigner:!1,isWritable:!1},{pubkey:N2,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return s&&u.push({pubkey:s,isSigner:!1,isWritable:!1}),new pr().add({keys:u,programId:this.programId,data:c})}static deactivate(t){let{stakePubkey:r,authorizedPubkey:n}=t,i=Qn.Deactivate,o=Zt(i);return new pr().add({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:pc,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}};up.programId=new pe("Stake11111111111111111111111111111111111111");up.space=200;var q2=class{constructor(t,r,n,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=r,this.authorizedWithdrawer=n,this.commission=i}},OI=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=z.u32("instruction").decode(t.data),i;for(let[o,s]of Object.entries(Au))if(s.index==n){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);let{voteInit:r}=fr(Au.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new q2(new pe(r.nodePubkey),new pe(r.authorizedVoter),new pe(r.authorizedWithdrawer),r.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{newAuthorized:r,voteAuthorizationType:n}=fr(Au.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new pe(r),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorized:i,voteAuthorizationType:o}}=fr(Au.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new pe(r),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new pe(i),voteAuthorizationType:{index:o},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:r}=fr(Au.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:r,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(fp.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,r){if(t.length<r)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${r}`)}},Au=Object.freeze({InitializeAccount:{index:0,layout:z.struct([z.u32("instruction"),hce()])},Authorize:{index:1,layout:z.struct([z.u32("instruction"),Mt("newAuthorized"),z.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:z.struct([z.u32("instruction"),z.ns64("lamports")])},AuthorizeWithSeed:{index:10,layout:z.struct([z.u32("instruction"),pce()])}}),rfe=Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),fp=class e{constructor(){}static initializeAccount(t){let{votePubkey:r,nodePubkey:n,voteInit:i}=t,o=Au.InitializeAccount,s=Zt(o,{voteInit:{nodePubkey:Et(i.nodePubkey.toBuffer()),authorizedVoter:Et(i.authorizedVoter.toBuffer()),authorizedWithdrawer:Et(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),a={keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:sp,isSigner:!1,isWritable:!1},{pubkey:pc,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s};return new yr(a)}static createAccount(t){let r=new pr;return r.add(Ri.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),r.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){let{votePubkey:r,authorizedPubkey:n,newAuthorizedPubkey:i,voteAuthorizationType:o}=t,s=Au.Authorize,a=Zt(s,{newAuthorized:Et(i.toBuffer()),voteAuthorizationType:o.index}),c=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:pc,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new pr().add({keys:c,programId:this.programId,data:a})}static authorizeWithSeed(t){let{currentAuthorityDerivedKeyBasePubkey:r,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:o,voteAuthorizationType:s,votePubkey:a}=t,c=Au.AuthorizeWithSeed,u=Zt(c,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:Et(n.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:Et(o.toBuffer()),voteAuthorizationType:s.index}}),h=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:pc,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new pr().add({keys:h,programId:this.programId,data:u})}static withdraw(t){let{votePubkey:r,authorizedWithdrawerPubkey:n,lamports:i,toPubkey:o}=t,s=Au.Withdraw,a=Zt(s,{lamports:i}),c=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new pr().add({keys:c,programId:this.programId,data:a})}static safeWithdraw(t,r,n){if(t.lamports>r-n)throw new Error("Withdraw will leave vote account with insuffcient funds.");return e.withdraw(t)}};fp.programId=new pe("Vote111111111111111111111111111111111111111");fp.space=3731;var FU=new pe("Va1idator1nfo111111111111111111111111111111"),nfe=k.type({name:k.string(),website:k.optional(k.string()),details:k.optional(k.string()),keybaseUsername:k.optional(k.string())}),UI=class e{constructor(t,r){this.key=void 0,this.info=void 0,this.key=t,this.info=r}static fromConfigData(t){let r=[...t];if(Eo(r)!==2)return null;let i=[];for(let o=0;o<2;o++){let s=new pe(Io(r,0,gc)),a=yc(r)===1;i.push({publicKey:s,isSigner:a})}if(i[0].publicKey.equals(FU)&&i[1].isSigner){let o=Xd().decode(De.Buffer.from(r)),s=JSON.parse(o);return k.assert(s,nfe),new e(i[1].publicKey,s)}return null}},ife=new pe("Vote111111111111111111111111111111111111111"),ofe=z.struct([Mt("nodePubkey"),Mt("authorizedWithdrawer"),z.u8("commission"),z.nu64(),z.seq(z.struct([z.nu64("slot"),z.u32("confirmationCount")]),z.offset(z.u32(),-8),"votes"),z.u8("rootSlotValid"),z.nu64("rootSlot"),z.nu64(),z.seq(z.struct([z.nu64("epoch"),Mt("authorizedVoter")]),z.offset(z.u32(),-8),"authorizedVoters"),z.struct([z.seq(z.struct([Mt("authorizedPubkey"),z.nu64("epochOfLastAuthorizedSwitch"),z.nu64("targetEpoch")]),32,"buf"),z.nu64("idx"),z.u8("isEmpty")],"priorVoters"),z.nu64(),z.seq(z.struct([z.nu64("epoch"),z.nu64("credits"),z.nu64("prevCredits")]),z.offset(z.u32(),-8),"epochCredits"),z.struct([z.nu64("slot"),z.nu64("timestamp")],"lastTimestamp")]),RI=class e{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){let n=ofe.decode(Et(t),4),i=n.rootSlot;return n.rootSlotValid||(i=null),new e({nodePubkey:new pe(n.nodePubkey),authorizedWithdrawer:new pe(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:i,authorizedVoters:n.authorizedVoters.map(sfe),priorVoters:afe(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}};function sfe({authorizedVoter:e,epoch:t}){return{epoch:t,authorizedVoter:new pe(e)}}function wU({authorizedPubkey:e,epochOfLastAuthorizedSwitch:t,targetEpoch:r}){return{authorizedPubkey:new pe(e),epochOfLastAuthorizedSwitch:t,targetEpoch:r}}function afe({buf:e,idx:t,isEmpty:r}){return r?[]:[...e.slice(t+1).map(wU),...e.slice(0,t).map(wU)]}var SU={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function cfe(e,t){let r=t===!1?"http":"https";if(!e)return SU[r].devnet;let n=SU[r][e];if(!n)throw new Error(`Unknown ${r} cluster: ${e}`);return n}async function ufe(e,t,r,n){let i,o;r&&Object.prototype.hasOwnProperty.call(r,"lastValidBlockHeight")||r&&Object.prototype.hasOwnProperty.call(r,"nonceValue")?(i=r,o=n):o=r;let s=o&&{skipPreflight:o.skipPreflight,preflightCommitment:o.preflightCommitment||o.commitment,minContextSlot:o.minContextSlot},a=await e.sendRawTransaction(t,s),c=o&&o.commitment,h=(await(i?e.confirmTransaction(i,c):e.confirmTransaction(a,c))).value;if(h.err)throw new Error(`Raw transaction ${a} failed (${JSON.stringify(h)})`);return a}var ffe=1e9;de.Account=SI;de.AddressLookupTableAccount=jg;de.AddressLookupTableInstruction=NI;de.AddressLookupTableProgram=zg;de.Authorized=H2;de.BLOCKHASH_CACHE_TIMEOUT_MS=_U;de.BPF_LOADER_DEPRECATED_PROGRAM_ID=uce;de.BPF_LOADER_PROGRAM_ID=Ece;de.BpfLoader=kI;de.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS=mc;de.ComputeBudgetInstruction=MI;de.ComputeBudgetProgram=Gg;de.Connection=CI;de.Ed25519Program=K2;de.Enum=wI;de.EpochSchedule=R2;de.FeeCalculatorLayout=TU;de.Keypair=V2;de.LAMPORTS_PER_SOL=ffe;de.LOOKUP_TABLE_INSTRUCTION_LAYOUTS=vu;de.Loader=cp;de.Lockup=eh;de.MAX_SEED_LENGTH=EU;de.Message=bc;de.MessageAccountKeys=Qd;de.MessageV0=op;de.NONCE_ACCOUNT_LENGTH=EI;de.NonceAccount=U2;de.PACKET_DATA_SIZE=Lf;de.PUBLIC_KEY_LENGTH=gc;de.PublicKey=pe;de.SIGNATURE_LENGTH_IN_BYTES=Kg;de.SOLANA_SCHEMA=Lg;de.STAKE_CONFIG_ID=KU;de.STAKE_INSTRUCTION_LAYOUTS=Qn;de.SYSTEM_INSTRUCTION_LAYOUTS=Pr;de.SYSVAR_CLOCK_PUBKEY=pc;de.SYSVAR_EPOCH_SCHEDULE_PUBKEY=mce;de.SYSVAR_INSTRUCTIONS_PUBKEY=gce;de.SYSVAR_RECENT_BLOCKHASHES_PUBKEY=C2;de.SYSVAR_RENT_PUBKEY=sp;de.SYSVAR_REWARDS_PUBKEY=bce;de.SYSVAR_SLOT_HASHES_PUBKEY=xce;de.SYSVAR_SLOT_HISTORY_PUBKEY=wce;de.SYSVAR_STAKE_HISTORY_PUBKEY=N2;de.Secp256k1Program=F2;de.SendTransactionError=qg;de.SolanaJSONRPCError=Ee;de.SolanaJSONRPCErrorCode=_ce;de.StakeAuthorizationLayout=tfe;de.StakeInstruction=DI;de.StakeProgram=up;de.Struct=Vg;de.SystemInstruction=II;de.SystemProgram=Ri;de.Transaction=pr;de.TransactionExpiredBlockheightExceededError=Fg;de.TransactionExpiredNonceInvalidError=Rf;de.TransactionExpiredTimeoutError=Hg;de.TransactionInstruction=yr;de.TransactionMessage=vI;de.VALIDATOR_INFO_KEY=FU;de.VERSION_PREFIX_MASK=W2;de.VOTE_PROGRAM_ID=ife;de.ValidatorInfo=UI;de.VersionedMessage=KI;de.VersionedTransaction=AI;de.VoteAccount=RI;de.VoteAuthorizationLayout=rfe;de.VoteInit=q2;de.VoteInstruction=OI;de.VoteProgram=fp;de.clusterApiUrl=cfe;de.sendAndConfirmRawTransaction=ufe;de.sendAndConfirmTransaction=M2});var _k=W(xb=>{"use strict";l();d();Object.defineProperty(xb,"__esModule",{value:!0});xb.SupportedAlgorithm=void 0;var Cde;(function(e){e.sha256="sha256",e.sha512="sha512"})(Cde=xb.SupportedAlgorithm||(xb.SupportedAlgorithm={}))});var DL=W(MS=>{"use strict";l();d();Object.defineProperty(MS,"__esModule",{value:!0});MS.version=void 0;MS.version="sha2/5.7.0"});var UL=W(Ts=>{"use strict";l();d();var Nde=Ts&&Ts.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ts,"__esModule",{value:!0});Ts.computeHmac=Ts.sha512=Ts.sha256=Ts.ripemd160=void 0;var wb=Nde(fM()),Sb=Jn(),Mde=_k(),OL=Ji(),Dde=DL(),Ode=new OL.Logger(Dde.version);function Ude(e){return"0x"+wb.default.ripemd160().update((0,Sb.arrayify)(e)).digest("hex")}Ts.ripemd160=Ude;function Rde(e){return"0x"+wb.default.sha256().update((0,Sb.arrayify)(e)).digest("hex")}Ts.sha256=Rde;function Lde(e){return"0x"+wb.default.sha512().update((0,Sb.arrayify)(e)).digest("hex")}Ts.sha512=Lde;function Vde(e,t,r){return Mde.SupportedAlgorithm[e]||Ode.throwError("unsupported algorithm "+e,OL.Logger.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:e}),"0x"+wb.default.hmac(wb.default[e],(0,Sb.arrayify)(t)).update((0,Sb.arrayify)(r)).digest("hex")}Ts.computeHmac=Vde});var Ck=W(Ps=>{"use strict";l();d();Object.defineProperty(Ps,"__esModule",{value:!0});Ps.SupportedAlgorithm=Ps.sha512=Ps.sha256=Ps.ripemd160=Ps.computeHmac=void 0;var DS=UL();Object.defineProperty(Ps,"computeHmac",{enumerable:!0,get:function(){return DS.computeHmac}});Object.defineProperty(Ps,"ripemd160",{enumerable:!0,get:function(){return DS.ripemd160}});Object.defineProperty(Ps,"sha256",{enumerable:!0,get:function(){return DS.sha256}});Object.defineProperty(Ps,"sha512",{enumerable:!0,get:function(){return DS.sha512}});var Kde=_k();Object.defineProperty(Ps,"SupportedAlgorithm",{enumerable:!0,get:function(){return Kde.SupportedAlgorithm}})});var eT=W((Qk,aV)=>{"use strict";l();d();(function(e){function t(y){return parseInt(y)===y}function r(y){if(!t(y.length))return!1;for(var I=0;I<y.length;I++)if(!t(y[I])||y[I]<0||y[I]>255)return!1;return!0}function n(y,I){if(y.buffer&&ArrayBuffer.isView(y)&&y.name==="Uint8Array")return I&&(y.slice?y=y.slice():y=Array.prototype.slice.call(y)),y;if(Array.isArray(y)){if(!r(y))throw new Error("Array contains invalid value: "+y);return new Uint8Array(y)}if(t(y.length)&&r(y))return new Uint8Array(y);throw new Error("unsupported array-like object")}function i(y){return new Uint8Array(y)}function o(y,I,q,K,F){(K!=null||F!=null)&&(y.slice?y=y.slice(K,F):y=Array.prototype.slice.call(y,K,F)),I.set(y,q)}var s=function(){function y(q){var K=[],F=0;for(q=encodeURI(q);F<q.length;){var J=q.charCodeAt(F++);J===37?(K.push(parseInt(q.substr(F,2),16)),F+=2):K.push(J)}return n(K)}function I(q){for(var K=[],F=0;F<q.length;){var J=q[F];J<128?(K.push(String.fromCharCode(J)),F++):J>191&&J<224?(K.push(String.fromCharCode((J&31)<<6|q[F+1]&63)),F+=2):(K.push(String.fromCharCode((J&15)<<12|(q[F+1]&63)<<6|q[F+2]&63)),F+=3)}return K.join("")}return{toBytes:y,fromBytes:I}}(),a=function(){function y(K){for(var F=[],J=0;J<K.length;J+=2)F.push(parseInt(K.substr(J,2),16));return F}var I="0123456789abcdef";function q(K){for(var F=[],J=0;J<K.length;J++){var ae=K[J];F.push(I[(ae&240)>>4]+I[ae&15])}return F.join("")}return{toBytes:y,fromBytes:q}}(),c={16:10,24:12,32:14},u=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],h=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],f=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],m=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],b=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],w=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],S=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],P=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],N=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],O=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],C=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],L=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],V=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],j=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],$=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function H(y){for(var I=[],q=0;q<y.length;q+=4)I.push(y[q]<<24|y[q+1]<<16|y[q+2]<<8|y[q+3]);return I}var Y=function(y){if(!(this instanceof Y))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:n(y,!0)}),this._prepare()};Y.prototype._prepare=function(){var y=c[this.key.length];if(y==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var I=0;I<=y;I++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var q=(y+1)*4,K=this.key.length/4,F=H(this.key),J,I=0;I<K;I++)J=I>>2,this._Ke[J][I%4]=F[I],this._Kd[y-J][I%4]=F[I];for(var ae=0,ce=K,ye;ce<q;){if(ye=F[K-1],F[0]^=h[ye>>16&255]<<24^h[ye>>8&255]<<16^h[ye&255]<<8^h[ye>>24&255]^u[ae]<<24,ae+=1,K!=8)for(var I=1;I<K;I++)F[I]^=F[I-1];else{for(var I=1;I<K/2;I++)F[I]^=F[I-1];ye=F[K/2-1],F[K/2]^=h[ye&255]^h[ye>>8&255]<<8^h[ye>>16&255]<<16^h[ye>>24&255]<<24;for(var I=K/2+1;I<K;I++)F[I]^=F[I-1]}for(var I=0,he,U;I<K&&ce<q;)he=ce>>2,U=ce%4,this._Ke[he][U]=F[I],this._Kd[y-he][U]=F[I++],ce++}for(var he=1;he<y;he++)for(var U=0;U<4;U++)ye=this._Kd[he][U],this._Kd[he][U]=L[ye>>24&255]^V[ye>>16&255]^j[ye>>8&255]^$[ye&255]},Y.prototype.encrypt=function(y){if(y.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var I=this._Ke.length-1,q=[0,0,0,0],K=H(y),F=0;F<4;F++)K[F]^=this._Ke[0][F];for(var J=1;J<I;J++){for(var F=0;F<4;F++)q[F]=m[K[F]>>24&255]^b[K[(F+1)%4]>>16&255]^w[K[(F+2)%4]>>8&255]^S[K[(F+3)%4]&255]^this._Ke[J][F];K=q.slice()}for(var ae=i(16),ce,F=0;F<4;F++)ce=this._Ke[I][F],ae[4*F]=(h[K[F]>>24&255]^ce>>24)&255,ae[4*F+1]=(h[K[(F+1)%4]>>16&255]^ce>>16)&255,ae[4*F+2]=(h[K[(F+2)%4]>>8&255]^ce>>8)&255,ae[4*F+3]=(h[K[(F+3)%4]&255]^ce)&255;return ae},Y.prototype.decrypt=function(y){if(y.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var I=this._Kd.length-1,q=[0,0,0,0],K=H(y),F=0;F<4;F++)K[F]^=this._Kd[0][F];for(var J=1;J<I;J++){for(var F=0;F<4;F++)q[F]=P[K[F]>>24&255]^N[K[(F+3)%4]>>16&255]^O[K[(F+2)%4]>>8&255]^C[K[(F+1)%4]&255]^this._Kd[J][F];K=q.slice()}for(var ae=i(16),ce,F=0;F<4;F++)ce=this._Kd[I][F],ae[4*F]=(f[K[F]>>24&255]^ce>>24)&255,ae[4*F+1]=(f[K[(F+3)%4]>>16&255]^ce>>16)&255,ae[4*F+2]=(f[K[(F+2)%4]>>8&255]^ce>>8)&255,ae[4*F+3]=(f[K[(F+1)%4]&255]^ce)&255;return ae};var B=function(y){if(!(this instanceof B))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new Y(y)};B.prototype.encrypt=function(y){if(y=n(y),y.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var I=i(y.length),q=i(16),K=0;K<y.length;K+=16)o(y,q,0,K,K+16),q=this._aes.encrypt(q),o(q,I,K);return I},B.prototype.decrypt=function(y){if(y=n(y),y.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var I=i(y.length),q=i(16),K=0;K<y.length;K+=16)o(y,q,0,K,K+16),q=this._aes.decrypt(q),o(q,I,K);return I};var p=function(y,I){if(!(this instanceof p))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!I)I=i(16);else if(I.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=n(I,!0),this._aes=new Y(y)};p.prototype.encrypt=function(y){if(y=n(y),y.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var I=i(y.length),q=i(16),K=0;K<y.length;K+=16){o(y,q,0,K,K+16);for(var F=0;F<16;F++)q[F]^=this._lastCipherblock[F];this._lastCipherblock=this._aes.encrypt(q),o(this._lastCipherblock,I,K)}return I},p.prototype.decrypt=function(y){if(y=n(y),y.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var I=i(y.length),q=i(16),K=0;K<y.length;K+=16){o(y,q,0,K,K+16),q=this._aes.decrypt(q);for(var F=0;F<16;F++)I[K+F]=q[F]^this._lastCipherblock[F];o(y,this._lastCipherblock,0,K,K+16)}return I};var g=function(y,I,q){if(!(this instanceof g))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!I)I=i(16);else if(I.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");q||(q=1),this.segmentSize=q,this._shiftRegister=n(I,!0),this._aes=new Y(y)};g.prototype.encrypt=function(y){if(y.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var I=n(y,!0),q,K=0;K<I.length;K+=this.segmentSize){q=this._aes.encrypt(this._shiftRegister);for(var F=0;F<this.segmentSize;F++)I[K+F]^=q[F];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(I,this._shiftRegister,16-this.segmentSize,K,K+this.segmentSize)}return I},g.prototype.decrypt=function(y){if(y.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var I=n(y,!0),q,K=0;K<I.length;K+=this.segmentSize){q=this._aes.encrypt(this._shiftRegister);for(var F=0;F<this.segmentSize;F++)I[K+F]^=q[F];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(y,this._shiftRegister,16-this.segmentSize,K,K+this.segmentSize)}return I};var x=function(y,I){if(!(this instanceof x))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!I)I=i(16);else if(I.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=n(I,!0),this._lastPrecipherIndex=16,this._aes=new Y(y)};x.prototype.encrypt=function(y){for(var I=n(y,!0),q=0;q<I.length;q++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),I[q]^=this._lastPrecipher[this._lastPrecipherIndex++];return I},x.prototype.decrypt=x.prototype.encrypt;var A=function(y){if(!(this instanceof A))throw Error("Counter must be instanitated with `new`");y!==0&&!y&&(y=1),typeof y=="number"?(this._counter=i(16),this.setValue(y)):this.setBytes(y)};A.prototype.setValue=function(y){if(typeof y!="number"||parseInt(y)!=y)throw new Error("invalid counter value (must be an integer)");for(var I=15;I>=0;--I)this._counter[I]=y%256,y=y>>8},A.prototype.setBytes=function(y){if(y=n(y,!0),y.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=y},A.prototype.increment=function(){for(var y=15;y>=0;y--)if(this._counter[y]===255)this._counter[y]=0;else{this._counter[y]++;break}};var v=function(y,I){if(!(this instanceof v))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",I instanceof A||(I=new A(I)),this._counter=I,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new Y(y)};v.prototype.encrypt=function(y){for(var I=n(y,!0),q=0;q<I.length;q++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),I[q]^=this._remainingCounter[this._remainingCounterIndex++];return I},v.prototype.decrypt=v.prototype.encrypt;function _(y){y=n(y,!0);var I=16-y.length%16,q=i(y.length+I);o(y,q);for(var K=y.length;K<q.length;K++)q[K]=I;return q}function D(y){if(y=n(y,!0),y.length<16)throw new Error("PKCS#7 invalid length");var I=y[y.length-1];if(I>16)throw new Error("PKCS#7 padding byte out of range");for(var q=y.length-I,K=0;K<I;K++)if(y[q+K]!==I)throw new Error("PKCS#7 invalid padding byte");var F=i(q);return o(y,F,0,0,q),F}var T={AES:Y,Counter:A,ModeOfOperation:{ecb:B,cbc:p,cfb:g,ofb:x,ctr:v},utils:{hex:a,utf8:s},padding:{pkcs7:{pad:_,strip:D}},_arrayTest:{coerceArray:n,createArray:i,copyArray:o}};typeof Qk<"u"?aV.exports=T:typeof define=="function"&&define.amd?define(T):(e.aesjs&&(T._aesjs=e.aesjs),e.aesjs=T)})(Qk)});var lV=W((aT,fV)=>{"use strict";l();d();(function(e){function r(b){let w=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),S=1779033703,P=3144134277,N=1013904242,O=2773480762,C=1359893119,L=2600822924,V=528734635,j=1541459225,$=new Uint32Array(64);function H(v){let _=0,D=v.length;for(;D>=64;){let T=S,y=P,I=N,q=O,K=C,F=L,J=V,ae=j,ce,ye,he,U,G;for(ye=0;ye<16;ye++)he=_+ye*4,$[ye]=(v[he]&255)<<24|(v[he+1]&255)<<16|(v[he+2]&255)<<8|v[he+3]&255;for(ye=16;ye<64;ye++)ce=$[ye-2],U=(ce>>>17|ce<<15)^(ce>>>19|ce<<13)^ce>>>10,ce=$[ye-15],G=(ce>>>7|ce<<25)^(ce>>>18|ce<<14)^ce>>>3,$[ye]=(U+$[ye-7]|0)+(G+$[ye-16]|0)|0;for(ye=0;ye<64;ye++)U=(((K>>>6|K<<26)^(K>>>11|K<<21)^(K>>>25|K<<7))+(K&F^~K&J)|0)+(ae+(w[ye]+$[ye]|0)|0)|0,G=((T>>>2|T<<30)^(T>>>13|T<<19)^(T>>>22|T<<10))+(T&y^T&I^y&I)|0,ae=J,J=F,F=K,K=q+U|0,q=I,I=y,y=T,T=U+G|0;S=S+T|0,P=P+y|0,N=N+I|0,O=O+q|0,C=C+K|0,L=L+F|0,V=V+J|0,j=j+ae|0,_+=64,D-=64}}H(b);let Y,B=b.length%64,p=b.length/536870912|0,g=b.length<<3,x=B<56?56:120,A=b.slice(b.length-B,b.length);for(A.push(128),Y=B+1;Y<x;Y++)A.push(0);return A.push(p>>>24&255),A.push(p>>>16&255),A.push(p>>>8&255),A.push(p>>>0&255),A.push(g>>>24&255),A.push(g>>>16&255),A.push(g>>>8&255),A.push(g>>>0&255),H(A),[S>>>24&255,S>>>16&255,S>>>8&255,S>>>0&255,P>>>24&255,P>>>16&255,P>>>8&255,P>>>0&255,N>>>24&255,N>>>16&255,N>>>8&255,N>>>0&255,O>>>24&255,O>>>16&255,O>>>8&255,O>>>0&255,C>>>24&255,C>>>16&255,C>>>8&255,C>>>0&255,L>>>24&255,L>>>16&255,L>>>8&255,L>>>0&255,V>>>24&255,V>>>16&255,V>>>8&255,V>>>0&255,j>>>24&255,j>>>16&255,j>>>8&255,j>>>0&255]}function n(b,w,S){b=b.length<=64?b:r(b);let P=64+w.length+4,N=new Array(P),O=new Array(64),C,L=[];for(C=0;C<64;C++)N[C]=54;for(C=0;C<b.length;C++)N[C]^=b[C];for(C=0;C<w.length;C++)N[64+C]=w[C];for(C=P-4;C<P;C++)N[C]=0;for(C=0;C<64;C++)O[C]=92;for(C=0;C<b.length;C++)O[C]^=b[C];function V(){for(let j=P-1;j>=P-4;j--){if(N[j]++,N[j]<=255)return;N[j]=0}}for(;S>=32;)V(),L=L.concat(r(O.concat(r(N)))),S-=32;return S>0&&(V(),L=L.concat(r(O.concat(r(N))).slice(0,S))),L}function i(b,w,S,P,N){let O;for(c(b,(2*S-1)*16,N,0,16),O=0;O<2*S;O++)a(b,O*16,N,16),s(N,P),c(N,0,b,w+O*16,16);for(O=0;O<S;O++)c(b,w+O*2*16,b,O*16,16);for(O=0;O<S;O++)c(b,w+(O*2+1)*16,b,(O+S)*16,16)}function o(b,w){return b<<w|b>>>32-w}function s(b,w){c(b,0,w,0,16);for(let S=8;S>0;S-=2)w[4]^=o(w[0]+w[12],7),w[8]^=o(w[4]+w[0],9),w[12]^=o(w[8]+w[4],13),w[0]^=o(w[12]+w[8],18),w[9]^=o(w[5]+w[1],7),w[13]^=o(w[9]+w[5],9),w[1]^=o(w[13]+w[9],13),w[5]^=o(w[1]+w[13],18),w[14]^=o(w[10]+w[6],7),w[2]^=o(w[14]+w[10],9),w[6]^=o(w[2]+w[14],13),w[10]^=o(w[6]+w[2],18),w[3]^=o(w[15]+w[11],7),w[7]^=o(w[3]+w[15],9),w[11]^=o(w[7]+w[3],13),w[15]^=o(w[11]+w[7],18),w[1]^=o(w[0]+w[3],7),w[2]^=o(w[1]+w[0],9),w[3]^=o(w[2]+w[1],13),w[0]^=o(w[3]+w[2],18),w[6]^=o(w[5]+w[4],7),w[7]^=o(w[6]+w[5],9),w[4]^=o(w[7]+w[6],13),w[5]^=o(w[4]+w[7],18),w[11]^=o(w[10]+w[9],7),w[8]^=o(w[11]+w[10],9),w[9]^=o(w[8]+w[11],13),w[10]^=o(w[9]+w[8],18),w[12]^=o(w[15]+w[14],7),w[13]^=o(w[12]+w[15],9),w[14]^=o(w[13]+w[12],13),w[15]^=o(w[14]+w[13],18);for(let S=0;S<16;++S)b[S]+=w[S]}function a(b,w,S,P){for(let N=0;N<P;N++)S[N]^=b[w+N]}function c(b,w,S,P,N){for(;N--;)S[P++]=b[w++]}function u(b){if(!b||typeof b.length!="number")return!1;for(let w=0;w<b.length;w++){let S=b[w];if(typeof S!="number"||S%1||S<0||S>=256)return!1}return!0}function h(b,w){if(typeof b!="number"||b%1)throw new Error("invalid "+w);return b}function f(b,w,S,P,N,O,C){if(S=h(S,"N"),P=h(P,"r"),N=h(N,"p"),O=h(O,"dkLen"),S===0||S&S-1)throw new Error("N must be power of 2");if(S>2147483647/128/P)throw new Error("N too large");if(P>2147483647/128/N)throw new Error("r too large");if(!u(b))throw new Error("password must be an array or buffer");if(b=Array.prototype.slice.call(b),!u(w))throw new Error("salt must be an array or buffer");w=Array.prototype.slice.call(w);let L=n(b,w,N*128*P),V=new Uint32Array(N*32*P);for(let K=0;K<V.length;K++){let F=K*4;V[K]=(L[F+3]&255)<<24|(L[F+2]&255)<<16|(L[F+1]&255)<<8|(L[F+0]&255)<<0}let j=new Uint32Array(64*P),$=new Uint32Array(32*P*S),H=32*P,Y=new Uint32Array(16),B=new Uint32Array(16),p=N*S*2,g=0,x=null,A=!1,v=0,_=0,D,T,y=C?parseInt(1e3/P):4294967295,I=typeof setImmediate<"u"?setImmediate:setTimeout,q=function(){if(A)return C(new Error("cancelled"),g/p);let K;switch(v){case 0:T=_*32*P,c(V,T,j,0,H),v=1,D=0;case 1:K=S-D,K>y&&(K=y);for(let J=0;J<K;J++)c(j,0,$,(D+J)*H,H),i(j,H,P,Y,B);if(D+=K,g+=K,C){let J=parseInt(1e3*g/p);if(J!==x){if(A=C(null,g/p),A)break;x=J}}if(D<S)break;D=0,v=2;case 2:K=S-D,K>y&&(K=y);for(let J=0;J<K;J++){let ae=(2*P-1)*16,ce=j[ae]&S-1;a($,ce*H,j,H),i(j,H,P,Y,B)}if(D+=K,g+=K,C){let J=parseInt(1e3*g/p);if(J!==x){if(A=C(null,g/p),A)break;x=J}}if(D<S)break;if(c(j,0,V,T,H),_++,_<N){v=0;break}L=[];for(let J=0;J<V.length;J++)L.push(V[J]>>0&255),L.push(V[J]>>8&255),L.push(V[J]>>16&255),L.push(V[J]>>24&255);let F=n(b,L,O);return C&&C(null,1,F),F}C&&I(q)};if(!C)for(;;){let K=q();if(K!=null)return K}q()}let m={scrypt:function(b,w,S,P,N,O,C){return new Promise(function(L,V){let j=0;C&&C(0),f(b,w,S,P,N,O,function($,H,Y){if($)V($);else if(Y)C&&j!==1&&C(1),L(new Uint8Array(Y));else if(C&&H!==j)return j=H,C(H)})})},syncScrypt:function(b,w,S,P,N,O){return new Uint8Array(f(b,w,S,P,N,O))}};typeof aT<"u"?fV.exports=m:typeof define=="function"&&define.amd?define(m):e&&(e.scrypt&&(e._scrypt=e.scrypt),e.scrypt=m)})(aT)});var hh=W(Zp=>{"use strict";l();d();Object.defineProperty(Zp,"__esModule",{value:!0});Zp.bech32m=Zp.bech32=void 0;var Ov="qpzry9x8gf2tvdw0s3jn54khce6mua7l",PK={};for(let e=0;e<Ov.length;e++){let t=Ov.charAt(e);PK[t]=e}function Yp(e){let t=e>>25;return(e&33554431)<<5^-(t>>0&1)&996825010^-(t>>1&1)&642813549^-(t>>2&1)&513874426^-(t>>3&1)&1027748829^-(t>>4&1)&705979059}function TK(e){let t=1;for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=Yp(t)^n>>5}t=Yp(t);for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);t=Yp(t)^n&31}return t}function p5(e,t,r,n){let i=0,o=0,s=(1<<r)-1,a=[];for(let c=0;c<e.length;++c)for(i=i<<t|e[c],o+=t;o>=r;)o-=r,a.push(i>>o&s);if(n)o>0&&a.push(i<<r-o&s);else{if(o>=t)return"Excess padding";if(i<<r-o&s)return"Non-zero padding"}return a}function $pe(e){return p5(e,8,5,!0)}function Ype(e){let t=p5(e,5,8,!1);if(Array.isArray(t))return t}function Zpe(e){let t=p5(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}function BK(e){let t;e==="bech32"?t=1:t=734539939;function r(s,a,c){if(c=c||90,s.length+7+a.length>c)throw new TypeError("Exceeds length limit");s=s.toLowerCase();let u=TK(s);if(typeof u=="string")throw new Error(u);let h=s+"1";for(let f=0;f<a.length;++f){let m=a[f];if(m>>5)throw new Error("Non 5-bit word");u=Yp(u)^m,h+=Ov.charAt(m)}for(let f=0;f<6;++f)u=Yp(u);u^=t;for(let f=0;f<6;++f){let m=u>>(5-f)*5&31;h+=Ov.charAt(m)}return h}function n(s,a){if(a=a||90,s.length<8)return s+" too short";if(s.length>a)return"Exceeds length limit";let c=s.toLowerCase(),u=s.toUpperCase();if(s!==c&&s!==u)return"Mixed-case string "+s;s=c;let h=s.lastIndexOf("1");if(h===-1)return"No separator character for "+s;if(h===0)return"Missing prefix for "+s;let f=s.slice(0,h),m=s.slice(h+1);if(m.length<6)return"Data too short";let b=TK(f);if(typeof b=="string")return b;let w=[];for(let S=0;S<m.length;++S){let P=m.charAt(S),N=PK[P];if(N===void 0)return"Unknown character "+P;b=Yp(b)^N,!(S+6>=m.length)&&w.push(N)}return b!==t?"Invalid checksum for "+s:{prefix:f,words:w}}function i(s,a){let c=n(s,a);if(typeof c=="object")return c}function o(s,a){let c=n(s,a);if(typeof c=="object")return c;throw new Error(c)}return{decodeUnsafe:i,decode:o,encode:r,toWords:$pe,fromWordsUnsafe:Ype,fromWords:Zpe}}Zp.bech32=BK("bech32");Zp.bech32m=BK("bech32m")});var UK=W(io=>{"use strict";l();d();Object.defineProperty(io,"__esModule",{value:!0});io.output=io.exists=io.hash=io.bytes=io.bool=io.number=void 0;function Fv(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}io.number=Fv;function NK(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}io.bool=NK;function A5(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}io.bytes=A5;function MK(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Fv(e.outputLen),Fv(e.blockLen)}io.hash=MK;function DK(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}io.exists=DK;function OK(e,t){A5(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}io.output=OK;var aye={number:Fv,bool:NK,bytes:A5,hash:MK,exists:DK,output:OK};io.default=aye});var RK=W(Hv=>{"use strict";l();d();Object.defineProperty(Hv,"__esModule",{value:!0});Hv.crypto=void 0;Hv.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0}});var k5=W(Pt=>{"use strict";l();d();Object.defineProperty(Pt,"__esModule",{value:!0});Pt.randomBytes=Pt.wrapConstructorWithOpts=Pt.wrapConstructor=Pt.checkOpts=Pt.Hash=Pt.concatBytes=Pt.toBytes=Pt.utf8ToBytes=Pt.asyncLoop=Pt.nextTick=Pt.hexToBytes=Pt.bytesToHex=Pt.isLE=Pt.rotr=Pt.createView=Pt.u32=Pt.u8=void 0;var qv=RK(),cye=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);Pt.u8=cye;var uye=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));Pt.u32=uye;var fye=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);Pt.createView=fye;var lye=(e,t)=>e<<32-t|e>>>t;Pt.rotr=lye;Pt.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Pt.isLE)throw new Error("Non little-endian hardware is not supported");var dye=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function hye(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=dye[e[r]];return t}Pt.bytesToHex=hye;function pye(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}Pt.hexToBytes=pye;var yye=async()=>{};Pt.nextTick=yye;async function mye(e,t,r){let n=Date.now();for(let i=0;i<e;i++){r(i);let o=Date.now()-n;o>=0&&o<t||(await(0,Pt.nextTick)(),n+=o)}}Pt.asyncLoop=mye;function LK(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}Pt.utf8ToBytes=LK;function I5(e){if(typeof e=="string"&&(e=LK(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}Pt.toBytes=I5;function gye(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}Pt.concatBytes=gye;var E5=class{clone(){return this._cloneInto()}};Pt.Hash=E5;var bye=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function xye(e,t){if(t!==void 0&&(typeof t!="object"||!bye(t)))throw new TypeError("Options should be object or undefined");return Object.assign(e,t)}Pt.checkOpts=xye;function wye(e){let t=n=>e().update(I5(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}Pt.wrapConstructor=wye;function Sye(e){let t=(n,i)=>e(i).update(I5(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}Pt.wrapConstructorWithOpts=Sye;function vye(e=32){if(qv.crypto.web)return qv.crypto.web.getRandomValues(new Uint8Array(e));if(qv.crypto.node)return new Uint8Array(qv.crypto.node.randomBytes(e).buffer);throw new Error("The environment doesn't have randomBytes function")}Pt.randomBytes=vye});var VK=W(jv=>{"use strict";l();d();Object.defineProperty(jv,"__esModule",{value:!0});jv.SHA2=void 0;var T5=UK(),Vb=k5();function Aye(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var P5=class extends Vb.Hash{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,Vb.createView)(this.buffer)}update(t){T5.default.exists(this);let{view:r,buffer:n,blockLen:i}=this;t=(0,Vb.toBytes)(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=(0,Vb.createView)(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){T5.default.exists(this),T5.default.output(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let f=s;f<i;f++)r[f]=0;Aye(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=(0,Vb.createView)(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,h[f],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};jv.SHA2=P5});var KK=W(Xp=>{"use strict";l();d();Object.defineProperty(Xp,"__esModule",{value:!0});Xp.sha224=Xp.sha256=void 0;var Eye=VK(),Os=k5(),Iye=(e,t,r)=>e&t^~e&r,kye=(e,t,r)=>e&t^e&r^t&r,Tye=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),xl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),wl=new Uint32Array(64),Wv=class extends Eye.SHA2{constructor(){super(64,32,8,!1),this.A=xl[0]|0,this.B=xl[1]|0,this.C=xl[2]|0,this.D=xl[3]|0,this.E=xl[4]|0,this.F=xl[5]|0,this.G=xl[6]|0,this.H=xl[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let f=0;f<16;f++,r+=4)wl[f]=t.getUint32(r,!1);for(let f=16;f<64;f++){let m=wl[f-15],b=wl[f-2],w=(0,Os.rotr)(m,7)^(0,Os.rotr)(m,18)^m>>>3,S=(0,Os.rotr)(b,17)^(0,Os.rotr)(b,19)^b>>>10;wl[f]=S+wl[f-7]+w+wl[f-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:h}=this;for(let f=0;f<64;f++){let m=(0,Os.rotr)(a,6)^(0,Os.rotr)(a,11)^(0,Os.rotr)(a,25),b=h+m+Iye(a,c,u)+Tye[f]+wl[f]|0,S=((0,Os.rotr)(n,2)^(0,Os.rotr)(n,13)^(0,Os.rotr)(n,22))+kye(n,i,o)|0;h=u,u=c,c=a,a=s+b|0,s=o,o=i,i=n,n=b+S|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,o,s,a,c,u,h)}roundClean(){wl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},B5=class extends Wv{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};Xp.sha256=(0,Os.wrapConstructor)(()=>new Wv);Xp.sha224=(0,Os.wrapConstructor)(()=>new B5)});var HK=W((lYe,FK)=>{"use strict";l();d();function Pye(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),o=i.charCodeAt(0);if(t[o]!==255)throw new TypeError(i+" is ambiguous");t[o]=n}var s=e.length,a=e.charAt(0),c=Math.log(s)/Math.log(256),u=Math.log(256)/Math.log(s);function h(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var w=0,S=0,P=0,N=b.length;P!==N&&b[P]===0;)P++,w++;for(var O=(N-P)*u+1>>>0,C=new Uint8Array(O);P!==N;){for(var L=b[P],V=0,j=O-1;(L!==0||V<S)&&j!==-1;j--,V++)L+=256*C[j]>>>0,C[j]=L%s>>>0,L=L/s>>>0;if(L!==0)throw new Error("Non-zero carry");S=V,P++}for(var $=O-S;$!==O&&C[$]===0;)$++;for(var H=a.repeat(w);$<O;++$)H+=e.charAt(C[$]);return H}function f(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;for(var w=0,S=0,P=0;b[w]===a;)S++,w++;for(var N=(b.length-w)*c+1>>>0,O=new Uint8Array(N);b[w];){var C=t[b.charCodeAt(w)];if(C===255)return;for(var L=0,V=N-1;(C!==0||L<P)&&V!==-1;V--,L++)C+=s*O[V]>>>0,O[V]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");P=L,w++}for(var j=N-P;j!==N&&O[j]===0;)j++;for(var $=new Uint8Array(S+(N-j)),H=S;j!==N;)$[H++]=O[j++];return $}function m(b){var w=f(b);if(w)return w;throw new Error("Non-base"+s+" character")}return{encode:h,decodeUnsafe:f,decode:m}}FK.exports=Pye});var jK=W((pYe,qK)=>{l();d();var Bye=HK(),_ye="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";qK.exports=Bye(_ye)});var zK=W((gYe,WK)=>{"use strict";l();d();var _5=jK();WK.exports=function(e){function t(o){var s=Uint8Array.from(o),a=e(s),c=s.length+4,u=new Uint8Array(c);return u.set(s,0),u.set(a.subarray(0,4),s.length),_5.encode(u,c)}function r(o){var s=o.slice(0,-4),a=o.slice(-4),c=e(s);if(!(a[0]^c[0]|a[1]^c[1]|a[2]^c[2]|a[3]^c[3]))return s}function n(o){var s=_5.decodeUnsafe(o);if(s)return r(s)}function i(o){var s=_5.decode(o),a=r(s,e);if(!a)throw new Error("Invalid checksum");return a}return{encode:t,decode:i,decodeUnsafe:n}}});var Qp=W((wYe,$K)=>{"use strict";l();d();var{sha256:GK}=KK(),Cye=zK();function Nye(e){return GK(GK(e))}$K.exports=Cye(Nye)});var ZK=W((AYe,YK)=>{"use strict";l();d();var C5=Ho(),Mye=oM().Buffer;YK.exports=function(e){function t(o){var s=e(o);return C5.encode(Mye.concat([o,s],o.length+4))}function r(o){var s=o.slice(0,-4),a=o.slice(-4),c=e(s);if(!(a[0]^c[0]|a[1]^c[1]|a[2]^c[2]|a[3]^c[3]))return s}function n(o){var s=C5.decodeUnsafe(o);if(s)return r(s)}function i(o){var s=C5.decode(o),a=r(s,e);if(!a)throw new Error("Invalid checksum");return a}return{encode:t,decode:i,decodeUnsafe:n}}});var QK=W((kYe,XK)=>{"use strict";l();d();var JK=cM(),Dye=ZK();function Oye(e){var t=JK("sha256").update(e).digest();return JK("sha256").update(t).digest()}XK.exports=Dye(Oye)});var zv=W((BYe,tF)=>{l();d();var N5=QK();function eF(e,t){if(t!==void 0&&e[0]!==t)throw new Error("Invalid network version");if(e.length===33)return{version:e[0],privateKey:e.slice(1,33),compressed:!1};if(e.length!==34)throw new Error("Invalid WIF length");if(e[33]!==1)throw new Error("Invalid compression flag");return{version:e[0],privateKey:e.slice(1,33),compressed:!0}}function M5(e,t,r){var n=new Buffer(r?34:33);return n.writeUInt8(e,0),t.copy(n,1),r&&(n[33]=1),n}function Uye(e,t){return eF(N5.decode(e),t)}function Rye(e,t,r){return typeof e=="number"?N5.encode(M5(e,t,r)):N5.encode(M5(e.version,e.privateKey,e.compressed))}tF.exports={decode:Uye,decodeRaw:eF,encode:Rye,encodeRaw:M5}});var U5=W(oo=>{"use strict";l();d();Object.defineProperty(oo,"__esModule",{value:!0});oo.output=oo.exists=oo.hash=oo.bytes=oo.bool=oo.number=void 0;function Yv(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}oo.number=Yv;function cF(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}oo.bool=cF;function O5(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}oo.bytes=O5;function uF(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Yv(e.outputLen),Yv(e.blockLen)}oo.hash=uF;function fF(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}oo.exists=fF;function lF(e,t){O5(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}oo.output=lF;var qye={number:Yv,bool:cF,bytes:O5,hash:uF,exists:fF,output:lF};oo.default=qye});var dF=W(Zv=>{"use strict";l();d();Object.defineProperty(Zv,"__esModule",{value:!0});Zv.crypto=void 0;Zv.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});var Xv=W(It=>{"use strict";l();d();Object.defineProperty(It,"__esModule",{value:!0});It.randomBytes=It.wrapXOFConstructorWithOpts=It.wrapConstructorWithOpts=It.wrapConstructor=It.checkOpts=It.Hash=It.concatBytes=It.toBytes=It.utf8ToBytes=It.asyncLoop=It.nextTick=It.hexToBytes=It.bytesToHex=It.isLE=It.rotr=It.createView=It.u32=It.u8=void 0;var R5=dF(),V5=e=>e instanceof Uint8Array,jye=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);It.u8=jye;var Wye=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));It.u32=Wye;var zye=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);It.createView=zye;var Gye=(e,t)=>e<<32-t|e>>>t;It.rotr=Gye;It.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!It.isLE)throw new Error("Non little-endian hardware is not supported");var $ye=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Yye(e){if(!V5(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=$ye[e[r]];return t}It.bytesToHex=Yye;function Zye(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let n=0;n<r.length;n++){let i=n*2,o=e.slice(i,i+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[n]=s}return r}It.hexToBytes=Zye;var Jye=async()=>{};It.nextTick=Jye;async function Xye(e,t,r){let n=Date.now();for(let i=0;i<e;i++){r(i);let o=Date.now()-n;o>=0&&o<t||(await(0,It.nextTick)(),n+=o)}}It.asyncLoop=Xye;function hF(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}It.utf8ToBytes=hF;function Jv(e){if(typeof e=="string"&&(e=hF(e)),!V5(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}It.toBytes=Jv;function Qye(...e){let t=new Uint8Array(e.reduce((n,i)=>n+i.length,0)),r=0;return e.forEach(n=>{if(!V5(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}It.concatBytes=Qye;var L5=class{clone(){return this._cloneInto()}};It.Hash=L5;var eme=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function tme(e,t){if(t!==void 0&&(typeof t!="object"||!eme(t)))throw new Error("Options should be object or undefined");return Object.assign(e,t)}It.checkOpts=tme;function rme(e){let t=n=>e().update(Jv(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}It.wrapConstructor=rme;function nme(e){let t=(n,i)=>e(i).update(Jv(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}It.wrapConstructorWithOpts=nme;function ime(e){let t=(n,i)=>e(i).update(Jv(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}It.wrapXOFConstructorWithOpts=ime;function ome(e=32){if(R5.crypto&&typeof R5.crypto.getRandomValues=="function")return R5.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}It.randomBytes=ome});var yF=W(gh=>{"use strict";l();d();Object.defineProperty(gh,"__esModule",{value:!0});gh.hmac=gh.HMAC=void 0;var Qv=U5(),pF=Xv(),Fb=class extends pF.Hash{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,Qv.default.hash(t);let n=(0,pF.toBytes)(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return Qv.default.exists(this),this.iHash.update(t),this}digestInto(t){Qv.default.exists(this),Qv.default.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};gh.HMAC=Fb;var sme=(e,t,r)=>new Fb(e,t).update(r).digest();gh.hmac=sme;gh.hmac.create=(e,t)=>new Fb(e,t)});var mF=W(eA=>{"use strict";l();d();Object.defineProperty(eA,"__esModule",{value:!0});eA.SHA2=void 0;var K5=U5(),Hb=Xv();function ame(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var F5=class extends Hb.Hash{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,Hb.createView)(this.buffer)}update(t){K5.default.exists(this);let{view:r,buffer:n,blockLen:i}=this;t=(0,Hb.toBytes)(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=(0,Hb.createView)(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){K5.default.exists(this),K5.default.output(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let f=s;f<i;f++)r[f]=0;ame(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=(0,Hb.createView)(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,h[f],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};eA.SHA2=F5});var gF=W(ey=>{"use strict";l();d();Object.defineProperty(ey,"__esModule",{value:!0});ey.sha224=ey.sha256=void 0;var cme=mF(),Us=Xv(),ume=(e,t,r)=>e&t^~e&r,fme=(e,t,r)=>e&t^e&r^t&r,lme=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Sl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),vl=new Uint32Array(64),tA=class extends cme.SHA2{constructor(){super(64,32,8,!1),this.A=Sl[0]|0,this.B=Sl[1]|0,this.C=Sl[2]|0,this.D=Sl[3]|0,this.E=Sl[4]|0,this.F=Sl[5]|0,this.G=Sl[6]|0,this.H=Sl[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let f=0;f<16;f++,r+=4)vl[f]=t.getUint32(r,!1);for(let f=16;f<64;f++){let m=vl[f-15],b=vl[f-2],w=(0,Us.rotr)(m,7)^(0,Us.rotr)(m,18)^m>>>3,S=(0,Us.rotr)(b,17)^(0,Us.rotr)(b,19)^b>>>10;vl[f]=S+vl[f-7]+w+vl[f-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:h}=this;for(let f=0;f<64;f++){let m=(0,Us.rotr)(a,6)^(0,Us.rotr)(a,11)^(0,Us.rotr)(a,25),b=h+m+ume(a,c,u)+lme[f]+vl[f]|0,S=((0,Us.rotr)(n,2)^(0,Us.rotr)(n,13)^(0,Us.rotr)(n,22))+fme(n,i,o)|0;h=u,u=c,c=a,a=s+b|0,s=o,o=i,i=n,n=b+S|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,o,s,a,c,u,h)}roundClean(){vl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},H5=class extends tA{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};ey.sha256=(0,Us.wrapConstructor)(()=>new tA);ey.sha224=(0,Us.wrapConstructor)(()=>new H5)});var nA=W(Sn=>{"use strict";l();d();var dme=lI(),hme=yF(),bF=gF();function pme(e){var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}var ar=pme(dme);ar.utils.hmacSha256Sync=(e,...t)=>hme.hmac(bF.sha256,e,ar.utils.concatBytes(...t));ar.utils.sha256Sync=(...e)=>bF.sha256(ar.utils.concatBytes(...e));var W5=ar.utils._normalizePrivateKey,yme=32,mme=32,q5=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65]),gme=32;function j5(e,t){for(let r=0;r<32;++r)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}function qb(e){return!(!(e instanceof Uint8Array)||e.length!==mme||j5(e,q5)>=0)}function xF(e){return e instanceof Uint8Array&&e.length===64&&j5(e.subarray(0,32),q5)<0&&j5(e.subarray(32,64),q5)<0}function rA(e){return e instanceof Uint8Array&&e.length===yme}function wF(e){return e===void 0||e instanceof Uint8Array&&e.length===gme}function SF(e){if(typeof e!="string")throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function bme(e){return SF(ar.utils.bytesToHex(e))}function z5(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"&&Number.isSafeInteger(e)&&e>=0)t=BigInt(e);else if(typeof e=="string"){if(e.length!==64)throw new Error("Expected 32 bytes of private scalar");t=SF(e)}else if(e instanceof Uint8Array){if(e.length!==32)throw new Error("Expected 32 bytes of private scalar");t=bme(e)}else throw new TypeError("Expected valid private scalar");if(t<0)throw new Error("Expected private scalar >= 0");return t}var xme=(e,t)=>{let r=W5(e),n=z5(t),i=ar.utils._bigintTo32Bytes(ar.utils.mod(r+n,ar.CURVE.n));return ar.utils.isValidPrivateKey(i)?i:null},wme=(e,t)=>{let r=W5(e),n=z5(t),i=ar.utils._bigintTo32Bytes(ar.utils.mod(r-n,ar.CURVE.n));return ar.utils.isValidPrivateKey(i)?i:null},Sme=e=>{let t=W5(e),r=ar.utils._bigintTo32Bytes(ar.CURVE.n-t);return ar.utils.isValidPrivateKey(r)?r:null},vF=(e,t,r)=>{let n=ar.Point.fromHex(e),i=z5(t),o=ar.Point.BASE.multiplyAndAddUnsafe(n,i,1n);if(!o)throw new Error("Tweaked point at infinity");return o.toRawBytes(r)},vme=(e,t,r)=>{let n=ar.Point.fromHex(e),i=typeof t=="string"?t:ar.utils.bytesToHex(t),o=BigInt(`0x${i}`);return n.multiply(o).toRawBytes(r)};function jb(e,t){return e===void 0?t!==void 0?AF(t):!0:!!e}function bh(e){try{return e()}catch{return null}}function G5(e,t){if(e.length===32!==t)return!1;try{return!!ar.Point.fromHex(e)}catch{return!1}}function Al(e){return G5(e,!1)}function AF(e){return G5(e,!1)&&e.length===33}function El(e){return ar.utils.isValidPrivateKey(e)}function $5(e){return G5(e,!0)}function Ame(e,t){if(!$5(e))throw new Error("Expected Point");if(!qb(t))throw new Error("Expected Tweak");return bh(()=>{let r=vF(e,t,!0);return{parity:r[0]%2===1?1:0,xOnlyPubkey:r.slice(1)}})}function EF(e){if(!Al(e))throw new Error("Expected Point");return e.slice(1,33)}function IF(e,t){if(!El(e))throw new Error("Expected Private");return bh(()=>ar.getPublicKey(e,jb(t)))}function Eme(e){if(!El(e))throw new Error("Expected Private");return EF(IF(e))}function Ime(e,t){if(!Al(e))throw new Error("Expected Point");return ar.Point.fromHex(e).toRawBytes(jb(t,e))}function kme(e,t,r){if(!Al(e))throw new Error("Expected Point");if(!qb(t))throw new Error("Expected Tweak");return bh(()=>vme(e,t,jb(r,e)))}function Tme(e,t,r){if(!Al(e)||!Al(t))throw new Error("Expected Point");return bh(()=>{let n=ar.Point.fromHex(e),i=ar.Point.fromHex(t);return n.equals(i.negate())?null:n.add(i).toRawBytes(jb(r,e))})}function Pme(e,t,r){if(!Al(e))throw new Error("Expected Point");if(!qb(t))throw new Error("Expected Tweak");return bh(()=>vF(e,t,jb(r,e)))}function Bme(e,t){if(El(e)===!1)throw new Error("Expected Private");if(qb(t)===!1)throw new Error("Expected Tweak");return bh(()=>xme(e,t))}function _me(e,t){if(El(e)===!1)throw new Error("Expected Private");if(qb(t)===!1)throw new Error("Expected Tweak");return bh(()=>wme(e,t))}function Cme(e){if(El(e)===!1)throw new Error("Expected Private");return Sme(e)}function Nme(e,t,r){if(!El(t))throw new Error("Expected Private");if(!rA(e))throw new Error("Expected Scalar");if(!wF(r))throw new Error("Expected Extra Data (32 bytes)");return ar.signSync(e,t,{der:!1,extraEntropy:r})}function Mme(e,t,r=Buffer.alloc(32,0)){if(!El(t))throw new Error("Expected Private");if(!rA(e))throw new Error("Expected Scalar");if(!wF(r))throw new Error("Expected Extra Data (32 bytes)");return ar.schnorr.signSync(e,t,r)}function Dme(e,t,r,n){if(!Al(t))throw new Error("Expected Point");if(!xF(r))throw new Error("Expected Signature");if(!rA(e))throw new Error("Expected Scalar");return ar.verify(r,e,t,{strict:n})}function Ome(e,t,r){if(!$5(t))throw new Error("Expected Point");if(!xF(r))throw new Error("Expected Signature");if(!rA(e))throw new Error("Expected Scalar");return ar.schnorr.verifySync(r,e,t)}Sn.isPoint=Al;Sn.isPointCompressed=AF;Sn.isPrivate=El;Sn.isXOnlyPoint=$5;Sn.pointAdd=Tme;Sn.pointAddScalar=Pme;Sn.pointCompress=Ime;Sn.pointFromScalar=IF;Sn.pointMultiply=kme;Sn.privateAdd=Bme;Sn.privateNegate=Cme;Sn.privateSub=_me;Sn.sign=Nme;Sn.signSchnorr=Mme;Sn.verify=Dme;Sn.verifySchnorr=Ome;Sn.xOnlyPointAddTweak=Ame;Sn.xOnlyPointFromPoint=EF;Sn.xOnlyPointFromScalar=Eme});var Rs=W(kl=>{"use strict";l();d();Object.defineProperty(kl,"__esModule",{value:!0});kl.testnet=kl.regtest=kl.bitcoin=void 0;kl.bitcoin={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128};kl.regtest={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239};kl.testnet={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}});var Z5=W(Tl=>{"use strict";l();d();Object.defineProperty(Tl,"__esModule",{value:!0});Tl.encode=Tl.decode=Tl.check=void 0;function jme(e){if(e.length<8||e.length>72||e[0]!==48||e[1]!==e.length-2||e[2]!==2)return!1;let t=e[3];if(t===0||5+t>=e.length||e[4+t]!==2)return!1;let r=e[5+t];return!(r===0||6+t+r!==e.length||e[4]&128||t>1&&e[4]===0&&!(e[5]&128)||e[t+6]&128||r>1&&e[t+6]===0&&!(e[t+7]&128))}Tl.check=jme;function Wme(e){if(e.length<8)throw new Error("DER sequence length is too short");if(e.length>72)throw new Error("DER sequence length is too long");if(e[0]!==48)throw new Error("Expected DER sequence");if(e[1]!==e.length-2)throw new Error("DER sequence length is invalid");if(e[2]!==2)throw new Error("Expected DER integer");let t=e[3];if(t===0)throw new Error("R length is zero");if(5+t>=e.length)throw new Error("R length is too long");if(e[4+t]!==2)throw new Error("Expected DER integer (2)");let r=e[5+t];if(r===0)throw new Error("S length is zero");if(6+t+r!==e.length)throw new Error("S length is invalid");if(e[4]&128)throw new Error("R value is negative");if(t>1&&e[4]===0&&!(e[5]&128))throw new Error("R value excessively padded");if(e[t+6]&128)throw new Error("S value is negative");if(r>1&&e[t+6]===0&&!(e[t+7]&128))throw new Error("S value excessively padded");return{r:e.slice(4,4+t),s:e.slice(6+t)}}Tl.decode=Wme;function zme(e,t){let r=e.length,n=t.length;if(r===0)throw new Error("R length is zero");if(n===0)throw new Error("S length is zero");if(r>33)throw new Error("R length is too long");if(n>33)throw new Error("S length is too long");if(e[0]&128)throw new Error("R value is negative");if(t[0]&128)throw new Error("S value is negative");if(r>1&&e[0]===0&&!(e[1]&128))throw new Error("R value excessively padded");if(n>1&&t[0]===0&&!(t[1]&128))throw new Error("S value excessively padded");let i=Buffer.allocUnsafe(6+r+n);return i[0]=48,i[1]=i.length-2,i[2]=2,i[3]=e.length,e.copy(i,4),i[4+r]=2,i[5+r]=t.length,t.copy(i,6+r),i}Tl.encode=zme});var oA=W(ty=>{"use strict";l();d();Object.defineProperty(ty,"__esModule",{value:!0});ty.REVERSE_OPS=ty.OPS=void 0;var J5={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};ty.OPS=J5;var NF={};ty.REVERSE_OPS=NF;for(let e of Object.keys(J5)){let t=J5[e];NF[t]=e}});var DF=W(Bl=>{"use strict";l();d();Object.defineProperty(Bl,"__esModule",{value:!0});Bl.decode=Bl.encode=Bl.encodingLength=void 0;var Pl=oA();function MF(e){return e<Pl.OPS.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}Bl.encodingLength=MF;function Gme(e,t,r){let n=MF(t);return n===1?e.writeUInt8(t,r):n===2?(e.writeUInt8(Pl.OPS.OP_PUSHDATA1,r),e.writeUInt8(t,r+1)):n===3?(e.writeUInt8(Pl.OPS.OP_PUSHDATA2,r),e.writeUInt16LE(t,r+1)):(e.writeUInt8(Pl.OPS.OP_PUSHDATA4,r),e.writeUInt32LE(t,r+1)),n}Bl.encode=Gme;function $me(e,t){let r=e.readUInt8(t),n,i;if(r<Pl.OPS.OP_PUSHDATA1)n=r,i=1;else if(r===Pl.OPS.OP_PUSHDATA1){if(t+2>e.length)return null;n=e.readUInt8(t+1),i=2}else if(r===Pl.OPS.OP_PUSHDATA2){if(t+3>e.length)return null;n=e.readUInt16LE(t+1),i=3}else{if(t+5>e.length)return null;if(r!==Pl.OPS.OP_PUSHDATA4)throw new Error("Unexpected opcode");n=e.readUInt32LE(t+1),i=5}return{opcode:r,number:n,size:i}}Bl.decode=$me});var OF=W(ry=>{"use strict";l();d();Object.defineProperty(ry,"__esModule",{value:!0});ry.encode=ry.decode=void 0;function Yme(e,t,r){t=t||4,r=r===void 0?!0:r;let n=e.length;if(n===0)return 0;if(n>t)throw new TypeError("Script number overflow");if(r&&!(e[n-1]&127)&&(n<=1||!(e[n-2]&128)))throw new Error("Non-minimally encoded script number");if(n===5){let o=e.readUInt32LE(0),s=e.readUInt8(4);return s&128?-((s&-129)*4294967296+o):s*4294967296+o}let i=0;for(let o=0;o<n;++o)i|=e[o]<<8*o;return e[n-1]&128?-(i&~(128<<8*(n-1))):i}ry.decode=Yme;function Zme(e){return e>2147483647?5:e>8388607?4:e>32767?3:e>127?2:e>0?1:0}function Jme(e){let t=Math.abs(e),r=Zme(t),n=Buffer.allocUnsafe(r),i=e<0;for(let o=0;o<r;++o)n.writeUInt8(t&255,o),t>>=8;return n[r-1]&128?n.writeUInt8(i?128:0,r-1):i&&(n[r-1]|=128),n}ry.encode=Jme});var sA=W((GZe,UF)=>{l();d();var zb={Array:function(e){return e!=null&&e.constructor===Array},Boolean:function(e){return typeof e=="boolean"},Function:function(e){return typeof e=="function"},Nil:function(e){return e==null},Number:function(e){return typeof e=="number"},Object:function(e){return typeof e=="object"},String:function(e){return typeof e=="string"},"":function(){return!0}};zb.Null=zb.Nil;for(X5 in zb)zb[X5].toJSON=function(e){return e}.bind(null,X5);var X5;UF.exports=zb});var tP=W((ZZe,VF)=>{l();d();var xh=sA();function RF(e){return e.name||e.toString().match(/function (.*?)\s*\(/)[1]}function Q5(e){return xh.Nil(e)?"":RF(e.constructor)}function Xme(e){return xh.Function(e)?"":xh.String(e)?JSON.stringify(e):e&&xh.Object(e)?"":e}function eP(e,t){Error.captureStackTrace&&Error.captureStackTrace(e,t)}function aA(e){return xh.Function(e)?e.toJSON?e.toJSON():RF(e):xh.Array(e)?"Array":e&&xh.Object(e)?"Object":e!==void 0?e:""}function LF(e,t,r){var n=Xme(t);return"Expected "+aA(e)+", got"+(r!==""?" "+r:"")+(n!==""?" "+n:"")}function Lu(e,t,r){r=r||Q5(t),this.message=LF(e,t,r),eP(this,Lu),this.__type=e,this.__value=t,this.__valueTypeName=r}Lu.prototype=Object.create(Error.prototype);Lu.prototype.constructor=Lu;function Qme(e,t,r,n,i){var o='" of type ';return t==="key"&&(o='" with key type '),LF('property "'+aA(r)+o+aA(e),n,i)}function ny(e,t,r,n,i){e?(i=i||Q5(n),this.message=Qme(e,r,t,n,i)):this.message='Unexpected property "'+t+'"',eP(this,Lu),this.__label=r,this.__property=t,this.__type=e,this.__value=n,this.__valueTypeName=i}ny.prototype=Object.create(Error.prototype);ny.prototype.constructor=Lu;function ege(e,t){return new Lu(e,{},t)}function tge(e,t,r){return e instanceof ny?(t=t+"."+e.__property,e=new ny(e.__type,t,e.__label,e.__value,e.__valueTypeName)):e instanceof Lu&&(e=new ny(e.__type,t,r,e.__value,e.__valueTypeName)),eP(e),e}VF.exports={TfTypeError:Lu,TfPropertyTypeError:ny,tfCustomError:ege,tfSubError:tge,tfJSON:aA,getValueTypeName:Q5}});var qF=W((QZe,HF)=>{l();d();var oP=sA(),rge=tP();function KF(e){return Buffer.isBuffer(e)}function FF(e){return typeof e=="string"&&/^([0-9a-f]{2})+$/i.test(e)}function cA(e,t){var r=e.toJSON();function n(i){if(!e(i))return!1;if(i.length===t)return!0;throw rge.tfCustomError(r+"(Length: "+t+")",r+"(Length: "+i.length+")")}return n.toJSON=function(){return r},n}var nge=cA.bind(null,oP.Array),ige=cA.bind(null,KF),oge=cA.bind(null,FF),sge=cA.bind(null,oP.String);function age(e,t,r){r=r||oP.Number;function n(i,o){return r(i,o)&&i>e&&i<t}return n.toJSON=function(){return`${r.toJSON()} between [${e}, ${t}]`},n}var nP=Math.pow(2,53)-1;function cge(e){return typeof e=="number"&&isFinite(e)}function uge(e){return e<<24>>24===e}function fge(e){return e<<16>>16===e}function lge(e){return(e|0)===e}function dge(e){return typeof e=="number"&&e>=-nP&&e<=nP&&Math.floor(e)===e}function hge(e){return(e&255)===e}function pge(e){return(e&65535)===e}function yge(e){return e>>>0===e}function mge(e){return typeof e=="number"&&e>=0&&e<=nP&&Math.floor(e)===e}var iP={ArrayN:nge,Buffer:KF,BufferN:ige,Finite:cge,Hex:FF,HexN:oge,Int8:uge,Int16:fge,Int32:lge,Int53:dge,Range:age,StringN:sge,UInt8:hge,UInt16:pge,UInt32:yge,UInt53:mge};for(rP in iP)iP[rP].toJSON=function(e){return e}.bind(null,rP);var rP;HF.exports=iP});var sP=W((rJe,GF)=>{l();d();var $b=tP(),bi=sA(),Vu=$b.tfJSON,WF=$b.TfTypeError,zF=$b.TfPropertyTypeError,Gb=$b.tfSubError,gge=$b.getValueTypeName,Ku={arrayOf:function(t,r){t=Pc(t),r=r||{};function n(i,o){return!bi.Array(i)||bi.Nil(i)||r.minLength!==void 0&&i.length<r.minLength||r.maxLength!==void 0&&i.length>r.maxLength||r.length!==void 0&&i.length!==r.length?!1:i.every(function(s,a){try{return so(t,s,o)}catch(c){throw Gb(c,a)}})}return n.toJSON=function(){var i="["+Vu(t)+"]";return r.length!==void 0?i+="{"+r.length+"}":(r.minLength!==void 0||r.maxLength!==void 0)&&(i+="{"+(r.minLength===void 0?0:r.minLength)+","+(r.maxLength===void 0?1/0:r.maxLength)+"}"),i},n},maybe:function e(t){t=Pc(t);function r(n,i){return bi.Nil(n)||t(n,i,e)}return r.toJSON=function(){return"?"+Vu(t)},r},map:function(t,r){t=Pc(t),r&&(r=Pc(r));function n(i,o){if(!bi.Object(i)||bi.Nil(i))return!1;for(var s in i){try{r&&so(r,s,o)}catch(c){throw Gb(c,s,"key")}try{var a=i[s];so(t,a,o)}catch(c){throw Gb(c,s)}}return!0}return r?n.toJSON=function(){return"{"+Vu(r)+": "+Vu(t)+"}"}:n.toJSON=function(){return"{"+Vu(t)+"}"},n},object:function(t){var r={};for(var n in t)r[n]=Pc(t[n]);function i(o,s){if(!bi.Object(o)||bi.Nil(o))return!1;var a;try{for(a in r){var c=r[a],u=o[a];so(c,u,s)}}catch(h){throw Gb(h,a)}if(s){for(a in o)if(!r[a])throw new zF(void 0,a)}return!0}return i.toJSON=function(){return Vu(r)},i},anyOf:function(){var t=[].slice.call(arguments).map(Pc);function r(n,i){return t.some(function(o){try{return so(o,n,i)}catch{return!1}})}return r.toJSON=function(){return t.map(Vu).join("|")},r},allOf:function(){var t=[].slice.call(arguments).map(Pc);function r(n,i){return t.every(function(o){try{return so(o,n,i)}catch{return!1}})}return r.toJSON=function(){return t.map(Vu).join(" & ")},r},quacksLike:function(t){function r(n){return t===gge(n)}return r.toJSON=function(){return t},r},tuple:function(){var t=[].slice.call(arguments).map(Pc);function r(n,i){return bi.Nil(n)||bi.Nil(n.length)||i&&n.length!==t.length?!1:t.every(function(o,s){try{return so(o,n[s],i)}catch(a){throw Gb(a,s)}})}return r.toJSON=function(){return"("+t.map(Vu).join(", ")+")"},r},value:function(t){function r(n){return n===t}return r.toJSON=function(){return t},r}};Ku.oneOf=Ku.anyOf;function Pc(e){if(bi.String(e))return e[0]==="?"?Ku.maybe(e.slice(1)):bi[e]||Ku.quacksLike(e);if(e&&bi.Object(e)){if(bi.Array(e)){if(e.length!==1)throw new TypeError("Expected compile() parameter of type Array of length 1");return Ku.arrayOf(e[0])}return Ku.object(e)}else if(bi.Function(e))return e;return Ku.value(e)}function so(e,t,r,n){if(bi.Function(e)){if(e(t,r))return!0;throw new WF(n||e,t)}return so(Pc(e),t,r)}for(Fu in bi)so[Fu]=bi[Fu];var Fu;for(Fu in Ku)so[Fu]=Ku[Fu];var jF=qF();for(Fu in jF)so[Fu]=jF[Fu];so.compile=Pc;so.TfTypeError=WF;so.TfPropertyTypeError=zF;GF.exports=so});var xi=W(le=>{"use strict";l();d();Object.defineProperty(le,"__esModule",{value:!0});le.oneOf=le.Null=le.BufferN=le.Function=le.UInt32=le.UInt8=le.tuple=le.maybe=le.Hex=le.Buffer=le.String=le.Boolean=le.Array=le.Number=le.Hash256bit=le.Hash160bit=le.Buffer256bit=le.isTaptree=le.isTapleaf=le.TAPLEAF_VERSION_MASK=le.Network=le.ECPoint=le.Satoshi=le.Signer=le.BIP32Path=le.UInt31=le.isPoint=le.typeforce=void 0;var uA=Bn();le.typeforce=sP();var $F=uA.Buffer.alloc(32,0),YF=uA.Buffer.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex");function bge(e){if(!uA.Buffer.isBuffer(e)||e.length<33)return!1;let t=e[0],r=e.slice(1,33);if(r.compare($F)===0||r.compare(YF)>=0)return!1;if((t===2||t===3)&&e.length===33)return!0;let n=e.slice(33);return n.compare($F)===0||n.compare(YF)>=0?!1:t===4&&e.length===65}le.isPoint=bge;var xge=Math.pow(2,31)-1;function wge(e){return le.typeforce.UInt32(e)&&e<=xge}le.UInt31=wge;function ZF(e){return le.typeforce.String(e)&&!!e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}le.BIP32Path=ZF;ZF.toJSON=()=>"BIP32 derivation path";function Sge(e){return(le.typeforce.Buffer(e.publicKey)||typeof e.getPublicKey=="function")&&typeof e.sign=="function"}le.Signer=Sge;var vge=21*1e14;function Age(e){return le.typeforce.UInt53(e)&&e<=vge}le.Satoshi=Age;le.ECPoint=le.typeforce.quacksLike("Point");le.Network=le.typeforce.compile({messagePrefix:le.typeforce.oneOf(le.typeforce.Buffer,le.typeforce.String),bip32:{public:le.typeforce.UInt32,private:le.typeforce.UInt32},pubKeyHash:le.typeforce.UInt8,scriptHash:le.typeforce.UInt8,wif:le.typeforce.UInt8});le.TAPLEAF_VERSION_MASK=254;function JF(e){return!e||!("output"in e)||!uA.Buffer.isBuffer(e.output)?!1:e.version!==void 0?(e.version&le.TAPLEAF_VERSION_MASK)===e.version:!0}le.isTapleaf=JF;function XF(e){return(0,le.Array)(e)?e.length!==2?!1:e.every(t=>XF(t)):JF(e)}le.isTaptree=XF;le.Buffer256bit=le.typeforce.BufferN(32);le.Hash160bit=le.typeforce.BufferN(20);le.Hash256bit=le.typeforce.BufferN(32);le.Number=le.typeforce.Number;le.Array=le.typeforce.Array;le.Boolean=le.typeforce.Boolean;le.String=le.typeforce.String;le.Buffer=le.typeforce.Buffer;le.Hex=le.typeforce.Hex;le.maybe=le.typeforce.maybe;le.tuple=le.typeforce.tuple;le.UInt8=le.typeforce.UInt8;le.UInt32=le.typeforce.UInt32;le.Function=le.typeforce.Function;le.BufferN=le.typeforce.BufferN;le.Null=le.typeforce.Null;le.oneOf=le.typeforce.oneOf});var nH=W(oy=>{"use strict";l();d();Object.defineProperty(oy,"__esModule",{value:!0});oy.encode=oy.decode=void 0;var{Buffer:iy}=Bn(),rH=Z5(),aP=xi(),{typeforce:Ege}=aP,QF=iy.alloc(1,0);function eH(e){let t=0;for(;e[t]===0;)++t;return t===e.length?QF:(e=e.slice(t),e[0]&128?iy.concat([QF,e],1+e.length):e)}function tH(e){e[0]===0&&(e=e.slice(1));let t=iy.alloc(32,0),r=Math.max(0,32-e.length);return e.copy(t,r),t}function Ige(e){let t=e.readUInt8(e.length-1),r=t&-129;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);let n=rH.decode(e.slice(0,-1)),i=tH(n.r),o=tH(n.s);return{signature:iy.concat([i,o],64),hashType:t}}oy.decode=Ige;function kge(e,t){Ege({signature:aP.BufferN(64),hashType:aP.UInt8},{signature:e,hashType:t});let r=t&-129;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);let n=iy.allocUnsafe(1);n.writeUInt8(t,0);let i=eH(e.slice(0,32)),o=eH(e.slice(32,64));return iy.concat([rH.encode(i,o),n])}oy.encode=kge});var ao=W(xr=>{"use strict";l();d();Object.defineProperty(xr,"__esModule",{value:!0});xr.signature=xr.number=xr.isCanonicalScriptSignature=xr.isDefinedHashType=xr.isCanonicalPubKey=xr.toStack=xr.fromASM=xr.toASM=xr.decompile=xr.compile=xr.countNonPushOnlyOPs=xr.isPushOnly=xr.OPS=void 0;var Tge=Z5(),_o=oA();Object.defineProperty(xr,"OPS",{enumerable:!0,get:function(){return _o.OPS}});var cP=DF(),iH=OF(),Pge=nH(),Bc=xi(),{typeforce:Yb}=Bc,oH=_o.OPS.OP_RESERVED;function Bge(e){return Bc.Number(e)&&(e===_o.OPS.OP_0||e>=_o.OPS.OP_1&&e<=_o.OPS.OP_16||e===_o.OPS.OP_1NEGATE)}function sH(e){return Bc.Buffer(e)||Bge(e)}function aH(e){return Bc.Array(e)&&e.every(sH)}xr.isPushOnly=aH;function _ge(e){return e.length-e.filter(sH).length}xr.countNonPushOnlyOPs=_ge;function fA(e){if(e.length===0)return _o.OPS.OP_0;if(e.length===1){if(e[0]>=1&&e[0]<=16)return oH+e[0];if(e[0]===129)return _o.OPS.OP_1NEGATE}}function cH(e){return Buffer.isBuffer(e)}function Cge(e){return Bc.Array(e)}function lA(e){return Buffer.isBuffer(e)}function uH(e){if(cH(e))return e;Yb(Bc.Array,e);let t=e.reduce((i,o)=>lA(o)?o.length===1&&fA(o)!==void 0?i+1:i+cP.encodingLength(o.length)+o.length:i+1,0),r=Buffer.allocUnsafe(t),n=0;if(e.forEach(i=>{if(lA(i)){let o=fA(i);if(o!==void 0){r.writeUInt8(o,n),n+=1;return}n+=cP.encode(r,i.length,n),i.copy(r,n),n+=i.length}else r.writeUInt8(i,n),n+=1}),n!==r.length)throw new Error("Could not decode chunks");return r}xr.compile=uH;function uP(e){if(Cge(e))return e;Yb(Bc.Buffer,e);let t=[],r=0;for(;r<e.length;){let n=e[r];if(n>_o.OPS.OP_0&&n<=_o.OPS.OP_PUSHDATA4){let i=cP.decode(e,r);if(i===null||(r+=i.size,r+i.number>e.length))return null;let o=e.slice(r,r+i.number);r+=i.number;let s=fA(o);s!==void 0?t.push(s):t.push(o)}else t.push(n),r+=1}return t}xr.decompile=uP;function Nge(e){return cH(e)&&(e=uP(e)),e.map(t=>{if(lA(t)){let r=fA(t);if(r===void 0)return t.toString("hex");t=r}return _o.REVERSE_OPS[t]}).join(" ")}xr.toASM=Nge;function Mge(e){return Yb(Bc.String,e),uH(e.split(" ").map(t=>_o.OPS[t]!==void 0?_o.OPS[t]:(Yb(Bc.Hex,t),Buffer.from(t,"hex"))))}xr.fromASM=Mge;function Dge(e){return e=uP(e),Yb(aH,e),e.map(t=>lA(t)?t:t===_o.OPS.OP_0?Buffer.allocUnsafe(0):iH.encode(t-oH))}xr.toStack=Dge;function Oge(e){return Bc.isPoint(e)}xr.isCanonicalPubKey=Oge;function fH(e){let t=e&-129;return t>0&&t<4}xr.isDefinedHashType=fH;function Uge(e){return!Buffer.isBuffer(e)||!fH(e[e.length-1])?!1:Tge.check(e.slice(0,-1))}xr.isCanonicalScriptSignature=Uge;xr.number=iH;xr.signature=Pge});var Hu=W(sy=>{"use strict";l();d();Object.defineProperty(sy,"__esModule",{value:!0});sy.value=sy.prop=void 0;function Rge(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){let n=r.call(this);return this[t]=n,n},set(n){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:n,writable:!0})}})}sy.prop=Rge;function Lge(e){let t;return()=>(t!==void 0||(t=e()),t)}sy.value=Lge});var hH=W(hA=>{"use strict";l();d();Object.defineProperty(hA,"__esModule",{value:!0});hA.p2data=void 0;var Vge=Rs(),dA=ao(),qu=xi(),lH=Hu(),dH=dA.OPS;function Kge(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}function Fge(e,t){if(!e.data&&!e.output)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,qu.typeforce)({network:qu.typeforce.maybe(qu.typeforce.Object),output:qu.typeforce.maybe(qu.typeforce.Buffer),data:qu.typeforce.maybe(qu.typeforce.arrayOf(qu.typeforce.Buffer))},e);let n={name:"embed",network:e.network||Vge.bitcoin};if(lH.prop(n,"output",()=>{if(e.data)return dA.compile([dH.OP_RETURN].concat(e.data))}),lH.prop(n,"data",()=>{if(e.output)return dA.decompile(e.output).slice(1)}),t.validate&&e.output){let i=dA.decompile(e.output);if(i[0]!==dH.OP_RETURN)throw new TypeError("Output is invalid");if(!i.slice(1).every(qu.typeforce.Buffer))throw new TypeError("Output is invalid");if(e.data&&!Kge(e.data,n.data))throw new TypeError("Data mismatch")}return Object.assign(n,e)}hA.p2data=Fge});var yH=W(yA=>{"use strict";l();d();Object.defineProperty(yA,"__esModule",{value:!0});yA.p2ms=void 0;var Hge=Rs(),ay=ao(),On=xi(),_l=Hu(),cy=ay.OPS,pA=cy.OP_RESERVED;function pH(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}function qge(e,t){if(!e.input&&!e.output&&!(e.pubkeys&&e.m!==void 0)&&!e.signatures)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{});function r(c){return ay.isCanonicalScriptSignature(c)||(t.allowIncomplete&&c===cy.OP_0)!==void 0}(0,On.typeforce)({network:On.typeforce.maybe(On.typeforce.Object),m:On.typeforce.maybe(On.typeforce.Number),n:On.typeforce.maybe(On.typeforce.Number),output:On.typeforce.maybe(On.typeforce.Buffer),pubkeys:On.typeforce.maybe(On.typeforce.arrayOf(On.isPoint)),signatures:On.typeforce.maybe(On.typeforce.arrayOf(r)),input:On.typeforce.maybe(On.typeforce.Buffer)},e);let i={network:e.network||Hge.bitcoin},o=[],s=!1;function a(c){s||(s=!0,o=ay.decompile(c),i.m=o[0]-pA,i.n=o[o.length-2]-pA,i.pubkeys=o.slice(1,-2))}if(_l.prop(i,"output",()=>{if(e.m&&i.n&&e.pubkeys)return ay.compile([].concat(pA+e.m,e.pubkeys,pA+i.n,cy.OP_CHECKMULTISIG))}),_l.prop(i,"m",()=>{if(i.output)return a(i.output),i.m}),_l.prop(i,"n",()=>{if(i.pubkeys)return i.pubkeys.length}),_l.prop(i,"pubkeys",()=>{if(e.output)return a(e.output),i.pubkeys}),_l.prop(i,"signatures",()=>{if(e.input)return ay.decompile(e.input).slice(1)}),_l.prop(i,"input",()=>{if(e.signatures)return ay.compile([cy.OP_0].concat(e.signatures))}),_l.prop(i,"witness",()=>{if(i.input)return[]}),_l.prop(i,"name",()=>{if(!(!i.m||!i.n))return`p2ms(${i.m} of ${i.n})`}),t.validate){if(e.output){if(a(e.output),!On.typeforce.Number(o[0]))throw new TypeError("Output is invalid");if(!On.typeforce.Number(o[o.length-2]))throw new TypeError("Output is invalid");if(o[o.length-1]!==cy.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(i.m<=0||i.n>16||i.m>i.n||i.n!==o.length-3)throw new TypeError("Output is invalid");if(!i.pubkeys.every(c=>(0,On.isPoint)(c)))throw new TypeError("Output is invalid");if(e.m!==void 0&&e.m!==i.m)throw new TypeError("m mismatch");if(e.n!==void 0&&e.n!==i.n)throw new TypeError("n mismatch");if(e.pubkeys&&!pH(e.pubkeys,i.pubkeys))throw new TypeError("Pubkeys mismatch")}if(e.pubkeys){if(e.n!==void 0&&e.n!==e.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(i.n=e.pubkeys.length,i.n<i.m)throw new TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<i.m)throw new TypeError("Not enough signatures provided");if(e.signatures.length>i.m)throw new TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==cy.OP_0)throw new TypeError("Input is invalid");if(i.signatures.length===0||!i.signatures.every(r))throw new TypeError("Input has invalid signature(s)");if(e.signatures&&!pH(e.signatures,i.signatures))throw new TypeError("Signature mismatch");if(e.m!==void 0&&e.m!==e.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(i,e)}yA.p2ms=qge});var gH=W(mA=>{"use strict";l();d();Object.defineProperty(mA,"__esModule",{value:!0});mA.p2pk=void 0;var jge=Rs(),fy=ao(),Oa=xi(),uy=Hu(),mH=fy.OPS;function Wge(e,t){if(!e.input&&!e.output&&!e.pubkey&&!e.input&&!e.signature)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,Oa.typeforce)({network:Oa.typeforce.maybe(Oa.typeforce.Object),output:Oa.typeforce.maybe(Oa.typeforce.Buffer),pubkey:Oa.typeforce.maybe(Oa.isPoint),signature:Oa.typeforce.maybe(fy.isCanonicalScriptSignature),input:Oa.typeforce.maybe(Oa.typeforce.Buffer)},e);let r=uy.value(()=>fy.decompile(e.input)),i={name:"p2pk",network:e.network||jge.bitcoin};if(uy.prop(i,"output",()=>{if(e.pubkey)return fy.compile([e.pubkey,mH.OP_CHECKSIG])}),uy.prop(i,"pubkey",()=>{if(e.output)return e.output.slice(1,-1)}),uy.prop(i,"signature",()=>{if(e.input)return r()[0]}),uy.prop(i,"input",()=>{if(e.signature)return fy.compile([e.signature])}),uy.prop(i,"witness",()=>{if(i.input)return[]}),t.validate){if(e.output){if(e.output[e.output.length-1]!==mH.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!(0,Oa.isPoint)(i.pubkey))throw new TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(i.pubkey))throw new TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(i.input))throw new TypeError("Signature mismatch");if(e.input){if(r().length!==1)throw new TypeError("Input is invalid");if(!fy.isCanonicalScriptSignature(i.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(i,e)}mA.p2pk=Wge});var vH=W(co=>{"use strict";l();d();Object.defineProperty(co,"__esModule",{value:!0});co.output=co.exists=co.hash=co.bytes=co.bool=co.number=void 0;function gA(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}co.number=gA;function bH(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}co.bool=bH;function fP(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}co.bytes=fP;function xH(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");gA(e.outputLen),gA(e.blockLen)}co.hash=xH;function wH(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}co.exists=wH;function SH(e,t){fP(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}co.output=SH;var zge={number:gA,bool:bH,bytes:fP,hash:xH,exists:wH,output:SH};co.default=zge});var AH=W(bA=>{"use strict";l();d();Object.defineProperty(bA,"__esModule",{value:!0});bA.crypto=void 0;bA.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0}});var Zb=W(Bt=>{"use strict";l();d();Object.defineProperty(Bt,"__esModule",{value:!0});Bt.randomBytes=Bt.wrapConstructorWithOpts=Bt.wrapConstructor=Bt.checkOpts=Bt.Hash=Bt.concatBytes=Bt.toBytes=Bt.utf8ToBytes=Bt.asyncLoop=Bt.nextTick=Bt.hexToBytes=Bt.bytesToHex=Bt.isLE=Bt.rotr=Bt.createView=Bt.u32=Bt.u8=void 0;var xA=AH(),Gge=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);Bt.u8=Gge;var $ge=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));Bt.u32=$ge;var Yge=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);Bt.createView=Yge;var Zge=(e,t)=>e<<32-t|e>>>t;Bt.rotr=Zge;Bt.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Bt.isLE)throw new Error("Non little-endian hardware is not supported");var Jge=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Xge(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=Jge[e[r]];return t}Bt.bytesToHex=Xge;function Qge(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}Bt.hexToBytes=Qge;var ebe=async()=>{};Bt.nextTick=ebe;async function tbe(e,t,r){let n=Date.now();for(let i=0;i<e;i++){r(i);let o=Date.now()-n;o>=0&&o<t||(await(0,Bt.nextTick)(),n+=o)}}Bt.asyncLoop=tbe;function EH(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}Bt.utf8ToBytes=EH;function dP(e){if(typeof e=="string"&&(e=EH(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}Bt.toBytes=dP;function rbe(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}Bt.concatBytes=rbe;var lP=class{clone(){return this._cloneInto()}};Bt.Hash=lP;var nbe=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function ibe(e,t){if(t!==void 0&&(typeof t!="object"||!nbe(t)))throw new TypeError("Options should be object or undefined");return Object.assign(e,t)}Bt.checkOpts=ibe;function obe(e){let t=n=>e().update(dP(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}Bt.wrapConstructor=obe;function sbe(e){let t=(n,i)=>e(i).update(dP(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}Bt.wrapConstructorWithOpts=sbe;function abe(e=32){if(xA.crypto.web)return xA.crypto.web.getRandomValues(new Uint8Array(e));if(xA.crypto.node)return new Uint8Array(xA.crypto.node.randomBytes(e).buffer);throw new Error("The environment doesn't have randomBytes function")}Bt.randomBytes=abe});var SA=W(wA=>{"use strict";l();d();Object.defineProperty(wA,"__esModule",{value:!0});wA.SHA2=void 0;var hP=vH(),Jb=Zb();function cbe(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var pP=class extends Jb.Hash{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,Jb.createView)(this.buffer)}update(t){hP.default.exists(this);let{view:r,buffer:n,blockLen:i}=this;t=(0,Jb.toBytes)(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=(0,Jb.createView)(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){hP.default.exists(this),hP.default.output(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let f=s;f<i;f++)r[f]=0;cbe(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=(0,Jb.createView)(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,h[f],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};wA.SHA2=pP});var PH=W(ly=>{"use strict";l();d();Object.defineProperty(ly,"__esModule",{value:!0});ly.ripemd160=ly.RIPEMD160=void 0;var ube=SA(),fbe=Zb(),lbe=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),kH=Uint8Array.from({length:16},(e,t)=>t),dbe=kH.map(e=>(9*e+5)%16),yP=[kH],mP=[dbe];for(let e=0;e<4;e++)for(let t of[yP,mP])t.push(t[e].map(r=>lbe[r]));var TH=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),hbe=yP.map((e,t)=>e.map(r=>TH[t][r])),pbe=mP.map((e,t)=>e.map(r=>TH[t][r])),ybe=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),mbe=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),vA=(e,t)=>e<<t|e>>>32-t;function IH(e,t,r,n){return e===0?t^r^n:e===1?t&r|~t&n:e===2?(t|~r)^n:e===3?t&n|r&~n:t^(r|~n)}var AA=new Uint32Array(16),EA=class extends ube.SHA2{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:t,h1:r,h2:n,h3:i,h4:o}=this;return[t,r,n,i,o]}set(t,r,n,i,o){this.h0=t|0,this.h1=r|0,this.h2=n|0,this.h3=i|0,this.h4=o|0}process(t,r){for(let b=0;b<16;b++,r+=4)AA[b]=t.getUint32(r,!0);let n=this.h0|0,i=n,o=this.h1|0,s=o,a=this.h2|0,c=a,u=this.h3|0,h=u,f=this.h4|0,m=f;for(let b=0;b<5;b++){let w=4-b,S=ybe[b],P=mbe[b],N=yP[b],O=mP[b],C=hbe[b],L=pbe[b];for(let V=0;V<16;V++){let j=vA(n+IH(b,o,a,u)+AA[N[V]]+S,C[V])+f|0;n=f,f=u,u=vA(a,10)|0,a=o,o=j}for(let V=0;V<16;V++){let j=vA(i+IH(w,s,c,h)+AA[O[V]]+P,L[V])+m|0;i=m,m=h,h=vA(c,10)|0,c=s,s=j}}this.set(this.h1+a+h|0,this.h2+u+m|0,this.h3+f+i|0,this.h4+n+s|0,this.h0+o+c|0)}roundClean(){AA.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};ly.RIPEMD160=EA;ly.ripemd160=(0,fbe.wrapConstructor)(()=>new EA)});var BH=W(IA=>{"use strict";l();d();Object.defineProperty(IA,"__esModule",{value:!0});IA.sha1=void 0;var gbe=SA(),bbe=Zb(),gP=(e,t)=>e<<t|e>>>32-t>>>0,xbe=(e,t,r)=>e&t^~e&r,wbe=(e,t,r)=>e&t^e&r^t&r,Xb=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]),Cl=new Uint32Array(80),bP=class extends gbe.SHA2{constructor(){super(64,20,8,!1),this.A=Xb[0]|0,this.B=Xb[1]|0,this.C=Xb[2]|0,this.D=Xb[3]|0,this.E=Xb[4]|0}get(){let{A:t,B:r,C:n,D:i,E:o}=this;return[t,r,n,i,o]}set(t,r,n,i,o){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0}process(t,r){for(let c=0;c<16;c++,r+=4)Cl[c]=t.getUint32(r,!1);for(let c=16;c<80;c++)Cl[c]=gP(Cl[c-3]^Cl[c-8]^Cl[c-14]^Cl[c-16],1);let{A:n,B:i,C:o,D:s,E:a}=this;for(let c=0;c<80;c++){let u,h;c<20?(u=xbe(i,o,s),h=1518500249):c<40?(u=i^o^s,h=1859775393):c<60?(u=wbe(i,o,s),h=2400959708):(u=i^o^s,h=3395469782);let f=gP(n,5)+u+a+h+Cl[c]|0;a=s,s=o,o=gP(i,30),i=n,n=f}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,this.set(n,i,o,s,a)}roundClean(){Cl.fill(0)}destroy(){this.set(0,0,0,0,0),this.buffer.fill(0)}};IA.sha1=(0,bbe.wrapConstructor)(()=>new bP)});var _H=W(dy=>{"use strict";l();d();Object.defineProperty(dy,"__esModule",{value:!0});dy.sha224=dy.sha256=void 0;var Sbe=SA(),Ls=Zb(),vbe=(e,t,r)=>e&t^~e&r,Abe=(e,t,r)=>e&t^e&r^t&r,Ebe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Nl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ml=new Uint32Array(64),kA=class extends Sbe.SHA2{constructor(){super(64,32,8,!1),this.A=Nl[0]|0,this.B=Nl[1]|0,this.C=Nl[2]|0,this.D=Nl[3]|0,this.E=Nl[4]|0,this.F=Nl[5]|0,this.G=Nl[6]|0,this.H=Nl[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let f=0;f<16;f++,r+=4)Ml[f]=t.getUint32(r,!1);for(let f=16;f<64;f++){let m=Ml[f-15],b=Ml[f-2],w=(0,Ls.rotr)(m,7)^(0,Ls.rotr)(m,18)^m>>>3,S=(0,Ls.rotr)(b,17)^(0,Ls.rotr)(b,19)^b>>>10;Ml[f]=S+Ml[f-7]+w+Ml[f-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:h}=this;for(let f=0;f<64;f++){let m=(0,Ls.rotr)(a,6)^(0,Ls.rotr)(a,11)^(0,Ls.rotr)(a,25),b=h+m+vbe(a,c,u)+Ebe[f]+Ml[f]|0,S=((0,Ls.rotr)(n,2)^(0,Ls.rotr)(n,13)^(0,Ls.rotr)(n,22))+Abe(n,i,o)|0;h=u,u=c,c=a,a=s+b|0,s=o,o=i,i=n,n=b+S|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,o,s,a,c,u,h)}roundClean(){Ml.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},xP=class extends kA{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};dy.sha256=(0,Ls.wrapConstructor)(()=>new kA);dy.sha224=(0,Ls.wrapConstructor)(()=>new xP)});var _c=W(Un=>{"use strict";l();d();Object.defineProperty(Un,"__esModule",{value:!0});Un.taggedHash=Un.TAGGED_HASH_PREFIXES=Un.TAGS=Un.hash256=Un.hash160=Un.sha256=Un.sha1=Un.ripemd160=void 0;var{Buffer:uo}=Bn(),CH=PH(),Ibe=BH(),TA=_H();function kbe(e){return uo.from((0,CH.ripemd160)(Uint8Array.from(e)))}Un.ripemd160=kbe;function Tbe(e){return uo.from((0,Ibe.sha1)(Uint8Array.from(e)))}Un.sha1=Tbe;function NH(e){return uo.from((0,TA.sha256)(Uint8Array.from(e)))}Un.sha256=NH;function Pbe(e){return uo.from((0,CH.ripemd160)((0,TA.sha256)(Uint8Array.from(e))))}Un.hash160=Pbe;function Bbe(e){return uo.from((0,TA.sha256)((0,TA.sha256)(Uint8Array.from(e))))}Un.hash256=Bbe;Un.TAGS=["BIP0340/challenge","BIP0340/aux","BIP0340/nonce","TapLeaf","TapBranch","TapSighash","TapTweak","KeyAgg list","KeyAgg coefficient"];Un.TAGGED_HASH_PREFIXES={"BIP0340/challenge":uo.from([123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124,123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124]),"BIP0340/aux":uo.from([241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144,241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144]),"BIP0340/nonce":uo.from([7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47,7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47]),TapLeaf:uo.from([174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238,174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238]),TapBranch:uo.from([25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21,25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21]),TapSighash:uo.from([244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49,244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49]),TapTweak:uo.from([232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233,232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233]),"KeyAgg list":uo.from([72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240,72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240]),"KeyAgg coefficient":uo.from([191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129,191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129])};function _be(e,t){return NH(uo.concat([Un.TAGGED_HASH_PREFIXES[e],t]))}Un.taggedHash=_be});var DH=W(PA=>{"use strict";l();d();Object.defineProperty(PA,"__esModule",{value:!0});PA.p2pkh=void 0;var wP=_c(),Cbe=Rs(),hy=ao(),fo=xi(),ju=Hu(),MH=Qp(),Dl=hy.OPS;function Nbe(e,t){if(!e.address&&!e.hash&&!e.output&&!e.pubkey&&!e.input)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,fo.typeforce)({network:fo.typeforce.maybe(fo.typeforce.Object),address:fo.typeforce.maybe(fo.typeforce.String),hash:fo.typeforce.maybe(fo.typeforce.BufferN(20)),output:fo.typeforce.maybe(fo.typeforce.BufferN(25)),pubkey:fo.typeforce.maybe(fo.isPoint),signature:fo.typeforce.maybe(hy.isCanonicalScriptSignature),input:fo.typeforce.maybe(fo.typeforce.Buffer)},e);let r=ju.value(()=>{let s=Buffer.from(MH.decode(e.address)),a=s.readUInt8(0),c=s.slice(1);return{version:a,hash:c}}),n=ju.value(()=>hy.decompile(e.input)),i=e.network||Cbe.bitcoin,o={name:"p2pkh",network:i};if(ju.prop(o,"address",()=>{if(!o.hash)return;let s=Buffer.allocUnsafe(21);return s.writeUInt8(i.pubKeyHash,0),o.hash.copy(s,1),MH.encode(s)}),ju.prop(o,"hash",()=>{if(e.output)return e.output.slice(3,23);if(e.address)return r().hash;if(e.pubkey||o.pubkey)return wP.hash160(e.pubkey||o.pubkey)}),ju.prop(o,"output",()=>{if(o.hash)return hy.compile([Dl.OP_DUP,Dl.OP_HASH160,o.hash,Dl.OP_EQUALVERIFY,Dl.OP_CHECKSIG])}),ju.prop(o,"pubkey",()=>{if(e.input)return n()[1]}),ju.prop(o,"signature",()=>{if(e.input)return n()[0]}),ju.prop(o,"input",()=>{if(e.pubkey&&e.signature)return hy.compile([e.signature,e.pubkey])}),ju.prop(o,"witness",()=>{if(o.input)return[]}),t.validate){let s=Buffer.from([]);if(e.address){if(r().version!==i.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(r().hash.length!==20)throw new TypeError("Invalid address");s=r().hash}if(e.hash){if(s.length>0&&!s.equals(e.hash))throw new TypeError("Hash mismatch");s=e.hash}if(e.output){if(e.output.length!==25||e.output[0]!==Dl.OP_DUP||e.output[1]!==Dl.OP_HASH160||e.output[2]!==20||e.output[23]!==Dl.OP_EQUALVERIFY||e.output[24]!==Dl.OP_CHECKSIG)throw new TypeError("Output is invalid");let a=e.output.slice(3,23);if(s.length>0&&!s.equals(a))throw new TypeError("Hash mismatch");s=a}if(e.pubkey){let a=wP.hash160(e.pubkey);if(s.length>0&&!s.equals(a))throw new TypeError("Hash mismatch");s=a}if(e.input){let a=n();if(a.length!==2)throw new TypeError("Input is invalid");if(!hy.isCanonicalScriptSignature(a[0]))throw new TypeError("Input has invalid signature");if(!(0,fo.isPoint)(a[1]))throw new TypeError("Input has invalid pubkey");if(e.signature&&!e.signature.equals(a[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(a[1]))throw new TypeError("Pubkey mismatch");let c=wP.hash160(a[1]);if(s.length>0&&!s.equals(c))throw new TypeError("Hash mismatch")}}return Object.assign(o,e)}PA.p2pkh=Nbe});var RH=W(BA=>{"use strict";l();d();Object.defineProperty(BA,"__esModule",{value:!0});BA.p2sh=void 0;var OH=_c(),Mbe=Rs(),Nc=ao(),Wr=xi(),Cc=Hu(),UH=Qp(),Qb=Nc.OPS;function Dbe(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}function Obe(e,t){if(!e.address&&!e.hash&&!e.output&&!e.redeem&&!e.input)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,Wr.typeforce)({network:Wr.typeforce.maybe(Wr.typeforce.Object),address:Wr.typeforce.maybe(Wr.typeforce.String),hash:Wr.typeforce.maybe(Wr.typeforce.BufferN(20)),output:Wr.typeforce.maybe(Wr.typeforce.BufferN(23)),redeem:Wr.typeforce.maybe({network:Wr.typeforce.maybe(Wr.typeforce.Object),output:Wr.typeforce.maybe(Wr.typeforce.Buffer),input:Wr.typeforce.maybe(Wr.typeforce.Buffer),witness:Wr.typeforce.maybe(Wr.typeforce.arrayOf(Wr.typeforce.Buffer))}),input:Wr.typeforce.maybe(Wr.typeforce.Buffer),witness:Wr.typeforce.maybe(Wr.typeforce.arrayOf(Wr.typeforce.Buffer))},e);let r=e.network;r||(r=e.redeem&&e.redeem.network||Mbe.bitcoin);let n={network:r},i=Cc.value(()=>{let a=Buffer.from(UH.decode(e.address)),c=a.readUInt8(0),u=a.slice(1);return{version:c,hash:u}}),o=Cc.value(()=>Nc.decompile(e.input)),s=Cc.value(()=>{let a=o(),c=a[a.length-1];return{network:r,output:c===Qb.OP_FALSE?Buffer.from([]):c,input:Nc.compile(a.slice(0,-1)),witness:e.witness||[]}});if(Cc.prop(n,"address",()=>{if(!n.hash)return;let a=Buffer.allocUnsafe(21);return a.writeUInt8(n.network.scriptHash,0),n.hash.copy(a,1),UH.encode(a)}),Cc.prop(n,"hash",()=>{if(e.output)return e.output.slice(2,22);if(e.address)return i().hash;if(n.redeem&&n.redeem.output)return OH.hash160(n.redeem.output)}),Cc.prop(n,"output",()=>{if(n.hash)return Nc.compile([Qb.OP_HASH160,n.hash,Qb.OP_EQUAL])}),Cc.prop(n,"redeem",()=>{if(e.input)return s()}),Cc.prop(n,"input",()=>{if(!(!e.redeem||!e.redeem.input||!e.redeem.output))return Nc.compile([].concat(Nc.decompile(e.redeem.input),e.redeem.output))}),Cc.prop(n,"witness",()=>{if(n.redeem&&n.redeem.witness)return n.redeem.witness;if(n.input)return[]}),Cc.prop(n,"name",()=>{let a=["p2sh"];return n.redeem!==void 0&&n.redeem.name!==void 0&&a.push(n.redeem.name),a.join("-")}),t.validate){let a=Buffer.from([]);if(e.address){if(i().version!==r.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(i().hash.length!==20)throw new TypeError("Invalid address");a=i().hash}if(e.hash){if(a.length>0&&!a.equals(e.hash))throw new TypeError("Hash mismatch");a=e.hash}if(e.output){if(e.output.length!==23||e.output[0]!==Qb.OP_HASH160||e.output[1]!==20||e.output[22]!==Qb.OP_EQUAL)throw new TypeError("Output is invalid");let u=e.output.slice(2,22);if(a.length>0&&!a.equals(u))throw new TypeError("Hash mismatch");a=u}let c=u=>{if(u.output){let h=Nc.decompile(u.output);if(!h||h.length<1)throw new TypeError("Redeem.output too short");if(u.output.byteLength>520)throw new TypeError("Redeem.output unspendable if larger than 520 bytes");if(Nc.countNonPushOnlyOPs(h)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");let f=OH.hash160(u.output);if(a.length>0&&!a.equals(f))throw new TypeError("Hash mismatch");a=f}if(u.input){let h=u.input.length>0,f=u.witness&&u.witness.length>0;if(!h&&!f)throw new TypeError("Empty input");if(h&&f)throw new TypeError("Input and witness provided");if(h){let m=Nc.decompile(u.input);if(!Nc.isPushOnly(m))throw new TypeError("Non push-only scriptSig")}}};if(e.input){let u=o();if(!u||u.length<1)throw new TypeError("Input too short");if(!Buffer.isBuffer(s().output))throw new TypeError("Input is invalid");c(s())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==r)throw new TypeError("Network mismatch");if(e.input){let u=s();if(e.redeem.output&&!e.redeem.output.equals(u.output))throw new TypeError("Redeem.output mismatch");if(e.redeem.input&&!e.redeem.input.equals(u.input))throw new TypeError("Redeem.input mismatch")}c(e.redeem)}if(e.witness&&e.redeem&&e.redeem.witness&&!Dbe(e.redeem.witness,e.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(n,e)}BA.p2sh=Obe});var VH=W(NA=>{"use strict";l();d();Object.defineProperty(NA,"__esModule",{value:!0});NA.p2wpkh=void 0;var{Buffer:vP}=Bn(),SP=_c(),Ube=Rs(),CA=ao(),Rn=xi(),Ol=Hu(),_A=hh(),LH=CA.OPS,Rbe=vP.alloc(0);function Lbe(e,t){if(!e.address&&!e.hash&&!e.output&&!e.pubkey&&!e.witness)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,Rn.typeforce)({address:Rn.typeforce.maybe(Rn.typeforce.String),hash:Rn.typeforce.maybe(Rn.typeforce.BufferN(20)),input:Rn.typeforce.maybe(Rn.typeforce.BufferN(0)),network:Rn.typeforce.maybe(Rn.typeforce.Object),output:Rn.typeforce.maybe(Rn.typeforce.BufferN(22)),pubkey:Rn.typeforce.maybe(Rn.isPoint),signature:Rn.typeforce.maybe(CA.isCanonicalScriptSignature),witness:Rn.typeforce.maybe(Rn.typeforce.arrayOf(Rn.typeforce.Buffer))},e);let r=Ol.value(()=>{let o=_A.bech32.decode(e.address),s=o.words.shift(),a=_A.bech32.fromWords(o.words);return{version:s,prefix:o.prefix,data:vP.from(a)}}),n=e.network||Ube.bitcoin,i={name:"p2wpkh",network:n};if(Ol.prop(i,"address",()=>{if(!i.hash)return;let o=_A.bech32.toWords(i.hash);return o.unshift(0),_A.bech32.encode(n.bech32,o)}),Ol.prop(i,"hash",()=>{if(e.output)return e.output.slice(2,22);if(e.address)return r().data;if(e.pubkey||i.pubkey)return SP.hash160(e.pubkey||i.pubkey)}),Ol.prop(i,"output",()=>{if(i.hash)return CA.compile([LH.OP_0,i.hash])}),Ol.prop(i,"pubkey",()=>{if(e.pubkey)return e.pubkey;if(e.witness)return e.witness[1]}),Ol.prop(i,"signature",()=>{if(e.witness)return e.witness[0]}),Ol.prop(i,"input",()=>{if(i.witness)return Rbe}),Ol.prop(i,"witness",()=>{if(e.pubkey&&e.signature)return[e.signature,e.pubkey]}),t.validate){let o=vP.from([]);if(e.address){if(n&&n.bech32!==r().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(r().version!==0)throw new TypeError("Invalid address version");if(r().data.length!==20)throw new TypeError("Invalid address data");o=r().data}if(e.hash){if(o.length>0&&!o.equals(e.hash))throw new TypeError("Hash mismatch");o=e.hash}if(e.output){if(e.output.length!==22||e.output[0]!==LH.OP_0||e.output[1]!==20)throw new TypeError("Output is invalid");if(o.length>0&&!o.equals(e.output.slice(2)))throw new TypeError("Hash mismatch");o=e.output.slice(2)}if(e.pubkey){let s=SP.hash160(e.pubkey);if(o.length>0&&!o.equals(s))throw new TypeError("Hash mismatch");if(o=s,!(0,Rn.isPoint)(e.pubkey)||e.pubkey.length!==33)throw new TypeError("Invalid pubkey for p2wpkh")}if(e.witness){if(e.witness.length!==2)throw new TypeError("Witness is invalid");if(!CA.isCanonicalScriptSignature(e.witness[0]))throw new TypeError("Witness has invalid signature");if(!(0,Rn.isPoint)(e.witness[1])||e.witness[1].length!==33)throw new TypeError("Witness has invalid pubkey");if(e.signature&&!e.signature.equals(e.witness[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(e.witness[1]))throw new TypeError("Pubkey mismatch");let s=SP.hash160(e.witness[1]);if(o.length>0&&!o.equals(s))throw new TypeError("Hash mismatch")}}return Object.assign(i,e)}NA.p2wpkh=Lbe});var HH=W(UA=>{"use strict";l();d();Object.defineProperty(UA,"__esModule",{value:!0});UA.p2wsh=void 0;var{Buffer:OA}=Bn(),KH=_c(),Vbe=Rs(),zu=ao(),Or=xi(),Wu=Hu(),MA=hh(),FH=zu.OPS,AP=OA.alloc(0);function Kbe(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}function DA(e){return!!(OA.isBuffer(e)&&e.length===65&&e[0]===4&&(0,Or.isPoint)(e))}function Fbe(e,t){if(!e.address&&!e.hash&&!e.output&&!e.redeem&&!e.witness)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,Or.typeforce)({network:Or.typeforce.maybe(Or.typeforce.Object),address:Or.typeforce.maybe(Or.typeforce.String),hash:Or.typeforce.maybe(Or.typeforce.BufferN(32)),output:Or.typeforce.maybe(Or.typeforce.BufferN(34)),redeem:Or.typeforce.maybe({input:Or.typeforce.maybe(Or.typeforce.Buffer),network:Or.typeforce.maybe(Or.typeforce.Object),output:Or.typeforce.maybe(Or.typeforce.Buffer),witness:Or.typeforce.maybe(Or.typeforce.arrayOf(Or.typeforce.Buffer))}),input:Or.typeforce.maybe(Or.typeforce.BufferN(0)),witness:Or.typeforce.maybe(Or.typeforce.arrayOf(Or.typeforce.Buffer))},e);let r=Wu.value(()=>{let s=MA.bech32.decode(e.address),a=s.words.shift(),c=MA.bech32.fromWords(s.words);return{version:a,prefix:s.prefix,data:OA.from(c)}}),n=Wu.value(()=>zu.decompile(e.redeem.input)),i=e.network;i||(i=e.redeem&&e.redeem.network||Vbe.bitcoin);let o={network:i};if(Wu.prop(o,"address",()=>{if(!o.hash)return;let s=MA.bech32.toWords(o.hash);return s.unshift(0),MA.bech32.encode(i.bech32,s)}),Wu.prop(o,"hash",()=>{if(e.output)return e.output.slice(2);if(e.address)return r().data;if(o.redeem&&o.redeem.output)return KH.sha256(o.redeem.output)}),Wu.prop(o,"output",()=>{if(o.hash)return zu.compile([FH.OP_0,o.hash])}),Wu.prop(o,"redeem",()=>{if(e.witness)return{output:e.witness[e.witness.length-1],input:AP,witness:e.witness.slice(0,-1)}}),Wu.prop(o,"input",()=>{if(o.witness)return AP}),Wu.prop(o,"witness",()=>{if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){let s=zu.toStack(n());return o.redeem=Object.assign({witness:s},e.redeem),o.redeem.input=AP,[].concat(s,e.redeem.output)}if(e.redeem&&e.redeem.output&&e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)}),Wu.prop(o,"name",()=>{let s=["p2wsh"];return o.redeem!==void 0&&o.redeem.name!==void 0&&s.push(o.redeem.name),s.join("-")}),t.validate){let s=OA.from([]);if(e.address){if(r().prefix!==i.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(r().version!==0)throw new TypeError("Invalid address version");if(r().data.length!==32)throw new TypeError("Invalid address data");s=r().data}if(e.hash){if(s.length>0&&!s.equals(e.hash))throw new TypeError("Hash mismatch");s=e.hash}if(e.output){if(e.output.length!==34||e.output[0]!==FH.OP_0||e.output[1]!==32)throw new TypeError("Output is invalid");let a=e.output.slice(2);if(s.length>0&&!s.equals(a))throw new TypeError("Hash mismatch");s=a}if(e.redeem){if(e.redeem.network&&e.redeem.network!==i)throw new TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(e.redeem.output){let a=zu.decompile(e.redeem.output);if(!a||a.length<1)throw new TypeError("Redeem.output is invalid");if(e.redeem.output.byteLength>3600)throw new TypeError("Redeem.output unspendable if larger than 3600 bytes");if(zu.countNonPushOnlyOPs(a)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");let c=KH.sha256(e.redeem.output);if(s.length>0&&!s.equals(c))throw new TypeError("Hash mismatch");s=c}if(e.redeem.input&&!zu.isPushOnly(n()))throw new TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&!Kbe(e.witness,e.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(e.redeem.input&&n().some(DA)||e.redeem.output&&(zu.decompile(e.redeem.output)||[]).some(DA))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(e.witness&&e.witness.length>0){let a=e.witness[e.witness.length-1];if(e.redeem&&e.redeem.output&&!e.redeem.output.equals(a))throw new TypeError("Witness and redeem.output mismatch");if(e.witness.some(DA)||(zu.decompile(a)||[]).some(DA))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(o,e)}UA.p2wsh=Fbe});var RA=W(py=>{"use strict";l();d();Object.defineProperty(py,"__esModule",{value:!0});py.getEccLib=py.initEccLib=void 0;var ex={};function Hbe(e){e?e!==ex.eccLib&&(jbe(e),ex.eccLib=e):ex.eccLib=e}py.initEccLib=Hbe;function qbe(){if(!ex.eccLib)throw new Error("No ECC Library provided. You must call initEccLib() with a valid TinySecp256k1Interface instance");return ex.eccLib}py.getEccLib=qbe;var Gu=e=>Buffer.from(e,"hex");function jbe(e){Vs(typeof e.isXOnlyPoint=="function"),Vs(e.isXOnlyPoint(Gu("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),Vs(e.isXOnlyPoint(Gu("fffffffffffffffffffffffffffffffffffffffffffffffffffffffeeffffc2e"))),Vs(e.isXOnlyPoint(Gu("f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9"))),Vs(e.isXOnlyPoint(Gu("0000000000000000000000000000000000000000000000000000000000000001"))),Vs(!e.isXOnlyPoint(Gu("0000000000000000000000000000000000000000000000000000000000000000"))),Vs(!e.isXOnlyPoint(Gu("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"))),Vs(typeof e.xOnlyPointAddTweak=="function"),Wbe.forEach(t=>{let r=e.xOnlyPointAddTweak(Gu(t.pubkey),Gu(t.tweak));t.result===null?Vs(r===null):(Vs(r!==null),Vs(r.parity===t.parity),Vs(Buffer.from(r.xOnlyPubkey).equals(Gu(t.result))))})}function Vs(e){if(!e)throw new Error("ecc library invalid")}var Wbe=[{pubkey:"79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",tweak:"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140",parity:-1,result:null},{pubkey:"1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b",tweak:"a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac",parity:1,result:"e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"},{pubkey:"2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991",tweak:"823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47",parity:0,result:"9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"}]});var kP=W((lXe,jH)=>{"use strict";l();d();var EP=oM().Buffer,zbe=9007199254740991;function IP(e){if(e<0||e>zbe||e%1!==0)throw new RangeError("value out of range")}function tx(e,t,r){if(IP(e),t||(t=EP.allocUnsafe(qH(e))),!EP.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");return r||(r=0),e<253?(t.writeUInt8(e,r),tx.bytes=1):e<=65535?(t.writeUInt8(253,r),t.writeUInt16LE(e,r+1),tx.bytes=3):e<=4294967295?(t.writeUInt8(254,r),t.writeUInt32LE(e,r+1),tx.bytes=5):(t.writeUInt8(255,r),t.writeUInt32LE(e>>>0,r+1),t.writeUInt32LE(e/4294967296|0,r+5),tx.bytes=9),t}function rx(e,t){if(!EP.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");t||(t=0);var r=e.readUInt8(t);if(r<253)return rx.bytes=1,r;if(r===253)return rx.bytes=3,e.readUInt16LE(t+1);if(r===254)return rx.bytes=5,e.readUInt32LE(t+1);rx.bytes=9;var n=e.readUInt32LE(t+1),i=e.readUInt32LE(t+5),o=i*4294967296+n;return IP(o),o}function qH(e){return IP(e),e<253?1:e<=65535?3:e<=4294967295?5:9}jH.exports={encode:tx,decode:rx,encodingLength:qH}});var ix=W(qi=>{"use strict";l();d();Object.defineProperty(qi,"__esModule",{value:!0});qi.BufferReader=qi.BufferWriter=qi.cloneBuffer=qi.reverseBuffer=qi.writeUInt64LE=qi.readUInt64LE=qi.varuint=void 0;var wh=xi(),{typeforce:WH}=wh,nx=kP();qi.varuint=nx;function zH(e,t){if(typeof e!="number")throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function GH(e,t){let r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return n*=4294967296,zH(n+r,9007199254740991),n+r}qi.readUInt64LE=GH;function $H(e,t,r){return zH(t,9007199254740991),e.writeInt32LE(t&-1,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}qi.writeUInt64LE=$H;function Gbe(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e}qi.reverseBuffer=Gbe;function $be(e){let t=Buffer.allocUnsafe(e.length);return e.copy(t),t}qi.cloneBuffer=$be;var TP=class e{static withCapacity(t){return new e(Buffer.alloc(t))}constructor(t,r=0){this.buffer=t,this.offset=r,WH(wh.tuple(wh.Buffer,wh.UInt32),[t,r])}writeUInt8(t){this.offset=this.buffer.writeUInt8(t,this.offset)}writeInt32(t){this.offset=this.buffer.writeInt32LE(t,this.offset)}writeUInt32(t){this.offset=this.buffer.writeUInt32LE(t,this.offset)}writeUInt64(t){this.offset=$H(this.buffer,t,this.offset)}writeVarInt(t){nx.encode(t,this.buffer,this.offset),this.offset+=nx.encode.bytes}writeSlice(t){if(this.buffer.length<this.offset+t.length)throw new Error("Cannot write slice out of bounds");this.offset+=t.copy(this.buffer,this.offset)}writeVarSlice(t){this.writeVarInt(t.length),this.writeSlice(t)}writeVector(t){this.writeVarInt(t.length),t.forEach(r=>this.writeVarSlice(r))}end(){if(this.buffer.length===this.offset)return this.buffer;throw new Error(`buffer size ${this.buffer.length}, offset ${this.offset}`)}};qi.BufferWriter=TP;var PP=class{constructor(t,r=0){this.buffer=t,this.offset=r,WH(wh.tuple(wh.Buffer,wh.UInt32),[t,r])}readUInt8(){let t=this.buffer.readUInt8(this.offset);return this.offset++,t}readInt32(){let t=this.buffer.readInt32LE(this.offset);return this.offset+=4,t}readUInt32(){let t=this.buffer.readUInt32LE(this.offset);return this.offset+=4,t}readUInt64(){let t=GH(this.buffer,this.offset);return this.offset+=8,t}readVarInt(){let t=nx.decode(this.buffer,this.offset);return this.offset+=nx.decode.bytes,t}readSlice(t){if(this.buffer.length<this.offset+t)throw new Error("Cannot read slice out of bounds");let r=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,r}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){let t=this.readVarInt(),r=[];for(let n=0;n<t;n++)r.push(this.readVarSlice());return r}};qi.BufferReader=PP});var LA=W(Ln=>{"use strict";l();d();Object.defineProperty(Ln,"__esModule",{value:!0});Ln.tweakKey=Ln.tapTweakHash=Ln.tapleafHash=Ln.findScriptPath=Ln.toHashTree=Ln.rootHashFromPath=Ln.MAX_TAPTREE_DEPTH=Ln.LEAF_VERSION_TAPSCRIPT=void 0;var Ul=Bn(),Ybe=RA(),NP=_c(),YH=ix(),Zbe=xi();Ln.LEAF_VERSION_TAPSCRIPT=192;Ln.MAX_TAPTREE_DEPTH=128;var Jbe=e=>"left"in e&&"right"in e;function Xbe(e,t){if(e.length<33)throw new TypeError(`The control-block length is too small. Got ${e.length}, expected min 33.`);let r=(e.length-33)/32,n=t;for(let i=0;i<r;i++){let o=e.slice(33+32*i,65+32*i);n.compare(o)<0?n=CP(n,o):n=CP(o,n)}return n}Ln.rootHashFromPath=Xbe;function BP(e){if((0,Zbe.isTapleaf)(e))return{hash:ZH(e)};let t=[BP(e[0]),BP(e[1])];t.sort((i,o)=>i.hash.compare(o.hash));let[r,n]=t;return{hash:CP(r.hash,n.hash),left:r,right:n}}Ln.toHashTree=BP;function _P(e,t){if(Jbe(e)){let r=_P(e.left,t);if(r!==void 0)return[...r,e.right.hash];let n=_P(e.right,t);if(n!==void 0)return[...n,e.left.hash]}else if(e.hash.equals(t))return[]}Ln.findScriptPath=_P;function ZH(e){let t=e.version||Ln.LEAF_VERSION_TAPSCRIPT;return NP.taggedHash("TapLeaf",Ul.Buffer.concat([Ul.Buffer.from([t]),exe(e.output)]))}Ln.tapleafHash=ZH;function JH(e,t){return NP.taggedHash("TapTweak",Ul.Buffer.concat(t?[e,t]:[e]))}Ln.tapTweakHash=JH;function Qbe(e,t){if(!Ul.Buffer.isBuffer(e)||e.length!==32||t&&t.length!==32)return null;let r=JH(e,t),n=(0,Ybe.getEccLib)().xOnlyPointAddTweak(e,r);return!n||n.xOnlyPubkey===null?null:{parity:n.parity,x:Ul.Buffer.from(n.xOnlyPubkey)}}Ln.tweakKey=Qbe;function CP(e,t){return NP.taggedHash("TapBranch",Ul.Buffer.concat([e,t]))}function exe(e){let t=YH.varuint.encodingLength(e.length),r=Ul.Buffer.allocUnsafe(t);return YH.varuint.encode(e.length,r),Ul.Buffer.concat([r,e])}});var tq=W(FA=>{"use strict";l();d();Object.defineProperty(FA,"__esModule",{value:!0});FA.p2tr=void 0;var VA=Bn(),txe=Rs(),MP=ao(),Dt=xi(),XH=RA(),Co=LA(),Ks=Hu(),KA=hh(),QH=MP.OPS,eq=1,rxe=80;function nxe(e,t){if(!e.address&&!e.output&&!e.pubkey&&!e.internalPubkey&&!(e.witness&&e.witness.length>1))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,Dt.typeforce)({address:Dt.typeforce.maybe(Dt.typeforce.String),input:Dt.typeforce.maybe(Dt.typeforce.BufferN(0)),network:Dt.typeforce.maybe(Dt.typeforce.Object),output:Dt.typeforce.maybe(Dt.typeforce.BufferN(34)),internalPubkey:Dt.typeforce.maybe(Dt.typeforce.BufferN(32)),hash:Dt.typeforce.maybe(Dt.typeforce.BufferN(32)),pubkey:Dt.typeforce.maybe(Dt.typeforce.BufferN(32)),signature:Dt.typeforce.maybe(Dt.typeforce.anyOf(Dt.typeforce.BufferN(64),Dt.typeforce.BufferN(65))),witness:Dt.typeforce.maybe(Dt.typeforce.arrayOf(Dt.typeforce.Buffer)),scriptTree:Dt.typeforce.maybe(Dt.isTaptree),redeem:Dt.typeforce.maybe({output:Dt.typeforce.maybe(Dt.typeforce.Buffer),redeemVersion:Dt.typeforce.maybe(Dt.typeforce.Number),witness:Dt.typeforce.maybe(Dt.typeforce.arrayOf(Dt.typeforce.Buffer))}),redeemVersion:Dt.typeforce.maybe(Dt.typeforce.Number)},e);let r=Ks.value(()=>{let a=KA.bech32m.decode(e.address),c=a.words.shift(),u=KA.bech32m.fromWords(a.words);return{version:c,prefix:a.prefix,data:VA.Buffer.from(u)}}),n=Ks.value(()=>{if(!(!e.witness||!e.witness.length))return e.witness.length>=2&&e.witness[e.witness.length-1][0]===rxe?e.witness.slice(0,-1):e.witness.slice()}),i=Ks.value(()=>{if(e.scriptTree)return(0,Co.toHashTree)(e.scriptTree);if(e.hash)return{hash:e.hash}}),o=e.network||txe.bitcoin,s={name:"p2tr",network:o};if(Ks.prop(s,"address",()=>{if(!s.pubkey)return;let a=KA.bech32m.toWords(s.pubkey);return a.unshift(eq),KA.bech32m.encode(o.bech32,a)}),Ks.prop(s,"hash",()=>{let a=i();if(a)return a.hash;let c=n();if(c&&c.length>1){let u=c[c.length-1],h=u[0]&Dt.TAPLEAF_VERSION_MASK,f=c[c.length-2],m=(0,Co.tapleafHash)({output:f,version:h});return(0,Co.rootHashFromPath)(u,m)}return null}),Ks.prop(s,"output",()=>{if(s.pubkey)return MP.compile([QH.OP_1,s.pubkey])}),Ks.prop(s,"redeemVersion",()=>e.redeemVersion?e.redeemVersion:e.redeem&&e.redeem.redeemVersion!==void 0&&e.redeem.redeemVersion!==null?e.redeem.redeemVersion:Co.LEAF_VERSION_TAPSCRIPT),Ks.prop(s,"redeem",()=>{let a=n();if(!(!a||a.length<2))return{output:a[a.length-2],witness:a.slice(0,-2),redeemVersion:a[a.length-1][0]&Dt.TAPLEAF_VERSION_MASK}}),Ks.prop(s,"pubkey",()=>{if(e.pubkey)return e.pubkey;if(e.output)return e.output.slice(2);if(e.address)return r().data;if(s.internalPubkey){let a=(0,Co.tweakKey)(s.internalPubkey,s.hash);if(a)return a.x}}),Ks.prop(s,"internalPubkey",()=>{if(e.internalPubkey)return e.internalPubkey;let a=n();if(a&&a.length>1)return a[a.length-1].slice(1,33)}),Ks.prop(s,"signature",()=>{if(e.signature)return e.signature;let a=n();if(!(!a||a.length!==1))return a[0]}),Ks.prop(s,"witness",()=>{if(e.witness)return e.witness;let a=i();if(a&&e.redeem&&e.redeem.output&&e.internalPubkey){let c=(0,Co.tapleafHash)({output:e.redeem.output,version:s.redeemVersion}),u=(0,Co.findScriptPath)(a,c);if(!u)return;let h=(0,Co.tweakKey)(e.internalPubkey,a.hash);if(!h)return;let f=VA.Buffer.concat([VA.Buffer.from([s.redeemVersion|h.parity]),e.internalPubkey].concat(u));return[e.redeem.output,f]}if(e.signature)return[e.signature]}),t.validate){let a=VA.Buffer.from([]);if(e.address){if(o&&o.bech32!==r().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(r().version!==eq)throw new TypeError("Invalid address version");if(r().data.length!==32)throw new TypeError("Invalid address data");a=r().data}if(e.pubkey){if(a.length>0&&!a.equals(e.pubkey))throw new TypeError("Pubkey mismatch");a=e.pubkey}if(e.output){if(e.output.length!==34||e.output[0]!==QH.OP_1||e.output[1]!==32)throw new TypeError("Output is invalid");if(a.length>0&&!a.equals(e.output.slice(2)))throw new TypeError("Pubkey mismatch");a=e.output.slice(2)}if(e.internalPubkey){let h=(0,Co.tweakKey)(e.internalPubkey,s.hash);if(a.length>0&&!a.equals(h.x))throw new TypeError("Pubkey mismatch");a=h.x}if(a&&a.length&&!(0,XH.getEccLib)().isXOnlyPoint(a))throw new TypeError("Invalid pubkey for p2tr");let c=i();if(e.hash&&c&&!e.hash.equals(c.hash))throw new TypeError("Hash mismatch");if(e.redeem&&e.redeem.output&&c){let h=(0,Co.tapleafHash)({output:e.redeem.output,version:s.redeemVersion});if(!(0,Co.findScriptPath)(c,h))throw new TypeError("Redeem script not in tree")}let u=n();if(e.redeem&&s.redeem){if(e.redeem.redeemVersion&&e.redeem.redeemVersion!==s.redeem.redeemVersion)throw new TypeError("Redeem.redeemVersion and witness mismatch");if(e.redeem.output){if(MP.decompile(e.redeem.output).length===0)throw new TypeError("Redeem.output is invalid");if(s.redeem.output&&!e.redeem.output.equals(s.redeem.output))throw new TypeError("Redeem.output and witness mismatch")}if(e.redeem.witness&&s.redeem.witness&&!ixe(e.redeem.witness,s.redeem.witness))throw new TypeError("Redeem.witness and witness mismatch")}if(u&&u.length)if(u.length===1){if(e.signature&&!e.signature.equals(u[0]))throw new TypeError("Signature mismatch")}else{let h=u[u.length-1];if(h.length<33)throw new TypeError(`The control-block length is too small. Got ${h.length}, expected min 33.`);if((h.length-33)%32!==0)throw new TypeError(`The control-block length of ${h.length} is incorrect!`);let f=(h.length-33)/32;if(f>128)throw new TypeError(`The script path is too long. Got ${f}, expected max 128.`);let m=h.slice(1,33);if(e.internalPubkey&&!e.internalPubkey.equals(m))throw new TypeError("Internal pubkey mismatch");if(!(0,XH.getEccLib)().isXOnlyPoint(m))throw new TypeError("Invalid internalPubkey for p2tr witness");let b=h[0]&Dt.TAPLEAF_VERSION_MASK,w=u[u.length-2],S=(0,Co.tapleafHash)({output:w,version:b}),P=(0,Co.rootHashFromPath)(h,S),N=(0,Co.tweakKey)(m,P);if(!N)throw new TypeError("Invalid outputKey for p2tr witness");if(a.length&&!a.equals(N.x))throw new TypeError("Pubkey mismatch for p2tr witness");if(N.parity!==(h[0]&1))throw new Error("Incorrect parity")}}return Object.assign(s,e)}FA.p2tr=nxe;function ixe(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}});var yy=W(ni=>{"use strict";l();d();Object.defineProperty(ni,"__esModule",{value:!0});ni.p2tr=ni.p2wsh=ni.p2wpkh=ni.p2sh=ni.p2pkh=ni.p2pk=ni.p2ms=ni.embed=void 0;var oxe=hH();Object.defineProperty(ni,"embed",{enumerable:!0,get:function(){return oxe.p2data}});var sxe=yH();Object.defineProperty(ni,"p2ms",{enumerable:!0,get:function(){return sxe.p2ms}});var axe=gH();Object.defineProperty(ni,"p2pk",{enumerable:!0,get:function(){return axe.p2pk}});var cxe=DH();Object.defineProperty(ni,"p2pkh",{enumerable:!0,get:function(){return cxe.p2pkh}});var uxe=RH();Object.defineProperty(ni,"p2sh",{enumerable:!0,get:function(){return uxe.p2sh}});var fxe=VH();Object.defineProperty(ni,"p2wpkh",{enumerable:!0,get:function(){return fxe.p2wpkh}});var lxe=HH();Object.defineProperty(ni,"p2wsh",{enumerable:!0,get:function(){return lxe.p2wsh}});var dxe=tq();Object.defineProperty(ni,"p2tr",{enumerable:!0,get:function(){return dxe.p2tr}})});var DP=W(No=>{"use strict";l();d();Object.defineProperty(No,"__esModule",{value:!0});No.toOutputScript=No.fromOutputScript=No.toBech32=No.toBase58Check=No.fromBech32=No.fromBase58Check=void 0;var rq=Rs(),Mc=yy(),nq=ao(),HA=xi(),my=hh(),iq=Qp(),oq=40,sq=2,aq=16,cq=2,uq=80,fq="WARNING: Sending to a future segwit version address can lead to loss of funds. End users MUST be warned carefully in the GUI and asked if they wish to proceed with caution. Wallets should verify the segwit version from the output of fromBech32, then decide when it is safe to use which version of segwit.";function hxe(e,t){let r=e.slice(2);if(r.length<sq||r.length>oq)throw new TypeError("Invalid program length for segwit address");let n=e[0]-uq;if(n<cq||n>aq)throw new TypeError("Invalid version for segwit address");if(e[1]!==r.length)throw new TypeError("Invalid script for segwit address");return console.warn(fq),hq(r,n,t.bech32)}function lq(e){let t=Buffer.from(iq.decode(e));if(t.length<21)throw new TypeError(e+" is too short");if(t.length>21)throw new TypeError(e+" is too long");let r=t.readUInt8(0),n=t.slice(1);return{version:r,hash:n}}No.fromBase58Check=lq;function dq(e){let t,r;try{t=my.bech32.decode(e)}catch{}if(t){if(r=t.words[0],r!==0)throw new TypeError(e+" uses wrong encoding")}else if(t=my.bech32m.decode(e),r=t.words[0],r===0)throw new TypeError(e+" uses wrong encoding");let n=my.bech32.fromWords(t.words.slice(1));return{version:r,prefix:t.prefix,data:Buffer.from(n)}}No.fromBech32=dq;function pxe(e,t){(0,HA.typeforce)((0,HA.tuple)(HA.Hash160bit,HA.UInt8),arguments);let r=Buffer.allocUnsafe(21);return r.writeUInt8(t,0),e.copy(r,1),iq.encode(r)}No.toBase58Check=pxe;function hq(e,t,r){let n=my.bech32.toWords(e);return n.unshift(t),t===0?my.bech32.encode(r,n):my.bech32m.encode(r,n)}No.toBech32=hq;function yxe(e,t){t=t||rq.bitcoin;try{return Mc.p2pkh({output:e,network:t}).address}catch{}try{return Mc.p2sh({output:e,network:t}).address}catch{}try{return Mc.p2wpkh({output:e,network:t}).address}catch{}try{return Mc.p2wsh({output:e,network:t}).address}catch{}try{return Mc.p2tr({output:e,network:t}).address}catch{}try{return hxe(e,t)}catch{}throw new Error(nq.toASM(e)+" has no matching Address")}No.fromOutputScript=yxe;function mxe(e,t){t=t||rq.bitcoin;let r,n;try{r=lq(e)}catch{}if(r){if(r.version===t.pubKeyHash)return Mc.p2pkh({hash:r.hash}).output;if(r.version===t.scriptHash)return Mc.p2sh({hash:r.hash}).output}else{try{n=dq(e)}catch{}if(n){if(n.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(n.version===0){if(n.data.length===20)return Mc.p2wpkh({hash:n.data}).output;if(n.data.length===32)return Mc.p2wsh({hash:n.data}).output}else if(n.version===1){if(n.data.length===32)return Mc.p2tr({pubkey:n.data}).output}else if(n.version>=cq&&n.version<=aq&&n.data.length>=sq&&n.data.length<=oq)return console.warn(fq),nq.compile([n.version+uq,n.data])}}throw new Error(e+" has no matching Script")}No.toOutputScript=mxe});var pq=W(qA=>{"use strict";l();d();Object.defineProperty(qA,"__esModule",{value:!0});qA.fastMerkleRoot=void 0;function gxe(e,t){if(!Array.isArray(e))throw TypeError("Expected values Array");if(typeof t!="function")throw TypeError("Expected digest Function");let r=e.length,n=e.concat();for(;r>1;){let i=0;for(let o=0;o<r;o+=2,++i){let s=n[o],a=o+1===r?s:n[o+1],c=Buffer.concat([s,a]);n[i]=t(c)}r=i}return n[0]}qA.fastMerkleRoot=gxe});var gy=W(jA=>{"use strict";l();d();Object.defineProperty(jA,"__esModule",{value:!0});jA.Transaction=void 0;var{Buffer:ji}=Bn(),vn=ix(),lo=_c(),yq=ao(),bxe=ao(),Xt=xi(),{typeforce:Dc}=Xt;function Oc(e){let t=e.length;return vn.varuint.encodingLength(t)+t}function xxe(e){let t=e.length;return vn.varuint.encodingLength(t)+e.reduce((r,n)=>r+Oc(n),0)}var Rl=ji.allocUnsafe(0),mq=[],OP=ji.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),gq=ji.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),wxe=ji.from("ffffffffffffffff","hex"),Sxe={script:Rl,valueBuffer:wxe};function vxe(e){return e.value!==void 0}var es=class e{constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}static fromBuffer(t,r){let n=new vn.BufferReader(t),i=new e;i.version=n.readInt32();let o=n.readUInt8(),s=n.readUInt8(),a=!1;o===e.ADVANCED_TRANSACTION_MARKER&&s===e.ADVANCED_TRANSACTION_FLAG?a=!0:n.offset-=2;let c=n.readVarInt();for(let h=0;h<c;++h)i.ins.push({hash:n.readSlice(32),index:n.readUInt32(),script:n.readVarSlice(),sequence:n.readUInt32(),witness:mq});let u=n.readVarInt();for(let h=0;h<u;++h)i.outs.push({value:n.readUInt64(),script:n.readVarSlice()});if(a){for(let h=0;h<c;++h)i.ins[h].witness=n.readVector();if(!i.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(i.locktime=n.readUInt32(),r)return i;if(n.offset!==t.length)throw new Error("Transaction has unexpected data");return i}static fromHex(t){return e.fromBuffer(ji.from(t,"hex"),!1)}static isCoinbaseHash(t){Dc(Xt.Hash256bit,t);for(let r=0;r<32;++r)if(t[r]!==0)return!1;return!0}isCoinbase(){return this.ins.length===1&&e.isCoinbaseHash(this.ins[0].hash)}addInput(t,r,n,i){return Dc(Xt.tuple(Xt.Hash256bit,Xt.UInt32,Xt.maybe(Xt.UInt32),Xt.maybe(Xt.Buffer)),arguments),Xt.Null(n)&&(n=e.DEFAULT_SEQUENCE),this.ins.push({hash:t,index:r,script:i||Rl,sequence:n,witness:mq})-1}addOutput(t,r){return Dc(Xt.tuple(Xt.Buffer,Xt.Satoshi),arguments),this.outs.push({script:t,value:r})-1}hasWitnesses(){return this.ins.some(t=>t.witness.length!==0)}weight(){let t=this.byteLength(!1),r=this.byteLength(!0);return t*3+r}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(t=!0){let r=t&&this.hasWitnesses();return(r?10:8)+vn.varuint.encodingLength(this.ins.length)+vn.varuint.encodingLength(this.outs.length)+this.ins.reduce((n,i)=>n+40+Oc(i.script),0)+this.outs.reduce((n,i)=>n+8+Oc(i.script),0)+(r?this.ins.reduce((n,i)=>n+xxe(i.witness),0):0)}clone(){let t=new e;return t.version=this.version,t.locktime=this.locktime,t.ins=this.ins.map(r=>({hash:r.hash,index:r.index,script:r.script,sequence:r.sequence,witness:r.witness})),t.outs=this.outs.map(r=>({script:r.script,value:r.value})),t}hashForSignature(t,r,n){if(Dc(Xt.tuple(Xt.UInt32,Xt.Buffer,Xt.Number),arguments),t>=this.ins.length)return gq;let i=yq.compile(yq.decompile(r).filter(a=>a!==bxe.OPS.OP_CODESEPARATOR)),o=this.clone();if((n&31)===e.SIGHASH_NONE)o.outs=[],o.ins.forEach((a,c)=>{c!==t&&(a.sequence=0)});else if((n&31)===e.SIGHASH_SINGLE){if(t>=this.outs.length)return gq;o.outs.length=t+1;for(let a=0;a<t;a++)o.outs[a]=Sxe;o.ins.forEach((a,c)=>{c!==t&&(a.sequence=0)})}n&e.SIGHASH_ANYONECANPAY?(o.ins=[o.ins[t]],o.ins[0].script=i):(o.ins.forEach(a=>{a.script=Rl}),o.ins[t].script=i);let s=ji.allocUnsafe(o.byteLength(!1)+4);return s.writeInt32LE(n,s.length-4),o.__toBuffer(s,0,!1),lo.hash256(s)}hashForWitnessV1(t,r,n,i,o,s){if(Dc(Xt.tuple(Xt.UInt32,Dc.arrayOf(Xt.Buffer),Dc.arrayOf(Xt.Satoshi),Xt.UInt32),arguments),n.length!==this.ins.length||r.length!==this.ins.length)throw new Error("Must supply prevout script and value for all inputs");let a=i===e.SIGHASH_DEFAULT?e.SIGHASH_ALL:i&e.SIGHASH_OUTPUT_MASK,u=(i&e.SIGHASH_INPUT_MASK)===e.SIGHASH_ANYONECANPAY,h=a===e.SIGHASH_NONE,f=a===e.SIGHASH_SINGLE,m=Rl,b=Rl,w=Rl,S=Rl,P=Rl;if(!u){let L=vn.BufferWriter.withCapacity(36*this.ins.length);this.ins.forEach(V=>{L.writeSlice(V.hash),L.writeUInt32(V.index)}),m=lo.sha256(L.end()),L=vn.BufferWriter.withCapacity(8*this.ins.length),n.forEach(V=>L.writeUInt64(V)),b=lo.sha256(L.end()),L=vn.BufferWriter.withCapacity(r.map(Oc).reduce((V,j)=>V+j)),r.forEach(V=>L.writeVarSlice(V)),w=lo.sha256(L.end()),L=vn.BufferWriter.withCapacity(4*this.ins.length),this.ins.forEach(V=>L.writeUInt32(V.sequence)),S=lo.sha256(L.end())}if(h||f){if(f&&t<this.outs.length){let L=this.outs[t],V=vn.BufferWriter.withCapacity(8+Oc(L.script));V.writeUInt64(L.value),V.writeVarSlice(L.script),P=lo.sha256(V.end())}}else{let L=this.outs.map(j=>8+Oc(j.script)).reduce((j,$)=>j+$),V=vn.BufferWriter.withCapacity(L);this.outs.forEach(j=>{V.writeUInt64(j.value),V.writeVarSlice(j.script)}),P=lo.sha256(V.end())}let N=(o?2:0)+(s?1:0),O=174-(u?49:0)-(h?32:0)+(s?32:0)+(o?37:0),C=vn.BufferWriter.withCapacity(O);if(C.writeUInt8(i),C.writeInt32(this.version),C.writeUInt32(this.locktime),C.writeSlice(m),C.writeSlice(b),C.writeSlice(w),C.writeSlice(S),h||f||C.writeSlice(P),C.writeUInt8(N),u){let L=this.ins[t];C.writeSlice(L.hash),C.writeUInt32(L.index),C.writeUInt64(n[t]),C.writeVarSlice(r[t]),C.writeUInt32(L.sequence)}else C.writeUInt32(t);if(s){let L=vn.BufferWriter.withCapacity(Oc(s));L.writeVarSlice(s),C.writeSlice(lo.sha256(L.end()))}return f&&C.writeSlice(P),o&&(C.writeSlice(o),C.writeUInt8(0),C.writeUInt32(4294967295)),lo.taggedHash("TapSighash",ji.concat([ji.from([0]),C.end()]))}hashForWitnessV0(t,r,n,i){Dc(Xt.tuple(Xt.UInt32,Xt.Buffer,Xt.Satoshi,Xt.UInt32),arguments);let o=ji.from([]),s,a=OP,c=OP,u=OP;if(i&e.SIGHASH_ANYONECANPAY||(o=ji.allocUnsafe(36*this.ins.length),s=new vn.BufferWriter(o,0),this.ins.forEach(f=>{s.writeSlice(f.hash),s.writeUInt32(f.index)}),c=lo.hash256(o)),!(i&e.SIGHASH_ANYONECANPAY)&&(i&31)!==e.SIGHASH_SINGLE&&(i&31)!==e.SIGHASH_NONE&&(o=ji.allocUnsafe(4*this.ins.length),s=new vn.BufferWriter(o,0),this.ins.forEach(f=>{s.writeUInt32(f.sequence)}),u=lo.hash256(o)),(i&31)!==e.SIGHASH_SINGLE&&(i&31)!==e.SIGHASH_NONE){let f=this.outs.reduce((m,b)=>m+8+Oc(b.script),0);o=ji.allocUnsafe(f),s=new vn.BufferWriter(o,0),this.outs.forEach(m=>{s.writeUInt64(m.value),s.writeVarSlice(m.script)}),a=lo.hash256(o)}else if((i&31)===e.SIGHASH_SINGLE&&t<this.outs.length){let f=this.outs[t];o=ji.allocUnsafe(8+Oc(f.script)),s=new vn.BufferWriter(o,0),s.writeUInt64(f.value),s.writeVarSlice(f.script),a=lo.hash256(o)}o=ji.allocUnsafe(156+Oc(r)),s=new vn.BufferWriter(o,0);let h=this.ins[t];return s.writeInt32(this.version),s.writeSlice(c),s.writeSlice(u),s.writeSlice(h.hash),s.writeUInt32(h.index),s.writeVarSlice(r),s.writeUInt64(n),s.writeUInt32(h.sequence),s.writeSlice(a),s.writeUInt32(this.locktime),s.writeUInt32(i),lo.hash256(o)}getHash(t){return t&&this.isCoinbase()?ji.alloc(32,0):lo.hash256(this.__toBuffer(void 0,void 0,t))}getId(){return(0,vn.reverseBuffer)(this.getHash(!1)).toString("hex")}toBuffer(t,r){return this.__toBuffer(t,r,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(t,r){Dc(Xt.tuple(Xt.Number,Xt.Buffer),arguments),this.ins[t].script=r}setWitness(t,r){Dc(Xt.tuple(Xt.Number,[Xt.Buffer]),arguments),this.ins[t].witness=r}__toBuffer(t,r,n=!1){t||(t=ji.allocUnsafe(this.byteLength(n)));let i=new vn.BufferWriter(t,r||0);i.writeInt32(this.version);let o=n&&this.hasWitnesses();return o&&(i.writeUInt8(e.ADVANCED_TRANSACTION_MARKER),i.writeUInt8(e.ADVANCED_TRANSACTION_FLAG)),i.writeVarInt(this.ins.length),this.ins.forEach(s=>{i.writeSlice(s.hash),i.writeUInt32(s.index),i.writeVarSlice(s.script),i.writeUInt32(s.sequence)}),i.writeVarInt(this.outs.length),this.outs.forEach(s=>{vxe(s)?i.writeUInt64(s.value):i.writeSlice(s.valueBuffer),i.writeVarSlice(s.script)}),o&&this.ins.forEach(s=>{i.writeVector(s.witness)}),i.writeUInt32(this.locktime),r!==void 0?t.slice(r,i.offset):t}};jA.Transaction=es;es.DEFAULT_SEQUENCE=4294967295;es.SIGHASH_DEFAULT=0;es.SIGHASH_ALL=1;es.SIGHASH_NONE=2;es.SIGHASH_SINGLE=3;es.SIGHASH_ANYONECANPAY=128;es.SIGHASH_OUTPUT_MASK=3;es.SIGHASH_INPUT_MASK=128;es.ADVANCED_TRANSACTION_MARKER=0;es.ADVANCED_TRANSACTION_FLAG=1});var Sq=W(WA=>{"use strict";l();d();Object.defineProperty(WA,"__esModule",{value:!0});WA.Block=void 0;var Sh=ix(),UP=_c(),Axe=pq(),Exe=gy(),wq=xi(),{typeforce:Ixe}=wq,RP=new TypeError("Cannot compute merkle root for zero transactions"),bq=new TypeError("Cannot compute witness commit for non-segwit block"),LP=class e{constructor(){this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}static fromBuffer(t){if(t.length<80)throw new Error("Buffer too small (< 80 bytes)");let r=new Sh.BufferReader(t),n=new e;if(n.version=r.readInt32(),n.prevHash=r.readSlice(32),n.merkleRoot=r.readSlice(32),n.timestamp=r.readUInt32(),n.bits=r.readUInt32(),n.nonce=r.readUInt32(),t.length===80)return n;let i=()=>{let a=Exe.Transaction.fromBuffer(r.buffer.slice(r.offset),!0);return r.offset+=a.byteLength(),a},o=r.readVarInt();n.transactions=[];for(let a=0;a<o;++a){let c=i();n.transactions.push(c)}let s=n.getWitnessCommit();return s&&(n.witnessCommit=s),n}static fromHex(t){return e.fromBuffer(Buffer.from(t,"hex"))}static calculateTarget(t){let r=((t&4278190080)>>24)-3,n=t&8388607,i=Buffer.alloc(32,0);return i.writeUIntBE(n,29-r,3),i}static calculateMerkleRoot(t,r){if(Ixe([{getHash:wq.Function}],t),t.length===0)throw RP;if(r&&!xq(t))throw bq;let n=t.map(o=>o.getHash(r)),i=(0,Axe.fastMerkleRoot)(n,UP.hash256);return r?UP.hash256(Buffer.concat([i,t[0].ins[0].witness[0]])):i}getWitnessCommit(){if(!xq(this.transactions))return null;let t=this.transactions[0].outs.filter(n=>n.script.slice(0,6).equals(Buffer.from("6a24aa21a9ed","hex"))).map(n=>n.script.slice(6,38));if(t.length===0)return null;let r=t[t.length-1];return r instanceof Buffer&&r.length===32?r:null}hasWitnessCommit(){return this.witnessCommit instanceof Buffer&&this.witnessCommit.length===32||this.getWitnessCommit()!==null}hasWitness(){return kxe(this.transactions)}weight(){let t=this.byteLength(!1,!1),r=this.byteLength(!1,!0);return t*3+r}byteLength(t,r=!0){return t||!this.transactions?80:80+Sh.varuint.encodingLength(this.transactions.length)+this.transactions.reduce((n,i)=>n+i.byteLength(r),0)}getHash(){return UP.hash256(this.toBuffer(!0))}getId(){return(0,Sh.reverseBuffer)(this.getHash()).toString("hex")}getUTCDate(){let t=new Date(0);return t.setUTCSeconds(this.timestamp),t}toBuffer(t){let r=Buffer.allocUnsafe(this.byteLength(t)),n=new Sh.BufferWriter(r);return n.writeInt32(this.version),n.writeSlice(this.prevHash),n.writeSlice(this.merkleRoot),n.writeUInt32(this.timestamp),n.writeUInt32(this.bits),n.writeUInt32(this.nonce),t||!this.transactions||(Sh.varuint.encode(this.transactions.length,r,n.offset),n.offset+=Sh.varuint.encode.bytes,this.transactions.forEach(i=>{let o=i.byteLength();i.toBuffer(r,n.offset),n.offset+=o})),r}toHex(t){return this.toBuffer(t).toString("hex")}checkTxRoots(){let t=this.hasWitnessCommit();return!t&&this.hasWitness()?!1:this.__checkMerkleRoot()&&(t?this.__checkWitnessCommit():!0)}checkProofOfWork(){let t=(0,Sh.reverseBuffer)(this.getHash()),r=e.calculateTarget(this.bits);return t.compare(r)<=0}__checkMerkleRoot(){if(!this.transactions)throw RP;let t=e.calculateMerkleRoot(this.transactions);return this.merkleRoot.compare(t)===0}__checkWitnessCommit(){if(!this.transactions)throw RP;if(!this.hasWitnessCommit())throw bq;let t=e.calculateMerkleRoot(this.transactions,!0);return this.witnessCommit.compare(t)===0}};WA.Block=LP;function xq(e){return e instanceof Array&&e[0]&&e[0].ins&&e[0].ins instanceof Array&&e[0].ins[0]&&e[0].ins[0].witness&&e[0].ins[0].witness instanceof Array&&e[0].ins[0].witness.length>0}function kxe(e){return e instanceof Array&&e.some(t=>typeof t=="object"&&t.ins instanceof Array&&t.ins.some(r=>typeof r=="object"&&r.witness instanceof Array&&r.witness.length>0))}});var ii=W(Ua=>{"use strict";l();d();Object.defineProperty(Ua,"__esModule",{value:!0});var Txe;(function(e){e[e.UNSIGNED_TX=0]="UNSIGNED_TX",e[e.GLOBAL_XPUB=1]="GLOBAL_XPUB"})(Txe=Ua.GlobalTypes||(Ua.GlobalTypes={}));Ua.GLOBAL_TYPE_NAMES=["unsignedTx","globalXpub"];var Pxe;(function(e){e[e.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",e[e.WITNESS_UTXO=1]="WITNESS_UTXO",e[e.PARTIAL_SIG=2]="PARTIAL_SIG",e[e.SIGHASH_TYPE=3]="SIGHASH_TYPE",e[e.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",e[e.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",e[e.BIP32_DERIVATION=6]="BIP32_DERIVATION",e[e.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",e[e.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",e[e.POR_COMMITMENT=9]="POR_COMMITMENT",e[e.TAP_KEY_SIG=19]="TAP_KEY_SIG",e[e.TAP_SCRIPT_SIG=20]="TAP_SCRIPT_SIG",e[e.TAP_LEAF_SCRIPT=21]="TAP_LEAF_SCRIPT",e[e.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION",e[e.TAP_INTERNAL_KEY=23]="TAP_INTERNAL_KEY",e[e.TAP_MERKLE_ROOT=24]="TAP_MERKLE_ROOT"})(Pxe=Ua.InputTypes||(Ua.InputTypes={}));Ua.INPUT_TYPE_NAMES=["nonWitnessUtxo","witnessUtxo","partialSig","sighashType","redeemScript","witnessScript","bip32Derivation","finalScriptSig","finalScriptWitness","porCommitment","tapKeySig","tapScriptSig","tapLeafScript","tapBip32Derivation","tapInternalKey","tapMerkleRoot"];var Bxe;(function(e){e[e.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",e[e.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",e[e.BIP32_DERIVATION=2]="BIP32_DERIVATION",e[e.TAP_INTERNAL_KEY=5]="TAP_INTERNAL_KEY",e[e.TAP_TREE=6]="TAP_TREE",e[e.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION"})(Bxe=Ua.OutputTypes||(Ua.OutputTypes={}));Ua.OUTPUT_TYPE_NAMES=["redeemScript","witnessScript","bip32Derivation","tapInternalKey","tapTree","tapBip32Derivation"]});var Aq=W(vh=>{"use strict";l();d();Object.defineProperty(vh,"__esModule",{value:!0});var vq=ii(),_xe=e=>[...Array(e).keys()];function Cxe(e){if(e.key[0]!==vq.GlobalTypes.GLOBAL_XPUB)throw new Error("Decode Error: could not decode globalXpub with key 0x"+e.key.toString("hex"));if(e.key.length!==79||![2,3].includes(e.key[46]))throw new Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+e.key.toString("hex"));if(e.value.length/4%1!==0)throw new Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");let t=e.key.slice(1),r={masterFingerprint:e.value.slice(0,4),extendedPubkey:t,path:"m"};for(let n of _xe(e.value.length/4-1)){let i=e.value.readUInt32LE(n*4+4),o=!!(i&2147483648),s=i&2147483647;r.path+="/"+s.toString(10)+(o?"'":"")}return r}vh.decode=Cxe;function Nxe(e){let t=Buffer.from([vq.GlobalTypes.GLOBAL_XPUB]),r=Buffer.concat([t,e.extendedPubkey]),n=e.path.split("/"),i=Buffer.allocUnsafe(n.length*4);e.masterFingerprint.copy(i,0);let o=4;return n.slice(1).forEach(s=>{let a=s.slice(-1)==="'",c=2147483647&parseInt(a?s.slice(0,-1):s,10);a&&(c+=2147483648),i.writeUInt32LE(c,o),o+=4}),{key:r,value:i}}vh.encode=Nxe;vh.expected="{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }";function Mxe(e){let t=e.extendedPubkey,r=e.masterFingerprint,n=e.path;return Buffer.isBuffer(t)&&t.length===78&&[2,3].indexOf(t[45])>-1&&Buffer.isBuffer(r)&&r.length===4&&typeof n=="string"&&!!n.match(/^m(\/\d+'?)*$/)}vh.check=Mxe;function Dxe(e,t,r){let n=t.extendedPubkey.toString("hex");return r.has(n)?!1:(r.add(n),e.filter(i=>i.extendedPubkey.equals(t.extendedPubkey)).length===0)}vh.canAddToArray=Dxe});var Eq=W(VP=>{"use strict";l();d();Object.defineProperty(VP,"__esModule",{value:!0});var Oxe=ii();function Uxe(e){return{key:Buffer.from([Oxe.GlobalTypes.UNSIGNED_TX]),value:e.toBuffer()}}VP.encode=Uxe});var kq=W(Ah=>{"use strict";l();d();Object.defineProperty(Ah,"__esModule",{value:!0});var Iq=ii();function Rxe(e){if(e.key[0]!==Iq.InputTypes.FINAL_SCRIPTSIG)throw new Error("Decode Error: could not decode finalScriptSig with key 0x"+e.key.toString("hex"));return e.value}Ah.decode=Rxe;function Lxe(e){return{key:Buffer.from([Iq.InputTypes.FINAL_SCRIPTSIG]),value:e}}Ah.encode=Lxe;Ah.expected="Buffer";function Vxe(e){return Buffer.isBuffer(e)}Ah.check=Vxe;function Kxe(e,t){return!!e&&!!t&&e.finalScriptSig===void 0}Ah.canAdd=Kxe});var Pq=W(Eh=>{"use strict";l();d();Object.defineProperty(Eh,"__esModule",{value:!0});var Tq=ii();function Fxe(e){if(e.key[0]!==Tq.InputTypes.FINAL_SCRIPTWITNESS)throw new Error("Decode Error: could not decode finalScriptWitness with key 0x"+e.key.toString("hex"));return e.value}Eh.decode=Fxe;function Hxe(e){return{key:Buffer.from([Tq.InputTypes.FINAL_SCRIPTWITNESS]),value:e}}Eh.encode=Hxe;Eh.expected="Buffer";function qxe(e){return Buffer.isBuffer(e)}Eh.check=qxe;function jxe(e,t){return!!e&&!!t&&e.finalScriptWitness===void 0}Eh.canAdd=jxe});var _q=W(Ih=>{"use strict";l();d();Object.defineProperty(Ih,"__esModule",{value:!0});var Bq=ii();function Wxe(e){if(e.key[0]!==Bq.InputTypes.NON_WITNESS_UTXO)throw new Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+e.key.toString("hex"));return e.value}Ih.decode=Wxe;function zxe(e){return{key:Buffer.from([Bq.InputTypes.NON_WITNESS_UTXO]),value:e}}Ih.encode=zxe;Ih.expected="Buffer";function Gxe(e){return Buffer.isBuffer(e)}Ih.check=Gxe;function $xe(e,t){return!!e&&!!t&&e.nonWitnessUtxo===void 0}Ih.canAdd=$xe});var Nq=W(kh=>{"use strict";l();d();Object.defineProperty(kh,"__esModule",{value:!0});var Cq=ii();function Yxe(e){if(e.key[0]!==Cq.InputTypes.PARTIAL_SIG)throw new Error("Decode Error: could not decode partialSig with key 0x"+e.key.toString("hex"));if(!(e.key.length===34||e.key.length===66)||![2,3,4].includes(e.key[1]))throw new Error("Decode Error: partialSig has invalid pubkey in key 0x"+e.key.toString("hex"));return{pubkey:e.key.slice(1),signature:e.value}}kh.decode=Yxe;function Zxe(e){let t=Buffer.from([Cq.InputTypes.PARTIAL_SIG]);return{key:Buffer.concat([t,e.pubkey]),value:e.signature}}kh.encode=Zxe;kh.expected="{ pubkey: Buffer; signature: Buffer; }";function Jxe(e){return Buffer.isBuffer(e.pubkey)&&Buffer.isBuffer(e.signature)&&[33,65].includes(e.pubkey.length)&&[2,3,4].includes(e.pubkey[0])&&Xxe(e.signature)}kh.check=Jxe;function Xxe(e){if(!Buffer.isBuffer(e)||e.length<9||e[0]!==48||e.length!==e[1]+3||e[2]!==2)return!1;let t=e[3];if(t>33||t<1||e[3+t+1]!==2)return!1;let r=e[3+t+2];return!(r>33||r<1||e.length!==3+t+2+r+2)}function Qxe(e,t,r){let n=t.pubkey.toString("hex");return r.has(n)?!1:(r.add(n),e.filter(i=>i.pubkey.equals(t.pubkey)).length===0)}kh.canAddToArray=Qxe});var Dq=W(Th=>{"use strict";l();d();Object.defineProperty(Th,"__esModule",{value:!0});var Mq=ii();function ewe(e){if(e.key[0]!==Mq.InputTypes.POR_COMMITMENT)throw new Error("Decode Error: could not decode porCommitment with key 0x"+e.key.toString("hex"));return e.value.toString("utf8")}Th.decode=ewe;function twe(e){return{key:Buffer.from([Mq.InputTypes.POR_COMMITMENT]),value:Buffer.from(e,"utf8")}}Th.encode=twe;Th.expected="string";function rwe(e){return typeof e=="string"}Th.check=rwe;function nwe(e,t){return!!e&&!!t&&e.porCommitment===void 0}Th.canAdd=nwe});var Uq=W(Ph=>{"use strict";l();d();Object.defineProperty(Ph,"__esModule",{value:!0});var Oq=ii();function iwe(e){if(e.key[0]!==Oq.InputTypes.SIGHASH_TYPE)throw new Error("Decode Error: could not decode sighashType with key 0x"+e.key.toString("hex"));return e.value.readUInt32LE(0)}Ph.decode=iwe;function owe(e){let t=Buffer.from([Oq.InputTypes.SIGHASH_TYPE]),r=Buffer.allocUnsafe(4);return r.writeUInt32LE(e,0),{key:t,value:r}}Ph.encode=owe;Ph.expected="number";function swe(e){return typeof e=="number"}Ph.check=swe;function awe(e,t){return!!e&&!!t&&e.sighashType===void 0}Ph.canAdd=awe});var Vq=W(Bh=>{"use strict";l();d();Object.defineProperty(Bh,"__esModule",{value:!0});var Rq=ii();function cwe(e){if(e.key[0]!==Rq.InputTypes.TAP_KEY_SIG||e.key.length!==1)throw new Error("Decode Error: could not decode tapKeySig with key 0x"+e.key.toString("hex"));if(!Lq(e.value))throw new Error("Decode Error: tapKeySig not a valid 64-65-byte BIP340 signature");return e.value}Bh.decode=cwe;function uwe(e){return{key:Buffer.from([Rq.InputTypes.TAP_KEY_SIG]),value:e}}Bh.encode=uwe;Bh.expected="Buffer";function Lq(e){return Buffer.isBuffer(e)&&(e.length===64||e.length===65)}Bh.check=Lq;function fwe(e,t){return!!e&&!!t&&e.tapKeySig===void 0}Bh.canAdd=fwe});var Fq=W(_h=>{"use strict";l();d();Object.defineProperty(_h,"__esModule",{value:!0});var Kq=ii();function lwe(e){if(e.key[0]!==Kq.InputTypes.TAP_LEAF_SCRIPT)throw new Error("Decode Error: could not decode tapLeafScript with key 0x"+e.key.toString("hex"));if((e.key.length-2)%32!==0)throw new Error("Decode Error: tapLeafScript has invalid control block in key 0x"+e.key.toString("hex"));let t=e.value[e.value.length-1];if((e.key[1]&254)!==t)throw new Error("Decode Error: tapLeafScript bad leaf version in key 0x"+e.key.toString("hex"));let r=e.value.slice(0,-1);return{controlBlock:e.key.slice(1),script:r,leafVersion:t}}_h.decode=lwe;function dwe(e){let t=Buffer.from([Kq.InputTypes.TAP_LEAF_SCRIPT]),r=Buffer.from([e.leafVersion]);return{key:Buffer.concat([t,e.controlBlock]),value:Buffer.concat([e.script,r])}}_h.encode=dwe;_h.expected="{ controlBlock: Buffer; leafVersion: number, script: Buffer; }";function hwe(e){return Buffer.isBuffer(e.controlBlock)&&(e.controlBlock.length-1)%32===0&&(e.controlBlock[0]&254)===e.leafVersion&&Buffer.isBuffer(e.script)}_h.check=hwe;function pwe(e,t,r){let n=t.controlBlock.toString("hex");return r.has(n)?!1:(r.add(n),e.filter(i=>i.controlBlock.equals(t.controlBlock)).length===0)}_h.canAddToArray=pwe});var jq=W(Ch=>{"use strict";l();d();Object.defineProperty(Ch,"__esModule",{value:!0});var Hq=ii();function ywe(e){if(e.key[0]!==Hq.InputTypes.TAP_MERKLE_ROOT||e.key.length!==1)throw new Error("Decode Error: could not decode tapMerkleRoot with key 0x"+e.key.toString("hex"));if(!qq(e.value))throw new Error("Decode Error: tapMerkleRoot not a 32-byte hash");return e.value}Ch.decode=ywe;function mwe(e){return{key:Buffer.from([Hq.InputTypes.TAP_MERKLE_ROOT]),value:e}}Ch.encode=mwe;Ch.expected="Buffer";function qq(e){return Buffer.isBuffer(e)&&e.length===32}Ch.check=qq;function gwe(e,t){return!!e&&!!t&&e.tapMerkleRoot===void 0}Ch.canAdd=gwe});var zq=W(Nh=>{"use strict";l();d();Object.defineProperty(Nh,"__esModule",{value:!0});var Wq=ii();function bwe(e){if(e.key[0]!==Wq.InputTypes.TAP_SCRIPT_SIG)throw new Error("Decode Error: could not decode tapScriptSig with key 0x"+e.key.toString("hex"));if(e.key.length!==65)throw new Error("Decode Error: tapScriptSig has invalid key 0x"+e.key.toString("hex"));if(e.value.length!==64&&e.value.length!==65)throw new Error("Decode Error: tapScriptSig has invalid signature in key 0x"+e.key.toString("hex"));let t=e.key.slice(1,33),r=e.key.slice(33);return{pubkey:t,leafHash:r,signature:e.value}}Nh.decode=bwe;function xwe(e){let t=Buffer.from([Wq.InputTypes.TAP_SCRIPT_SIG]);return{key:Buffer.concat([t,e.pubkey,e.leafHash]),value:e.signature}}Nh.encode=xwe;Nh.expected="{ pubkey: Buffer; leafHash: Buffer; signature: Buffer; }";function wwe(e){return Buffer.isBuffer(e.pubkey)&&Buffer.isBuffer(e.leafHash)&&Buffer.isBuffer(e.signature)&&e.pubkey.length===32&&e.leafHash.length===32&&(e.signature.length===64||e.signature.length===65)}Nh.check=wwe;function Swe(e,t,r){let n=t.pubkey.toString("hex")+t.leafHash.toString("hex");return r.has(n)?!1:(r.add(n),e.filter(i=>i.pubkey.equals(t.pubkey)&&i.leafHash.equals(t.leafHash)).length===0)}Nh.canAddToArray=Swe});var Ll=W(ax=>{"use strict";l();d();Object.defineProperty(ax,"__esModule",{value:!0});var vwe=9007199254740991;function KP(e){if(e<0||e>vwe||e%1!==0)throw new RangeError("value out of range")}function ox(e,t,r){if(KP(e),t||(t=Buffer.allocUnsafe(Gq(e))),!Buffer.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");return r||(r=0),e<253?(t.writeUInt8(e,r),Object.assign(ox,{bytes:1})):e<=65535?(t.writeUInt8(253,r),t.writeUInt16LE(e,r+1),Object.assign(ox,{bytes:3})):e<=4294967295?(t.writeUInt8(254,r),t.writeUInt32LE(e,r+1),Object.assign(ox,{bytes:5})):(t.writeUInt8(255,r),t.writeUInt32LE(e>>>0,r+1),t.writeUInt32LE(e/4294967296|0,r+5),Object.assign(ox,{bytes:9})),t}ax.encode=ox;function sx(e,t){if(!Buffer.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");t||(t=0);let r=e.readUInt8(t);if(r<253)return Object.assign(sx,{bytes:1}),r;if(r===253)return Object.assign(sx,{bytes:3}),e.readUInt16LE(t+1);if(r===254)return Object.assign(sx,{bytes:5}),e.readUInt32LE(t+1);{Object.assign(sx,{bytes:9});let n=e.readUInt32LE(t+1),o=e.readUInt32LE(t+5)*4294967296+n;return KP(o),o}}ax.decode=sx;function Gq(e){return KP(e),e<253?1:e<=65535?3:e<=4294967295?5:9}ax.encodingLength=Gq});var GA=W(Vl=>{"use strict";l();d();Object.defineProperty(Vl,"__esModule",{value:!0});var zA=Ll();Vl.range=e=>[...Array(e).keys()];function Awe(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e}Vl.reverseBuffer=Awe;function Ewe(e){let t=e.map($q);return t.push(Buffer.from([0])),Buffer.concat(t)}Vl.keyValsToBuffer=Ewe;function $q(e){let t=e.key.length,r=e.value.length,n=zA.encodingLength(t),i=zA.encodingLength(r),o=Buffer.allocUnsafe(n+t+i+r);return zA.encode(t,o,0),e.key.copy(o,n),zA.encode(r,o,n+t),e.value.copy(o,n+t+i),o}Vl.keyValToBuffer=$q;function Yq(e,t){if(typeof e!="number")throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function Iwe(e,t){let r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return n*=4294967296,Yq(n+r,9007199254740991),n+r}Vl.readUInt64LE=Iwe;function kwe(e,t,r){return Yq(t,9007199254740991),e.writeInt32LE(t&-1,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}Vl.writeUInt64LE=kwe});var Xq=W(Mh=>{"use strict";l();d();Object.defineProperty(Mh,"__esModule",{value:!0});var Zq=ii(),Jq=GA(),$A=Ll();function Twe(e){if(e.key[0]!==Zq.InputTypes.WITNESS_UTXO)throw new Error("Decode Error: could not decode witnessUtxo with key 0x"+e.key.toString("hex"));let t=Jq.readUInt64LE(e.value,0),r=8,n=$A.decode(e.value,r);r+=$A.encodingLength(n);let i=e.value.slice(r);if(i.length!==n)throw new Error("Decode Error: WITNESS_UTXO script is not proper length");return{script:i,value:t}}Mh.decode=Twe;function Pwe(e){let{script:t,value:r}=e,n=$A.encodingLength(t.length),i=Buffer.allocUnsafe(8+n+t.length);return Jq.writeUInt64LE(i,r,0),$A.encode(t.length,i,8),t.copy(i,8+n),{key:Buffer.from([Zq.InputTypes.WITNESS_UTXO]),value:i}}Mh.encode=Pwe;Mh.expected="{ script: Buffer; value: number; }";function Bwe(e){return Buffer.isBuffer(e.script)&&typeof e.value=="number"}Mh.check=Bwe;function _we(e,t){return!!e&&!!t&&e.witnessUtxo===void 0}Mh.canAdd=_we});var ej=W(Dh=>{"use strict";l();d();Object.defineProperty(Dh,"__esModule",{value:!0});var Qq=ii(),FP=Ll();function Cwe(e){if(e.key[0]!==Qq.OutputTypes.TAP_TREE||e.key.length!==1)throw new Error("Decode Error: could not decode tapTree with key 0x"+e.key.toString("hex"));let t=0,r=[];for(;t<e.value.length;){let n=e.value[t++],i=e.value[t++],o=FP.decode(e.value,t);t+=FP.encodingLength(o),r.push({depth:n,leafVersion:i,script:e.value.slice(t,t+o)}),t+=o}return{leaves:r}}Dh.decode=Cwe;function Nwe(e){let t=Buffer.from([Qq.OutputTypes.TAP_TREE]),r=[].concat(...e.leaves.map(n=>[Buffer.of(n.depth,n.leafVersion),FP.encode(n.script.length),n.script]));return{key:t,value:Buffer.concat(r)}}Dh.encode=Nwe;Dh.expected="{ leaves: [{ depth: number; leafVersion: number, script: Buffer; }] }";function Mwe(e){return Array.isArray(e.leaves)&&e.leaves.every(t=>t.depth>=0&&t.depth<=128&&(t.leafVersion&254)===t.leafVersion&&Buffer.isBuffer(t.script))}Dh.check=Mwe;function Dwe(e,t){return!!e&&!!t&&e.tapTree===void 0}Dh.canAdd=Dwe});var qP=W(HP=>{"use strict";l();d();Object.defineProperty(HP,"__esModule",{value:!0});var Owe=e=>[...Array(e).keys()],Uwe=e=>e.length===33&&[2,3].includes(e[0])||e.length===65&&e[0]===4;function Rwe(e,t=Uwe){function r(a){if(a.key[0]!==e)throw new Error("Decode Error: could not decode bip32Derivation with key 0x"+a.key.toString("hex"));let c=a.key.slice(1);if(!t(c))throw new Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+a.key.toString("hex"));if(a.value.length/4%1!==0)throw new Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");let u={masterFingerprint:a.value.slice(0,4),pubkey:c,path:"m"};for(let h of Owe(a.value.length/4-1)){let f=a.value.readUInt32LE(h*4+4),m=!!(f&2147483648),b=f&2147483647;u.path+="/"+b.toString(10)+(m?"'":"")}return u}function n(a){let c=Buffer.from([e]),u=Buffer.concat([c,a.pubkey]),h=a.path.split("/"),f=Buffer.allocUnsafe(h.length*4);a.masterFingerprint.copy(f,0);let m=4;return h.slice(1).forEach(b=>{let w=b.slice(-1)==="'",S=2147483647&parseInt(w?b.slice(0,-1):b,10);w&&(S+=2147483648),f.writeUInt32LE(S,m),m+=4}),{key:u,value:f}}let i="{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }";function o(a){return Buffer.isBuffer(a.pubkey)&&Buffer.isBuffer(a.masterFingerprint)&&typeof a.path=="string"&&t(a.pubkey)&&a.masterFingerprint.length===4}function s(a,c,u){let h=c.pubkey.toString("hex");return u.has(h)?!1:(u.add(h),a.filter(f=>f.pubkey.equals(c.pubkey)).length===0)}return{decode:r,encode:n,check:o,expected:i,canAddToArray:s}}HP.makeConverter=Rwe});var tj=W(jP=>{"use strict";l();d();Object.defineProperty(jP,"__esModule",{value:!0});function Lwe(e){return t;function t(r){let n;if(e.includes(r.key[0])&&(n=r.key.slice(1),!(n.length===33||n.length===65)||![2,3,4].includes(n[0])))throw new Error("Format Error: invalid pubkey in key 0x"+r.key.toString("hex"));return n}}jP.makeChecker=Lwe});var rj=W(WP=>{"use strict";l();d();Object.defineProperty(WP,"__esModule",{value:!0});function Vwe(e){function t(s){if(s.key[0]!==e)throw new Error("Decode Error: could not decode redeemScript with key 0x"+s.key.toString("hex"));return s.value}function r(s){return{key:Buffer.from([e]),value:s}}let n="Buffer";function i(s){return Buffer.isBuffer(s)}function o(s,a){return!!s&&!!a&&s.redeemScript===void 0}return{decode:t,encode:r,check:i,expected:n,canAdd:o}}WP.makeConverter=Vwe});var nj=W(zP=>{"use strict";l();d();Object.defineProperty(zP,"__esModule",{value:!0});var YA=Ll(),Kwe=qP(),Fwe=e=>e.length===32;function Hwe(e){let t=Kwe.makeConverter(e,Fwe);function r(s){let a=YA.decode(s.value),c=YA.encodingLength(a),u=t.decode({key:s.key,value:s.value.slice(c+a*32)}),h=new Array(a);for(let f=0,m=c;f<a;f++,m+=32)h[f]=s.value.slice(m,m+32);return Object.assign({},u,{leafHashes:h})}function n(s){let a=t.encode(s),c=YA.encodingLength(s.leafHashes.length),u=Buffer.allocUnsafe(c);YA.encode(s.leafHashes.length,u);let h=Buffer.concat([u,...s.leafHashes,a.value]);return Object.assign({},a,{value:h})}let i="{ masterFingerprint: Buffer; pubkey: Buffer; path: string; leafHashes: Buffer[]; }";function o(s){return Array.isArray(s.leafHashes)&&s.leafHashes.every(a=>Buffer.isBuffer(a)&&a.length===32)&&t.check(s)}return{decode:r,encode:n,check:o,expected:i,canAddToArray:t.canAddToArray}}zP.makeConverter=Hwe});var ij=W(GP=>{"use strict";l();d();Object.defineProperty(GP,"__esModule",{value:!0});function qwe(e){function t(s){if(s.key[0]!==e||s.key.length!==1)throw new Error("Decode Error: could not decode tapInternalKey with key 0x"+s.key.toString("hex"));if(s.value.length!==32)throw new Error("Decode Error: tapInternalKey not a 32-byte x-only pubkey");return s.value}function r(s){return{key:Buffer.from([e]),value:s}}let n="Buffer";function i(s){return Buffer.isBuffer(s)&&s.length===32}function o(s,a){return!!s&&!!a&&s.tapInternalKey===void 0}return{decode:t,encode:r,check:i,expected:n,canAdd:o}}GP.makeConverter=qwe});var oj=W($P=>{"use strict";l();d();Object.defineProperty($P,"__esModule",{value:!0});function jwe(e){function t(s){if(s.key[0]!==e)throw new Error("Decode Error: could not decode witnessScript with key 0x"+s.key.toString("hex"));return s.value}function r(s){return{key:Buffer.from([e]),value:s}}let n="Buffer";function i(s){return Buffer.isBuffer(s)}function o(s,a){return!!s&&!!a&&s.witnessScript===void 0}return{decode:t,encode:r,check:i,expected:n,canAdd:o}}$P.makeConverter=jwe});var ZA=W(cx=>{"use strict";l();d();Object.defineProperty(cx,"__esModule",{value:!0});var ts=ii(),Wwe=Aq(),zwe=Eq(),Gwe=kq(),$we=Pq(),Ywe=_q(),Zwe=Nq(),Jwe=Dq(),Xwe=Uq(),Qwe=Vq(),e1e=Fq(),t1e=jq(),r1e=zq(),n1e=Xq(),i1e=ej(),sj=qP(),YP=tj(),aj=rj(),cj=nj(),uj=ij(),fj=oj(),o1e={unsignedTx:zwe,globalXpub:Wwe,checkPubkey:YP.makeChecker([])};cx.globals=o1e;var s1e={nonWitnessUtxo:Ywe,partialSig:Zwe,sighashType:Xwe,finalScriptSig:Gwe,finalScriptWitness:$we,porCommitment:Jwe,witnessUtxo:n1e,bip32Derivation:sj.makeConverter(ts.InputTypes.BIP32_DERIVATION),redeemScript:aj.makeConverter(ts.InputTypes.REDEEM_SCRIPT),witnessScript:fj.makeConverter(ts.InputTypes.WITNESS_SCRIPT),checkPubkey:YP.makeChecker([ts.InputTypes.PARTIAL_SIG,ts.InputTypes.BIP32_DERIVATION]),tapKeySig:Qwe,tapScriptSig:r1e,tapLeafScript:e1e,tapBip32Derivation:cj.makeConverter(ts.InputTypes.TAP_BIP32_DERIVATION),tapInternalKey:uj.makeConverter(ts.InputTypes.TAP_INTERNAL_KEY),tapMerkleRoot:t1e};cx.inputs=s1e;var a1e={bip32Derivation:sj.makeConverter(ts.OutputTypes.BIP32_DERIVATION),redeemScript:aj.makeConverter(ts.OutputTypes.REDEEM_SCRIPT),witnessScript:fj.makeConverter(ts.OutputTypes.WITNESS_SCRIPT),checkPubkey:YP.makeChecker([ts.OutputTypes.BIP32_DERIVATION]),tapBip32Derivation:cj.makeConverter(ts.OutputTypes.TAP_BIP32_DERIVATION),tapTree:i1e,tapInternalKey:uj.makeConverter(ts.OutputTypes.TAP_INTERNAL_KEY)};cx.outputs=a1e});var hj=W(ux=>{"use strict";l();d();Object.defineProperty(ux,"__esModule",{value:!0});var Ur=ZA(),JA=GA(),lj=Ll(),St=ii();function c1e(e,t){let r=0;function n(){let P=lj.decode(e,r);r+=lj.encodingLength(P);let N=e.slice(r,r+P);return r+=P,N}function i(){let P=e.readUInt32BE(r);return r+=4,P}function o(){let P=e.readUInt8(r);return r+=1,P}function s(){let P=n(),N=n();return{key:P,value:N}}function a(){if(r>=e.length)throw new Error("Format Error: Unexpected End of PSBT");let P=e.readUInt8(r)===0;return P&&r++,P}if(i()!==1886610036)throw new Error("Format Error: Invalid Magic Number");if(o()!==255)throw new Error("Format Error: Magic Number must be followed by 0xff separator");let c=[],u={};for(;!a();){let P=s(),N=P.key.toString("hex");if(u[N])throw new Error("Format Error: Keys must be unique for global keymap: key "+N);u[N]=1,c.push(P)}let h=c.filter(P=>P.key[0]===St.GlobalTypes.UNSIGNED_TX);if(h.length!==1)throw new Error("Format Error: Only one UNSIGNED_TX allowed");let f=t(h[0].value),{inputCount:m,outputCount:b}=f.getInputOutputCounts(),w=[],S=[];for(let P of JA.range(m)){let N={},O=[];for(;!a();){let C=s(),L=C.key.toString("hex");if(N[L])throw new Error("Format Error: Keys must be unique for each input: input index "+P+" key "+L);N[L]=1,O.push(C)}w.push(O)}for(let P of JA.range(b)){let N={},O=[];for(;!a();){let C=s(),L=C.key.toString("hex");if(N[L])throw new Error("Format Error: Keys must be unique for each output: output index "+P+" key "+L);N[L]=1,O.push(C)}S.push(O)}return dj(f,{globalMapKeyVals:c,inputKeyVals:w,outputKeyVals:S})}ux.psbtFromBuffer=c1e;function wi(e,t,r){if(!t.equals(Buffer.from([r])))throw new Error(`Format Error: Invalid ${e} key: ${t.toString("hex")}`)}ux.checkKeyBuffer=wi;function dj(e,{globalMapKeyVals:t,inputKeyVals:r,outputKeyVals:n}){let i={unsignedTx:e},o=0;for(let h of t)switch(h.key[0]){case St.GlobalTypes.UNSIGNED_TX:if(wi("global",h.key,St.GlobalTypes.UNSIGNED_TX),o>0)throw new Error("Format Error: GlobalMap has multiple UNSIGNED_TX");o++;break;case St.GlobalTypes.GLOBAL_XPUB:i.globalXpub===void 0&&(i.globalXpub=[]),i.globalXpub.push(Ur.globals.globalXpub.decode(h));break;default:i.unknownKeyVals||(i.unknownKeyVals=[]),i.unknownKeyVals.push(h)}let s=r.length,a=n.length,c=[],u=[];for(let h of JA.range(s)){let f={};for(let m of r[h])switch(Ur.inputs.checkPubkey(m),m.key[0]){case St.InputTypes.NON_WITNESS_UTXO:if(wi("input",m.key,St.InputTypes.NON_WITNESS_UTXO),f.nonWitnessUtxo!==void 0)throw new Error("Format Error: Input has multiple NON_WITNESS_UTXO");f.nonWitnessUtxo=Ur.inputs.nonWitnessUtxo.decode(m);break;case St.InputTypes.WITNESS_UTXO:if(wi("input",m.key,St.InputTypes.WITNESS_UTXO),f.witnessUtxo!==void 0)throw new Error("Format Error: Input has multiple WITNESS_UTXO");f.witnessUtxo=Ur.inputs.witnessUtxo.decode(m);break;case St.InputTypes.PARTIAL_SIG:f.partialSig===void 0&&(f.partialSig=[]),f.partialSig.push(Ur.inputs.partialSig.decode(m));break;case St.InputTypes.SIGHASH_TYPE:if(wi("input",m.key,St.InputTypes.SIGHASH_TYPE),f.sighashType!==void 0)throw new Error("Format Error: Input has multiple SIGHASH_TYPE");f.sighashType=Ur.inputs.sighashType.decode(m);break;case St.InputTypes.REDEEM_SCRIPT:if(wi("input",m.key,St.InputTypes.REDEEM_SCRIPT),f.redeemScript!==void 0)throw new Error("Format Error: Input has multiple REDEEM_SCRIPT");f.redeemScript=Ur.inputs.redeemScript.decode(m);break;case St.InputTypes.WITNESS_SCRIPT:if(wi("input",m.key,St.InputTypes.WITNESS_SCRIPT),f.witnessScript!==void 0)throw new Error("Format Error: Input has multiple WITNESS_SCRIPT");f.witnessScript=Ur.inputs.witnessScript.decode(m);break;case St.InputTypes.BIP32_DERIVATION:f.bip32Derivation===void 0&&(f.bip32Derivation=[]),f.bip32Derivation.push(Ur.inputs.bip32Derivation.decode(m));break;case St.InputTypes.FINAL_SCRIPTSIG:wi("input",m.key,St.InputTypes.FINAL_SCRIPTSIG),f.finalScriptSig=Ur.inputs.finalScriptSig.decode(m);break;case St.InputTypes.FINAL_SCRIPTWITNESS:wi("input",m.key,St.InputTypes.FINAL_SCRIPTWITNESS),f.finalScriptWitness=Ur.inputs.finalScriptWitness.decode(m);break;case St.InputTypes.POR_COMMITMENT:wi("input",m.key,St.InputTypes.POR_COMMITMENT),f.porCommitment=Ur.inputs.porCommitment.decode(m);break;case St.InputTypes.TAP_KEY_SIG:wi("input",m.key,St.InputTypes.TAP_KEY_SIG),f.tapKeySig=Ur.inputs.tapKeySig.decode(m);break;case St.InputTypes.TAP_SCRIPT_SIG:f.tapScriptSig===void 0&&(f.tapScriptSig=[]),f.tapScriptSig.push(Ur.inputs.tapScriptSig.decode(m));break;case St.InputTypes.TAP_LEAF_SCRIPT:f.tapLeafScript===void 0&&(f.tapLeafScript=[]),f.tapLeafScript.push(Ur.inputs.tapLeafScript.decode(m));break;case St.InputTypes.TAP_BIP32_DERIVATION:f.tapBip32Derivation===void 0&&(f.tapBip32Derivation=[]),f.tapBip32Derivation.push(Ur.inputs.tapBip32Derivation.decode(m));break;case St.InputTypes.TAP_INTERNAL_KEY:wi("input",m.key,St.InputTypes.TAP_INTERNAL_KEY),f.tapInternalKey=Ur.inputs.tapInternalKey.decode(m);break;case St.InputTypes.TAP_MERKLE_ROOT:wi("input",m.key,St.InputTypes.TAP_MERKLE_ROOT),f.tapMerkleRoot=Ur.inputs.tapMerkleRoot.decode(m);break;default:f.unknownKeyVals||(f.unknownKeyVals=[]),f.unknownKeyVals.push(m)}c.push(f)}for(let h of JA.range(a)){let f={};for(let m of n[h])switch(Ur.outputs.checkPubkey(m),m.key[0]){case St.OutputTypes.REDEEM_SCRIPT:if(wi("output",m.key,St.OutputTypes.REDEEM_SCRIPT),f.redeemScript!==void 0)throw new Error("Format Error: Output has multiple REDEEM_SCRIPT");f.redeemScript=Ur.outputs.redeemScript.decode(m);break;case St.OutputTypes.WITNESS_SCRIPT:if(wi("output",m.key,St.OutputTypes.WITNESS_SCRIPT),f.witnessScript!==void 0)throw new Error("Format Error: Output has multiple WITNESS_SCRIPT");f.witnessScript=Ur.outputs.witnessScript.decode(m);break;case St.OutputTypes.BIP32_DERIVATION:f.bip32Derivation===void 0&&(f.bip32Derivation=[]),f.bip32Derivation.push(Ur.outputs.bip32Derivation.decode(m));break;case St.OutputTypes.TAP_INTERNAL_KEY:wi("output",m.key,St.OutputTypes.TAP_INTERNAL_KEY),f.tapInternalKey=Ur.outputs.tapInternalKey.decode(m);break;case St.OutputTypes.TAP_TREE:wi("output",m.key,St.OutputTypes.TAP_TREE),f.tapTree=Ur.outputs.tapTree.decode(m);break;case St.OutputTypes.TAP_BIP32_DERIVATION:f.tapBip32Derivation===void 0&&(f.tapBip32Derivation=[]),f.tapBip32Derivation.push(Ur.outputs.tapBip32Derivation.decode(m));break;default:f.unknownKeyVals||(f.unknownKeyVals=[]),f.unknownKeyVals.push(m)}u.push(f)}return{globalMap:i,inputs:c,outputs:u}}ux.psbtFromKeyVals=dj});var mj=W(XA=>{"use strict";l();d();Object.defineProperty(XA,"__esModule",{value:!0});var ZP=ZA(),pj=GA();function u1e({globalMap:e,inputs:t,outputs:r}){let{globalKeyVals:n,inputKeyVals:i,outputKeyVals:o}=yj({globalMap:e,inputs:t,outputs:r}),s=pj.keyValsToBuffer(n),a=f=>f.length===0?[Buffer.from([0])]:f.map(pj.keyValsToBuffer),c=a(i),u=a(o),h=Buffer.allocUnsafe(5);return h.writeUIntBE(482972169471,0,5),Buffer.concat([h,s].concat(c,u))}XA.psbtToBuffer=u1e;var f1e=(e,t)=>e.key.compare(t.key);function JP(e,t){let r=new Set,n=Object.entries(e).reduce((o,[s,a])=>{if(s==="unknownKeyVals")return o;let c=t[s];if(c===void 0)return o;let u=(Array.isArray(a)?a:[a]).map(c.encode);return u.map(f=>f.key.toString("hex")).forEach(f=>{if(r.has(f))throw new Error("Serialize Error: Duplicate key: "+f);r.add(f)}),o.concat(u)},[]),i=e.unknownKeyVals?e.unknownKeyVals.filter(o=>!r.has(o.key.toString("hex"))):[];return n.concat(i).sort(f1e)}function yj({globalMap:e,inputs:t,outputs:r}){return{globalKeyVals:JP(e,ZP.globals),inputKeyVals:t.map(n=>JP(n,ZP.inputs)),outputKeyVals:r.map(n=>JP(n,ZP.outputs))}}XA.psbtToKeyVals=yj});var XP=W(QA=>{"use strict";l();d();function gj(e){for(var t in e)QA.hasOwnProperty(t)||(QA[t]=e[t])}Object.defineProperty(QA,"__esModule",{value:!0});gj(hj());gj(mj())});var xj=W(tB=>{"use strict";l();d();Object.defineProperty(tB,"__esModule",{value:!0});var QP=XP();function l1e(e){let t=e[0],r=QP.psbtToKeyVals(t),n=e.slice(1);if(n.length===0)throw new Error("Combine: Nothing to combine");let i=bj(t);if(i===void 0)throw new Error("Combine: Self missing transaction");let o=by(r.globalKeyVals),s=r.inputKeyVals.map(by),a=r.outputKeyVals.map(by);for(let c of n){let u=bj(c);if(u===void 0||!u.toBuffer().equals(i.toBuffer()))throw new Error("Combine: One of the Psbts does not have the same transaction.");let h=QP.psbtToKeyVals(c);by(h.globalKeyVals).forEach(eB(o,r.globalKeyVals,h.globalKeyVals)),h.inputKeyVals.map(by).forEach((w,S)=>w.forEach(eB(s[S],r.inputKeyVals[S],h.inputKeyVals[S]))),h.outputKeyVals.map(by).forEach((w,S)=>w.forEach(eB(a[S],r.outputKeyVals[S],h.outputKeyVals[S])))}return QP.psbtFromKeyVals(i,{globalMapKeyVals:r.globalKeyVals,inputKeyVals:r.inputKeyVals,outputKeyVals:r.outputKeyVals})}tB.combine=l1e;function eB(e,t,r){return n=>{if(e.has(n))return;let i=r.filter(o=>o.key.toString("hex")===n)[0];t.push(i),e.add(n)}}function bj(e){return e.globalMap.unsignedTx}function by(e){let t=new Set;return e.forEach(r=>{let n=r.key.toString("hex");if(t.has(n))throw new Error("Combine: KeyValue Map keys should be unique");t.add(n)}),t}});var nB=W(Wi=>{"use strict";l();d();Object.defineProperty(Wi,"__esModule",{value:!0});var d1e=ZA();function Sj(e,t){let r=e[t];if(r===void 0)throw new Error(`No input #${t}`);return r}Wi.checkForInput=Sj;function vj(e,t){let r=e[t];if(r===void 0)throw new Error(`No output #${t}`);return r}Wi.checkForOutput=vj;function h1e(e,t,r){if(e.key[0]<r)throw new Error("Use the method for your specific key instead of addUnknownKeyVal*");if(t&&t.filter(n=>n.key.equals(e.key)).length!==0)throw new Error(`Duplicate Key: ${e.key.toString("hex")}`)}Wi.checkHasKey=h1e;function p1e(e){let t=0;return Object.keys(e).forEach(r=>{Number(isNaN(Number(r)))&&t++}),t}Wi.getEnumLength=p1e;function y1e(e,t){let r=!1;if(t.nonWitnessUtxo||t.witnessUtxo){let n=!!t.redeemScript,i=!!t.witnessScript,o=!n||!!t.finalScriptSig,s=!i||!!t.finalScriptWitness,a=!!t.finalScriptSig||!!t.finalScriptWitness;r=o&&s&&a}if(r===!1)throw new Error(`Input #${e} has too much or too little data to clean`)}Wi.inputCheckUncleanFinalized=y1e;function wj(e,t,r,n){throw new Error(`Data for ${e} key ${t} is incorrect: Expected ${r} and got ${JSON.stringify(n)}`)}function rB(e){return(t,r)=>{for(let n of Object.keys(t)){let i=t[n],{canAdd:o,canAddToArray:s,check:a,expected:c}=d1e[e+"s"][n]||{},u=!!s;if(a)if(u){if(!Array.isArray(i)||r[n]&&!Array.isArray(r[n]))throw new Error(`Key type ${n} must be an array`);i.every(a)||wj(e,n,c,i);let h=r[n]||[],f=new Set;if(!i.every(m=>s(h,m,f)))throw new Error("Can not add duplicate data to array");r[n]=h.concat(i)}else{if(a(i)||wj(e,n,c,i),!o(r,i))throw new Error(`Can not add duplicate data to ${e}`);r[n]=i}}}}Wi.updateGlobal=rB("global");Wi.updateInput=rB("input");Wi.updateOutput=rB("output");function m1e(e,t){let r=e.length-1,n=Sj(e,r);Wi.updateInput(t,n)}Wi.addInputAttributes=m1e;function g1e(e,t){let r=e.length-1,n=vj(e,r);Wi.updateOutput(t,n)}Wi.addOutputAttributes=g1e;function b1e(e,t){if(!Buffer.isBuffer(t)||t.length<4)throw new Error("Set Version: Invalid Transaction");return t.writeUInt32LE(e,0),t}Wi.defaultVersionSetter=b1e;function x1e(e,t){if(!Buffer.isBuffer(t)||t.length<4)throw new Error("Set Locktime: Invalid Transaction");return t.writeUInt32LE(e,t.length-4),t}Wi.defaultLocktimeSetter=x1e});var Ej=W(sB=>{"use strict";l();d();Object.defineProperty(sB,"__esModule",{value:!0});var w1e=xj(),Aj=XP(),iB=ii(),Si=nB(),oB=class{constructor(t){this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:t}}static fromBase64(t,r){let n=Buffer.from(t,"base64");return this.fromBuffer(n,r)}static fromHex(t,r){let n=Buffer.from(t,"hex");return this.fromBuffer(n,r)}static fromBuffer(t,r){let n=Aj.psbtFromBuffer(t,r),i=new this(n.globalMap.unsignedTx);return Object.assign(i,n),i}toBase64(){return this.toBuffer().toString("base64")}toHex(){return this.toBuffer().toString("hex")}toBuffer(){return Aj.psbtToBuffer(this)}updateGlobal(t){return Si.updateGlobal(t,this.globalMap),this}updateInput(t,r){let n=Si.checkForInput(this.inputs,t);return Si.updateInput(r,n),this}updateOutput(t,r){let n=Si.checkForOutput(this.outputs,t);return Si.updateOutput(r,n),this}addUnknownKeyValToGlobal(t){return Si.checkHasKey(t,this.globalMap.unknownKeyVals,Si.getEnumLength(iB.GlobalTypes)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(t),this}addUnknownKeyValToInput(t,r){let n=Si.checkForInput(this.inputs,t);return Si.checkHasKey(r,n.unknownKeyVals,Si.getEnumLength(iB.InputTypes)),n.unknownKeyVals||(n.unknownKeyVals=[]),n.unknownKeyVals.push(r),this}addUnknownKeyValToOutput(t,r){let n=Si.checkForOutput(this.outputs,t);return Si.checkHasKey(r,n.unknownKeyVals,Si.getEnumLength(iB.OutputTypes)),n.unknownKeyVals||(n.unknownKeyVals=[]),n.unknownKeyVals.push(r),this}addInput(t){this.globalMap.unsignedTx.addInput(t),this.inputs.push({unknownKeyVals:[]});let r=t.unknownKeyVals||[],n=this.inputs.length-1;if(!Array.isArray(r))throw new Error("unknownKeyVals must be an Array");return r.forEach(i=>this.addUnknownKeyValToInput(n,i)),Si.addInputAttributes(this.inputs,t),this}addOutput(t){this.globalMap.unsignedTx.addOutput(t),this.outputs.push({unknownKeyVals:[]});let r=t.unknownKeyVals||[],n=this.outputs.length-1;if(!Array.isArray(r))throw new Error("unknownKeyVals must be an Array");return r.forEach(i=>this.addUnknownKeyValToOutput(n,i)),Si.addOutputAttributes(this.outputs,t),this}clearFinalizedInput(t){let r=Si.checkForInput(this.inputs,t);Si.inputCheckUncleanFinalized(t,r);for(let n of Object.keys(r))["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(n)||delete r[n];return this}combine(...t){let r=w1e.combine([this].concat(t));return Object.assign(this,r),this}getTransaction(){return this.globalMap.unsignedTx.toBuffer()}};sB.Psbt=oB});var tE=W(Br=>{"use strict";l();d();Object.defineProperty(Br,"__esModule",{value:!0});Br.signatureBlocksAction=Br.checkInputForSig=Br.pubkeyInScript=Br.pubkeyPositionInScript=Br.witnessStackToScriptWitness=Br.isP2TR=Br.isP2SHScript=Br.isP2WSHScript=Br.isP2WPKH=Br.isP2PKH=Br.isP2PK=Br.isP2MS=void 0;var Ij=Ll(),fx=ao(),eE=gy(),S1e=_c(),Oh=yy();function Uh(e){return t=>{try{return e({output:t}),!0}catch{return!1}}}Br.isP2MS=Uh(Oh.p2ms);Br.isP2PK=Uh(Oh.p2pk);Br.isP2PKH=Uh(Oh.p2pkh);Br.isP2WPKH=Uh(Oh.p2wpkh);Br.isP2WSHScript=Uh(Oh.p2wsh);Br.isP2SHScript=Uh(Oh.p2sh);Br.isP2TR=Uh(Oh.p2tr);function v1e(e){let t=Buffer.allocUnsafe(0);function r(s){t=Buffer.concat([t,Buffer.from(s)])}function n(s){let a=t.length,c=Ij.encodingLength(s);t=Buffer.concat([t,Buffer.allocUnsafe(c)]),Ij.encode(s,t,a)}function i(s){n(s.length),r(s)}function o(s){n(s.length),s.forEach(i)}return o(e),t}Br.witnessStackToScriptWitness=v1e;function kj(e,t){let r=(0,S1e.hash160)(e),n=e.slice(1,33),i=fx.decompile(t);if(i===null)throw new Error("Unknown script error");return i.findIndex(o=>typeof o=="number"?!1:o.equals(e)||o.equals(r)||o.equals(n))}Br.pubkeyPositionInScript=kj;function A1e(e,t){return kj(e,t)!==-1}Br.pubkeyInScript=A1e;function E1e(e,t){return I1e(e).some(n=>Tj(n,fx.signature.decode,t))}Br.checkInputForSig=E1e;function Tj(e,t,r){let{hashType:n}=t(e),i=[];switch(n&eE.Transaction.SIGHASH_ANYONECANPAY&&i.push("addInput"),n&31){case eE.Transaction.SIGHASH_ALL:break;case eE.Transaction.SIGHASH_SINGLE:case eE.Transaction.SIGHASH_NONE:i.push("addOutput"),i.push("setInputSequence");break}return i.indexOf(r)===-1}Br.signatureBlocksAction=Tj;function I1e(e){let t=[];if((e.partialSig||[]).length===0){if(!e.finalScriptSig&&!e.finalScriptWitness)return[];t=k1e(e)}else t=e.partialSig;return t.map(r=>r.signature)}function k1e(e){let t=e.finalScriptSig?fx.decompile(e.finalScriptSig)||[]:[],r=e.finalScriptWitness?fx.decompile(e.finalScriptWitness)||[]:[];return t.concat(r).filter(n=>Buffer.isBuffer(n)&&fx.isCanonicalScriptSignature(n)).map(n=>({signature:n}))}});var Bj=W(zr=>{"use strict";l();d();Object.defineProperty(zr,"__esModule",{value:!0});zr.checkTaprootInputForSigs=zr.tapTreeFromList=zr.tapTreeToList=zr.tweakInternalPubKey=zr.checkTaprootOutputFields=zr.checkTaprootInputFields=zr.isTaprootOutput=zr.isTaprootInput=zr.serializeTaprootSignature=zr.tapScriptFinalizer=zr.toXOnly=void 0;var fB=xi(),T1e=gy(),iE=tE(),Kl=LA(),P1e=yy(),B1e=tE(),_1e=e=>e.length===32?e:e.slice(1,33);zr.toXOnly=_1e;function C1e(e,t,r){let n=Y1e(t,e,r);try{let o=G1e(t,n).concat(n.script).concat(n.controlBlock);return{finalScriptWitness:(0,iE.witnessStackToScriptWitness)(o)}}catch(i){throw new Error(`Can not finalize taproot input #${e}: ${i}`)}}zr.tapScriptFinalizer=C1e;function N1e(e,t){let r=t?Buffer.from([t]):Buffer.from([]);return Buffer.concat([e,r])}zr.serializeTaprootSignature=N1e;function rE(e){return e&&!!(e.tapInternalKey||e.tapMerkleRoot||e.tapLeafScript&&e.tapLeafScript.length||e.tapBip32Derivation&&e.tapBip32Derivation.length||e.witnessUtxo&&(0,iE.isP2TR)(e.witnessUtxo.script))}zr.isTaprootInput=rE;function nE(e,t){return e&&!!(e.tapInternalKey||e.tapTree||e.tapBip32Derivation&&e.tapBip32Derivation.length||t&&(0,iE.isP2TR)(t))}zr.isTaprootOutput=nE;function M1e(e,t,r){j1e(e,t,r),z1e(e,t,r)}zr.checkTaprootInputFields=M1e;function D1e(e,t,r){W1e(e,t,r),O1e(e,t)}zr.checkTaprootOutputFields=D1e;function O1e(e,t){if(!t.tapTree&&!t.tapInternalKey)return;let r=t.tapInternalKey||e.tapInternalKey,n=t.tapTree||e.tapTree;if(r){let{script:i}=e,o=U1e(r,n);if(i&&!i.equals(o))throw new Error("Error adding output. Script or address missmatch.")}}function U1e(e,t){let r=t&&Pj(t.leaves),{output:n}=(0,P1e.p2tr)({internalPubkey:e,scriptTree:r});return n}function R1e(e,t){let r=t.tapInternalKey,n=r&&(0,Kl.tweakKey)(r,t.tapMerkleRoot);if(!n)throw new Error(`Cannot tweak tap internal key for input #${e}. Public key: ${r&&r.toString("hex")}`);return n.x}zr.tweakInternalPubKey=R1e;function L1e(e){if(!(0,fB.isTaptree)(e))throw new Error("Cannot convert taptree to tapleaf list. Expecting a tapree structure.");return cB(e)}zr.tapTreeToList=L1e;function Pj(e=[]){return e.length===1&&e[0].depth===0?{output:e[0].script,version:e[0].leafVersion}:q1e(e)}zr.tapTreeFromList=Pj;function V1e(e,t){return F1e(e).some(n=>(0,B1e.signatureBlocksAction)(n,K1e,t))}zr.checkTaprootInputForSigs=V1e;function K1e(e){return{signature:e.slice(0,64),hashType:e.slice(64)[0]||T1e.Transaction.SIGHASH_DEFAULT}}function F1e(e){let t=[];if(e.tapKeySig&&t.push(e.tapKeySig),e.tapScriptSig&&t.push(...e.tapScriptSig.map(r=>r.signature)),!t.length){let r=H1e(e.finalScriptWitness);r&&t.push(r)}return t}function H1e(e){if(!e)return;let t=e.slice(2);if(t.length===64||t.length===65)return t}function cB(e,t=[],r=0){if(r>Kl.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");return e?(0,fB.isTapleaf)(e)?(t.push({depth:r,leafVersion:e.version||Kl.LEAF_VERSION_TAPSCRIPT,script:e.output}),t):(e[0]&&cB(e[0],t,r+1),e[1]&&cB(e[1],t,r+1),t):[]}function q1e(e){let t;for(let r of e)if(t=uB(r,t),!t)throw new Error("No room left to insert tapleaf in tree");return t}function uB(e,t,r=0){if(r>Kl.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");if(e.depth===r)return t?void 0:{output:e.script,version:e.leafVersion};if((0,fB.isTapleaf)(t))return;let n=uB(e,t&&t[0],r+1);if(n)return[n,t&&t[1]];let i=uB(e,t&&t[1],r+1);if(i)return[t&&t[0],i]}function j1e(e,t,r){let n=rE(e)&&xy(t),i=xy(e)&&rE(t),o=e===t&&rE(t)&&xy(t);if(n||i||o)throw new Error(`Invalid arguments for Psbt.${r}. Cannot use both taproot and non-taproot fields.`)}function W1e(e,t,r){let n=nE(e)&&xy(t),i=xy(e)&&nE(t),o=e===t&&nE(t)&&xy(t);if(n||i||o)throw new Error(`Invalid arguments for Psbt.${r}. Cannot use both taproot and non-taproot fields.`)}function z1e(e,t,r){if(t.tapMerkleRoot){let n=(t.tapLeafScript||[]).every(o=>aB(o,t.tapMerkleRoot)),i=(e.tapLeafScript||[]).every(o=>aB(o,t.tapMerkleRoot));if(!n||!i)throw new Error(`Invalid arguments for Psbt.${r}. Tapleaf not part of taptree.`)}else if(e.tapMerkleRoot&&!(t.tapLeafScript||[]).every(i=>aB(i,e.tapMerkleRoot)))throw new Error(`Invalid arguments for Psbt.${r}. Tapleaf not part of taptree.`)}function aB(e,t){if(!t)return!0;let r=(0,Kl.tapleafHash)({output:e.script,version:e.leafVersion});return(0,Kl.rootHashFromPath)(e.controlBlock,r).equals(t)}function G1e(e,t){let r=(0,Kl.tapleafHash)({output:t.script,version:t.leafVersion});return(e.tapScriptSig||[]).filter(n=>n.leafHash.equals(r)).map(n=>$1e(t.script,n)).sort((n,i)=>i.positionInScript-n.positionInScript).map(n=>n.signature)}function $1e(e,t){return Object.assign({positionInScript:(0,iE.pubkeyPositionInScript)(t.pubkey,e)},t)}function Y1e(e,t,r){if(!e.tapScriptSig||!e.tapScriptSig.length)throw new Error(`Can not finalize taproot input #${t}. No tapleaf script signature provided.`);let n=(e.tapLeafScript||[]).sort((i,o)=>i.controlBlock.length-o.controlBlock.length).find(i=>Z1e(i,e.tapScriptSig,r));if(!n)throw new Error(`Can not finalize taproot input #${t}. Signature for tapleaf script not found.`);return n}function Z1e(e,t,r){let n=(0,Kl.tapleafHash)({output:e.script,version:e.leafVersion});return(!r||r.equals(n))&&t.find(o=>o.leafHash.equals(n))!==void 0}function xy(e){return e&&!!(e.redeemScript||e.witnessScript||e.bip32Derivation&&e.bip32Derivation.length)}});var Qj=W(lE=>{"use strict";l();d();Object.defineProperty(lE,"__esModule",{value:!0});lE.Psbt=void 0;var _j=Ej(),Cj=Ll(),ho=nB(),Nj=DP(),sE=ix(),J1e=Rs(),Fs=yy(),X1e=LA(),$u=ao(),vi=gy(),nn=Bj(),An=tE(),Q1e={network:J1e.bitcoin,maximumFeeRate:5e3},dB=class e{static fromBase64(t,r={}){let n=Buffer.from(t,"base64");return this.fromBuffer(n,r)}static fromHex(t,r={}){let n=Buffer.from(t,"hex");return this.fromBuffer(n,r)}static fromBuffer(t,r={}){let n=_j.Psbt.fromBuffer(t,e2e),i=new e(r,n);return o2e(i.__CACHE.__TX,i.__CACHE),i}constructor(t={},r=new _j.Psbt(new aE)){this.data=r,this.opts=Object.assign({},Q1e,t),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},this.data.inputs.length===0&&this.setVersion(2);let n=(i,o,s,a)=>Object.defineProperty(i,o,{enumerable:s,writable:a});n(this,"__CACHE",!1,!0),n(this,"opts",!1,!0)}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version(t){this.setVersion(t)}get locktime(){return this.__CACHE.__TX.locktime}set locktime(t){this.setLocktime(t)}get txInputs(){return this.__CACHE.__TX.ins.map(t=>({hash:(0,sE.cloneBuffer)(t.hash),index:t.index,sequence:t.sequence}))}get txOutputs(){return this.__CACHE.__TX.outs.map(t=>{let r;try{r=(0,Nj.fromOutputScript)(t.script,this.opts.network)}catch{}return{script:(0,sE.cloneBuffer)(t.script),value:t.value,address:r}})}combine(...t){return this.data.combine(...t.map(r=>r.data)),this}clone(){let t=e.fromBuffer(this.data.toBuffer());return t.opts=JSON.parse(JSON.stringify(this.opts)),t}setMaximumFeeRate(t){oE(t),this.opts.maximumFeeRate=t}setVersion(t){oE(t),lx(this.data.inputs,"setVersion");let r=this.__CACHE;return r.__TX.version=t,r.__EXTRACTED_TX=void 0,this}setLocktime(t){oE(t),lx(this.data.inputs,"setLocktime");let r=this.__CACHE;return r.__TX.locktime=t,r.__EXTRACTED_TX=void 0,this}setInputSequence(t,r){oE(r),lx(this.data.inputs,"setInputSequence");let n=this.__CACHE;if(n.__TX.ins.length<=t)throw new Error("Input index too high");return n.__TX.ins[t].sequence=r,n.__EXTRACTED_TX=void 0,this}addInputs(t){return t.forEach(r=>this.addInput(r)),this}addInput(t){if(arguments.length>1||!t||t.hash===void 0||t.index===void 0)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");(0,nn.checkTaprootInputFields)(t,t,"addInput"),lx(this.data.inputs,"addInput"),t.witnessScript&&cE(t.witnessScript);let r=this.__CACHE;this.data.addInput(t);let n=r.__TX.ins[r.__TX.ins.length-1];qj(r,n);let i=this.data.inputs.length-1,o=this.data.inputs[i];return o.nonWitnessUtxo&&pB(this.__CACHE,o,i),r.__FEE=void 0,r.__FEE_RATE=void 0,r.__EXTRACTED_TX=void 0,this}addOutputs(t){return t.forEach(r=>this.addOutput(r)),this}addOutput(t){if(arguments.length>1||!t||t.value===void 0||t.address===void 0&&t.script===void 0)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");lx(this.data.inputs,"addOutput");let{address:r}=t;if(typeof r=="string"){let{network:i}=this.opts,o=(0,Nj.toOutputScript)(r,i);t=Object.assign(t,{script:o})}(0,nn.checkTaprootOutputFields)(t,t,"addOutput");let n=this.__CACHE;return this.data.addOutput(t),n.__FEE=void 0,n.__FEE_RATE=void 0,n.__EXTRACTED_TX=void 0,this}extractTransaction(t){if(!this.data.inputs.every(Fj))throw new Error("Not finalized");let r=this.__CACHE;if(t||r2e(this,r,this.opts),r.__EXTRACTED_TX)return r.__EXTRACTED_TX;let n=r.__TX.clone();return Yj(this.data.inputs,n,r,!0),n}getFeeRate(){return Rj("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return Rj("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return(0,ho.checkForInput)(this.data.inputs,0),dx(this.data.inputs.length).forEach(t=>this.finalizeInput(t)),this}finalizeInput(t,r){let n=(0,ho.checkForInput)(this.data.inputs,t);return(0,nn.isTaprootInput)(n)?this._finalizeTaprootInput(t,n,void 0,r):this._finalizeInput(t,n,r)}finalizeTaprootInput(t,r,n=nn.tapScriptFinalizer){let i=(0,ho.checkForInput)(this.data.inputs,t);if((0,nn.isTaprootInput)(i))return this._finalizeTaprootInput(t,i,r,n);throw new Error(`Cannot finalize input #${t}. Not Taproot.`)}_finalizeInput(t,r,n=s2e){let{script:i,isP2SH:o,isP2WSH:s,isSegwit:a}=f2e(t,r,this.__CACHE);if(!i)throw new Error(`No script found for input #${t}`);n2e(r);let{finalScriptSig:c,finalScriptWitness:u}=n(t,r,i,a,o,s);if(c&&this.data.updateInput(t,{finalScriptSig:c}),u&&this.data.updateInput(t,{finalScriptWitness:u}),!c&&!u)throw new Error(`Unknown error finalizing input #${t}`);return this.data.clearFinalizedInput(t),this}_finalizeTaprootInput(t,r,n,i=nn.tapScriptFinalizer){if(!r.witnessUtxo)throw new Error(`Cannot finalize input #${t}. Missing withness utxo.`);if(r.tapKeySig){let o=Fs.p2tr({output:r.witnessUtxo.script,signature:r.tapKeySig}),s=(0,An.witnessStackToScriptWitness)(o.witness);this.data.updateInput(t,{finalScriptWitness:s})}else{let{finalScriptWitness:o}=i(t,r,n);this.data.updateInput(t,{finalScriptWitness:o})}return this.data.clearFinalizedInput(t),this}getInputType(t){let r=(0,ho.checkForInput)(this.data.inputs,t),n=Zj(t,r,this.__CACHE),i=fE(n,t,"input",r.redeemScript||y2e(r.finalScriptSig),r.witnessScript||m2e(r.finalScriptWitness)),o=i.type==="raw"?"":i.type+"-",s=Xj(i.meaningfulScript);return o+s}inputHasPubkey(t,r){let n=(0,ho.checkForInput)(this.data.inputs,t);return h2e(r,n,t,this.__CACHE)}inputHasHDKey(t,r){let n=(0,ho.checkForInput)(this.data.inputs,t),i=Dj(r);return!!n.bip32Derivation&&n.bip32Derivation.some(i)}outputHasPubkey(t,r){let n=(0,ho.checkForOutput)(this.data.outputs,t);return p2e(r,n,t,this.__CACHE)}outputHasHDKey(t,r){let n=(0,ho.checkForOutput)(this.data.outputs,t),i=Dj(r);return!!n.bip32Derivation&&n.bip32Derivation.some(i)}validateSignaturesOfAllInputs(t){return(0,ho.checkForInput)(this.data.inputs,0),dx(this.data.inputs.length).map(n=>this.validateSignaturesOfInput(n,t)).reduce((n,i)=>i===!0&&n,!0)}validateSignaturesOfInput(t,r,n){let i=this.data.inputs[t];return(0,nn.isTaprootInput)(i)?this.validateSignaturesOfTaprootInput(t,r,n):this._validateSignaturesOfInput(t,r,n)}_validateSignaturesOfInput(t,r,n){let i=this.data.inputs[t],o=(i||{}).partialSig;if(!i||!o||o.length<1)throw new Error("No signatures to validate");if(typeof r!="function")throw new Error("Need validator function to validate signatures");let s=n?o.filter(f=>f.pubkey.equals(n)):o;if(s.length<1)throw new Error("No signatures for this pubkey");let a=[],c,u,h;for(let f of s){let m=$u.signature.decode(f.signature),{hash:b,script:w}=h!==m.hashType?Wj(t,Object.assign({},i,{sighashType:m.hashType}),this.__CACHE,!0):{hash:c,script:u};h=m.hashType,c=b,u=w,Hj(f.pubkey,w,"verify"),a.push(r(f.pubkey,b,m.signature))}return a.every(f=>f===!0)}validateSignaturesOfTaprootInput(t,r,n){let i=this.data.inputs[t],o=(i||{}).tapKeySig,s=(i||{}).tapScriptSig;if(!i&&!o&&!(s&&!s.length))throw new Error("No signatures to validate");if(typeof r!="function")throw new Error("Need validator function to validate signatures");n=n&&(0,nn.toXOnly)(n);let a=n?hB(t,i,this.data.inputs,n,this.__CACHE):c2e(t,i,this.data.inputs,this.__CACHE);if(!a.length)throw new Error("No signatures for this pubkey");let c=a.find(h=>!h.leafHash),u=0;if(o&&c){if(!r(c.pubkey,c.hash,Vj(o)))return!1;u++}if(s)for(let h of s){let f=a.find(m=>h.pubkey.equals(m.pubkey));if(f){if(!r(h.pubkey,f.hash,Vj(h.signature)))return!1;u++}}return u>0}signAllInputsHD(t,r=[vi.Transaction.SIGHASH_ALL]){if(!t||!t.publicKey||!t.fingerprint)throw new Error("Need HDSigner to sign input");let n=[];for(let i of dx(this.data.inputs.length))try{this.signInputHD(i,t,r),n.push(!0)}catch{n.push(!1)}if(n.every(i=>i===!1))throw new Error("No inputs were signed");return this}signAllInputsHDAsync(t,r=[vi.Transaction.SIGHASH_ALL]){return new Promise((n,i)=>{if(!t||!t.publicKey||!t.fingerprint)return i(new Error("Need HDSigner to sign input"));let o=[],s=[];for(let a of dx(this.data.inputs.length))s.push(this.signInputHDAsync(a,t,r).then(()=>{o.push(!0)},()=>{o.push(!1)}));return Promise.all(s).then(()=>{if(o.every(a=>a===!1))return i(new Error("No inputs were signed"));n()})})}signInputHD(t,r,n=[vi.Transaction.SIGHASH_ALL]){if(!r||!r.publicKey||!r.fingerprint)throw new Error("Need HDSigner to sign input");return Kj(t,this.data.inputs,r).forEach(o=>this.signInput(t,o,n)),this}signInputHDAsync(t,r,n=[vi.Transaction.SIGHASH_ALL]){return new Promise((i,o)=>{if(!r||!r.publicKey||!r.fingerprint)return o(new Error("Need HDSigner to sign input"));let a=Kj(t,this.data.inputs,r).map(c=>this.signInputAsync(t,c,n));return Promise.all(a).then(()=>{i()}).catch(o)})}signAllInputs(t,r){if(!t||!t.publicKey)throw new Error("Need Signer to sign input");let n=[];for(let i of dx(this.data.inputs.length))try{this.signInput(i,t,r),n.push(!0)}catch{n.push(!1)}if(n.every(i=>i===!1))throw new Error("No inputs were signed");return this}signAllInputsAsync(t,r){return new Promise((n,i)=>{if(!t||!t.publicKey)return i(new Error("Need Signer to sign input"));let o=[],s=[];for(let[a]of this.data.inputs.entries())s.push(this.signInputAsync(a,t,r).then(()=>{o.push(!0)},()=>{o.push(!1)}));return Promise.all(s).then(()=>{if(o.every(a=>a===!1))return i(new Error("No inputs were signed"));n()})})}signInput(t,r,n){if(!r||!r.publicKey)throw new Error("Need Signer to sign input");let i=(0,ho.checkForInput)(this.data.inputs,t);return(0,nn.isTaprootInput)(i)?this._signTaprootInput(t,i,r,void 0,n):this._signInput(t,r,n)}signTaprootInput(t,r,n,i){if(!r||!r.publicKey)throw new Error("Need Signer to sign input");let o=(0,ho.checkForInput)(this.data.inputs,t);if((0,nn.isTaprootInput)(o))return this._signTaprootInput(t,o,r,n,i);throw new Error(`Input #${t} is not of type Taproot.`)}_signInput(t,r,n=[vi.Transaction.SIGHASH_ALL]){let{hash:i,sighashType:o}=Lj(this.data.inputs,t,r.publicKey,this.__CACHE,n),s=[{pubkey:r.publicKey,signature:$u.signature.encode(r.sign(i),o)}];return this.data.updateInput(t,{partialSig:s}),this}_signTaprootInput(t,r,n,i,o=[vi.Transaction.SIGHASH_DEFAULT]){let s=this.checkTaprootHashesForSig(t,r,n,i,o),a=s.filter(u=>!u.leafHash).map(u=>(0,nn.serializeTaprootSignature)(n.signSchnorr(u.hash),r.sighashType))[0],c=s.filter(u=>!!u.leafHash).map(u=>({pubkey:(0,nn.toXOnly)(n.publicKey),signature:(0,nn.serializeTaprootSignature)(n.signSchnorr(u.hash),r.sighashType),leafHash:u.leafHash}));return a&&this.data.updateInput(t,{tapKeySig:a}),c.length&&this.data.updateInput(t,{tapScriptSig:c}),this}signInputAsync(t,r,n){return Promise.resolve().then(()=>{if(!r||!r.publicKey)throw new Error("Need Signer to sign input");let i=(0,ho.checkForInput)(this.data.inputs,t);return(0,nn.isTaprootInput)(i)?this._signTaprootInputAsync(t,i,r,void 0,n):this._signInputAsync(t,r,n)})}signTaprootInputAsync(t,r,n,i){return Promise.resolve().then(()=>{if(!r||!r.publicKey)throw new Error("Need Signer to sign input");let o=(0,ho.checkForInput)(this.data.inputs,t);if((0,nn.isTaprootInput)(o))return this._signTaprootInputAsync(t,o,r,n,i);throw new Error(`Input #${t} is not of type Taproot.`)})}_signInputAsync(t,r,n=[vi.Transaction.SIGHASH_ALL]){let{hash:i,sighashType:o}=Lj(this.data.inputs,t,r.publicKey,this.__CACHE,n);return Promise.resolve(r.sign(i)).then(s=>{let a=[{pubkey:r.publicKey,signature:$u.signature.encode(s,o)}];this.data.updateInput(t,{partialSig:a})})}async _signTaprootInputAsync(t,r,n,i,o=[vi.Transaction.SIGHASH_DEFAULT]){let s=this.checkTaprootHashesForSig(t,r,n,i,o),a=[],c=s.filter(h=>!h.leafHash)[0];if(c){let h=Promise.resolve(n.signSchnorr(c.hash)).then(f=>({tapKeySig:(0,nn.serializeTaprootSignature)(f,r.sighashType)}));a.push(h)}let u=s.filter(h=>!!h.leafHash);if(u.length){let h=u.map(f=>Promise.resolve(n.signSchnorr(f.hash)).then(m=>({tapScriptSig:[{pubkey:(0,nn.toXOnly)(n.publicKey),signature:(0,nn.serializeTaprootSignature)(m,r.sighashType),leafHash:f.leafHash}]})));a.push(...h)}return Promise.all(a).then(h=>{h.forEach(f=>this.data.updateInput(t,f))})}checkTaprootHashesForSig(t,r,n,i,o){if(typeof n.signSchnorr!="function")throw new Error(`Need Schnorr Signer to sign taproot input #${t}.`);let s=hB(t,r,this.data.inputs,n.publicKey,this.__CACHE,i,o);if(!s||!s.length)throw new Error(`Can not sign for input #${t} with the key ${n.publicKey.toString("hex")}`);return s}toBuffer(){return lB(this.__CACHE),this.data.toBuffer()}toHex(){return lB(this.__CACHE),this.data.toHex()}toBase64(){return lB(this.__CACHE),this.data.toBase64()}updateGlobal(t){return this.data.updateGlobal(t),this}updateInput(t,r){return r.witnessScript&&cE(r.witnessScript),(0,nn.checkTaprootInputFields)(this.data.inputs[t],r,"updateInput"),this.data.updateInput(t,r),r.nonWitnessUtxo&&pB(this.__CACHE,this.data.inputs[t],t),this}updateOutput(t,r){let n=this.data.outputs[t];return(0,nn.checkTaprootOutputFields)(n,r,"updateOutput"),this.data.updateOutput(t,r),this}addUnknownKeyValToGlobal(t){return this.data.addUnknownKeyValToGlobal(t),this}addUnknownKeyValToInput(t,r){return this.data.addUnknownKeyValToInput(t,r),this}addUnknownKeyValToOutput(t,r){return this.data.addUnknownKeyValToOutput(t,r),this}clearFinalizedInput(t){return this.data.clearFinalizedInput(t),this}};lE.Psbt=dB;var e2e=e=>new aE(e),aE=class{constructor(t=Buffer.from([2,0,0,0,0,0,0,0,0,0])){this.tx=vi.Transaction.fromBuffer(t),i2e(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(t){if(t.hash===void 0||t.index===void 0||!Buffer.isBuffer(t.hash)&&typeof t.hash!="string"||typeof t.index!="number")throw new Error("Error adding input.");let r=typeof t.hash=="string"?(0,sE.reverseBuffer)(Buffer.from(t.hash,"hex")):t.hash;this.tx.addInput(r,t.index,t.sequence)}addOutput(t){if(t.script===void 0||t.value===void 0||!Buffer.isBuffer(t.script)||typeof t.value!="number")throw new Error("Error adding output.");this.tx.addOutput(t.script,t.value)}toBuffer(){return this.tx.toBuffer()}};function t2e(e,t,r){switch(r){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return Mj(1,e.partialSig);case"multisig":let n=Fs.p2ms({output:t});return Mj(n.m,e.partialSig,n.pubkeys);default:return!1}}function lB(e){if(e.__UNSAFE_SIGN_NONSEGWIT!==!1)throw new Error("Not BIP174 compliant, can not export")}function Mj(e,t,r){if(!t)return!1;let n;if(r?n=r.map(i=>{let o=g2e(i);return t.find(s=>s.pubkey.equals(o))}).filter(i=>!!i):n=t,n.length>e)throw new Error("Too many signatures");return n.length===e}function Fj(e){return!!e.finalScriptSig||!!e.finalScriptWitness}function Dj(e){return t=>!(!t.masterFingerprint.equals(e.fingerprint)||!e.derivePath(t.path).publicKey.equals(t.pubkey))}function oE(e){if(typeof e!="number"||e!==Math.floor(e)||e>4294967295||e<0)throw new Error("Invalid 32 bit integer")}function r2e(e,t,r){let n=t.__FEE_RATE||e.getFeeRate(),i=t.__EXTRACTED_TX.virtualSize(),o=n*i;if(n>=r.maximumFeeRate)throw new Error(`Warning: You are paying around ${(o/1e8).toFixed(8)} in fees, which is ${n} satoshi per byte for a transaction with a VSize of ${i} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}function lx(e,t){e.forEach(r=>{if((0,nn.isTaprootInput)(r)?(0,nn.checkTaprootInputForSigs)(r,t):(0,An.checkInputForSig)(r,t))throw new Error("Can not modify transaction, signatures exist.")})}function n2e(e){if(!e.sighashType||!e.partialSig)return;let{partialSig:t,sighashType:r}=e;t.forEach(n=>{let{hashType:i}=$u.signature.decode(n.signature);if(r!==i)throw new Error("Signature sighash does not match input sighash type")})}function Hj(e,t,r){if(!(0,An.pubkeyInScript)(e,t))throw new Error(`Can not ${r} for this input with the key ${e.toString("hex")}`)}function i2e(e){if(!e.ins.every(r=>r.script&&r.script.length===0&&r.witness&&r.witness.length===0))throw new Error("Format Error: Transaction ScriptSigs are not empty")}function o2e(e,t){e.ins.forEach(r=>{qj(t,r)})}function qj(e,t){let r=(0,sE.reverseBuffer)(Buffer.from(t.hash)).toString("hex")+":"+t.index;if(e.__TX_IN_CACHE[r])throw new Error("Duplicate input detected.");e.__TX_IN_CACHE[r]=1}function jj(e,t){return(r,n,i,o)=>{let s=e({redeem:{output:i}}).output;if(!n.equals(s))throw new Error(`${t} for ${o} #${r} doesn't match the scriptPubKey in the prevout`)}}var Oj=jj(Fs.p2sh,"Redeem script"),Uj=jj(Fs.p2wsh,"Witness script");function Rj(e,t,r,n){if(!r.every(Fj))throw new Error(`PSBT must be finalized to calculate ${t}`);if(e==="__FEE_RATE"&&n.__FEE_RATE)return n.__FEE_RATE;if(e==="__FEE"&&n.__FEE)return n.__FEE;let i,o=!0;if(n.__EXTRACTED_TX?(i=n.__EXTRACTED_TX,o=!1):i=n.__TX.clone(),Yj(r,i,n,o),e==="__FEE_RATE")return n.__FEE_RATE;if(e==="__FEE")return n.__FEE}function s2e(e,t,r,n,i,o){let s=Xj(r);if(!t2e(t,r,s))throw new Error(`Can not finalize input #${e}`);return a2e(r,s,t.partialSig,n,i,o)}function a2e(e,t,r,n,i,o){let s,a,c=u2e(e,t,r),u=o?Fs.p2wsh({redeem:c}):null,h=i?Fs.p2sh({redeem:u||c}):null;return n?(u?a=(0,An.witnessStackToScriptWitness)(u.witness):a=(0,An.witnessStackToScriptWitness)(c.witness),h&&(s=h.input)):h?s=h.input:s=c.input,{finalScriptSig:s,finalScriptWitness:a}}function Lj(e,t,r,n,i){let o=(0,ho.checkForInput)(e,t),{hash:s,sighashType:a,script:c}=Wj(t,o,n,!1,i);return Hj(r,c,"sign"),{hash:s,sighashType:a}}function Wj(e,t,r,n,i){let o=r.__TX,s=t.sighashType||vi.Transaction.SIGHASH_ALL;Gj(s,i);let a,c;if(t.nonWitnessUtxo){let f=uE(r,t,e),m=o.ins[e].hash,b=f.getHash();if(!m.equals(b))throw new Error(`Non-witness UTXO hash for input #${e} doesn't match the hash specified in the prevout`);let w=o.ins[e].index;c=f.outs[w]}else if(t.witnessUtxo)c=t.witnessUtxo;else throw new Error("Need a Utxo input item for signing");let{meaningfulScript:u,type:h}=fE(c.script,e,"input",t.redeemScript,t.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(h)>=0)a=o.hashForWitnessV0(e,u,c.value,s);else if((0,An.isP2WPKH)(u)){let f=Fs.p2pkh({hash:u.slice(2)}).output;a=o.hashForWitnessV0(e,f,c.value,s)}else{if(t.nonWitnessUtxo===void 0&&r.__UNSAFE_SIGN_NONSEGWIT===!1)throw new Error(`Input #${e} has witnessUtxo but non-segwit script: ${u.toString("hex")}`);!n&&r.__UNSAFE_SIGN_NONSEGWIT!==!1&&console.warn(`Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as Psbt's predecesor (TransactionBuilder - now removed) when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.
*********************
PROCEED WITH CAUTION!
*********************`),a=o.hashForSignature(e,u,s)}return{script:u,sighashType:s,hash:a}}function c2e(e,t,r,n){let i=[];if(t.tapInternalKey){let s=zj(e,t,n);s&&i.push(s)}if(t.tapScriptSig){let s=t.tapScriptSig.map(a=>a.pubkey);i.push(...s)}return i.map(s=>hB(e,t,r,s,n)).flat()}function zj(e,t,r){let{script:n}=yB(e,t,r);return(0,An.isP2TR)(n)?n.subarray(2,34):null}function Vj(e){return e.length===64?e:e.subarray(0,64)}function hB(e,t,r,n,i,o,s){let a=i.__TX,c=t.sighashType||vi.Transaction.SIGHASH_DEFAULT;Gj(c,s);let u=r.map((w,S)=>yB(S,w,i)),h=u.map(w=>w.script),f=u.map(w=>w.value),m=[];if(t.tapInternalKey&&!o){let w=zj(e,t,i)||Buffer.from([]);if((0,nn.toXOnly)(n).equals(w)){let S=a.hashForWitnessV1(e,h,f,c);m.push({pubkey:n,hash:S})}}let b=(t.tapLeafScript||[]).filter(w=>(0,An.pubkeyInScript)(n,w.script)).map(w=>{let S=(0,X1e.tapleafHash)({output:w.script,version:w.leafVersion});return Object.assign({hash:S},w)}).filter(w=>!o||o.equals(w.hash)).map(w=>{let S=a.hashForWitnessV1(e,h,f,vi.Transaction.SIGHASH_DEFAULT,w.hash);return{pubkey:n,hash:S,leafHash:w.hash}});return m.concat(b)}function Gj(e,t){if(t&&t.indexOf(e)<0){let r=d2e(e);throw new Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${r}`)}}function u2e(e,t,r){let n;switch(t){case"multisig":let i=l2e(e,r);n=Fs.p2ms({output:e,signatures:i});break;case"pubkey":n=Fs.p2pk({output:e,signature:r[0].signature});break;case"pubkeyhash":n=Fs.p2pkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature});break;case"witnesspubkeyhash":n=Fs.p2wpkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature});break}return n}function f2e(e,t,r){let n=r.__TX,i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(i.isP2SH=!!t.redeemScript,i.isP2WSH=!!t.witnessScript,t.witnessScript)i.script=t.witnessScript;else if(t.redeemScript)i.script=t.redeemScript;else if(t.nonWitnessUtxo){let o=uE(r,t,e),s=n.ins[e].index;i.script=o.outs[s].script}else t.witnessUtxo&&(i.script=t.witnessUtxo.script);return(t.witnessScript||(0,An.isP2WPKH)(i.script))&&(i.isSegwit=!0),i}function Kj(e,t,r){let n=(0,ho.checkForInput)(t,e);if(!n.bip32Derivation||n.bip32Derivation.length===0)throw new Error("Need bip32Derivation to sign with HD");let i=n.bip32Derivation.map(s=>{if(s.masterFingerprint.equals(r.fingerprint))return s}).filter(s=>!!s);if(i.length===0)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return i.map(s=>{let a=r.derivePath(s.path);if(!s.pubkey.equals(a.publicKey))throw new Error("pubkey did not match bip32Derivation");return a})}function l2e(e,t){return Fs.p2ms({output:e}).pubkeys.map(n=>(t.filter(i=>i.pubkey.equals(n))[0]||{}).signature).filter(n=>!!n)}function $j(e){let t=0;function r(s){return t+=s,e.slice(t-s,t)}function n(){let s=Cj.decode(e,t);return t+=Cj.decode.bytes,s}function i(){return r(n())}function o(){let s=n(),a=[];for(let c=0;c<s;c++)a.push(i());return a}return o()}function d2e(e){let t=e&vi.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(e&31){case vi.Transaction.SIGHASH_ALL:t+="SIGHASH_ALL";break;case vi.Transaction.SIGHASH_SINGLE:t+="SIGHASH_SINGLE";break;case vi.Transaction.SIGHASH_NONE:t+="SIGHASH_NONE";break}return t}function pB(e,t,r){e.__NON_WITNESS_UTXO_BUF_CACHE[r]=t.nonWitnessUtxo;let n=vi.Transaction.fromBuffer(t.nonWitnessUtxo);e.__NON_WITNESS_UTXO_TX_CACHE[r]=n;let i=e,o=r;delete t.nonWitnessUtxo,Object.defineProperty(t,"nonWitnessUtxo",{enumerable:!0,get(){let s=i.__NON_WITNESS_UTXO_BUF_CACHE[o],a=i.__NON_WITNESS_UTXO_TX_CACHE[o];if(s!==void 0)return s;{let c=a.toBuffer();return i.__NON_WITNESS_UTXO_BUF_CACHE[o]=c,c}},set(s){i.__NON_WITNESS_UTXO_BUF_CACHE[o]=s}})}function Yj(e,t,r,n){let i=0;e.forEach((c,u)=>{if(n&&c.finalScriptSig&&(t.ins[u].script=c.finalScriptSig),n&&c.finalScriptWitness&&(t.ins[u].witness=$j(c.finalScriptWitness)),c.witnessUtxo)i+=c.witnessUtxo.value;else if(c.nonWitnessUtxo){let h=uE(r,c,u),f=t.ins[u].index,m=h.outs[f];i+=m.value}});let o=t.outs.reduce((c,u)=>c+u.value,0),s=i-o;if(s<0)throw new Error("Outputs are spending more than Inputs");let a=t.virtualSize();r.__FEE=s,r.__EXTRACTED_TX=t,r.__FEE_RATE=Math.floor(s/a)}function uE(e,t,r){let n=e.__NON_WITNESS_UTXO_TX_CACHE;return n[r]||pB(e,t,r),n[r]}function Zj(e,t,r){let{script:n}=yB(e,t,r);return n}function yB(e,t,r){if(t.witnessUtxo!==void 0)return{script:t.witnessUtxo.script,value:t.witnessUtxo.value};if(t.nonWitnessUtxo!==void 0){let i=uE(r,t,e).outs[r.__TX.ins[e].index];return{script:i.script,value:i.value}}else throw new Error("Can't find pubkey in input without Utxo data")}function h2e(e,t,r,n){let i=Zj(r,t,n),{meaningfulScript:o}=fE(i,r,"input",t.redeemScript,t.witnessScript);return(0,An.pubkeyInScript)(e,o)}function p2e(e,t,r,n){let i=n.__TX.outs[r].script,{meaningfulScript:o}=fE(i,r,"output",t.redeemScript,t.witnessScript);return(0,An.pubkeyInScript)(e,o)}function y2e(e){if(!e)return;let t=$u.decompile(e);if(!t)return;let r=t[t.length-1];if(!(!Buffer.isBuffer(r)||Jj(r)||b2e(r)||!$u.decompile(r)))return r}function m2e(e){if(!e)return;let t=$j(e),r=t[t.length-1];if(!(Jj(r)||!$u.decompile(r)))return r}function g2e(e){if(e.length===65){let t=e[64]&1,r=e.slice(0,33);return r[0]=2|t,r}return e.slice()}function Jj(e){return e.length===33&&$u.isCanonicalPubKey(e)}function b2e(e){return $u.isCanonicalScriptSignature(e)}function fE(e,t,r,n,i){let o=(0,An.isP2SHScript)(e),s=o&&n&&(0,An.isP2WSHScript)(n),a=(0,An.isP2WSHScript)(e);if(o&&n===void 0)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((a||s)&&i===void 0)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");let c;return s?(c=i,Oj(t,e,n,r),Uj(t,n,i,r),cE(c)):a?(c=i,Uj(t,e,i,r),cE(c)):o?(c=n,Oj(t,e,n,r)):c=e,{meaningfulScript:c,type:s?"p2sh-p2wsh":o?"p2sh":a?"p2wsh":"raw"}}function cE(e){if((0,An.isP2WPKH)(e)||(0,An.isP2SHScript)(e))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function Xj(e){return(0,An.isP2WPKH)(e)?"witnesspubkeyhash":(0,An.isP2PKH)(e)?"pubkeyhash":(0,An.isP2MS)(e)?"multisig":(0,An.isP2PK)(e)?"pubkey":"nonstandard"}function dx(e){return[...Array(e).keys()]}});var hx=W(un=>{"use strict";l();d();Object.defineProperty(un,"__esModule",{value:!0});un.initEccLib=un.Transaction=un.opcodes=un.Psbt=un.Block=un.script=un.payments=un.networks=un.crypto=un.address=void 0;var x2e=DP();un.address=x2e;var w2e=_c();un.crypto=w2e;var S2e=Rs();un.networks=S2e;var v2e=yy();un.payments=v2e;var A2e=ao();un.script=A2e;var E2e=Sq();Object.defineProperty(un,"Block",{enumerable:!0,get:function(){return E2e.Block}});var I2e=Qj();Object.defineProperty(un,"Psbt",{enumerable:!0,get:function(){return I2e.Psbt}});var k2e=oA();Object.defineProperty(un,"opcodes",{enumerable:!0,get:function(){return k2e.OPS}});var T2e=gy();Object.defineProperty(un,"Transaction",{enumerable:!0,get:function(){return T2e.Transaction}});var P2e=RA();Object.defineProperty(un,"initEccLib",{enumerable:!0,get:function(){return P2e.initEccLib}})});var vz=W((yht,Sz)=>{l();d();function Dve(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}Sz.exports=Dve});var Ez=W((bht,Az)=>{l();d();var Ove=o1(),Uve=vM();function Rve(e,t){return e&&Ove(t,Uve(t),e)}Az.exports=Rve});var kz=W((Sht,Iz)=>{l();d();var Lve=o1(),Vve=e4();function Kve(e,t){return e&&Lve(t,Vve(t),e)}Iz.exports=Kve});var Pz=W((Eht,Tz)=>{l();d();var Fve=o1(),Hve=qM();function qve(e,t){return Fve(e,Hve(e),t)}Tz.exports=qve});var E_=W((Tht,Bz)=>{l();d();var jve=Lre(),Wve=Vre(),zve=qM(),Gve=Rre(),$ve=Object.getOwnPropertySymbols,Yve=$ve?function(e){for(var t=[];e;)jve(t,zve(e)),e=Wve(e);return t}:Gve;Bz.exports=Yve});var Cz=W((_ht,_z)=>{l();d();var Zve=o1(),Jve=E_();function Xve(e,t){return Zve(e,Jve(e),t)}_z.exports=Xve});var Mz=W((Mht,Nz)=>{l();d();var Qve=Kre(),eAe=E_(),tAe=e4();function rAe(e){return Qve(e,tAe,eAe)}Nz.exports=rAe});var Oz=W((Uht,Dz)=>{l();d();var nAe=Object.prototype,iAe=nAe.hasOwnProperty;function oAe(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&iAe.call(e,"index")&&(r.index=e.index,r.input=e.input),r}Dz.exports=oAe});var Rz=W((Vht,Uz)=>{l();d();var sAe=jM();function aAe(e,t){var r=t?sAe(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}Uz.exports=aAe});var Vz=W((Hht,Lz)=>{l();d();var cAe=/\w*$/;function uAe(e){var t=new e.constructor(e.source,cAe.exec(e));return t.lastIndex=e.lastIndex,t}Lz.exports=uAe});var jz=W((Wht,qz)=>{l();d();var Kz=kre(),Fz=Kz?Kz.prototype:void 0,Hz=Fz?Fz.valueOf:void 0;function fAe(e){return Hz?Object(Hz.call(e)):{}}qz.exports=fAe});var zz=W(($ht,Wz)=>{l();d();var lAe=jM(),dAe=Rz(),hAe=Vz(),pAe=jz(),yAe=Hre(),mAe="[object Boolean]",gAe="[object Date]",bAe="[object Map]",xAe="[object Number]",wAe="[object RegExp]",SAe="[object Set]",vAe="[object String]",AAe="[object Symbol]",EAe="[object ArrayBuffer]",IAe="[object DataView]",kAe="[object Float32Array]",TAe="[object Float64Array]",PAe="[object Int8Array]",BAe="[object Int16Array]",_Ae="[object Int32Array]",CAe="[object Uint8Array]",NAe="[object Uint8ClampedArray]",MAe="[object Uint16Array]",DAe="[object Uint32Array]";function OAe(e,t,r){var n=e.constructor;switch(t){case EAe:return lAe(e);case mAe:case gAe:return new n(+e);case IAe:return dAe(e,r);case kAe:case TAe:case PAe:case BAe:case _Ae:case CAe:case NAe:case MAe:case DAe:return yAe(e,r);case bAe:return new n;case xAe:case vAe:return new n(e);case wAe:return hAe(e);case SAe:return new n;case AAe:return pAe(e)}}Wz.exports=OAe});var $z=W((Jht,Gz)=>{l();d();var UAe=t4(),RAe=xM(),LAe="[object Map]";function VAe(e){return RAe(e)&&UAe(e)==LAe}Gz.exports=VAe});var Xz=W((e0t,Jz)=>{l();d();var KAe=$z(),FAe=wM(),Yz=SM(),Zz=Yz&&Yz.isMap,HAe=Zz?FAe(Zz):KAe;Jz.exports=HAe});var eG=W((n0t,Qz)=>{l();d();var qAe=t4(),jAe=xM(),WAe="[object Set]";function zAe(e){return jAe(e)&&qAe(e)==WAe}Qz.exports=zAe});var iG=W((s0t,nG)=>{l();d();var GAe=eG(),$Ae=wM(),tG=SM(),rG=tG&&tG.isSet,YAe=rG?$Ae(rG):GAe;nG.exports=YAe});var uG=W((u0t,cG)=>{l();d();var ZAe=Dre(),JAe=vz(),XAe=Pre(),QAe=Ez(),eEe=kz(),tEe=Ore(),rEe=Ure(),nEe=Pz(),iEe=Cz(),oEe=Fre(),sEe=Mz(),aEe=t4(),cEe=Oz(),uEe=zz(),fEe=qre(),lEe=Bre(),dEe=_re(),hEe=Xz(),pEe=Tre(),yEe=iG(),mEe=vM(),gEe=e4(),bEe=1,xEe=2,wEe=4,oG="[object Arguments]",SEe="[object Array]",vEe="[object Boolean]",AEe="[object Date]",EEe="[object Error]",sG="[object Function]",IEe="[object GeneratorFunction]",kEe="[object Map]",TEe="[object Number]",aG="[object Object]",PEe="[object RegExp]",BEe="[object Set]",_Ee="[object String]",CEe="[object Symbol]",NEe="[object WeakMap]",MEe="[object ArrayBuffer]",DEe="[object DataView]",OEe="[object Float32Array]",UEe="[object Float64Array]",REe="[object Int8Array]",LEe="[object Int16Array]",VEe="[object Int32Array]",KEe="[object Uint8Array]",FEe="[object Uint8ClampedArray]",HEe="[object Uint16Array]",qEe="[object Uint32Array]",_r={};_r[oG]=_r[SEe]=_r[MEe]=_r[DEe]=_r[vEe]=_r[AEe]=_r[OEe]=_r[UEe]=_r[REe]=_r[LEe]=_r[VEe]=_r[kEe]=_r[TEe]=_r[aG]=_r[PEe]=_r[BEe]=_r[_Ee]=_r[CEe]=_r[KEe]=_r[FEe]=_r[HEe]=_r[qEe]=!0;_r[EEe]=_r[sG]=_r[NEe]=!1;function HE(e,t,r,n,i,o){var s,a=t&bEe,c=t&xEe,u=t&wEe;if(r&&(s=i?r(e,n,i,o):r(e)),s!==void 0)return s;if(!pEe(e))return e;var h=lEe(e);if(h){if(s=cEe(e),!a)return rEe(e,s)}else{var f=aEe(e),m=f==sG||f==IEe;if(dEe(e))return tEe(e,a);if(f==aG||f==oG||m&&!i){if(s=c||m?{}:fEe(e),!a)return c?iEe(e,eEe(s,e)):nEe(e,QAe(s,e))}else{if(!_r[f])return i?e:{};s=uEe(e,f,a)}}o||(o=new ZAe);var b=o.get(e);if(b)return b;o.set(e,s),yEe(e)?e.forEach(function(P){s.add(HE(P,t,r,P,e,o))}):hEe(e)&&e.forEach(function(P,N){s.set(N,HE(P,t,r,N,e,o))});var w=u?c?sEe:oEe:c?gEe:mEe,S=h?void 0:w(e);return JAe(S||e,function(P,N){S&&(N=P,P=e[N]),XAe(s,N,HE(P,t,r,N,e,o))}),s}cG.exports=HE});var lG=W((d0t,fG)=>{l();d();var jEe=uG(),WEe=1,zEe=4;function GEe(e){return jEe(e,WEe|zEe)}fG.exports=GEe});var EG=W((D0t,AG)=>{l();d();var or={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function qs(e,t){if(!e)throw new Error(t)}function $t(e,t,r){if(qs(t instanceof Uint8Array,`Expected ${e} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){let n=r.join(", "),i=`Expected ${e} to be an Uint8Array with length [${n}]`;qs(r.includes(t.length),i)}else{let n=`Expected ${e} to be an Uint8Array with length ${r}`;qs(t.length===r,n)}}function zh(e){qs(Ly(e)==="Boolean","Expected compressed to be a Boolean")}function Ha(e=r=>new Uint8Array(r),t){return typeof e=="function"&&(e=e(t)),$t("output",e,t),e}function Ly(e){return Object.prototype.toString.call(e).slice(8,-1)}AG.exports=e=>({contextRandomize(t){switch(qs(t===null||t instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),t!==null&&$t("seed",t,32),e.contextRandomize(t)){case 1:throw new Error(or.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(t){return $t("private key",t,32),e.privateKeyVerify(t)===0},privateKeyNegate(t){switch($t("private key",t,32),e.privateKeyNegate(t)){case 0:return t;case 1:throw new Error(or.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(t,r){switch($t("private key",t,32),$t("tweak",r,32),e.privateKeyTweakAdd(t,r)){case 0:return t;case 1:throw new Error(or.TWEAK_ADD)}},privateKeyTweakMul(t,r){switch($t("private key",t,32),$t("tweak",r,32),e.privateKeyTweakMul(t,r)){case 0:return t;case 1:throw new Error(or.TWEAK_MUL)}},publicKeyVerify(t){return $t("public key",t,[33,65]),e.publicKeyVerify(t)===0},publicKeyCreate(t,r=!0,n){switch($t("private key",t,32),zh(r),n=Ha(n,r?33:65),e.publicKeyCreate(n,t)){case 0:return n;case 1:throw new Error(or.SECKEY_INVALID);case 2:throw new Error(or.PUBKEY_SERIALIZE)}},publicKeyConvert(t,r=!0,n){switch($t("public key",t,[33,65]),zh(r),n=Ha(n,r?33:65),e.publicKeyConvert(n,t)){case 0:return n;case 1:throw new Error(or.PUBKEY_PARSE);case 2:throw new Error(or.PUBKEY_SERIALIZE)}},publicKeyNegate(t,r=!0,n){switch($t("public key",t,[33,65]),zh(r),n=Ha(n,r?33:65),e.publicKeyNegate(n,t)){case 0:return n;case 1:throw new Error(or.PUBKEY_PARSE);case 2:throw new Error(or.IMPOSSIBLE_CASE);case 3:throw new Error(or.PUBKEY_SERIALIZE)}},publicKeyCombine(t,r=!0,n){qs(Array.isArray(t),"Expected public keys to be an Array"),qs(t.length>0,"Expected public keys array will have more than zero items");for(let i of t)$t("public key",i,[33,65]);switch(zh(r),n=Ha(n,r?33:65),e.publicKeyCombine(n,t)){case 0:return n;case 1:throw new Error(or.PUBKEY_PARSE);case 2:throw new Error(or.PUBKEY_COMBINE);case 3:throw new Error(or.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(t,r,n=!0,i){switch($t("public key",t,[33,65]),$t("tweak",r,32),zh(n),i=Ha(i,n?33:65),e.publicKeyTweakAdd(i,t,r)){case 0:return i;case 1:throw new Error(or.PUBKEY_PARSE);case 2:throw new Error(or.TWEAK_ADD)}},publicKeyTweakMul(t,r,n=!0,i){switch($t("public key",t,[33,65]),$t("tweak",r,32),zh(n),i=Ha(i,n?33:65),e.publicKeyTweakMul(i,t,r)){case 0:return i;case 1:throw new Error(or.PUBKEY_PARSE);case 2:throw new Error(or.TWEAK_MUL)}},signatureNormalize(t){switch($t("signature",t,64),e.signatureNormalize(t)){case 0:return t;case 1:throw new Error(or.SIG_PARSE)}},signatureExport(t,r){$t("signature",t,64),r=Ha(r,72);let n={output:r,outputlen:72};switch(e.signatureExport(n,t)){case 0:return r.slice(0,n.outputlen);case 1:throw new Error(or.SIG_PARSE);case 2:throw new Error(or.IMPOSSIBLE_CASE)}},signatureImport(t,r){switch($t("signature",t),r=Ha(r,64),e.signatureImport(r,t)){case 0:return r;case 1:throw new Error(or.SIG_PARSE);case 2:throw new Error(or.IMPOSSIBLE_CASE)}},ecdsaSign(t,r,n={},i){$t("message",t,32),$t("private key",r,32),qs(Ly(n)==="Object","Expected options to be an Object"),n.data!==void 0&&$t("options.data",n.data),n.noncefn!==void 0&&qs(Ly(n.noncefn)==="Function","Expected options.noncefn to be a Function"),i=Ha(i,64);let o={signature:i,recid:null};switch(e.ecdsaSign(o,t,r,n.data,n.noncefn)){case 0:return o;case 1:throw new Error(or.SIGN);case 2:throw new Error(or.IMPOSSIBLE_CASE)}},ecdsaVerify(t,r,n){switch($t("signature",t,64),$t("message",r,32),$t("public key",n,[33,65]),e.ecdsaVerify(t,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(or.SIG_PARSE);case 2:throw new Error(or.PUBKEY_PARSE)}},ecdsaRecover(t,r,n,i=!0,o){switch($t("signature",t,64),qs(Ly(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),$t("message",n,32),zh(i),o=Ha(o,i?33:65),e.ecdsaRecover(o,t,r,n)){case 0:return o;case 1:throw new Error(or.SIG_PARSE);case 2:throw new Error(or.RECOVER);case 3:throw new Error(or.IMPOSSIBLE_CASE)}},ecdh(t,r,n={},i){switch($t("public key",t,[33,65]),$t("private key",r,32),qs(Ly(n)==="Object","Expected options to be an Object"),n.data!==void 0&&$t("options.data",n.data),n.hashfn!==void 0?(qs(Ly(n.hashfn)==="Function","Expected options.hashfn to be a Function"),n.xbuf!==void 0&&$t("options.xbuf",n.xbuf,32),n.ybuf!==void 0&&$t("options.ybuf",n.ybuf,32),$t("output",i)):i=Ha(i,32),e.ecdh(i,t,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return i;case 1:throw new Error(or.PUBKEY_PARSE);case 2:throw new Error(or.ECDH)}}})});var kG=W((R0t,IG)=>{l();d();var t3e=lM().ec,Kc=new t3e("secp256k1"),zt=Kc.curve,vr=zt.n.constructor;function r3e(e,t){let r=new vr(t);if(r.cmp(zt.p)>=0)return null;r=r.toRed(zt.red);let n=r.redSqr().redIMul(r).redIAdd(zt.b).redSqrt();return e===3!==n.isOdd()&&(n=n.redNeg()),Kc.keyPair({pub:{x:r,y:n}})}function n3e(e,t,r){let n=new vr(t),i=new vr(r);if(n.cmp(zt.p)>=0||i.cmp(zt.p)>=0||(n=n.toRed(zt.red),i=i.toRed(zt.red),(e===6||e===7)&&i.isOdd()!==(e===7)))return null;let o=n.redSqr().redIMul(n);return i.redSqr().redISub(o.redIAdd(zt.b)).isZero()?Kc.keyPair({pub:{x:n,y:i}}):null}function Ql(e){let t=e[0];switch(t){case 2:case 3:return e.length!==33?null:r3e(t,e.subarray(1,33));case 4:case 6:case 7:return e.length!==65?null:n3e(t,e.subarray(1,33),e.subarray(33,65));default:return null}}function Gh(e,t){let r=t.encode(null,e.length===33);for(let n=0;n<e.length;++n)e[n]=r[n]}IG.exports={contextRandomize(){return 0},privateKeyVerify(e){let t=new vr(e);return t.cmp(zt.n)<0&&!t.isZero()?0:1},privateKeyNegate(e){let t=new vr(e),r=zt.n.sub(t).umod(zt.n).toArrayLike(Uint8Array,"be",32);return e.set(r),0},privateKeyTweakAdd(e,t){let r=new vr(t);if(r.cmp(zt.n)>=0||(r.iadd(new vr(e)),r.cmp(zt.n)>=0&&r.isub(zt.n),r.isZero()))return 1;let n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},privateKeyTweakMul(e,t){let r=new vr(t);if(r.cmp(zt.n)>=0||r.isZero())return 1;r.imul(new vr(e)),r.cmp(zt.n)>=0&&(r=r.umod(zt.n));let n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},publicKeyVerify(e){return Ql(e)===null?1:0},publicKeyCreate(e,t){let r=new vr(t);if(r.cmp(zt.n)>=0||r.isZero())return 1;let n=Kc.keyFromPrivate(t).getPublic();return Gh(e,n),0},publicKeyConvert(e,t){let r=Ql(t);if(r===null)return 1;let n=r.getPublic();return Gh(e,n),0},publicKeyNegate(e,t){let r=Ql(t);if(r===null)return 1;let n=r.getPublic();return n.y=n.y.redNeg(),Gh(e,n),0},publicKeyCombine(e,t){let r=new Array(t.length);for(let i=0;i<t.length;++i)if(r[i]=Ql(t[i]),r[i]===null)return 1;let n=r[0].getPublic();for(let i=1;i<r.length;++i)n=n.add(r[i].pub);return n.isInfinity()?2:(Gh(e,n),0)},publicKeyTweakAdd(e,t,r){let n=Ql(t);if(n===null)return 1;if(r=new vr(r),r.cmp(zt.n)>=0)return 2;let i=n.getPublic().add(zt.g.mul(r));return i.isInfinity()?2:(Gh(e,i),0)},publicKeyTweakMul(e,t,r){let n=Ql(t);if(n===null)return 1;if(r=new vr(r),r.cmp(zt.n)>=0||r.isZero())return 2;let i=n.getPublic().mul(r);return Gh(e,i),0},signatureNormalize(e){let t=new vr(e.subarray(0,32)),r=new vr(e.subarray(32,64));return t.cmp(zt.n)>=0||r.cmp(zt.n)>=0?1:(r.cmp(Kc.nh)===1&&e.set(zt.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(e,t){let r=t.subarray(0,32),n=t.subarray(32,64);if(new vr(r).cmp(zt.n)>=0||new vr(n).cmp(zt.n)>=0)return 1;let{output:i}=e,o=i.subarray(4,37);o[0]=0,o.set(r,1);let s=33,a=0;for(;s>1&&o[a]===0&&!(o[a+1]&128);--s,++a);if(o=o.subarray(a),o[0]&128||s>1&&o[0]===0&&!(o[1]&128))return 1;let c=i.subarray(39,72);c[0]=0,c.set(n,1);let u=33,h=0;for(;u>1&&c[h]===0&&!(c[h+1]&128);--u,++h);return c=c.subarray(h),c[0]&128||u>1&&c[0]===0&&!(c[1]&128)?1:(e.outputlen=6+s+u,i[0]=48,i[1]=e.outputlen-2,i[2]=2,i[3]=o.length,i.set(o,4),i[4+s]=2,i[5+s]=c.length,i.set(c,6+s),0)},signatureImport(e,t){if(t.length<8||t.length>72||t[0]!==48||t[1]!==t.length-2||t[2]!==2)return 1;let r=t[3];if(r===0||5+r>=t.length||t[4+r]!==2)return 1;let n=t[5+r];if(n===0||6+r+n!==t.length||t[4]&128||r>1&&t[4]===0&&!(t[5]&128)||t[r+6]&128||n>1&&t[r+6]===0&&!(t[r+7]&128))return 1;let i=t.subarray(4,4+r);if(i.length===33&&i[0]===0&&(i=i.subarray(1)),i.length>32)return 1;let o=t.subarray(6+r);if(o.length===33&&o[0]===0&&(o=o.slice(1)),o.length>32)throw new Error("S length is too long");let s=new vr(i);s.cmp(zt.n)>=0&&(s=new vr(0));let a=new vr(t.subarray(6+r));return a.cmp(zt.n)>=0&&(a=new vr(0)),e.set(s.toArrayLike(Uint8Array,"be",32),0),e.set(a.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(e,t,r,n,i){if(i){let a=i;i=c=>{let u=a(t,r,null,n,c);if(!(u instanceof Uint8Array&&u.length===32))throw new Error("This is the way");return new vr(u)}}let o=new vr(r);if(o.cmp(zt.n)>=0||o.isZero())return 1;let s;try{s=Kc.sign(t,r,{canonical:!0,k:i,pers:n})}catch{return 1}return e.signature.set(s.r.toArrayLike(Uint8Array,"be",32),0),e.signature.set(s.s.toArrayLike(Uint8Array,"be",32),32),e.recid=s.recoveryParam,0},ecdsaVerify(e,t,r){let n={r:e.subarray(0,32),s:e.subarray(32,64)},i=new vr(n.r),o=new vr(n.s);if(i.cmp(zt.n)>=0||o.cmp(zt.n)>=0)return 1;if(o.cmp(Kc.nh)===1||i.isZero()||o.isZero())return 3;let s=Ql(r);if(s===null)return 2;let a=s.getPublic();return Kc.verify(t,n,a)?0:3},ecdsaRecover(e,t,r,n){let i={r:t.slice(0,32),s:t.slice(32,64)},o=new vr(i.r),s=new vr(i.s);if(o.cmp(zt.n)>=0||s.cmp(zt.n)>=0)return 1;if(o.isZero()||s.isZero())return 2;let a;try{a=Kc.recoverPubKey(n,i,r)}catch{return 2}return Gh(e,a),0},ecdh(e,t,r,n,i,o,s){let a=Ql(t);if(a===null)return 1;let c=new vr(r);if(c.cmp(zt.n)>=0||c.isZero())return 2;let u=a.getPublic().mul(c);if(i===void 0){let h=u.encode(null,!0),f=Kc.hash().update(h).digest();for(let m=0;m<32;++m)e[m]=f[m]}else{o||(o=new Uint8Array(32));let h=u.getX().toArray("be",32);for(let w=0;w<32;++w)o[w]=h[w];s||(s=new Uint8Array(32));let f=u.getY().toArray("be",32);for(let w=0;w<32;++w)s[w]=f[w];let m=i(o,s,n);if(!(m instanceof Uint8Array&&m.length===e.length))return 2;e.set(m)}return 0}}});var P_=W((K0t,TG)=>{l();d();TG.exports=EG()(kG())});var BG=W(YE=>{"use strict";l();d();Object.defineProperty(YE,"__esModule",{value:!0});var PG=sM();function i3e(e){return new Promise(function(t,r){PG(e,function(n,i){if(n){r(n);return}t(i)})})}YE.getRandomBytes=i3e;function o3e(e){return PG(e)}YE.getRandomBytesSync=o3e});var MG=W(Fc=>{"use strict";l();d();var s3e=Fc&&Fc.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(f){s(f)}}function c(h){try{u(n.throw(h))}catch(f){s(f)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},a3e=Fc&&Fc.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(h){return c([u,h])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(h){u=[6,h],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};function c3e(e){for(var t in e)Fc.hasOwnProperty(t)||(Fc[t]=e[t])}Object.defineProperty(Fc,"__esModule",{value:!0});var _G=P_(),CG=BG(),NG=32;function u3e(){return s3e(this,void 0,void 0,function(){var e;return a3e(this,function(t){switch(t.label){case 0:return[4,CG.getRandomBytes(NG)];case 1:return e=t.sent(),_G.privateKeyVerify(e)?[2,e]:[3,0];case 2:return[2]}})})}Fc.createPrivateKey=u3e;function f3e(){for(;;){var e=CG.getRandomBytesSync(NG);if(_G.privateKeyVerify(e))return e}}Fc.createPrivateKeySync=f3e;c3e(P_())});var $h=W((DG,B_)=>{l();d();(function(e,t){"use strict";function r(B,p){if(!B)throw new Error(p||"Assertion failed")}function n(B,p){B.super_=p;var g=function(){};g.prototype=p.prototype,B.prototype=new g,B.prototype.constructor=B}function i(B,p,g){if(i.isBN(B))return B;this.negative=0,this.words=null,this.length=0,this.red=null,B!==null&&((p==="le"||p==="be")&&(g=p,p=10),this._init(B||0,p||10,g||"be"))}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof self<"u"&&typeof self.Buffer<"u"?o=self.Buffer:o=uM().Buffer}catch{}i.isBN=function(p){return p instanceof i?!0:p!==null&&typeof p=="object"&&p.constructor.wordSize===i.wordSize&&Array.isArray(p.words)},i.max=function(p,g){return p.cmp(g)>0?p:g},i.min=function(p,g){return p.cmp(g)<0?p:g},i.prototype._init=function(p,g,x){if(typeof p=="number")return this._initNumber(p,g,x);if(typeof p=="object")return this._initArray(p,g,x);g==="hex"&&(g=16),r(g===(g|0)&&g>=2&&g<=36),p=p.toString().replace(/\s+/g,"");var A=0;p[0]==="-"&&(A++,this.negative=1),A<p.length&&(g===16?this._parseHex(p,A,x):(this._parseBase(p,g,A),x==="le"&&this._initArray(this.toArray(),g,x)))},i.prototype._initNumber=function(p,g,x){p<0&&(this.negative=1,p=-p),p<67108864?(this.words=[p&67108863],this.length=1):p<4503599627370496?(this.words=[p&67108863,p/67108864&67108863],this.length=2):(r(p<9007199254740992),this.words=[p&67108863,p/67108864&67108863,1],this.length=3),x==="le"&&this._initArray(this.toArray(),g,x)},i.prototype._initArray=function(p,g,x){if(r(typeof p.length=="number"),p.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(p.length/3),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var v,_,D=0;if(x==="be")for(A=p.length-1,v=0;A>=0;A-=3)_=p[A]|p[A-1]<<8|p[A-2]<<16,this.words[v]|=_<<D&67108863,this.words[v+1]=_>>>26-D&67108863,D+=24,D>=26&&(D-=26,v++);else if(x==="le")for(A=0,v=0;A<p.length;A+=3)_=p[A]|p[A+1]<<8|p[A+2]<<16,this.words[v]|=_<<D&67108863,this.words[v+1]=_>>>26-D&67108863,D+=24,D>=26&&(D-=26,v++);return this.strip()};function s(B,p){var g=B.charCodeAt(p);return g>=65&&g<=70?g-55:g>=97&&g<=102?g-87:g-48&15}function a(B,p,g){var x=s(B,g);return g-1>=p&&(x|=s(B,g-1)<<4),x}i.prototype._parseHex=function(p,g,x){this.length=Math.ceil((p.length-g)/6),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var v=0,_=0,D;if(x==="be")for(A=p.length-1;A>=g;A-=2)D=a(p,g,A)<<v,this.words[_]|=D&67108863,v>=18?(v-=18,_+=1,this.words[_]|=D>>>26):v+=8;else{var T=p.length-g;for(A=T%2===0?g+1:g;A<p.length;A+=2)D=a(p,g,A)<<v,this.words[_]|=D&67108863,v>=18?(v-=18,_+=1,this.words[_]|=D>>>26):v+=8}this.strip()};function c(B,p,g,x){for(var A=0,v=Math.min(B.length,g),_=p;_<v;_++){var D=B.charCodeAt(_)-48;A*=x,D>=49?A+=D-49+10:D>=17?A+=D-17+10:A+=D}return A}i.prototype._parseBase=function(p,g,x){this.words=[0],this.length=1;for(var A=0,v=1;v<=67108863;v*=g)A++;A--,v=v/g|0;for(var _=p.length-x,D=_%A,T=Math.min(_,_-D)+x,y=0,I=x;I<T;I+=A)y=c(p,I,I+A,g),this.imuln(v),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y);if(D!==0){var q=1;for(y=c(p,I,p.length,g),I=0;I<D;I++)q*=g;this.imuln(q),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y)}this.strip()},i.prototype.copy=function(p){p.words=new Array(this.length);for(var g=0;g<this.length;g++)p.words[g]=this.words[g];p.length=this.length,p.negative=this.negative,p.red=this.red},i.prototype.clone=function(){var p=new i(null);return this.copy(p),p},i.prototype._expand=function(p){for(;this.length<p;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(p,g){p=p||10,g=g|0||1;var x;if(p===16||p==="hex"){x="";for(var A=0,v=0,_=0;_<this.length;_++){var D=this.words[_],T=((D<<A|v)&16777215).toString(16);v=D>>>24-A&16777215,v!==0||_!==this.length-1?x=u[6-T.length]+T+x:x=T+x,A+=2,A>=26&&(A-=26,_--)}for(v!==0&&(x=v.toString(16)+x);x.length%g!==0;)x="0"+x;return this.negative!==0&&(x="-"+x),x}if(p===(p|0)&&p>=2&&p<=36){var y=h[p],I=f[p];x="";var q=this.clone();for(q.negative=0;!q.isZero();){var K=q.modn(I).toString(p);q=q.idivn(I),q.isZero()?x=K+x:x=u[y-K.length]+K+x}for(this.isZero()&&(x="0"+x);x.length%g!==0;)x="0"+x;return this.negative!==0&&(x="-"+x),x}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var p=this.words[0];return this.length===2?p+=this.words[1]*67108864:this.length===3&&this.words[2]===1?p+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-p:p},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(p,g){return r(typeof o<"u"),this.toArrayLike(o,p,g)},i.prototype.toArray=function(p,g){return this.toArrayLike(Array,p,g)},i.prototype.toArrayLike=function(p,g,x){var A=this.byteLength(),v=x||Math.max(1,A);r(A<=v,"byte array longer than desired length"),r(v>0,"Requested array length <= 0"),this.strip();var _=g==="le",D=new p(v),T,y,I=this.clone();if(_){for(y=0;!I.isZero();y++)T=I.andln(255),I.iushrn(8),D[y]=T;for(;y<v;y++)D[y]=0}else{for(y=0;y<v-A;y++)D[y]=0;for(y=0;!I.isZero();y++)T=I.andln(255),I.iushrn(8),D[v-y-1]=T}return D},Math.clz32?i.prototype._countBits=function(p){return 32-Math.clz32(p)}:i.prototype._countBits=function(p){var g=p,x=0;return g>=4096&&(x+=13,g>>>=13),g>=64&&(x+=7,g>>>=7),g>=8&&(x+=4,g>>>=4),g>=2&&(x+=2,g>>>=2),x+g},i.prototype._zeroBits=function(p){if(p===0)return 26;var g=p,x=0;return g&8191||(x+=13,g>>>=13),g&127||(x+=7,g>>>=7),g&15||(x+=4,g>>>=4),g&3||(x+=2,g>>>=2),g&1||x++,x},i.prototype.bitLength=function(){var p=this.words[this.length-1],g=this._countBits(p);return(this.length-1)*26+g};function m(B){for(var p=new Array(B.bitLength()),g=0;g<p.length;g++){var x=g/26|0,A=g%26;p[g]=(B.words[x]&1<<A)>>>A}return p}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var p=0,g=0;g<this.length;g++){var x=this._zeroBits(this.words[g]);if(p+=x,x!==26)break}return p},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(p){return this.negative!==0?this.abs().inotn(p).iaddn(1):this.clone()},i.prototype.fromTwos=function(p){return this.testn(p-1)?this.notn(p).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(p){for(;this.length<p.length;)this.words[this.length++]=0;for(var g=0;g<p.length;g++)this.words[g]=this.words[g]|p.words[g];return this.strip()},i.prototype.ior=function(p){return r((this.negative|p.negative)===0),this.iuor(p)},i.prototype.or=function(p){return this.length>p.length?this.clone().ior(p):p.clone().ior(this)},i.prototype.uor=function(p){return this.length>p.length?this.clone().iuor(p):p.clone().iuor(this)},i.prototype.iuand=function(p){var g;this.length>p.length?g=p:g=this;for(var x=0;x<g.length;x++)this.words[x]=this.words[x]&p.words[x];return this.length=g.length,this.strip()},i.prototype.iand=function(p){return r((this.negative|p.negative)===0),this.iuand(p)},i.prototype.and=function(p){return this.length>p.length?this.clone().iand(p):p.clone().iand(this)},i.prototype.uand=function(p){return this.length>p.length?this.clone().iuand(p):p.clone().iuand(this)},i.prototype.iuxor=function(p){var g,x;this.length>p.length?(g=this,x=p):(g=p,x=this);for(var A=0;A<x.length;A++)this.words[A]=g.words[A]^x.words[A];if(this!==g)for(;A<g.length;A++)this.words[A]=g.words[A];return this.length=g.length,this.strip()},i.prototype.ixor=function(p){return r((this.negative|p.negative)===0),this.iuxor(p)},i.prototype.xor=function(p){return this.length>p.length?this.clone().ixor(p):p.clone().ixor(this)},i.prototype.uxor=function(p){return this.length>p.length?this.clone().iuxor(p):p.clone().iuxor(this)},i.prototype.inotn=function(p){r(typeof p=="number"&&p>=0);var g=Math.ceil(p/26)|0,x=p%26;this._expand(g),x>0&&g--;for(var A=0;A<g;A++)this.words[A]=~this.words[A]&67108863;return x>0&&(this.words[A]=~this.words[A]&67108863>>26-x),this.strip()},i.prototype.notn=function(p){return this.clone().inotn(p)},i.prototype.setn=function(p,g){r(typeof p=="number"&&p>=0);var x=p/26|0,A=p%26;return this._expand(x+1),g?this.words[x]=this.words[x]|1<<A:this.words[x]=this.words[x]&~(1<<A),this.strip()},i.prototype.iadd=function(p){var g;if(this.negative!==0&&p.negative===0)return this.negative=0,g=this.isub(p),this.negative^=1,this._normSign();if(this.negative===0&&p.negative!==0)return p.negative=0,g=this.isub(p),p.negative=1,g._normSign();var x,A;this.length>p.length?(x=this,A=p):(x=p,A=this);for(var v=0,_=0;_<A.length;_++)g=(x.words[_]|0)+(A.words[_]|0)+v,this.words[_]=g&67108863,v=g>>>26;for(;v!==0&&_<x.length;_++)g=(x.words[_]|0)+v,this.words[_]=g&67108863,v=g>>>26;if(this.length=x.length,v!==0)this.words[this.length]=v,this.length++;else if(x!==this)for(;_<x.length;_++)this.words[_]=x.words[_];return this},i.prototype.add=function(p){var g;return p.negative!==0&&this.negative===0?(p.negative=0,g=this.sub(p),p.negative^=1,g):p.negative===0&&this.negative!==0?(this.negative=0,g=p.sub(this),this.negative=1,g):this.length>p.length?this.clone().iadd(p):p.clone().iadd(this)},i.prototype.isub=function(p){if(p.negative!==0){p.negative=0;var g=this.iadd(p);return p.negative=1,g._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(p),this.negative=1,this._normSign();var x=this.cmp(p);if(x===0)return this.negative=0,this.length=1,this.words[0]=0,this;var A,v;x>0?(A=this,v=p):(A=p,v=this);for(var _=0,D=0;D<v.length;D++)g=(A.words[D]|0)-(v.words[D]|0)+_,_=g>>26,this.words[D]=g&67108863;for(;_!==0&&D<A.length;D++)g=(A.words[D]|0)+_,_=g>>26,this.words[D]=g&67108863;if(_===0&&D<A.length&&A!==this)for(;D<A.length;D++)this.words[D]=A.words[D];return this.length=Math.max(this.length,D),A!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(p){return this.clone().isub(p)};function b(B,p,g){g.negative=p.negative^B.negative;var x=B.length+p.length|0;g.length=x,x=x-1|0;var A=B.words[0]|0,v=p.words[0]|0,_=A*v,D=_&67108863,T=_/67108864|0;g.words[0]=D;for(var y=1;y<x;y++){for(var I=T>>>26,q=T&67108863,K=Math.min(y,p.length-1),F=Math.max(0,y-B.length+1);F<=K;F++){var J=y-F|0;A=B.words[J]|0,v=p.words[F]|0,_=A*v+q,I+=_/67108864|0,q=_&67108863}g.words[y]=q|0,T=I|0}return T!==0?g.words[y]=T|0:g.length--,g.strip()}var w=function(p,g,x){var A=p.words,v=g.words,_=x.words,D=0,T,y,I,q=A[0]|0,K=q&8191,F=q>>>13,J=A[1]|0,ae=J&8191,ce=J>>>13,ye=A[2]|0,he=ye&8191,U=ye>>>13,G=A[3]|0,Z=G&8191,ee=G>>>13,fe=A[4]|0,Q=fe&8191,se=fe>>>13,gt=A[5]|0,Pe=gt&8191,Oe=gt>>>13,gs=A[6]|0,Ke=gs&8191,Ue=gs>>>13,ac=A[7]|0,Re=ac&8191,ut=ac>>>13,hf=A[8]|0,ft=hf&8191,lt=hf>>>13,tu=A[9]|0,Fe=tu&8191,He=tu>>>13,ru=v[0]|0,qe=ru&8191,je=ru>>>13,nu=v[1]|0,We=nu&8191,ze=nu>>>13,iu=v[2]|0,Ge=iu&8191,$e=iu>>>13,ou=v[3]|0,Ye=ou&8191,Ze=ou>>>13,su=v[4]|0,Je=su&8191,Xe=su>>>13,au=v[5]|0,Qe=au&8191,et=au>>>13,cu=v[6]|0,tt=cu&8191,rt=cu>>>13,uu=v[7]|0,nt=uu&8191,it=uu>>>13,fu=v[8]|0,ot=fu&8191,st=fu>>>13,lu=v[9]|0,at=lu&8191,ct=lu>>>13;x.negative=p.negative^g.negative,x.length=19,T=Math.imul(K,qe),y=Math.imul(K,je),y=y+Math.imul(F,qe)|0,I=Math.imul(F,je);var ra=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(ra>>>26)|0,ra&=67108863,T=Math.imul(ae,qe),y=Math.imul(ae,je),y=y+Math.imul(ce,qe)|0,I=Math.imul(ce,je),T=T+Math.imul(K,We)|0,y=y+Math.imul(K,ze)|0,y=y+Math.imul(F,We)|0,I=I+Math.imul(F,ze)|0;var na=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(na>>>26)|0,na&=67108863,T=Math.imul(he,qe),y=Math.imul(he,je),y=y+Math.imul(U,qe)|0,I=Math.imul(U,je),T=T+Math.imul(ae,We)|0,y=y+Math.imul(ae,ze)|0,y=y+Math.imul(ce,We)|0,I=I+Math.imul(ce,ze)|0,T=T+Math.imul(K,Ge)|0,y=y+Math.imul(K,$e)|0,y=y+Math.imul(F,Ge)|0,I=I+Math.imul(F,$e)|0;var ia=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(ia>>>26)|0,ia&=67108863,T=Math.imul(Z,qe),y=Math.imul(Z,je),y=y+Math.imul(ee,qe)|0,I=Math.imul(ee,je),T=T+Math.imul(he,We)|0,y=y+Math.imul(he,ze)|0,y=y+Math.imul(U,We)|0,I=I+Math.imul(U,ze)|0,T=T+Math.imul(ae,Ge)|0,y=y+Math.imul(ae,$e)|0,y=y+Math.imul(ce,Ge)|0,I=I+Math.imul(ce,$e)|0,T=T+Math.imul(K,Ye)|0,y=y+Math.imul(K,Ze)|0,y=y+Math.imul(F,Ye)|0,I=I+Math.imul(F,Ze)|0;var oa=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(oa>>>26)|0,oa&=67108863,T=Math.imul(Q,qe),y=Math.imul(Q,je),y=y+Math.imul(se,qe)|0,I=Math.imul(se,je),T=T+Math.imul(Z,We)|0,y=y+Math.imul(Z,ze)|0,y=y+Math.imul(ee,We)|0,I=I+Math.imul(ee,ze)|0,T=T+Math.imul(he,Ge)|0,y=y+Math.imul(he,$e)|0,y=y+Math.imul(U,Ge)|0,I=I+Math.imul(U,$e)|0,T=T+Math.imul(ae,Ye)|0,y=y+Math.imul(ae,Ze)|0,y=y+Math.imul(ce,Ye)|0,I=I+Math.imul(ce,Ze)|0,T=T+Math.imul(K,Je)|0,y=y+Math.imul(K,Xe)|0,y=y+Math.imul(F,Je)|0,I=I+Math.imul(F,Xe)|0;var sa=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(sa>>>26)|0,sa&=67108863,T=Math.imul(Pe,qe),y=Math.imul(Pe,je),y=y+Math.imul(Oe,qe)|0,I=Math.imul(Oe,je),T=T+Math.imul(Q,We)|0,y=y+Math.imul(Q,ze)|0,y=y+Math.imul(se,We)|0,I=I+Math.imul(se,ze)|0,T=T+Math.imul(Z,Ge)|0,y=y+Math.imul(Z,$e)|0,y=y+Math.imul(ee,Ge)|0,I=I+Math.imul(ee,$e)|0,T=T+Math.imul(he,Ye)|0,y=y+Math.imul(he,Ze)|0,y=y+Math.imul(U,Ye)|0,I=I+Math.imul(U,Ze)|0,T=T+Math.imul(ae,Je)|0,y=y+Math.imul(ae,Xe)|0,y=y+Math.imul(ce,Je)|0,I=I+Math.imul(ce,Xe)|0,T=T+Math.imul(K,Qe)|0,y=y+Math.imul(K,et)|0,y=y+Math.imul(F,Qe)|0,I=I+Math.imul(F,et)|0;var aa=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(aa>>>26)|0,aa&=67108863,T=Math.imul(Ke,qe),y=Math.imul(Ke,je),y=y+Math.imul(Ue,qe)|0,I=Math.imul(Ue,je),T=T+Math.imul(Pe,We)|0,y=y+Math.imul(Pe,ze)|0,y=y+Math.imul(Oe,We)|0,I=I+Math.imul(Oe,ze)|0,T=T+Math.imul(Q,Ge)|0,y=y+Math.imul(Q,$e)|0,y=y+Math.imul(se,Ge)|0,I=I+Math.imul(se,$e)|0,T=T+Math.imul(Z,Ye)|0,y=y+Math.imul(Z,Ze)|0,y=y+Math.imul(ee,Ye)|0,I=I+Math.imul(ee,Ze)|0,T=T+Math.imul(he,Je)|0,y=y+Math.imul(he,Xe)|0,y=y+Math.imul(U,Je)|0,I=I+Math.imul(U,Xe)|0,T=T+Math.imul(ae,Qe)|0,y=y+Math.imul(ae,et)|0,y=y+Math.imul(ce,Qe)|0,I=I+Math.imul(ce,et)|0,T=T+Math.imul(K,tt)|0,y=y+Math.imul(K,rt)|0,y=y+Math.imul(F,tt)|0,I=I+Math.imul(F,rt)|0;var ca=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(ca>>>26)|0,ca&=67108863,T=Math.imul(Re,qe),y=Math.imul(Re,je),y=y+Math.imul(ut,qe)|0,I=Math.imul(ut,je),T=T+Math.imul(Ke,We)|0,y=y+Math.imul(Ke,ze)|0,y=y+Math.imul(Ue,We)|0,I=I+Math.imul(Ue,ze)|0,T=T+Math.imul(Pe,Ge)|0,y=y+Math.imul(Pe,$e)|0,y=y+Math.imul(Oe,Ge)|0,I=I+Math.imul(Oe,$e)|0,T=T+Math.imul(Q,Ye)|0,y=y+Math.imul(Q,Ze)|0,y=y+Math.imul(se,Ye)|0,I=I+Math.imul(se,Ze)|0,T=T+Math.imul(Z,Je)|0,y=y+Math.imul(Z,Xe)|0,y=y+Math.imul(ee,Je)|0,I=I+Math.imul(ee,Xe)|0,T=T+Math.imul(he,Qe)|0,y=y+Math.imul(he,et)|0,y=y+Math.imul(U,Qe)|0,I=I+Math.imul(U,et)|0,T=T+Math.imul(ae,tt)|0,y=y+Math.imul(ae,rt)|0,y=y+Math.imul(ce,tt)|0,I=I+Math.imul(ce,rt)|0,T=T+Math.imul(K,nt)|0,y=y+Math.imul(K,it)|0,y=y+Math.imul(F,nt)|0,I=I+Math.imul(F,it)|0;var ua=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(ua>>>26)|0,ua&=67108863,T=Math.imul(ft,qe),y=Math.imul(ft,je),y=y+Math.imul(lt,qe)|0,I=Math.imul(lt,je),T=T+Math.imul(Re,We)|0,y=y+Math.imul(Re,ze)|0,y=y+Math.imul(ut,We)|0,I=I+Math.imul(ut,ze)|0,T=T+Math.imul(Ke,Ge)|0,y=y+Math.imul(Ke,$e)|0,y=y+Math.imul(Ue,Ge)|0,I=I+Math.imul(Ue,$e)|0,T=T+Math.imul(Pe,Ye)|0,y=y+Math.imul(Pe,Ze)|0,y=y+Math.imul(Oe,Ye)|0,I=I+Math.imul(Oe,Ze)|0,T=T+Math.imul(Q,Je)|0,y=y+Math.imul(Q,Xe)|0,y=y+Math.imul(se,Je)|0,I=I+Math.imul(se,Xe)|0,T=T+Math.imul(Z,Qe)|0,y=y+Math.imul(Z,et)|0,y=y+Math.imul(ee,Qe)|0,I=I+Math.imul(ee,et)|0,T=T+Math.imul(he,tt)|0,y=y+Math.imul(he,rt)|0,y=y+Math.imul(U,tt)|0,I=I+Math.imul(U,rt)|0,T=T+Math.imul(ae,nt)|0,y=y+Math.imul(ae,it)|0,y=y+Math.imul(ce,nt)|0,I=I+Math.imul(ce,it)|0,T=T+Math.imul(K,ot)|0,y=y+Math.imul(K,st)|0,y=y+Math.imul(F,ot)|0,I=I+Math.imul(F,st)|0;var fa=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(fa>>>26)|0,fa&=67108863,T=Math.imul(Fe,qe),y=Math.imul(Fe,je),y=y+Math.imul(He,qe)|0,I=Math.imul(He,je),T=T+Math.imul(ft,We)|0,y=y+Math.imul(ft,ze)|0,y=y+Math.imul(lt,We)|0,I=I+Math.imul(lt,ze)|0,T=T+Math.imul(Re,Ge)|0,y=y+Math.imul(Re,$e)|0,y=y+Math.imul(ut,Ge)|0,I=I+Math.imul(ut,$e)|0,T=T+Math.imul(Ke,Ye)|0,y=y+Math.imul(Ke,Ze)|0,y=y+Math.imul(Ue,Ye)|0,I=I+Math.imul(Ue,Ze)|0,T=T+Math.imul(Pe,Je)|0,y=y+Math.imul(Pe,Xe)|0,y=y+Math.imul(Oe,Je)|0,I=I+Math.imul(Oe,Xe)|0,T=T+Math.imul(Q,Qe)|0,y=y+Math.imul(Q,et)|0,y=y+Math.imul(se,Qe)|0,I=I+Math.imul(se,et)|0,T=T+Math.imul(Z,tt)|0,y=y+Math.imul(Z,rt)|0,y=y+Math.imul(ee,tt)|0,I=I+Math.imul(ee,rt)|0,T=T+Math.imul(he,nt)|0,y=y+Math.imul(he,it)|0,y=y+Math.imul(U,nt)|0,I=I+Math.imul(U,it)|0,T=T+Math.imul(ae,ot)|0,y=y+Math.imul(ae,st)|0,y=y+Math.imul(ce,ot)|0,I=I+Math.imul(ce,st)|0,T=T+Math.imul(K,at)|0,y=y+Math.imul(K,ct)|0,y=y+Math.imul(F,at)|0,I=I+Math.imul(F,ct)|0;var la=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(la>>>26)|0,la&=67108863,T=Math.imul(Fe,We),y=Math.imul(Fe,ze),y=y+Math.imul(He,We)|0,I=Math.imul(He,ze),T=T+Math.imul(ft,Ge)|0,y=y+Math.imul(ft,$e)|0,y=y+Math.imul(lt,Ge)|0,I=I+Math.imul(lt,$e)|0,T=T+Math.imul(Re,Ye)|0,y=y+Math.imul(Re,Ze)|0,y=y+Math.imul(ut,Ye)|0,I=I+Math.imul(ut,Ze)|0,T=T+Math.imul(Ke,Je)|0,y=y+Math.imul(Ke,Xe)|0,y=y+Math.imul(Ue,Je)|0,I=I+Math.imul(Ue,Xe)|0,T=T+Math.imul(Pe,Qe)|0,y=y+Math.imul(Pe,et)|0,y=y+Math.imul(Oe,Qe)|0,I=I+Math.imul(Oe,et)|0,T=T+Math.imul(Q,tt)|0,y=y+Math.imul(Q,rt)|0,y=y+Math.imul(se,tt)|0,I=I+Math.imul(se,rt)|0,T=T+Math.imul(Z,nt)|0,y=y+Math.imul(Z,it)|0,y=y+Math.imul(ee,nt)|0,I=I+Math.imul(ee,it)|0,T=T+Math.imul(he,ot)|0,y=y+Math.imul(he,st)|0,y=y+Math.imul(U,ot)|0,I=I+Math.imul(U,st)|0,T=T+Math.imul(ae,at)|0,y=y+Math.imul(ae,ct)|0,y=y+Math.imul(ce,at)|0,I=I+Math.imul(ce,ct)|0;var da=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(da>>>26)|0,da&=67108863,T=Math.imul(Fe,Ge),y=Math.imul(Fe,$e),y=y+Math.imul(He,Ge)|0,I=Math.imul(He,$e),T=T+Math.imul(ft,Ye)|0,y=y+Math.imul(ft,Ze)|0,y=y+Math.imul(lt,Ye)|0,I=I+Math.imul(lt,Ze)|0,T=T+Math.imul(Re,Je)|0,y=y+Math.imul(Re,Xe)|0,y=y+Math.imul(ut,Je)|0,I=I+Math.imul(ut,Xe)|0,T=T+Math.imul(Ke,Qe)|0,y=y+Math.imul(Ke,et)|0,y=y+Math.imul(Ue,Qe)|0,I=I+Math.imul(Ue,et)|0,T=T+Math.imul(Pe,tt)|0,y=y+Math.imul(Pe,rt)|0,y=y+Math.imul(Oe,tt)|0,I=I+Math.imul(Oe,rt)|0,T=T+Math.imul(Q,nt)|0,y=y+Math.imul(Q,it)|0,y=y+Math.imul(se,nt)|0,I=I+Math.imul(se,it)|0,T=T+Math.imul(Z,ot)|0,y=y+Math.imul(Z,st)|0,y=y+Math.imul(ee,ot)|0,I=I+Math.imul(ee,st)|0,T=T+Math.imul(he,at)|0,y=y+Math.imul(he,ct)|0,y=y+Math.imul(U,at)|0,I=I+Math.imul(U,ct)|0;var ha=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(ha>>>26)|0,ha&=67108863,T=Math.imul(Fe,Ye),y=Math.imul(Fe,Ze),y=y+Math.imul(He,Ye)|0,I=Math.imul(He,Ze),T=T+Math.imul(ft,Je)|0,y=y+Math.imul(ft,Xe)|0,y=y+Math.imul(lt,Je)|0,I=I+Math.imul(lt,Xe)|0,T=T+Math.imul(Re,Qe)|0,y=y+Math.imul(Re,et)|0,y=y+Math.imul(ut,Qe)|0,I=I+Math.imul(ut,et)|0,T=T+Math.imul(Ke,tt)|0,y=y+Math.imul(Ke,rt)|0,y=y+Math.imul(Ue,tt)|0,I=I+Math.imul(Ue,rt)|0,T=T+Math.imul(Pe,nt)|0,y=y+Math.imul(Pe,it)|0,y=y+Math.imul(Oe,nt)|0,I=I+Math.imul(Oe,it)|0,T=T+Math.imul(Q,ot)|0,y=y+Math.imul(Q,st)|0,y=y+Math.imul(se,ot)|0,I=I+Math.imul(se,st)|0,T=T+Math.imul(Z,at)|0,y=y+Math.imul(Z,ct)|0,y=y+Math.imul(ee,at)|0,I=I+Math.imul(ee,ct)|0;var pa=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(pa>>>26)|0,pa&=67108863,T=Math.imul(Fe,Je),y=Math.imul(Fe,Xe),y=y+Math.imul(He,Je)|0,I=Math.imul(He,Xe),T=T+Math.imul(ft,Qe)|0,y=y+Math.imul(ft,et)|0,y=y+Math.imul(lt,Qe)|0,I=I+Math.imul(lt,et)|0,T=T+Math.imul(Re,tt)|0,y=y+Math.imul(Re,rt)|0,y=y+Math.imul(ut,tt)|0,I=I+Math.imul(ut,rt)|0,T=T+Math.imul(Ke,nt)|0,y=y+Math.imul(Ke,it)|0,y=y+Math.imul(Ue,nt)|0,I=I+Math.imul(Ue,it)|0,T=T+Math.imul(Pe,ot)|0,y=y+Math.imul(Pe,st)|0,y=y+Math.imul(Oe,ot)|0,I=I+Math.imul(Oe,st)|0,T=T+Math.imul(Q,at)|0,y=y+Math.imul(Q,ct)|0,y=y+Math.imul(se,at)|0,I=I+Math.imul(se,ct)|0;var ya=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(ya>>>26)|0,ya&=67108863,T=Math.imul(Fe,Qe),y=Math.imul(Fe,et),y=y+Math.imul(He,Qe)|0,I=Math.imul(He,et),T=T+Math.imul(ft,tt)|0,y=y+Math.imul(ft,rt)|0,y=y+Math.imul(lt,tt)|0,I=I+Math.imul(lt,rt)|0,T=T+Math.imul(Re,nt)|0,y=y+Math.imul(Re,it)|0,y=y+Math.imul(ut,nt)|0,I=I+Math.imul(ut,it)|0,T=T+Math.imul(Ke,ot)|0,y=y+Math.imul(Ke,st)|0,y=y+Math.imul(Ue,ot)|0,I=I+Math.imul(Ue,st)|0,T=T+Math.imul(Pe,at)|0,y=y+Math.imul(Pe,ct)|0,y=y+Math.imul(Oe,at)|0,I=I+Math.imul(Oe,ct)|0;var ma=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(ma>>>26)|0,ma&=67108863,T=Math.imul(Fe,tt),y=Math.imul(Fe,rt),y=y+Math.imul(He,tt)|0,I=Math.imul(He,rt),T=T+Math.imul(ft,nt)|0,y=y+Math.imul(ft,it)|0,y=y+Math.imul(lt,nt)|0,I=I+Math.imul(lt,it)|0,T=T+Math.imul(Re,ot)|0,y=y+Math.imul(Re,st)|0,y=y+Math.imul(ut,ot)|0,I=I+Math.imul(ut,st)|0,T=T+Math.imul(Ke,at)|0,y=y+Math.imul(Ke,ct)|0,y=y+Math.imul(Ue,at)|0,I=I+Math.imul(Ue,ct)|0;var ga=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(ga>>>26)|0,ga&=67108863,T=Math.imul(Fe,nt),y=Math.imul(Fe,it),y=y+Math.imul(He,nt)|0,I=Math.imul(He,it),T=T+Math.imul(ft,ot)|0,y=y+Math.imul(ft,st)|0,y=y+Math.imul(lt,ot)|0,I=I+Math.imul(lt,st)|0,T=T+Math.imul(Re,at)|0,y=y+Math.imul(Re,ct)|0,y=y+Math.imul(ut,at)|0,I=I+Math.imul(ut,ct)|0;var ba=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(ba>>>26)|0,ba&=67108863,T=Math.imul(Fe,ot),y=Math.imul(Fe,st),y=y+Math.imul(He,ot)|0,I=Math.imul(He,st),T=T+Math.imul(ft,at)|0,y=y+Math.imul(ft,ct)|0,y=y+Math.imul(lt,at)|0,I=I+Math.imul(lt,ct)|0;var Ld=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(Ld>>>26)|0,Ld&=67108863,T=Math.imul(Fe,at),y=Math.imul(Fe,ct),y=y+Math.imul(He,at)|0,I=Math.imul(He,ct);var Vd=(D+T|0)+((y&8191)<<13)|0;return D=(I+(y>>>13)|0)+(Vd>>>26)|0,Vd&=67108863,_[0]=ra,_[1]=na,_[2]=ia,_[3]=oa,_[4]=sa,_[5]=aa,_[6]=ca,_[7]=ua,_[8]=fa,_[9]=la,_[10]=da,_[11]=ha,_[12]=pa,_[13]=ya,_[14]=ma,_[15]=ga,_[16]=ba,_[17]=Ld,_[18]=Vd,D!==0&&(_[19]=D,x.length++),x};Math.imul||(w=b);function S(B,p,g){g.negative=p.negative^B.negative,g.length=B.length+p.length;for(var x=0,A=0,v=0;v<g.length-1;v++){var _=A;A=0;for(var D=x&67108863,T=Math.min(v,p.length-1),y=Math.max(0,v-B.length+1);y<=T;y++){var I=v-y,q=B.words[I]|0,K=p.words[y]|0,F=q*K,J=F&67108863;_=_+(F/67108864|0)|0,J=J+D|0,D=J&67108863,_=_+(J>>>26)|0,A+=_>>>26,_&=67108863}g.words[v]=D,x=_,_=A}return x!==0?g.words[v]=x:g.length--,g.strip()}function P(B,p,g){var x=new N;return x.mulp(B,p,g)}i.prototype.mulTo=function(p,g){var x,A=this.length+p.length;return this.length===10&&p.length===10?x=w(this,p,g):A<63?x=b(this,p,g):A<1024?x=S(this,p,g):x=P(this,p,g),x};function N(B,p){this.x=B,this.y=p}N.prototype.makeRBT=function(p){for(var g=new Array(p),x=i.prototype._countBits(p)-1,A=0;A<p;A++)g[A]=this.revBin(A,x,p);return g},N.prototype.revBin=function(p,g,x){if(p===0||p===x-1)return p;for(var A=0,v=0;v<g;v++)A|=(p&1)<<g-v-1,p>>=1;return A},N.prototype.permute=function(p,g,x,A,v,_){for(var D=0;D<_;D++)A[D]=g[p[D]],v[D]=x[p[D]]},N.prototype.transform=function(p,g,x,A,v,_){this.permute(_,p,g,x,A,v);for(var D=1;D<v;D<<=1)for(var T=D<<1,y=Math.cos(2*Math.PI/T),I=Math.sin(2*Math.PI/T),q=0;q<v;q+=T)for(var K=y,F=I,J=0;J<D;J++){var ae=x[q+J],ce=A[q+J],ye=x[q+J+D],he=A[q+J+D],U=K*ye-F*he;he=K*he+F*ye,ye=U,x[q+J]=ae+ye,A[q+J]=ce+he,x[q+J+D]=ae-ye,A[q+J+D]=ce-he,J!==T&&(U=y*K-I*F,F=y*F+I*K,K=U)}},N.prototype.guessLen13b=function(p,g){var x=Math.max(g,p)|1,A=x&1,v=0;for(x=x/2|0;x;x=x>>>1)v++;return 1<<v+1+A},N.prototype.conjugate=function(p,g,x){if(!(x<=1))for(var A=0;A<x/2;A++){var v=p[A];p[A]=p[x-A-1],p[x-A-1]=v,v=g[A],g[A]=-g[x-A-1],g[x-A-1]=-v}},N.prototype.normalize13b=function(p,g){for(var x=0,A=0;A<g/2;A++){var v=Math.round(p[2*A+1]/g)*8192+Math.round(p[2*A]/g)+x;p[A]=v&67108863,v<67108864?x=0:x=v/67108864|0}return p},N.prototype.convert13b=function(p,g,x,A){for(var v=0,_=0;_<g;_++)v=v+(p[_]|0),x[2*_]=v&8191,v=v>>>13,x[2*_+1]=v&8191,v=v>>>13;for(_=2*g;_<A;++_)x[_]=0;r(v===0),r((v&-8192)===0)},N.prototype.stub=function(p){for(var g=new Array(p),x=0;x<p;x++)g[x]=0;return g},N.prototype.mulp=function(p,g,x){var A=2*this.guessLen13b(p.length,g.length),v=this.makeRBT(A),_=this.stub(A),D=new Array(A),T=new Array(A),y=new Array(A),I=new Array(A),q=new Array(A),K=new Array(A),F=x.words;F.length=A,this.convert13b(p.words,p.length,D,A),this.convert13b(g.words,g.length,I,A),this.transform(D,_,T,y,A,v),this.transform(I,_,q,K,A,v);for(var J=0;J<A;J++){var ae=T[J]*q[J]-y[J]*K[J];y[J]=T[J]*K[J]+y[J]*q[J],T[J]=ae}return this.conjugate(T,y,A),this.transform(T,y,F,_,A,v),this.conjugate(F,_,A),this.normalize13b(F,A),x.negative=p.negative^g.negative,x.length=p.length+g.length,x.strip()},i.prototype.mul=function(p){var g=new i(null);return g.words=new Array(this.length+p.length),this.mulTo(p,g)},i.prototype.mulf=function(p){var g=new i(null);return g.words=new Array(this.length+p.length),P(this,p,g)},i.prototype.imul=function(p){return this.clone().mulTo(p,this)},i.prototype.imuln=function(p){r(typeof p=="number"),r(p<67108864);for(var g=0,x=0;x<this.length;x++){var A=(this.words[x]|0)*p,v=(A&67108863)+(g&67108863);g>>=26,g+=A/67108864|0,g+=v>>>26,this.words[x]=v&67108863}return g!==0&&(this.words[x]=g,this.length++),this},i.prototype.muln=function(p){return this.clone().imuln(p)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(p){var g=m(p);if(g.length===0)return new i(1);for(var x=this,A=0;A<g.length&&g[A]===0;A++,x=x.sqr());if(++A<g.length)for(var v=x.sqr();A<g.length;A++,v=v.sqr())g[A]!==0&&(x=x.mul(v));return x},i.prototype.iushln=function(p){r(typeof p=="number"&&p>=0);var g=p%26,x=(p-g)/26,A=67108863>>>26-g<<26-g,v;if(g!==0){var _=0;for(v=0;v<this.length;v++){var D=this.words[v]&A,T=(this.words[v]|0)-D<<g;this.words[v]=T|_,_=D>>>26-g}_&&(this.words[v]=_,this.length++)}if(x!==0){for(v=this.length-1;v>=0;v--)this.words[v+x]=this.words[v];for(v=0;v<x;v++)this.words[v]=0;this.length+=x}return this.strip()},i.prototype.ishln=function(p){return r(this.negative===0),this.iushln(p)},i.prototype.iushrn=function(p,g,x){r(typeof p=="number"&&p>=0);var A;g?A=(g-g%26)/26:A=0;var v=p%26,_=Math.min((p-v)/26,this.length),D=67108863^67108863>>>v<<v,T=x;if(A-=_,A=Math.max(0,A),T){for(var y=0;y<_;y++)T.words[y]=this.words[y];T.length=_}if(_!==0)if(this.length>_)for(this.length-=_,y=0;y<this.length;y++)this.words[y]=this.words[y+_];else this.words[0]=0,this.length=1;var I=0;for(y=this.length-1;y>=0&&(I!==0||y>=A);y--){var q=this.words[y]|0;this.words[y]=I<<26-v|q>>>v,I=q&D}return T&&I!==0&&(T.words[T.length++]=I),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(p,g,x){return r(this.negative===0),this.iushrn(p,g,x)},i.prototype.shln=function(p){return this.clone().ishln(p)},i.prototype.ushln=function(p){return this.clone().iushln(p)},i.prototype.shrn=function(p){return this.clone().ishrn(p)},i.prototype.ushrn=function(p){return this.clone().iushrn(p)},i.prototype.testn=function(p){r(typeof p=="number"&&p>=0);var g=p%26,x=(p-g)/26,A=1<<g;if(this.length<=x)return!1;var v=this.words[x];return!!(v&A)},i.prototype.imaskn=function(p){r(typeof p=="number"&&p>=0);var g=p%26,x=(p-g)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=x)return this;if(g!==0&&x++,this.length=Math.min(x,this.length),g!==0){var A=67108863^67108863>>>g<<g;this.words[this.length-1]&=A}return this.strip()},i.prototype.maskn=function(p){return this.clone().imaskn(p)},i.prototype.iaddn=function(p){return r(typeof p=="number"),r(p<67108864),p<0?this.isubn(-p):this.negative!==0?this.length===1&&(this.words[0]|0)<p?(this.words[0]=p-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(p),this.negative=1,this):this._iaddn(p)},i.prototype._iaddn=function(p){this.words[0]+=p;for(var g=0;g<this.length&&this.words[g]>=67108864;g++)this.words[g]-=67108864,g===this.length-1?this.words[g+1]=1:this.words[g+1]++;return this.length=Math.max(this.length,g+1),this},i.prototype.isubn=function(p){if(r(typeof p=="number"),r(p<67108864),p<0)return this.iaddn(-p);if(this.negative!==0)return this.negative=0,this.iaddn(p),this.negative=1,this;if(this.words[0]-=p,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var g=0;g<this.length&&this.words[g]<0;g++)this.words[g]+=67108864,this.words[g+1]-=1;return this.strip()},i.prototype.addn=function(p){return this.clone().iaddn(p)},i.prototype.subn=function(p){return this.clone().isubn(p)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(p,g,x){var A=p.length+x,v;this._expand(A);var _,D=0;for(v=0;v<p.length;v++){_=(this.words[v+x]|0)+D;var T=(p.words[v]|0)*g;_-=T&67108863,D=(_>>26)-(T/67108864|0),this.words[v+x]=_&67108863}for(;v<this.length-x;v++)_=(this.words[v+x]|0)+D,D=_>>26,this.words[v+x]=_&67108863;if(D===0)return this.strip();for(r(D===-1),D=0,v=0;v<this.length;v++)_=-(this.words[v]|0)+D,D=_>>26,this.words[v]=_&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(p,g){var x=this.length-p.length,A=this.clone(),v=p,_=v.words[v.length-1]|0,D=this._countBits(_);x=26-D,x!==0&&(v=v.ushln(x),A.iushln(x),_=v.words[v.length-1]|0);var T=A.length-v.length,y;if(g!=="mod"){y=new i(null),y.length=T+1,y.words=new Array(y.length);for(var I=0;I<y.length;I++)y.words[I]=0}var q=A.clone()._ishlnsubmul(v,1,T);q.negative===0&&(A=q,y&&(y.words[T]=1));for(var K=T-1;K>=0;K--){var F=(A.words[v.length+K]|0)*67108864+(A.words[v.length+K-1]|0);for(F=Math.min(F/_|0,67108863),A._ishlnsubmul(v,F,K);A.negative!==0;)F--,A.negative=0,A._ishlnsubmul(v,1,K),A.isZero()||(A.negative^=1);y&&(y.words[K]=F)}return y&&y.strip(),A.strip(),g!=="div"&&x!==0&&A.iushrn(x),{div:y||null,mod:A}},i.prototype.divmod=function(p,g,x){if(r(!p.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var A,v,_;return this.negative!==0&&p.negative===0?(_=this.neg().divmod(p,g),g!=="mod"&&(A=_.div.neg()),g!=="div"&&(v=_.mod.neg(),x&&v.negative!==0&&v.iadd(p)),{div:A,mod:v}):this.negative===0&&p.negative!==0?(_=this.divmod(p.neg(),g),g!=="mod"&&(A=_.div.neg()),{div:A,mod:_.mod}):this.negative&p.negative?(_=this.neg().divmod(p.neg(),g),g!=="div"&&(v=_.mod.neg(),x&&v.negative!==0&&v.isub(p)),{div:_.div,mod:v}):p.length>this.length||this.cmp(p)<0?{div:new i(0),mod:this}:p.length===1?g==="div"?{div:this.divn(p.words[0]),mod:null}:g==="mod"?{div:null,mod:new i(this.modn(p.words[0]))}:{div:this.divn(p.words[0]),mod:new i(this.modn(p.words[0]))}:this._wordDiv(p,g)},i.prototype.div=function(p){return this.divmod(p,"div",!1).div},i.prototype.mod=function(p){return this.divmod(p,"mod",!1).mod},i.prototype.umod=function(p){return this.divmod(p,"mod",!0).mod},i.prototype.divRound=function(p){var g=this.divmod(p);if(g.mod.isZero())return g.div;var x=g.div.negative!==0?g.mod.isub(p):g.mod,A=p.ushrn(1),v=p.andln(1),_=x.cmp(A);return _<0||v===1&&_===0?g.div:g.div.negative!==0?g.div.isubn(1):g.div.iaddn(1)},i.prototype.modn=function(p){r(p<=67108863);for(var g=(1<<26)%p,x=0,A=this.length-1;A>=0;A--)x=(g*x+(this.words[A]|0))%p;return x},i.prototype.idivn=function(p){r(p<=67108863);for(var g=0,x=this.length-1;x>=0;x--){var A=(this.words[x]|0)+g*67108864;this.words[x]=A/p|0,g=A%p}return this.strip()},i.prototype.divn=function(p){return this.clone().idivn(p)},i.prototype.egcd=function(p){r(p.negative===0),r(!p.isZero());var g=this,x=p.clone();g.negative!==0?g=g.umod(p):g=g.clone();for(var A=new i(1),v=new i(0),_=new i(0),D=new i(1),T=0;g.isEven()&&x.isEven();)g.iushrn(1),x.iushrn(1),++T;for(var y=x.clone(),I=g.clone();!g.isZero();){for(var q=0,K=1;!(g.words[0]&K)&&q<26;++q,K<<=1);if(q>0)for(g.iushrn(q);q-- >0;)(A.isOdd()||v.isOdd())&&(A.iadd(y),v.isub(I)),A.iushrn(1),v.iushrn(1);for(var F=0,J=1;!(x.words[0]&J)&&F<26;++F,J<<=1);if(F>0)for(x.iushrn(F);F-- >0;)(_.isOdd()||D.isOdd())&&(_.iadd(y),D.isub(I)),_.iushrn(1),D.iushrn(1);g.cmp(x)>=0?(g.isub(x),A.isub(_),v.isub(D)):(x.isub(g),_.isub(A),D.isub(v))}return{a:_,b:D,gcd:x.iushln(T)}},i.prototype._invmp=function(p){r(p.negative===0),r(!p.isZero());var g=this,x=p.clone();g.negative!==0?g=g.umod(p):g=g.clone();for(var A=new i(1),v=new i(0),_=x.clone();g.cmpn(1)>0&&x.cmpn(1)>0;){for(var D=0,T=1;!(g.words[0]&T)&&D<26;++D,T<<=1);if(D>0)for(g.iushrn(D);D-- >0;)A.isOdd()&&A.iadd(_),A.iushrn(1);for(var y=0,I=1;!(x.words[0]&I)&&y<26;++y,I<<=1);if(y>0)for(x.iushrn(y);y-- >0;)v.isOdd()&&v.iadd(_),v.iushrn(1);g.cmp(x)>=0?(g.isub(x),A.isub(v)):(x.isub(g),v.isub(A))}var q;return g.cmpn(1)===0?q=A:q=v,q.cmpn(0)<0&&q.iadd(p),q},i.prototype.gcd=function(p){if(this.isZero())return p.abs();if(p.isZero())return this.abs();var g=this.clone(),x=p.clone();g.negative=0,x.negative=0;for(var A=0;g.isEven()&&x.isEven();A++)g.iushrn(1),x.iushrn(1);do{for(;g.isEven();)g.iushrn(1);for(;x.isEven();)x.iushrn(1);var v=g.cmp(x);if(v<0){var _=g;g=x,x=_}else if(v===0||x.cmpn(1)===0)break;g.isub(x)}while(!0);return x.iushln(A)},i.prototype.invm=function(p){return this.egcd(p).a.umod(p)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(p){return this.words[0]&p},i.prototype.bincn=function(p){r(typeof p=="number");var g=p%26,x=(p-g)/26,A=1<<g;if(this.length<=x)return this._expand(x+1),this.words[x]|=A,this;for(var v=A,_=x;v!==0&&_<this.length;_++){var D=this.words[_]|0;D+=v,v=D>>>26,D&=67108863,this.words[_]=D}return v!==0&&(this.words[_]=v,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(p){var g=p<0;if(this.negative!==0&&!g)return-1;if(this.negative===0&&g)return 1;this.strip();var x;if(this.length>1)x=1;else{g&&(p=-p),r(p<=67108863,"Number is too big");var A=this.words[0]|0;x=A===p?0:A<p?-1:1}return this.negative!==0?-x|0:x},i.prototype.cmp=function(p){if(this.negative!==0&&p.negative===0)return-1;if(this.negative===0&&p.negative!==0)return 1;var g=this.ucmp(p);return this.negative!==0?-g|0:g},i.prototype.ucmp=function(p){if(this.length>p.length)return 1;if(this.length<p.length)return-1;for(var g=0,x=this.length-1;x>=0;x--){var A=this.words[x]|0,v=p.words[x]|0;if(A!==v){A<v?g=-1:A>v&&(g=1);break}}return g},i.prototype.gtn=function(p){return this.cmpn(p)===1},i.prototype.gt=function(p){return this.cmp(p)===1},i.prototype.gten=function(p){return this.cmpn(p)>=0},i.prototype.gte=function(p){return this.cmp(p)>=0},i.prototype.ltn=function(p){return this.cmpn(p)===-1},i.prototype.lt=function(p){return this.cmp(p)===-1},i.prototype.lten=function(p){return this.cmpn(p)<=0},i.prototype.lte=function(p){return this.cmp(p)<=0},i.prototype.eqn=function(p){return this.cmpn(p)===0},i.prototype.eq=function(p){return this.cmp(p)===0},i.red=function(p){return new H(p)},i.prototype.toRed=function(p){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),p.convertTo(this)._forceRed(p)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(p){return this.red=p,this},i.prototype.forceRed=function(p){return r(!this.red,"Already a number in reduction context"),this._forceRed(p)},i.prototype.redAdd=function(p){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,p)},i.prototype.redIAdd=function(p){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,p)},i.prototype.redSub=function(p){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,p)},i.prototype.redISub=function(p){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,p)},i.prototype.redShl=function(p){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,p)},i.prototype.redMul=function(p){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,p),this.red.mul(this,p)},i.prototype.redIMul=function(p){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,p),this.red.imul(this,p)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(p){return r(this.red&&!p.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,p)};var O={k256:null,p224:null,p192:null,p25519:null};function C(B,p){this.name=B,this.p=new i(p,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}C.prototype._tmp=function(){var p=new i(null);return p.words=new Array(Math.ceil(this.n/13)),p},C.prototype.ireduce=function(p){var g=p,x;do this.split(g,this.tmp),g=this.imulK(g),g=g.iadd(this.tmp),x=g.bitLength();while(x>this.n);var A=x<this.n?-1:g.ucmp(this.p);return A===0?(g.words[0]=0,g.length=1):A>0?g.isub(this.p):g.strip!==void 0?g.strip():g._strip(),g},C.prototype.split=function(p,g){p.iushrn(this.n,0,g)},C.prototype.imulK=function(p){return p.imul(this.k)};function L(){C.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(L,C),L.prototype.split=function(p,g){for(var x=4194303,A=Math.min(p.length,9),v=0;v<A;v++)g.words[v]=p.words[v];if(g.length=A,p.length<=9){p.words[0]=0,p.length=1;return}var _=p.words[9];for(g.words[g.length++]=_&x,v=10;v<p.length;v++){var D=p.words[v]|0;p.words[v-10]=(D&x)<<4|_>>>22,_=D}_>>>=22,p.words[v-10]=_,_===0&&p.length>10?p.length-=10:p.length-=9},L.prototype.imulK=function(p){p.words[p.length]=0,p.words[p.length+1]=0,p.length+=2;for(var g=0,x=0;x<p.length;x++){var A=p.words[x]|0;g+=A*977,p.words[x]=g&67108863,g=A*64+(g/67108864|0)}return p.words[p.length-1]===0&&(p.length--,p.words[p.length-1]===0&&p.length--),p};function V(){C.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(V,C);function j(){C.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(j,C);function $(){C.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n($,C),$.prototype.imulK=function(p){for(var g=0,x=0;x<p.length;x++){var A=(p.words[x]|0)*19+g,v=A&67108863;A>>>=26,p.words[x]=v,g=A}return g!==0&&(p.words[p.length++]=g),p},i._prime=function(p){if(O[p])return O[p];var g;if(p==="k256")g=new L;else if(p==="p224")g=new V;else if(p==="p192")g=new j;else if(p==="p25519")g=new $;else throw new Error("Unknown prime "+p);return O[p]=g,g};function H(B){if(typeof B=="string"){var p=i._prime(B);this.m=p.p,this.prime=p}else r(B.gtn(1),"modulus must be greater than 1"),this.m=B,this.prime=null}H.prototype._verify1=function(p){r(p.negative===0,"red works only with positives"),r(p.red,"red works only with red numbers")},H.prototype._verify2=function(p,g){r((p.negative|g.negative)===0,"red works only with positives"),r(p.red&&p.red===g.red,"red works only with red numbers")},H.prototype.imod=function(p){return this.prime?this.prime.ireduce(p)._forceRed(this):p.umod(this.m)._forceRed(this)},H.prototype.neg=function(p){return p.isZero()?p.clone():this.m.sub(p)._forceRed(this)},H.prototype.add=function(p,g){this._verify2(p,g);var x=p.add(g);return x.cmp(this.m)>=0&&x.isub(this.m),x._forceRed(this)},H.prototype.iadd=function(p,g){this._verify2(p,g);var x=p.iadd(g);return x.cmp(this.m)>=0&&x.isub(this.m),x},H.prototype.sub=function(p,g){this._verify2(p,g);var x=p.sub(g);return x.cmpn(0)<0&&x.iadd(this.m),x._forceRed(this)},H.prototype.isub=function(p,g){this._verify2(p,g);var x=p.isub(g);return x.cmpn(0)<0&&x.iadd(this.m),x},H.prototype.shl=function(p,g){return this._verify1(p),this.imod(p.ushln(g))},H.prototype.imul=function(p,g){return this._verify2(p,g),this.imod(p.imul(g))},H.prototype.mul=function(p,g){return this._verify2(p,g),this.imod(p.mul(g))},H.prototype.isqr=function(p){return this.imul(p,p.clone())},H.prototype.sqr=function(p){return this.mul(p,p)},H.prototype.sqrt=function(p){if(p.isZero())return p.clone();var g=this.m.andln(3);if(r(g%2===1),g===3){var x=this.m.add(new i(1)).iushrn(2);return this.pow(p,x)}for(var A=this.m.subn(1),v=0;!A.isZero()&&A.andln(1)===0;)v++,A.iushrn(1);r(!A.isZero());var _=new i(1).toRed(this),D=_.redNeg(),T=this.m.subn(1).iushrn(1),y=this.m.bitLength();for(y=new i(2*y*y).toRed(this);this.pow(y,T).cmp(D)!==0;)y.redIAdd(D);for(var I=this.pow(y,A),q=this.pow(p,A.addn(1).iushrn(1)),K=this.pow(p,A),F=v;K.cmp(_)!==0;){for(var J=K,ae=0;J.cmp(_)!==0;ae++)J=J.redSqr();r(ae<F);var ce=this.pow(I,new i(1).iushln(F-ae-1));q=q.redMul(ce),I=ce.redSqr(),K=K.redMul(I),F=ae}return q},H.prototype.invm=function(p){var g=p._invmp(this.m);return g.negative!==0?(g.negative=0,this.imod(g).redNeg()):this.imod(g)},H.prototype.pow=function(p,g){if(g.isZero())return new i(1).toRed(this);if(g.cmpn(1)===0)return p.clone();var x=4,A=new Array(1<<x);A[0]=new i(1).toRed(this),A[1]=p;for(var v=2;v<A.length;v++)A[v]=this.mul(A[v-1],p);var _=A[0],D=0,T=0,y=g.bitLength()%26;for(y===0&&(y=26),v=g.length-1;v>=0;v--){for(var I=g.words[v],q=y-1;q>=0;q--){var K=I>>q&1;if(_!==A[0]&&(_=this.sqr(_)),K===0&&D===0){T=0;continue}D<<=1,D|=K,T++,!(T!==x&&(v!==0||q!==0))&&(_=this.mul(_,A[D]),T=0,D=0)}y=26}return _},H.prototype.convertTo=function(p){var g=p.umod(this.m);return g===p?g.clone():g},H.prototype.convertFrom=function(p){var g=p.clone();return g.red=null,g},i.mont=function(p){return new Y(p)};function Y(B){H.call(this,B),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(Y,H),Y.prototype.convertTo=function(p){return this.imod(p.ushln(this.shift))},Y.prototype.convertFrom=function(p){var g=this.imod(p.mul(this.rinv));return g.red=null,g},Y.prototype.imul=function(p,g){if(p.isZero()||g.isZero())return p.words[0]=0,p.length=1,p;var x=p.imul(g),A=x.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=x.isub(A).iushrn(this.shift),_=v;return v.cmp(this.m)>=0?_=v.isub(this.m):v.cmpn(0)<0&&(_=v.iadd(this.m)),_._forceRed(this)},Y.prototype.mul=function(p,g){if(p.isZero()||g.isZero())return new i(0)._forceRed(this);var x=p.mul(g),A=x.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=x.isub(A).iushrn(this.shift),_=v;return v.cmp(this.m)>=0?_=v.isub(this.m):v.cmpn(0)<0&&(_=v.iadd(this.m)),_._forceRed(this)},Y.prototype.invm=function(p){var g=this.imod(p._invmp(this.m).mul(this.r2));return g._forceRed(this)}})(typeof B_>"u"||B_,DG)});var UG=W(Ky=>{"use strict";l();d();Object.defineProperty(Ky,"__esModule",{value:!0});var Yh=$h(),l3e=lM().ec,__=new l3e("secp256k1"),Vy=__.curve;Ky.privateKeyExport=function(e,t){t===void 0&&(t=!0);var r=new Yh(e);if(r.ucmp(Vy.n)>=0)throw new Error("couldn't export to DER format");var n=__.g.mul(r);return OG(n.getX(),n.getY(),t)};Ky.privateKeyModInverse=function(e){var t=new Yh(e);if(t.ucmp(Vy.n)>=0||t.isZero())throw new Error("private key range is invalid");return t.invm(Vy.n).toArrayLike(Buffer,"be",32)};Ky.signatureImport=function(e){var t=new Yh(e.r);t.ucmp(Vy.n)>=0&&(t=new Yh(0));var r=new Yh(e.s);return r.ucmp(Vy.n)>=0&&(r=new Yh(0)),Buffer.concat([t.toArrayLike(Buffer,"be",32),r.toArrayLike(Buffer,"be",32)])};Ky.ecdhUnsafe=function(e,t,r){r===void 0&&(r=!0);var n=__.keyFromPublic(e),i=new Yh(t);if(i.ucmp(Vy.n)>=0||i.isZero())throw new Error("scalar was invalid (zero or overflow)");var o=n.pub.mul(i);return OG(o.getX(),o.getY(),r)};var OG=function(e,t,r){var n;return r?(n=Buffer.alloc(33),n[0]=t.isOdd()?3:2,e.toArrayLike(Buffer,"be",32).copy(n,1)):(n=Buffer.alloc(65),n[0]=4,e.toArrayLike(Buffer,"be",32).copy(n,1),t.toArrayLike(Buffer,"be",32).copy(n,33)),n}});var RG=W(zx=>{"use strict";l();d();Object.defineProperty(zx,"__esModule",{value:!0});var{Buffer:Wx}=Bn(),d3e=Wx.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),h3e=Wx.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);zx.privateKeyExport=function(e,t,r){r===void 0&&(r=!0);var n=Wx.from(r?d3e:h3e);return e.copy(n,r?8:9),t.copy(n,r?181:214),n};zx.privateKeyImport=function(e){var t=e.length,r=0;if(t<r+1||e[r]!==48||(r+=1,t<r+1||!(e[r]&128)))return null;var n=e[r]&127;if(r+=1,n<1||n>2||t<r+n)return null;var i=e[r+n-1]|(n>1?e[r+n-2]<<8:0);return r+=n,t<r+i||t<r+3||e[r]!==2||e[r+1]!==1||e[r+2]!==1||(r+=3,t<r+2||e[r]!==4||e[r+1]>32||t<r+2+e[r+1])?null:e.slice(r+2,r+2+e[r+1])};zx.signatureImportLax=function(e){var t=Wx.alloc(32,0),r=Wx.alloc(32,0),n=e.length,i=0;if(e[i++]!==48)return null;var o=e[i++];if(o&128&&(i+=o-128,i>n)||e[i++]!==2)return null;var s=e[i++];if(s&128){if(o=s-128,i+o>n)return null;for(;o>0&&e[i]===0;i+=1,o-=1);for(s=0;o>0;i+=1,o-=1)s=(s<<8)+e[i]}if(s>n-i)return null;var a=i;if(i+=s,e[i++]!==2)return null;var c=e[i++];if(c&128){if(o=c-128,i+o>n)return null;for(;o>0&&e[i]===0;i+=1,o-=1);for(c=0;o>0;i+=1,o-=1)c=(c<<8)+e[i]}if(c>n-i)return null;var u=i;for(i+=c;s>0&&e[a]===0;s-=1,a+=1);if(s>32)return null;var h=e.slice(a,a+s);for(h.copy(t,32-h.length);c>0&&e[u]===0;c-=1,u+=1);if(c>32)return null;var f=e.slice(u,u+c);return f.copy(r,32-f.length),{r:t,s:r}}});var JE=W(Ve=>{"use strict";l();d();Object.defineProperty(Ve,"__esModule",{value:!0});Ve.ecdhUnsafe=Ve.ecdh=Ve.recover=Ve.verify=Ve.sign=Ve.signatureImportLax=Ve.signatureImport=Ve.signatureExport=Ve.signatureNormalize=Ve.publicKeyCombine=Ve.publicKeyTweakMul=Ve.publicKeyTweakAdd=Ve.publicKeyVerify=Ve.publicKeyConvert=Ve.publicKeyCreate=Ve.privateKeyTweakMul=Ve.privateKeyTweakAdd=Ve.privateKeyModInverse=Ve.privateKeyNegate=Ve.privateKeyImport=Ve.privateKeyExport=Ve.privateKeyVerify=void 0;var ki=MG(),ZE=UG(),C_=RG();Ve.privateKeyVerify=function(e){return e.length!==32?!1:ki.privateKeyVerify(Uint8Array.from(e))};Ve.privateKeyExport=function(e,t){if(e.length!==32)throw new RangeError("private key length is invalid");var r=ZE.privateKeyExport(e,t);return C_.privateKeyExport(e,r,t)};Ve.privateKeyImport=function(e){if(e=C_.privateKeyImport(e),e!==null&&e.length===32&&Ve.privateKeyVerify(e))return e;throw new Error("couldn't import from DER format")};Ve.privateKeyNegate=function(e){return Buffer.from(ki.privateKeyNegate(Uint8Array.from(e)))};Ve.privateKeyModInverse=function(e){if(e.length!==32)throw new Error("private key length is invalid");return Buffer.from(ZE.privateKeyModInverse(Uint8Array.from(e)))};Ve.privateKeyTweakAdd=function(e,t){return Buffer.from(ki.privateKeyTweakAdd(Uint8Array.from(e),t))};Ve.privateKeyTweakMul=function(e,t){return Buffer.from(ki.privateKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t)))};Ve.publicKeyCreate=function(e,t){return Buffer.from(ki.publicKeyCreate(Uint8Array.from(e),t))};Ve.publicKeyConvert=function(e,t){return Buffer.from(ki.publicKeyConvert(Uint8Array.from(e),t))};Ve.publicKeyVerify=function(e){return e.length!==33&&e.length!==65?!1:ki.publicKeyVerify(Uint8Array.from(e))};Ve.publicKeyTweakAdd=function(e,t,r){return Buffer.from(ki.publicKeyTweakAdd(Uint8Array.from(e),Uint8Array.from(t),r))};Ve.publicKeyTweakMul=function(e,t,r){return Buffer.from(ki.publicKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t),r))};Ve.publicKeyCombine=function(e,t){var r=[];return e.forEach(function(n){r.push(Uint8Array.from(n))}),Buffer.from(ki.publicKeyCombine(r,t))};Ve.signatureNormalize=function(e){return Buffer.from(ki.signatureNormalize(Uint8Array.from(e)))};Ve.signatureExport=function(e){return Buffer.from(ki.signatureExport(Uint8Array.from(e)))};Ve.signatureImport=function(e){return Buffer.from(ki.signatureImport(Uint8Array.from(e)))};Ve.signatureImportLax=function(e){if(e.length===0)throw new RangeError("signature length is invalid");var t=C_.signatureImportLax(e);if(t===null)throw new Error("couldn't parse DER signature");return ZE.signatureImport(t)};Ve.sign=function(e,t,r){if(r===null)throw new TypeError("options should be an Object");var n=void 0;if(r){if(n={},r.data===null)throw new TypeError("options.data should be a Buffer");if(r.data){if(r.data.length!=32)throw new RangeError("options.data length is invalid");n.data=new Uint8Array(r.data)}if(r.noncefn===null)throw new TypeError("options.noncefn should be a Function");r.noncefn&&(n.noncefn=function(o,s,a,c,u){var h=a!=null?Buffer.from(a):null,f=c!=null?Buffer.from(c):null,m=Buffer.from("");return r.noncefn&&(m=r.noncefn(Buffer.from(o),Buffer.from(s),h,f,u)),new Uint8Array(m)})}var i=ki.ecdsaSign(Uint8Array.from(e),Uint8Array.from(t),n);return{signature:Buffer.from(i.signature),recovery:i.recid}};Ve.verify=function(e,t,r){return ki.ecdsaVerify(Uint8Array.from(t),Uint8Array.from(e),r)};Ve.recover=function(e,t,r,n){return Buffer.from(ki.ecdsaRecover(Uint8Array.from(t),r,Uint8Array.from(e),n))};Ve.ecdh=function(e,t){return Buffer.from(ki.ecdh(Uint8Array.from(e),Uint8Array.from(t),{}))};Ve.ecdhUnsafe=function(e,t,r){if(e.length!==33&&e.length!==65)throw new RangeError("public key length is invalid");if(t.length!==32)throw new RangeError("private key length is invalid");return Buffer.from(ZE.ecdhUnsafe(Uint8Array.from(e),Uint8Array.from(t),r))}});var N_=W((spt,LG)=>{l();d();LG.exports=function(t){if(typeof t!="string")throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return t.slice(0,2)==="0x"}});var KG=W((upt,VG)=>{l();d();var p3e=N_();VG.exports=function(t){return typeof t!="string"?t:p3e(t)?t.slice(2):t}});var Zh=W((dpt,qG)=>{"use strict";l();d();var y3e=N_(),FG=KG();function XE(e){var t=e;if(typeof t!="string")throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}function HG(e){var t=e.toString(16);return"0x"+t}function m3e(e){var t=HG(e);return new Buffer(XE(t.slice(2)),"hex")}function g3e(e){if(typeof e!="string")throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return Buffer.byteLength(e,"utf8")}function b3e(e,t,r){if(Array.isArray(e)!==!0)throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(Array.isArray(t)!==!0)throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[!!r&&"some"||"every"](function(n){return e.indexOf(n)>=0})}function x3e(e){var t=new Buffer(XE(FG(e).replace(/^0+|0+$/g,"")),"hex");return t.toString("utf8")}function w3e(e){var t="",r=0,n=e.length;for(e.substring(0,2)==="0x"&&(r=2);r<n;r+=2){var i=parseInt(e.substr(r,2),16);t+=String.fromCharCode(i)}return t}function S3e(e){var t=new Buffer(e,"utf8");return"0x"+XE(t.toString("hex")).replace(/^0+|0+$/g,"")}function v3e(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r),i=n.toString(16);t+=i.length<2?"0"+i:i}return"0x"+t}function A3e(e,t,r){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if(typeof t!="string")throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var n=[],i=0;i<e.length;i++){var o=e[i][t];if(r&&!o)o="";else if(typeof o!="string")throw new Error("invalid abi");n.push(o)}return n}function E3e(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}qG.exports={arrayContainsArray:b3e,intToBuffer:m3e,getBinarySize:g3e,isHexPrefixed:y3e,stripHexPrefix:FG,padToEven:XE,intToHex:HG,fromAscii:v3e,fromUtf8:S3e,toAscii:w3e,toUtf8:x3e,getKeys:A3e,isHexString:E3e}});var QE=W(Hc=>{"use strict";l();d();var I3e=Hc&&Hc.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hc,"__esModule",{value:!0});Hc.getLength=Hc.decode=Hc.encode=void 0;var k3e=I3e(r1());function WG(e){if(Array.isArray(e)){for(var t=[],r=0;r<e.length;r++)t.push(WG(e[r]));var n=Buffer.concat(t);return Buffer.concat([jG(n.length,192),n])}else{var i=U_(e);return i.length===1&&i[0]<128?i:Buffer.concat([jG(i.length,128),i])}}Hc.encode=WG;function M_(e,t){if(e[0]==="0"&&e[1]==="0")throw new Error("invalid RLP: extra zeros");return parseInt(e,t)}function jG(e,t){if(e<56)return Buffer.from([e+t]);var r=O_(e),n=r.length/2,i=O_(t+55+n);return Buffer.from(i+r,"hex")}function T3e(e,t){if(t===void 0&&(t=!1),!e||e.length===0)return Buffer.from([]);var r=U_(e),n=D_(r);if(t)return n;if(n.remainder.length!==0)throw new Error("invalid remainder");return n.data}Hc.decode=T3e;function P3e(e){if(!e||e.length===0)return Buffer.from([]);var t=U_(e),r=t[0];if(r<=127)return t.length;if(r<=183)return r-127;if(r<=191)return r-182;if(r<=247)return r-191;var n=r-246,i=M_(t.slice(1,n).toString("hex"),16);return n+i}Hc.getLength=P3e;function D_(e){var t,r,n,i,o,s=[],a=e[0];if(a<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(a<=183){if(t=a-127,a===128?n=Buffer.from([]):n=e.slice(1,t),t===2&&n[0]<128)throw new Error("invalid rlp encoding: byte must be less 0x80");return{data:n,remainder:e.slice(t)}}else if(a<=191){if(r=a-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=M_(e.slice(1,r).toString("hex"),16),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");if(n=e.slice(r,t+r),n.length<t)throw new Error("invalid RLP: not enough bytes for string");return{data:n,remainder:e.slice(t+r)}}else if(a<=247){for(t=a-191,i=e.slice(1,t);i.length;)o=D_(i),s.push(o.data),i=o.remainder;return{data:s,remainder:e.slice(t)}}else{r=a-246,t=M_(e.slice(1,r).toString("hex"),16);var c=r+t;if(c>e.length)throw new Error("invalid rlp: total length is larger than the data");if(i=e.slice(r,c),i.length===0)throw new Error("invalid rlp, List has a invalid length");for(;i.length;)o=D_(i),s.push(o.data),i=o.remainder;return{data:s,remainder:e.slice(c)}}}function zG(e){return e.slice(0,2)==="0x"}function B3e(e){return typeof e!="string"?e:zG(e)?e.slice(2):e}function O_(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");var t=e.toString(16);return t.length%2?"0"+t:t}function _3e(e){return e.length%2?"0"+e:e}function C3e(e){var t=O_(e);return Buffer.from(t,"hex")}function U_(e){if(!Buffer.isBuffer(e)){if(typeof e=="string")return zG(e)?Buffer.from(_3e(B3e(e)),"hex"):Buffer.from(e);if(typeof e=="number"||typeof e=="bigint")return e?C3e(e):Buffer.from([]);if(e==null)return Buffer.from([]);if(e instanceof Uint8Array)return Buffer.from(e);if(k3e.default.isBN(e))return Buffer.from(e.toArray());throw new Error("invalid type")}return e}});var $G=W(mn=>{"use strict";l();d();Object.defineProperty(mn,"__esModule",{value:!0});mn.KECCAK256_RLP=mn.KECCAK256_RLP_S=mn.KECCAK256_RLP_ARRAY=mn.KECCAK256_RLP_ARRAY_S=mn.KECCAK256_NULL=mn.KECCAK256_NULL_S=mn.TWO_POW256=mn.MAX_INTEGER=void 0;var GG=$h(),{Buffer:R_}=Bn();mn.MAX_INTEGER=new GG("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16);mn.TWO_POW256=new GG("10000000000000000000000000000000000000000000000000000000000000000",16);mn.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";mn.KECCAK256_NULL=R_.from(mn.KECCAK256_NULL_S,"hex");mn.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";mn.KECCAK256_RLP_ARRAY=R_.from(mn.KECCAK256_RLP_ARRAY_S,"hex");mn.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";mn.KECCAK256_RLP=R_.from(mn.KECCAK256_RLP_S,"hex")});var JG=W((Spt,ZG)=>{"use strict";l();d();var N3e=Object.prototype.toString,M3e=Function.prototype.toString,D3e=/^\s*(?:function)?\*/,YG=Y6()(),L_=Object.getPrototypeOf,O3e=function(){if(!YG)return!1;try{return Function("return function*() {}")()}catch{}},V_;ZG.exports=function(t){if(typeof t!="function")return!1;if(D3e.test(M3e.call(t)))return!0;if(!YG){var r=N3e.call(t);return r==="[object GeneratorFunction]"}if(!L_)return!1;if(typeof V_>"u"){var n=O3e();V_=n?L_(n):!1}return L_(t)===V_}});var e$=W((Ept,QG)=>{"use strict";l();d();var U3e=Mre(),R3e=Object.prototype.toString,XG=Object.prototype.hasOwnProperty,L3e=function(t,r,n){for(var i=0,o=t.length;i<o;i++)XG.call(t,i)&&(n==null?r(t[i],i,t):r.call(n,t[i],i,t))},V3e=function(t,r,n){for(var i=0,o=t.length;i<o;i++)n==null?r(t.charAt(i),i,t):r.call(n,t.charAt(i),i,t)},K3e=function(t,r,n){for(var i in t)XG.call(t,i)&&(n==null?r(t[i],i,t):r.call(n,t[i],i,t))},F3e=function(t,r,n){if(!U3e(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),R3e.call(t)==="[object Array]"?L3e(t,r,i):typeof t=="string"?V3e(t,r,i):K3e(t,r,i)};QG.exports=F3e});var F_=W((Tpt,t$)=>{"use strict";l();d();var K_=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],H3e=typeof globalThis>"u"?self:globalThis;t$.exports=function(){for(var t=[],r=0;r<K_.length;r++)typeof H3e[K_[r]]=="function"&&(t[t.length]=K_[r]);return t}});var i$=W((_pt,n$)=>{"use strict";l();d();var q3e="Function.prototype.bind called on incompatible ",j3e=Object.prototype.toString,W3e=Math.max,z3e="[object Function]",r$=function(t,r){for(var n=[],i=0;i<t.length;i+=1)n[i]=t[i];for(var o=0;o<r.length;o+=1)n[o+t.length]=r[o];return n},G3e=function(t,r){for(var n=[],i=r||0,o=0;i<t.length;i+=1,o+=1)n[o]=t[i];return n},$3e=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r};n$.exports=function(t){var r=this;if(typeof r!="function"||j3e.apply(r)!==z3e)throw new TypeError(q3e+r);for(var n=G3e(arguments,1),i,o=function(){if(this instanceof i){var h=r.apply(this,r$(n,arguments));return Object(h)===h?h:this}return r.apply(t,r$(n,arguments))},s=W3e(0,r.length-n.length),a=[],c=0;c<s;c++)a[c]="$"+c;if(i=Function("binder","return function ("+$3e(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i}});var s$=W((Mpt,o$)=>{"use strict";l();d();var Y3e=i$();o$.exports=Function.prototype.bind||Y3e});var e3=W((Upt,c$)=>{"use strict";l();d();var a$={foo:{}},Z3e=Object;c$.exports=function(){return{__proto__:a$}.foo===a$.foo&&!({__proto__:null}instanceof Z3e)}});var f$=W((Vpt,u$)=>{"use strict";l();d();var J3e="Function.prototype.bind called on incompatible ",H_=Array.prototype.slice,X3e=Object.prototype.toString,Q3e="[object Function]";u$.exports=function(t){var r=this;if(typeof r!="function"||X3e.call(r)!==Q3e)throw new TypeError(J3e+r);for(var n=H_.call(arguments,1),i,o=function(){if(this instanceof i){var h=r.apply(this,n.concat(H_.call(arguments)));return Object(h)===h?h:this}else return r.apply(t,n.concat(H_.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],c=0;c<s;c++)a.push("$"+c);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i}});var d$=W((Hpt,l$)=>{"use strict";l();d();var e8e=f$();l$.exports=Function.prototype.bind||e8e});var W_=W((Wpt,g$)=>{"use strict";l();d();var Kt,jy=SyntaxError,m$=Function,qy=TypeError,q_=function(e){try{return m$('"use strict"; return ('+e+").constructor;")()}catch{}},Jh=Object.getOwnPropertyDescriptor;if(Jh)try{Jh({},"")}catch{Jh=null}var j_=function(){throw new qy},t8e=Jh?function(){try{return arguments.callee,j_}catch{try{return Jh(arguments,"callee").get}catch{return j_}}}():j_,Fy=G6()(),r8e=e3()(),si=Object.getPrototypeOf||(r8e?function(e){return e.__proto__}:null),Hy={},n8e=typeof Uint8Array>"u"||!si?Kt:si(Uint8Array),Xh={"%AggregateError%":typeof AggregateError>"u"?Kt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Kt:ArrayBuffer,"%ArrayIteratorPrototype%":Fy&&si?si([][Symbol.iterator]()):Kt,"%AsyncFromSyncIteratorPrototype%":Kt,"%AsyncFunction%":Hy,"%AsyncGenerator%":Hy,"%AsyncGeneratorFunction%":Hy,"%AsyncIteratorPrototype%":Hy,"%Atomics%":typeof Atomics>"u"?Kt:Atomics,"%BigInt%":typeof BigInt>"u"?Kt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Kt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Kt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Kt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Kt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Kt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Kt:FinalizationRegistry,"%Function%":m$,"%GeneratorFunction%":Hy,"%Int8Array%":typeof Int8Array>"u"?Kt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Kt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Kt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Fy&&si?si(si([][Symbol.iterator]())):Kt,"%JSON%":typeof JSON=="object"?JSON:Kt,"%Map%":typeof Map>"u"?Kt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Fy||!si?Kt:si(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Kt:Promise,"%Proxy%":typeof Proxy>"u"?Kt:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Kt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Kt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Fy||!si?Kt:si(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Kt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Fy&&si?si(""[Symbol.iterator]()):Kt,"%Symbol%":Fy?Symbol:Kt,"%SyntaxError%":jy,"%ThrowTypeError%":t8e,"%TypedArray%":n8e,"%TypeError%":qy,"%Uint8Array%":typeof Uint8Array>"u"?Kt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Kt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Kt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Kt:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Kt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Kt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Kt:WeakSet};if(si)try{null.error}catch(e){h$=si(si(e)),Xh["%Error.prototype%"]=h$}var h$,i8e=function e(t){var r;if(t==="%AsyncFunction%")r=q_("async function () {}");else if(t==="%GeneratorFunction%")r=q_("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=q_("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&si&&(r=si(i.prototype))}return Xh[t]=r,r},p$={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Gx=d$(),t3=$6(),o8e=Gx.call(Function.call,Array.prototype.concat),s8e=Gx.call(Function.apply,Array.prototype.splice),y$=Gx.call(Function.call,String.prototype.replace),r3=Gx.call(Function.call,String.prototype.slice),a8e=Gx.call(Function.call,RegExp.prototype.exec),c8e=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,u8e=/\\(\\)?/g,f8e=function(t){var r=r3(t,0,1),n=r3(t,-1);if(r==="%"&&n!=="%")throw new jy("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new jy("invalid intrinsic syntax, expected opening `%`");var i=[];return y$(t,c8e,function(o,s,a,c){i[i.length]=a?y$(c,u8e,"$1"):s||o}),i},l8e=function(t,r){var n=t,i;if(t3(p$,n)&&(i=p$[n],n="%"+i[0]+"%"),t3(Xh,n)){var o=Xh[n];if(o===Hy&&(o=i8e(n)),typeof o>"u"&&!r)throw new qy("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new jy("intrinsic "+t+" does not exist!")};g$.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new qy("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new qy('"allowMissing" argument must be a boolean');if(a8e(/^%?[^%]*%?$/,t)===null)throw new jy("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=f8e(t),i=n.length>0?n[0]:"",o=l8e("%"+i+"%",r),s=o.name,a=o.value,c=!1,u=o.alias;u&&(i=u[0],s8e(n,o8e([0,1],u)));for(var h=1,f=!0;h<n.length;h+=1){var m=n[h],b=r3(m,0,1),w=r3(m,-1);if((b==='"'||b==="'"||b==="`"||w==='"'||w==="'"||w==="`")&&b!==w)throw new jy("property names with quotes must have matching quotes");if((m==="constructor"||!f)&&(c=!0),i+="."+m,s="%"+i+"%",t3(Xh,s))a=Xh[s];else if(a!=null){if(!(m in a)){if(!r)throw new qy("base intrinsic for "+t+" exists, but the property is not available.");return}if(Jh&&h+1>=n.length){var S=Jh(a,m);f=!!S,f&&"get"in S&&!("originalValue"in S.get)?a=S.get:a=a[m]}else f=t3(a,m),a=a[m];f&&!c&&(Xh[s]=a)}}return a}});var x$=W(($pt,b$)=>{"use strict";l();d();var d8e="Function.prototype.bind called on incompatible ",z_=Array.prototype.slice,h8e=Object.prototype.toString,p8e="[object Function]";b$.exports=function(t){var r=this;if(typeof r!="function"||h8e.call(r)!==p8e)throw new TypeError(d8e+r);for(var n=z_.call(arguments,1),i,o=function(){if(this instanceof i){var h=r.apply(this,n.concat(z_.call(arguments)));return Object(h)===h?h:this}else return r.apply(t,n.concat(z_.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],c=0;c<s;c++)a.push("$"+c);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i}});var S$=W((Jpt,w$)=>{"use strict";l();d();var y8e=x$();w$.exports=Function.prototype.bind||y8e});var T$=W((eyt,k$)=>{"use strict";l();d();var Ft,$y=SyntaxError,I$=Function,Gy=TypeError,G_=function(e){try{return I$('"use strict"; return ('+e+").constructor;")()}catch{}},Qh=Object.getOwnPropertyDescriptor;if(Qh)try{Qh({},"")}catch{Qh=null}var $_=function(){throw new Gy},m8e=Qh?function(){try{return arguments.callee,$_}catch{try{return Qh(arguments,"callee").get}catch{return $_}}}():$_,Wy=G6()(),g8e=e3()(),ai=Object.getPrototypeOf||(g8e?function(e){return e.__proto__}:null),zy={},b8e=typeof Uint8Array>"u"||!ai?Ft:ai(Uint8Array),e0={"%AggregateError%":typeof AggregateError>"u"?Ft:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ft:ArrayBuffer,"%ArrayIteratorPrototype%":Wy&&ai?ai([][Symbol.iterator]()):Ft,"%AsyncFromSyncIteratorPrototype%":Ft,"%AsyncFunction%":zy,"%AsyncGenerator%":zy,"%AsyncGeneratorFunction%":zy,"%AsyncIteratorPrototype%":zy,"%Atomics%":typeof Atomics>"u"?Ft:Atomics,"%BigInt%":typeof BigInt>"u"?Ft:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ft:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ft:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ft:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ft:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ft:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ft:FinalizationRegistry,"%Function%":I$,"%GeneratorFunction%":zy,"%Int8Array%":typeof Int8Array>"u"?Ft:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ft:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ft:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Wy&&ai?ai(ai([][Symbol.iterator]())):Ft,"%JSON%":typeof JSON=="object"?JSON:Ft,"%Map%":typeof Map>"u"?Ft:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Wy||!ai?Ft:ai(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ft:Promise,"%Proxy%":typeof Proxy>"u"?Ft:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ft:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ft:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Wy||!ai?Ft:ai(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ft:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Wy&&ai?ai(""[Symbol.iterator]()):Ft,"%Symbol%":Wy?Symbol:Ft,"%SyntaxError%":$y,"%ThrowTypeError%":m8e,"%TypedArray%":b8e,"%TypeError%":Gy,"%Uint8Array%":typeof Uint8Array>"u"?Ft:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ft:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ft:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ft:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ft:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ft:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ft:WeakSet};if(ai)try{null.error}catch(e){v$=ai(ai(e)),e0["%Error.prototype%"]=v$}var v$,x8e=function e(t){var r;if(t==="%AsyncFunction%")r=G_("async function () {}");else if(t==="%GeneratorFunction%")r=G_("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=G_("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&ai&&(r=ai(i.prototype))}return e0[t]=r,r},A$={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},$x=S$(),n3=$6(),w8e=$x.call(Function.call,Array.prototype.concat),S8e=$x.call(Function.apply,Array.prototype.splice),E$=$x.call(Function.call,String.prototype.replace),i3=$x.call(Function.call,String.prototype.slice),v8e=$x.call(Function.call,RegExp.prototype.exec),A8e=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E8e=/\\(\\)?/g,I8e=function(t){var r=i3(t,0,1),n=i3(t,-1);if(r==="%"&&n!=="%")throw new $y("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new $y("invalid intrinsic syntax, expected opening `%`");var i=[];return E$(t,A8e,function(o,s,a,c){i[i.length]=a?E$(c,E8e,"$1"):s||o}),i},k8e=function(t,r){var n=t,i;if(n3(A$,n)&&(i=A$[n],n="%"+i[0]+"%"),n3(e0,n)){var o=e0[n];if(o===zy&&(o=x8e(n)),typeof o>"u"&&!r)throw new Gy("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new $y("intrinsic "+t+" does not exist!")};k$.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new Gy("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Gy('"allowMissing" argument must be a boolean');if(v8e(/^%?[^%]*%?$/,t)===null)throw new $y("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=I8e(t),i=n.length>0?n[0]:"",o=k8e("%"+i+"%",r),s=o.name,a=o.value,c=!1,u=o.alias;u&&(i=u[0],S8e(n,w8e([0,1],u)));for(var h=1,f=!0;h<n.length;h+=1){var m=n[h],b=i3(m,0,1),w=i3(m,-1);if((b==='"'||b==="'"||b==="`"||w==='"'||w==="'"||w==="`")&&b!==w)throw new $y("property names with quotes must have matching quotes");if((m==="constructor"||!f)&&(c=!0),i+="."+m,s="%"+i+"%",n3(e0,s))a=e0[s];else if(a!=null){if(!(m in a)){if(!r)throw new Gy("base intrinsic for "+t+" exists, but the property is not available.");return}if(Qh&&h+1>=n.length){var S=Qh(a,m);f=!!S,f&&"get"in S&&!("originalValue"in S.get)?a=S.get:a=a[m]}else f=n3(a,m),a=a[m];f&&!c&&(e0[s]=a)}}return a}});var B$=W((nyt,P$)=>{"use strict";l();d();var T8e="Function.prototype.bind called on incompatible ",Y_=Array.prototype.slice,P8e=Object.prototype.toString,B8e="[object Function]";P$.exports=function(t){var r=this;if(typeof r!="function"||P8e.call(r)!==B8e)throw new TypeError(T8e+r);for(var n=Y_.call(arguments,1),i,o=function(){if(this instanceof i){var h=r.apply(this,n.concat(Y_.call(arguments)));return Object(h)===h?h:this}else return r.apply(t,n.concat(Y_.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],c=0;c<s;c++)a.push("$"+c);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i}});var C$=W((syt,_$)=>{"use strict";l();d();var _8e=B$();_$.exports=Function.prototype.bind||_8e});var R$=W((uyt,U$)=>{"use strict";l();d();var Ht,Xy=SyntaxError,O$=Function,Jy=TypeError,Z_=function(e){try{return O$('"use strict"; return ('+e+").constructor;")()}catch{}},t0=Object.getOwnPropertyDescriptor;if(t0)try{t0({},"")}catch{t0=null}var J_=function(){throw new Jy},C8e=t0?function(){try{return arguments.callee,J_}catch{try{return t0(arguments,"callee").get}catch{return J_}}}():J_,Yy=G6()(),N8e=e3()(),ci=Object.getPrototypeOf||(N8e?function(e){return e.__proto__}:null),Zy={},M8e=typeof Uint8Array>"u"||!ci?Ht:ci(Uint8Array),r0={"%AggregateError%":typeof AggregateError>"u"?Ht:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ht:ArrayBuffer,"%ArrayIteratorPrototype%":Yy&&ci?ci([][Symbol.iterator]()):Ht,"%AsyncFromSyncIteratorPrototype%":Ht,"%AsyncFunction%":Zy,"%AsyncGenerator%":Zy,"%AsyncGeneratorFunction%":Zy,"%AsyncIteratorPrototype%":Zy,"%Atomics%":typeof Atomics>"u"?Ht:Atomics,"%BigInt%":typeof BigInt>"u"?Ht:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ht:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ht:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ht:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ht:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ht:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ht:FinalizationRegistry,"%Function%":O$,"%GeneratorFunction%":Zy,"%Int8Array%":typeof Int8Array>"u"?Ht:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ht:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ht:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Yy&&ci?ci(ci([][Symbol.iterator]())):Ht,"%JSON%":typeof JSON=="object"?JSON:Ht,"%Map%":typeof Map>"u"?Ht:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Yy||!ci?Ht:ci(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ht:Promise,"%Proxy%":typeof Proxy>"u"?Ht:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ht:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ht:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Yy||!ci?Ht:ci(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ht:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Yy&&ci?ci(""[Symbol.iterator]()):Ht,"%Symbol%":Yy?Symbol:Ht,"%SyntaxError%":Xy,"%ThrowTypeError%":C8e,"%TypedArray%":M8e,"%TypeError%":Jy,"%Uint8Array%":typeof Uint8Array>"u"?Ht:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ht:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ht:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ht:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ht:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ht:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ht:WeakSet};if(ci)try{null.error}catch(e){N$=ci(ci(e)),r0["%Error.prototype%"]=N$}var N$,D8e=function e(t){var r;if(t==="%AsyncFunction%")r=Z_("async function () {}");else if(t==="%GeneratorFunction%")r=Z_("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=Z_("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&ci&&(r=ci(i.prototype))}return r0[t]=r,r},M$={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Yx=C$(),o3=$6(),O8e=Yx.call(Function.call,Array.prototype.concat),U8e=Yx.call(Function.apply,Array.prototype.splice),D$=Yx.call(Function.call,String.prototype.replace),s3=Yx.call(Function.call,String.prototype.slice),R8e=Yx.call(Function.call,RegExp.prototype.exec),L8e=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,V8e=/\\(\\)?/g,K8e=function(t){var r=s3(t,0,1),n=s3(t,-1);if(r==="%"&&n!=="%")throw new Xy("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Xy("invalid intrinsic syntax, expected opening `%`");var i=[];return D$(t,L8e,function(o,s,a,c){i[i.length]=a?D$(c,V8e,"$1"):s||o}),i},F8e=function(t,r){var n=t,i;if(o3(M$,n)&&(i=M$[n],n="%"+i[0]+"%"),o3(r0,n)){var o=r0[n];if(o===Zy&&(o=D8e(n)),typeof o>"u"&&!r)throw new Jy("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Xy("intrinsic "+t+" does not exist!")};U$.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new Jy("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Jy('"allowMissing" argument must be a boolean');if(R8e(/^%?[^%]*%?$/,t)===null)throw new Xy("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=K8e(t),i=n.length>0?n[0]:"",o=F8e("%"+i+"%",r),s=o.name,a=o.value,c=!1,u=o.alias;u&&(i=u[0],U8e(n,O8e([0,1],u)));for(var h=1,f=!0;h<n.length;h+=1){var m=n[h],b=s3(m,0,1),w=s3(m,-1);if((b==='"'||b==="'"||b==="`"||w==='"'||w==="'"||w==="`")&&b!==w)throw new Xy("property names with quotes must have matching quotes");if((m==="constructor"||!f)&&(c=!0),i+="."+m,s="%"+i+"%",o3(r0,s))a=r0[s];else if(a!=null){if(!(m in a)){if(!r)throw new Jy("base intrinsic for "+t+" exists, but the property is not available.");return}if(t0&&h+1>=n.length){var S=t0(a,m);f=!!S,f&&"get"in S&&!("originalValue"in S.get)?a=S.get:a=a[m]}else f=o3(a,m),a=a[m];f&&!c&&(r0[s]=a)}}return a}});var K$=W((dyt,V$)=>{"use strict";l();d();var H8e=BM()(),X_=R$(),Zx=H8e&&X_("%Object.defineProperty%",!0);if(Zx)try{Zx({},"a",{value:1})}catch{Zx=!1}var q8e=X_("%SyntaxError%"),Qy=X_("%TypeError%"),L$=u1();V$.exports=function(t,r,n){if(!t||typeof t!="object"&&typeof t!="function")throw new Qy("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Qy("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Qy("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Qy("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Qy("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Qy("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,c=!!L$&&L$(t,r);if(Zx)Zx(t,r,{configurable:s===null&&c?c.configurable:!s,enumerable:i===null&&c?c.enumerable:!i,value:n,writable:o===null&&c?c.writable:!o});else if(a||!i&&!o&&!s)t[r]=n;else throw new q8e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var z$=W((yyt,W$)=>{"use strict";l();d();var j$=T$(),F$=K$(),j8e=BM()(),H$=u1(),q$=j$("%TypeError%"),W8e=j$("%Math.floor%");W$.exports=function(t,r){if(typeof t!="function")throw new q$("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||W8e(r)!==r)throw new q$("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in t&&H$){var s=H$(t,"length");s&&!s.configurable&&(i=!1),s&&!s.writable&&(o=!1)}return(i||o||!n)&&(j8e?F$(t,"length",r,!0,!0):F$(t,"length",r)),t}});var e9=W((byt,a3)=>{"use strict";l();d();var Q_=s$(),em=W_(),z8e=z$(),G8e=em("%TypeError%"),$$=em("%Function.prototype.apply%"),Y$=em("%Function.prototype.call%"),Z$=em("%Reflect.apply%",!0)||Q_.call(Y$,$$),Jx=em("%Object.defineProperty%",!0),$8e=em("%Math.max%");if(Jx)try{Jx({},"a",{value:1})}catch{Jx=null}a3.exports=function(t){if(typeof t!="function")throw new G8e("a function is required");var r=Z$(Q_,Y$,arguments);return z8e(r,1+$8e(0,t.length-(arguments.length-1)),!0)};var G$=function(){return Z$(Q_,$$,arguments)};Jx?Jx(a3.exports,"apply",{value:G$}):a3.exports.apply=G$});var eY=W((Syt,Q$)=>{"use strict";l();d();var J$=W_(),X$=e9(),Y8e=X$(J$("String.prototype.indexOf"));Q$.exports=function(t,r){var n=J$(t,!!r);return typeof n=="function"&&Y8e(t,".prototype.")>-1?X$(n):n}});var oY=W((Eyt,iY)=>{"use strict";l();d();var u3=e$(),Z8e=F_(),tY=e9(),n9=eY(),c3=u1(),J8e=n9("Object.prototype.toString"),nY=Y6()(),rY=typeof globalThis>"u"?self:globalThis,r9=Z8e(),i9=n9("String.prototype.slice"),t9=Object.getPrototypeOf,X8e=n9("Array.prototype.indexOf",!0)||function(t,r){for(var n=0;n<t.length;n+=1)if(t[n]===r)return n;return-1},f3={__proto__:null};nY&&c3&&t9?u3(r9,function(e){var t=new rY[e];if(Symbol.toStringTag in t){var r=t9(t),n=c3(r,Symbol.toStringTag);if(!n){var i=t9(r);n=c3(i,Symbol.toStringTag)}f3["$"+e]=tY(n.get)}}):u3(r9,function(e){var t=new rY[e],r=t.slice||t.set;r&&(f3["$"+e]=tY(r))});var Q8e=function(t){var r=!1;return u3(f3,function(n,i){if(!r)try{"$"+n(t)===i&&(r=i9(i,1))}catch{}}),r},e6e=function(t){var r=!1;return u3(f3,function(n,i){if(!r)try{n(t),r=i9(i,1)}catch{}}),r};iY.exports=function(t){if(!t||typeof t!="object")return!1;if(!nY){var r=i9(J8e(t),8,-1);return X8e(r9,r)>-1?r:r!=="Object"?!1:e6e(t)}return c3?Q8e(t):null}});var aY=W((Tyt,sY)=>{l();d();var t6e=Object.prototype.hasOwnProperty,r6e=Object.prototype.toString;sY.exports=function(t,r,n){if(r6e.call(r)!=="[object Function]")throw new TypeError("iterator must be a function");var i=t.length;if(i===+i)for(var o=0;o<i;o++)r.call(n,t[o],o,t);else for(var s in t)t6e.call(t,s)&&r.call(n,t[s],s,t)}});var uY=W((_yt,cY)=>{"use strict";l();d();cY.exports=u1()});var yY=W((Myt,pY)=>{"use strict";l();d();var fY=aY(),n6e=F_(),s9=Cre(),i6e=s9("Object.prototype.toString"),lY=Y6()(),o6e=typeof globalThis>"u"?self:globalThis,dY=n6e(),s6e=s9("Array.prototype.indexOf",!0)||function(t,r){for(var n=0;n<t.length;n+=1)if(t[n]===r)return n;return-1},a6e=s9("String.prototype.slice"),hY={},l3=uY(),o9=Object.getPrototypeOf;lY&&l3&&o9&&fY(dY,function(e){var t=new o6e[e];if(Symbol.toStringTag in t){var r=o9(t),n=l3(r,Symbol.toStringTag);if(!n){var i=o9(r);n=l3(i,Symbol.toStringTag)}hY[e]=n.get}});var c6e=function(t){var r=!1;return fY(hY,function(n,i){if(!r)try{r=n.call(t)===i}catch{}}),r};pY.exports=function(t){if(!t||typeof t!="object")return!1;if(!lY||!(Symbol.toStringTag in t)){var r=a6e(i6e(t),8,-1);return s6e(dY,r)>-1}return l3?c6e(t):!1}});var BY=W(Ut=>{"use strict";l();d();var u6e=Nre(),f6e=JG(),qa=oY(),mY=yY();function tm(e){return e.call.bind(e)}var gY=typeof BigInt<"u",bY=typeof Symbol<"u",js=tm(Object.prototype.toString),l6e=tm(Number.prototype.valueOf),d6e=tm(String.prototype.valueOf),h6e=tm(Boolean.prototype.valueOf);gY&&(xY=tm(BigInt.prototype.valueOf));var xY;bY&&(wY=tm(Symbol.prototype.valueOf));var wY;function Qx(e,t){if(typeof e!="object")return!1;try{return t(e),!0}catch{return!1}}Ut.isArgumentsObject=u6e;Ut.isGeneratorFunction=f6e;Ut.isTypedArray=mY;function p6e(e){return typeof Promise<"u"&&e instanceof Promise||e!==null&&typeof e=="object"&&typeof e.then=="function"&&typeof e.catch=="function"}Ut.isPromise=p6e;function y6e(e){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(e):mY(e)||vY(e)}Ut.isArrayBufferView=y6e;function m6e(e){return qa(e)==="Uint8Array"}Ut.isUint8Array=m6e;function g6e(e){return qa(e)==="Uint8ClampedArray"}Ut.isUint8ClampedArray=g6e;function b6e(e){return qa(e)==="Uint16Array"}Ut.isUint16Array=b6e;function x6e(e){return qa(e)==="Uint32Array"}Ut.isUint32Array=x6e;function w6e(e){return qa(e)==="Int8Array"}Ut.isInt8Array=w6e;function S6e(e){return qa(e)==="Int16Array"}Ut.isInt16Array=S6e;function v6e(e){return qa(e)==="Int32Array"}Ut.isInt32Array=v6e;function A6e(e){return qa(e)==="Float32Array"}Ut.isFloat32Array=A6e;function E6e(e){return qa(e)==="Float64Array"}Ut.isFloat64Array=E6e;function I6e(e){return qa(e)==="BigInt64Array"}Ut.isBigInt64Array=I6e;function k6e(e){return qa(e)==="BigUint64Array"}Ut.isBigUint64Array=k6e;function d3(e){return js(e)==="[object Map]"}d3.working=typeof Map<"u"&&d3(new Map);function T6e(e){return typeof Map>"u"?!1:d3.working?d3(e):e instanceof Map}Ut.isMap=T6e;function h3(e){return js(e)==="[object Set]"}h3.working=typeof Set<"u"&&h3(new Set);function P6e(e){return typeof Set>"u"?!1:h3.working?h3(e):e instanceof Set}Ut.isSet=P6e;function p3(e){return js(e)==="[object WeakMap]"}p3.working=typeof WeakMap<"u"&&p3(new WeakMap);function B6e(e){return typeof WeakMap>"u"?!1:p3.working?p3(e):e instanceof WeakMap}Ut.isWeakMap=B6e;function c9(e){return js(e)==="[object WeakSet]"}c9.working=typeof WeakSet<"u"&&c9(new WeakSet);function _6e(e){return c9(e)}Ut.isWeakSet=_6e;function y3(e){return js(e)==="[object ArrayBuffer]"}y3.working=typeof ArrayBuffer<"u"&&y3(new ArrayBuffer);function SY(e){return typeof ArrayBuffer>"u"?!1:y3.working?y3(e):e instanceof ArrayBuffer}Ut.isArrayBuffer=SY;function m3(e){return js(e)==="[object DataView]"}m3.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&m3(new DataView(new ArrayBuffer(1),0,1));function vY(e){return typeof DataView>"u"?!1:m3.working?m3(e):e instanceof DataView}Ut.isDataView=vY;var a9=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Xx(e){return js(e)==="[object SharedArrayBuffer]"}function AY(e){return typeof a9>"u"?!1:(typeof Xx.working>"u"&&(Xx.working=Xx(new a9)),Xx.working?Xx(e):e instanceof a9)}Ut.isSharedArrayBuffer=AY;function C6e(e){return js(e)==="[object AsyncFunction]"}Ut.isAsyncFunction=C6e;function N6e(e){return js(e)==="[object Map Iterator]"}Ut.isMapIterator=N6e;function M6e(e){return js(e)==="[object Set Iterator]"}Ut.isSetIterator=M6e;function D6e(e){return js(e)==="[object Generator]"}Ut.isGeneratorObject=D6e;function O6e(e){return js(e)==="[object WebAssembly.Module]"}Ut.isWebAssemblyCompiledModule=O6e;function EY(e){return Qx(e,l6e)}Ut.isNumberObject=EY;function IY(e){return Qx(e,d6e)}Ut.isStringObject=IY;function kY(e){return Qx(e,h6e)}Ut.isBooleanObject=kY;function TY(e){return gY&&Qx(e,xY)}Ut.isBigIntObject=TY;function PY(e){return bY&&Qx(e,wY)}Ut.isSymbolObject=PY;function U6e(e){return EY(e)||IY(e)||kY(e)||TY(e)||PY(e)}Ut.isBoxedPrimitive=U6e;function R6e(e){return typeof Uint8Array<"u"&&(SY(e)||AY(e))}Ut.isAnyArrayBuffer=R6e;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(e){Object.defineProperty(Ut,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})})});var CY=W((Vyt,_Y)=>{l();d();_Y.exports=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}});var nm=W(Rt=>{l();d();var NY=Object.getOwnPropertyDescriptors||function(t){for(var r=Object.keys(t),n={},i=0;i<r.length;i++)n[r[i]]=Object.getOwnPropertyDescriptor(t,r[i]);return n},L6e=/%[sdj%]/g;Rt.format=function(e){if(!A3(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(ed(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,i=n.length,o=String(e).replace(L6e,function(a){if(a==="%%")return"%";if(r>=i)return a;switch(a){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch{return"[Circular]"}default:return a}}),s=n[r];r<i;s=n[++r])v3(s)||!rm(s)?o+=" "+s:o+=" "+ed(s);return o};Rt.deprecate=function(e,t){if(typeof process<"u"&&process.noDeprecation===!0)return e;if(typeof process>"u")return function(){return Rt.deprecate(e,t).apply(this,arguments)};var r=!1;function n(){if(!r){if(process.throwDeprecation)throw new Error(t);process.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}return n};var g3={},MY=/^$/;E.NODE_DEBUG&&(b3=E.NODE_DEBUG,b3=b3.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),MY=new RegExp("^"+b3+"$","i"));var b3;Rt.debuglog=function(e){if(e=e.toUpperCase(),!g3[e])if(MY.test(e)){var t=process.pid;g3[e]=function(){var r=Rt.format.apply(Rt,arguments);console.error("%s %d: %s",e,t,r)}}else g3[e]=function(){};return g3[e]};function ed(e,t){var r={seen:[],stylize:K6e};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d9(t)?r.showHidden=t:t&&Rt._extend(r,t),i0(r.showHidden)&&(r.showHidden=!1),i0(r.depth)&&(r.depth=2),i0(r.colors)&&(r.colors=!1),i0(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=V6e),w3(r,e,r.depth)}Rt.inspect=ed;ed.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};ed.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function V6e(e,t){var r=ed.styles[t];return r?"\x1B["+ed.colors[r][0]+"m"+e+"\x1B["+ed.colors[r][1]+"m":e}function K6e(e,t){return e}function F6e(e){var t={};return e.forEach(function(r,n){t[r]=!0}),t}function w3(e,t,r){if(e.customInspect&&t&&x3(t.inspect)&&t.inspect!==Rt.inspect&&!(t.constructor&&t.constructor.prototype===t)){var n=t.inspect(r,e);return A3(n)||(n=w3(e,n,r)),n}var i=H6e(e,t);if(i)return i;var o=Object.keys(t),s=F6e(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),tw(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return u9(t);if(o.length===0){if(x3(t)){var a=t.name?": "+t.name:"";return e.stylize("[Function"+a+"]","special")}if(ew(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(S3(t))return e.stylize(Date.prototype.toString.call(t),"date");if(tw(t))return u9(t)}var c="",u=!1,h=["{","}"];if(DY(t)&&(u=!0,h=["[","]"]),x3(t)){var f=t.name?": "+t.name:"";c=" [Function"+f+"]"}if(ew(t)&&(c=" "+RegExp.prototype.toString.call(t)),S3(t)&&(c=" "+Date.prototype.toUTCString.call(t)),tw(t)&&(c=" "+u9(t)),o.length===0&&(!u||t.length==0))return h[0]+c+h[1];if(r<0)return ew(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var m;return u?m=q6e(e,t,r,s,o):m=o.map(function(b){return l9(e,t,r,s,b,u)}),e.seen.pop(),j6e(m,c,h)}function H6e(e,t){if(i0(t))return e.stylize("undefined","undefined");if(A3(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(OY(t))return e.stylize(""+t,"number");if(d9(t))return e.stylize(""+t,"boolean");if(v3(t))return e.stylize("null","null")}function u9(e){return"["+Error.prototype.toString.call(e)+"]"}function q6e(e,t,r,n,i){for(var o=[],s=0,a=t.length;s<a;++s)UY(t,String(s))?o.push(l9(e,t,r,n,String(s),!0)):o.push("");return i.forEach(function(c){c.match(/^\d+$/)||o.push(l9(e,t,r,n,c,!0))}),o}function l9(e,t,r,n,i,o){var s,a,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?c.set?a=e.stylize("[Getter/Setter]","special"):a=e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),UY(n,i)||(s="["+i+"]"),a||(e.seen.indexOf(c.value)<0?(v3(r)?a=w3(e,c.value,null):a=w3(e,c.value,r-1),a.indexOf(`
`)>-1&&(o?a=a.split(`
`).map(function(u){return"  "+u}).join(`
`).slice(2):a=`
`+a.split(`
`).map(function(u){return"   "+u}).join(`
`))):a=e.stylize("[Circular]","special")),i0(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.slice(1,-1),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function j6e(e,t,r){var n=0,i=e.reduce(function(o,s){return n++,s.indexOf(`
`)>=0&&n++,o+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}Rt.types=BY();function DY(e){return Array.isArray(e)}Rt.isArray=DY;function d9(e){return typeof e=="boolean"}Rt.isBoolean=d9;function v3(e){return e===null}Rt.isNull=v3;function W6e(e){return e==null}Rt.isNullOrUndefined=W6e;function OY(e){return typeof e=="number"}Rt.isNumber=OY;function A3(e){return typeof e=="string"}Rt.isString=A3;function z6e(e){return typeof e=="symbol"}Rt.isSymbol=z6e;function i0(e){return e===void 0}Rt.isUndefined=i0;function ew(e){return rm(e)&&h9(e)==="[object RegExp]"}Rt.isRegExp=ew;Rt.types.isRegExp=ew;function rm(e){return typeof e=="object"&&e!==null}Rt.isObject=rm;function S3(e){return rm(e)&&h9(e)==="[object Date]"}Rt.isDate=S3;Rt.types.isDate=S3;function tw(e){return rm(e)&&(h9(e)==="[object Error]"||e instanceof Error)}Rt.isError=tw;Rt.types.isNativeError=tw;function x3(e){return typeof e=="function"}Rt.isFunction=x3;function G6e(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e>"u"}Rt.isPrimitive=G6e;Rt.isBuffer=CY();function h9(e){return Object.prototype.toString.call(e)}function f9(e){return e<10?"0"+e.toString(10):e.toString(10)}var $6e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Y6e(){var e=new Date,t=[f9(e.getHours()),f9(e.getMinutes()),f9(e.getSeconds())].join(":");return[e.getDate(),$6e[e.getMonth()],t].join(" ")}Rt.log=function(){console.log("%s - %s",Y6e(),Rt.format.apply(Rt,arguments))};Rt.inherits=Ire();Rt._extend=function(e,t){if(!t||!rm(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};function UY(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var n0=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;Rt.promisify=function(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');if(n0&&t[n0]){var r=t[n0];if(typeof r!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,n0,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var n,i,o=new Promise(function(c,u){n=c,i=u}),s=[],a=0;a<arguments.length;a++)s.push(arguments[a]);s.push(function(c,u){c?i(c):n(u)});try{t.apply(this,s)}catch(c){i(c)}return o}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),n0&&Object.defineProperty(r,n0,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,NY(t))};Rt.promisify.custom=n0;function Z6e(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function J6e(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');function t(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var i=r.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};e.apply(this,r).then(function(a){process.nextTick(s.bind(null,null,a))},function(a){process.nextTick(Z6e.bind(null,a,s))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,NY(e)),t}Rt.callbackify=J6e});var g9=W((Wyt,VY)=>{"use strict";l();d();function im(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?im=function(r){return typeof r}:im=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},im(e)}function X6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q6e(e,t){return t&&(im(t)==="object"||typeof t=="function")?t:e4e(e)}function e4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y9(e){return y9=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},y9(e)}function t4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m9(e,t)}function m9(e,t){return m9=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},m9(e,t)}var LY={},om,p9;function rw(e,t,r){r||(r=Error);function n(o,s,a){return typeof t=="string"?t:t(o,s,a)}var i=function(o){t4e(s,o);function s(a,c,u){var h;return X6e(this,s),h=Q6e(this,y9(s).call(this,n(a,c,u))),h.code=e,h}return s}(r);LY[e]=i}function RY(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(n){return String(n)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function r4e(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function n4e(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function i4e(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}rw("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError);rw("ERR_INVALID_ARG_TYPE",function(e,t,r){om===void 0&&(om=nw()),om(typeof e=="string","'name' must be a string");var n;typeof t=="string"&&r4e(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";var i;if(n4e(e," argument"))i="The ".concat(e," ").concat(n," ").concat(RY(t,"type"));else{var o=i4e(e,".")?"property":"argument";i='The "'.concat(e,'" ').concat(o," ").concat(n," ").concat(RY(t,"type"))}return i+=". Received type ".concat(im(r)),i},TypeError);rw("ERR_INVALID_ARG_VALUE",function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";p9===void 0&&(p9=nm());var n=p9.inspect(t);return n.length>128&&(n="".concat(n.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(r,". Received ").concat(n)},TypeError,RangeError);rw("ERR_INVALID_RETURN_VALUE",function(e,t,r){var n;return r&&r.constructor&&r.constructor.name?n="instance of ".concat(r.constructor.name):n="type ".concat(im(r)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(n,".")},TypeError);rw("ERR_MISSING_ARGS",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];om===void 0&&(om=nw()),om(t.length>0,"At least one arg needs to be specified");var n="The ",i=t.length;switch(t=t.map(function(o){return'"'.concat(o,'"')}),i){case 1:n+="".concat(t[0]," argument");break;case 2:n+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:n+=t.slice(0,i-1).join(", "),n+=", and ".concat(t[i-1]," arguments");break}return"".concat(n," must be specified")},TypeError);VY.exports.codes=LY});var jY=W(($yt,qY)=>{"use strict";l();d();function o4e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){s4e(e,i,r[i])})}return e}function s4e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c4e(e,t,r){return t&&KY(e.prototype,t),r&&KY(e,r),e}function sm(e,t){return t&&(Ws(t)==="object"||typeof t=="function")?t:b9(e)}function b9(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aw(e,t)}function x9(e){var t=typeof Map=="function"?new Map:void 0;return x9=function(n){if(n===null||!l4e(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(n))return t.get(n);t.set(n,i)}function i(){return E3(n,arguments,td(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),aw(i,n)},x9(e)}function f4e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function E3(e,t,r){return f4e()?E3=Reflect.construct:E3=function(i,o,s){var a=[null];a.push.apply(a,o);var c=Function.bind.apply(i,a),u=new c;return s&&aw(u,s.prototype),u},E3.apply(null,arguments)}function l4e(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function aw(e,t){return aw=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},aw(e,t)}function td(e){return td=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},td(e)}function Ws(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ws=function(r){return typeof r}:Ws=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ws(e)}var d4e=nm(),w9=d4e.inspect,h4e=g9(),p4e=h4e.codes.ERR_INVALID_ARG_TYPE;function FY(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function y4e(e,t){if(t=Math.floor(t),e.length==0||t==0)return"";var r=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+=e.substring(0,r-e.length),e}var ja="",iw="",ow="",Ti="",o0={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},m4e=10;function HY(e){var t=Object.keys(e),r=Object.create(Object.getPrototypeOf(e));return t.forEach(function(n){r[n]=e[n]}),Object.defineProperty(r,"message",{value:e.message}),r}function sw(e){return w9(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function g4e(e,t,r){var n="",i="",o=0,s="",a=!1,c=sw(e),u=c.split(`
`),h=sw(t).split(`
`),f=0,m="";if(r==="strictEqual"&&Ws(e)==="object"&&Ws(t)==="object"&&e!==null&&t!==null&&(r="strictEqualObject"),u.length===1&&h.length===1&&u[0]!==h[0]){var b=u[0].length+h[0].length;if(b<=m4e){if((Ws(e)!=="object"||e===null)&&(Ws(t)!=="object"||t===null)&&(e!==0||t!==0))return"".concat(o0[r],`

`)+"".concat(u[0]," !== ").concat(h[0],`
`)}else if(r!=="strictEqualObject"){var w=process.stderr&&process.stderr.isTTY?process.stderr.columns:80;if(b<w){for(;u[0][f]===h[0][f];)f++;f>2&&(m=`
  `.concat(y4e(" ",f),"^"),f=0)}}}for(var S=u[u.length-1],P=h[h.length-1];S===P&&(f++<2?s=`
  `.concat(S).concat(s):n=S,u.pop(),h.pop(),!(u.length===0||h.length===0));)S=u[u.length-1],P=h[h.length-1];var N=Math.max(u.length,h.length);if(N===0){var O=c.split(`
`);if(O.length>30)for(O[26]="".concat(ja,"...").concat(Ti);O.length>27;)O.pop();return"".concat(o0.notIdentical,`

`).concat(O.join(`
`),`
`)}f>3&&(s=`
`.concat(ja,"...").concat(Ti).concat(s),a=!0),n!==""&&(s=`
  `.concat(n).concat(s),n="");var C=0,L=o0[r]+`
`.concat(iw,"+ actual").concat(Ti," ").concat(ow,"- expected").concat(Ti),V=" ".concat(ja,"...").concat(Ti," Lines skipped");for(f=0;f<N;f++){var j=f-o;if(u.length<f+1)j>1&&f>2&&(j>4?(i+=`
`.concat(ja,"...").concat(Ti),a=!0):j>3&&(i+=`
  `.concat(h[f-2]),C++),i+=`
  `.concat(h[f-1]),C++),o=f,n+=`
`.concat(ow,"-").concat(Ti," ").concat(h[f]),C++;else if(h.length<f+1)j>1&&f>2&&(j>4?(i+=`
`.concat(ja,"...").concat(Ti),a=!0):j>3&&(i+=`
  `.concat(u[f-2]),C++),i+=`
  `.concat(u[f-1]),C++),o=f,i+=`
`.concat(iw,"+").concat(Ti," ").concat(u[f]),C++;else{var $=h[f],H=u[f],Y=H!==$&&(!FY(H,",")||H.slice(0,-1)!==$);Y&&FY($,",")&&$.slice(0,-1)===H&&(Y=!1,H+=","),Y?(j>1&&f>2&&(j>4?(i+=`
`.concat(ja,"...").concat(Ti),a=!0):j>3&&(i+=`
  `.concat(u[f-2]),C++),i+=`
  `.concat(u[f-1]),C++),o=f,i+=`
`.concat(iw,"+").concat(Ti," ").concat(H),n+=`
`.concat(ow,"-").concat(Ti," ").concat($),C+=2):(i+=n,n="",(j===1||f===0)&&(i+=`
  `.concat(H),C++))}if(C>20&&f<N-2)return"".concat(L).concat(V,`
`).concat(i,`
`).concat(ja,"...").concat(Ti).concat(n,`
`)+"".concat(ja,"...").concat(Ti)}return"".concat(L).concat(a?V:"",`
`).concat(i).concat(n).concat(s).concat(m)}var b4e=function(e){u4e(t,e);function t(r){var n;if(a4e(this,t),Ws(r)!=="object"||r===null)throw new p4e("options","Object",r);var i=r.message,o=r.operator,s=r.stackStartFn,a=r.actual,c=r.expected,u=Error.stackTraceLimit;if(Error.stackTraceLimit=0,i!=null)n=sm(this,td(t).call(this,String(i)));else if(process.stderr&&process.stderr.isTTY&&(process.stderr&&process.stderr.getColorDepth&&process.stderr.getColorDepth()!==1?(ja="\x1B[34m",iw="\x1B[32m",Ti="\x1B[39m",ow="\x1B[31m"):(ja="",iw="",Ti="",ow="")),Ws(a)==="object"&&a!==null&&Ws(c)==="object"&&c!==null&&"stack"in a&&a instanceof Error&&"stack"in c&&c instanceof Error&&(a=HY(a),c=HY(c)),o==="deepStrictEqual"||o==="strictEqual")n=sm(this,td(t).call(this,g4e(a,c,o)));else if(o==="notDeepStrictEqual"||o==="notStrictEqual"){var h=o0[o],f=sw(a).split(`
`);if(o==="notStrictEqual"&&Ws(a)==="object"&&a!==null&&(h=o0.notStrictEqualObject),f.length>30)for(f[26]="".concat(ja,"...").concat(Ti);f.length>27;)f.pop();f.length===1?n=sm(this,td(t).call(this,"".concat(h," ").concat(f[0]))):n=sm(this,td(t).call(this,"".concat(h,`

`).concat(f.join(`
`),`
`)))}else{var m=sw(a),b="",w=o0[o];o==="notDeepEqual"||o==="notEqual"?(m="".concat(o0[o],`

`).concat(m),m.length>1024&&(m="".concat(m.slice(0,1021),"..."))):(b="".concat(sw(c)),m.length>512&&(m="".concat(m.slice(0,509),"...")),b.length>512&&(b="".concat(b.slice(0,509),"...")),o==="deepEqual"||o==="equal"?m="".concat(w,`

`).concat(m,`

should equal

`):b=" ".concat(o," ").concat(b)),n=sm(this,td(t).call(this,"".concat(m).concat(b)))}return Error.stackTraceLimit=u,n.generatedMessage=!i,Object.defineProperty(b9(n),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),n.code="ERR_ASSERTION",n.actual=a,n.expected=c,n.operator=o,Error.captureStackTrace&&Error.captureStackTrace(b9(n),s),n.stack,n.name="AssertionError",sm(n)}return c4e(t,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:w9.custom,value:function(n,i){return w9(this,o4e({},i,{customInspect:!1,depth:0}))}}]),t}(x9(Error));qY.exports=b4e});var GY=W((Jyt,zY)=>{"use strict";l();d();function WY(e,t){if(e==null)throw new TypeError("Cannot convert first argument to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var o=Object.keys(Object(i)),s=0,a=o.length;s<a;s++){var c=o[s],u=Object.getOwnPropertyDescriptor(i,c);u!==void 0&&u.enumerable&&(r[c]=i[c])}}return r}function x4e(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:WY})}zY.exports={assign:WY,polyfill:x4e}});var S9=W((emt,YY)=>{"use strict";l();d();var $Y=function(e){return e!==e};YY.exports=function(t,r){return t===0&&r===0?1/t===1/r:!!(t===r||$Y(t)&&$Y(r))}});var v9=W((nmt,ZY)=>{"use strict";l();d();var w4e=S9();ZY.exports=function(){return typeof Object.is=="function"?Object.is:w4e}});var XY=W((smt,JY)=>{"use strict";l();d();var S4e=v9(),v4e=c1();JY.exports=function(){var t=S4e();return v4e(Object,{is:t},{is:function(){return Object.is!==t}}),t}});var A9=W((umt,tZ)=>{"use strict";l();d();var A4e=c1(),E4e=PM(),I4e=S9(),QY=v9(),k4e=XY(),eZ=E4e(QY(),Object);A4e(eZ,{getPolyfill:QY,implementation:I4e,shim:k4e});tZ.exports=eZ});var E9=W((dmt,rZ)=>{"use strict";l();d();rZ.exports=function(t){return t!==t}});var I9=W((ymt,nZ)=>{"use strict";l();d();var T4e=E9();nZ.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:T4e}});var oZ=W((bmt,iZ)=>{"use strict";l();d();var P4e=c1(),B4e=I9();iZ.exports=function(){var t=B4e();return P4e(Number,{isNaN:t},{isNaN:function(){return Number.isNaN!==t}}),t}});var uZ=W((Smt,cZ)=>{"use strict";l();d();var _4e=PM(),C4e=c1(),N4e=E9(),sZ=I9(),M4e=oZ(),aZ=_4e(sZ(),Number);C4e(aZ,{getPolyfill:sZ,implementation:N4e,shim:M4e});cZ.exports=aZ});var PZ=W((Emt,TZ)=>{"use strict";l();d();function fZ(e,t){return U4e(e)||O4e(e,t)||D4e()}function D4e(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function O4e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var s=e[Symbol.iterator](),a;!(n=(a=s.next()).done)&&(r.push(a.value),!(t&&r.length===t));n=!0);}catch(c){i=!0,o=c}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw o}}return r}function U4e(e){if(Array.isArray(e))return e}function as(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?as=function(r){return typeof r}:as=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},as(e)}var R4e=/a/g.flags!==void 0,C3=function(t){var r=[];return t.forEach(function(n){return r.push(n)}),r},lZ=function(t){var r=[];return t.forEach(function(n,i){return r.push([i,n])}),r},vZ=Object.is?Object.is:A9(),B3=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},k9=Number.isNaN?Number.isNaN:uZ();function P9(e){return e.call.bind(e)}var uw=P9(Object.prototype.hasOwnProperty),_3=P9(Object.prototype.propertyIsEnumerable),dZ=P9(Object.prototype.toString),yo=nm().types,L4e=yo.isAnyArrayBuffer,V4e=yo.isArrayBufferView,hZ=yo.isDate,I3=yo.isMap,pZ=yo.isRegExp,k3=yo.isSet,K4e=yo.isNativeError,F4e=yo.isBoxedPrimitive,yZ=yo.isNumberObject,mZ=yo.isStringObject,gZ=yo.isBooleanObject,bZ=yo.isBigIntObject,H4e=yo.isSymbolObject,q4e=yo.isFloat32Array,j4e=yo.isFloat64Array;function W4e(e){if(e.length===0||e.length>10)return!0;for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r<48||r>57)return!0}return e.length===10&&e>=Math.pow(2,32)}function T3(e){return Object.keys(e).filter(W4e).concat(B3(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function AZ(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}var P3=void 0,z4e=!0,G4e=!1,T9=0,B9=1,EZ=2,IZ=3;function $4e(e,t){return R4e?e.source===t.source&&e.flags===t.flags:RegExp.prototype.toString.call(e)===RegExp.prototype.toString.call(t)}function Y4e(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function Z4e(e,t){return e.byteLength!==t.byteLength?!1:AZ(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))===0}function J4e(e,t){return e.byteLength===t.byteLength&&AZ(new Uint8Array(e),new Uint8Array(t))===0}function X4e(e,t){return yZ(e)?yZ(t)&&vZ(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):mZ(e)?mZ(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):gZ(e)?gZ(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):bZ(e)?bZ(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):H4e(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}function zs(e,t,r,n){if(e===t)return e!==0?!0:r?vZ(e,t):!0;if(r){if(as(e)!=="object")return typeof e=="number"&&k9(e)&&k9(t);if(as(t)!=="object"||e===null||t===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(e===null||as(e)!=="object")return t===null||as(t)!=="object"?e==t:!1;if(t===null||as(t)!=="object")return!1}var i=dZ(e),o=dZ(t);if(i!==o)return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var s=T3(e,P3),a=T3(t,P3);return s.length!==a.length?!1:cw(e,t,r,n,B9,s)}if(i==="[object Object]"&&(!I3(e)&&I3(t)||!k3(e)&&k3(t)))return!1;if(hZ(e)){if(!hZ(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(pZ(e)){if(!pZ(t)||!$4e(e,t))return!1}else if(K4e(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else if(V4e(e)){if(!r&&(q4e(e)||j4e(e))){if(!Y4e(e,t))return!1}else if(!Z4e(e,t))return!1;var c=T3(e,P3),u=T3(t,P3);return c.length!==u.length?!1:cw(e,t,r,n,T9,c)}else{if(k3(e))return!k3(t)||e.size!==t.size?!1:cw(e,t,r,n,EZ);if(I3(e))return!I3(t)||e.size!==t.size?!1:cw(e,t,r,n,IZ);if(L4e(e)){if(!J4e(e,t))return!1}else if(F4e(e)&&!X4e(e,t))return!1}return cw(e,t,r,n,T9)}function xZ(e,t){return t.filter(function(r){return _3(e,r)})}function cw(e,t,r,n,i,o){if(arguments.length===5){o=Object.keys(e);var s=Object.keys(t);if(o.length!==s.length)return!1}for(var a=0;a<o.length;a++)if(!uw(t,o[a]))return!1;if(r&&arguments.length===5){var c=B3(e);if(c.length!==0){var u=0;for(a=0;a<c.length;a++){var h=c[a];if(_3(e,h)){if(!_3(t,h))return!1;o.push(h),u++}else if(_3(t,h))return!1}var f=B3(t);if(c.length!==f.length&&xZ(t,f).length!==u)return!1}else{var m=B3(t);if(m.length!==0&&xZ(t,m).length!==0)return!1}}if(o.length===0&&(i===T9||i===B9&&e.length===0||e.size===0))return!0;if(n===void 0)n={val1:new Map,val2:new Map,position:0};else{var b=n.val1.get(e);if(b!==void 0){var w=n.val2.get(t);if(w!==void 0)return b===w}n.position++}n.val1.set(e,n.position),n.val2.set(t,n.position);var S=nIe(e,t,r,o,n,i);return n.val1.delete(e),n.val2.delete(t),S}function wZ(e,t,r,n){for(var i=C3(e),o=0;o<i.length;o++){var s=i[o];if(zs(t,s,r,n))return e.delete(s),!0}return!1}function kZ(e){switch(as(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(k9(e))return!1}return!0}function Q4e(e,t,r){var n=kZ(r);return n??(t.has(n)&&!e.has(n))}function eIe(e,t,r,n,i){var o=kZ(r);if(o!=null)return o;var s=t.get(o);return s===void 0&&!t.has(o)||!zs(n,s,!1,i)?!1:!e.has(o)&&zs(n,s,!1,i)}function tIe(e,t,r,n){for(var i=null,o=C3(e),s=0;s<o.length;s++){var a=o[s];if(as(a)==="object"&&a!==null)i===null&&(i=new Set),i.add(a);else if(!t.has(a)){if(r||!Q4e(e,t,a))return!1;i===null&&(i=new Set),i.add(a)}}if(i!==null){for(var c=C3(t),u=0;u<c.length;u++){var h=c[u];if(as(h)==="object"&&h!==null){if(!wZ(i,h,r,n))return!1}else if(!r&&!e.has(h)&&!wZ(i,h,r,n))return!1}return i.size===0}return!0}function SZ(e,t,r,n,i,o){for(var s=C3(e),a=0;a<s.length;a++){var c=s[a];if(zs(r,c,i,o)&&zs(n,t.get(c),i,o))return e.delete(c),!0}return!1}function rIe(e,t,r,n){for(var i=null,o=lZ(e),s=0;s<o.length;s++){var a=fZ(o[s],2),c=a[0],u=a[1];if(as(c)==="object"&&c!==null)i===null&&(i=new Set),i.add(c);else{var h=t.get(c);if(h===void 0&&!t.has(c)||!zs(u,h,r,n)){if(r||!eIe(e,t,c,u,n))return!1;i===null&&(i=new Set),i.add(c)}}}if(i!==null){for(var f=lZ(t),m=0;m<f.length;m++){var b=fZ(f[m],2),c=b[0],w=b[1];if(as(c)==="object"&&c!==null){if(!SZ(i,e,c,w,r,n))return!1}else if(!r&&(!e.has(c)||!zs(e.get(c),w,!1,n))&&!SZ(i,e,c,w,!1,n))return!1}return i.size===0}return!0}function nIe(e,t,r,n,i,o){var s=0;if(o===EZ){if(!tIe(e,t,r,i))return!1}else if(o===IZ){if(!rIe(e,t,r,i))return!1}else if(o===B9)for(;s<e.length;s++)if(uw(e,s)){if(!uw(t,s)||!zs(e[s],t[s],r,i))return!1}else{if(uw(t,s))return!1;for(var a=Object.keys(e);s<a.length;s++){var c=a[s];if(!uw(t,c)||!zs(e[c],t[c],r,i))return!1}return a.length===Object.keys(t).length}for(s=0;s<n.length;s++){var u=n[s];if(!zs(e[u],t[u],r,i))return!1}return!0}function iIe(e,t){return zs(e,t,G4e)}function oIe(e,t){return zs(e,t,z4e)}TZ.exports={isDeepEqual:iIe,isDeepStrictEqual:oIe}});var nw=W((Tmt,jZ)=>{"use strict";l();d();function rd(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?rd=function(r){return typeof r}:rd=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},rd(e)}function sIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var aIe=g9(),lw=aIe.codes,BZ=lw.ERR_AMBIGUOUS_ARGUMENT,fw=lw.ERR_INVALID_ARG_TYPE,cIe=lw.ERR_INVALID_ARG_VALUE,uIe=lw.ERR_INVALID_RETURN_VALUE,id=lw.ERR_MISSING_ARGS,s0=jY(),fIe=nm(),lIe=fIe.inspect,MZ=nm().types,dIe=MZ.isPromise,_9=MZ.isRegExp,hIe=Object.assign?Object.assign:GY().assign,DZ=Object.is?Object.is:A9(),nd,N3;function dw(){var e=PZ();nd=e.isDeepEqual,N3=e.isDeepStrictEqual}var _Z=!1,Gr=jZ.exports=C9,M3={};function Wa(e){throw e.message instanceof Error?e.message:new s0(e)}function OZ(e,t,r,n,i){var o=arguments.length,s;if(o===0)s="Failed";else if(o===1)r=e,e=void 0;else{if(_Z===!1){_Z=!0;var a=process.emitWarning?process.emitWarning:console.warn.bind(console);a("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}o===2&&(n="!=")}if(r instanceof Error)throw r;var c={actual:e,expected:t,operator:n===void 0?"fail":n,stackStartFn:i||OZ};r!==void 0&&(c.message=r);var u=new s0(c);throw s&&(u.message=s,u.generatedMessage=!0),u}Gr.fail=OZ;Gr.AssertionError=s0;function UZ(e,t,r,n){if(!r){var i=!1;if(t===0)i=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var o=new s0({actual:r,expected:!0,message:n,operator:"==",stackStartFn:e});throw o.generatedMessage=i,o}}function C9(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];UZ.apply(void 0,[C9,t.length].concat(t))}Gr.ok=C9;Gr.equal=function e(t,r,n){if(arguments.length<2)throw new id("actual","expected");t!=r&&Wa({actual:t,expected:r,message:n,operator:"==",stackStartFn:e})};Gr.notEqual=function e(t,r,n){if(arguments.length<2)throw new id("actual","expected");t==r&&Wa({actual:t,expected:r,message:n,operator:"!=",stackStartFn:e})};Gr.deepEqual=function e(t,r,n){if(arguments.length<2)throw new id("actual","expected");nd===void 0&&dw(),nd(t,r)||Wa({actual:t,expected:r,message:n,operator:"deepEqual",stackStartFn:e})};Gr.notDeepEqual=function e(t,r,n){if(arguments.length<2)throw new id("actual","expected");nd===void 0&&dw(),nd(t,r)&&Wa({actual:t,expected:r,message:n,operator:"notDeepEqual",stackStartFn:e})};Gr.deepStrictEqual=function e(t,r,n){if(arguments.length<2)throw new id("actual","expected");nd===void 0&&dw(),N3(t,r)||Wa({actual:t,expected:r,message:n,operator:"deepStrictEqual",stackStartFn:e})};Gr.notDeepStrictEqual=RZ;function RZ(e,t,r){if(arguments.length<2)throw new id("actual","expected");nd===void 0&&dw(),N3(e,t)&&Wa({actual:e,expected:t,message:r,operator:"notDeepStrictEqual",stackStartFn:RZ})}Gr.strictEqual=function e(t,r,n){if(arguments.length<2)throw new id("actual","expected");DZ(t,r)||Wa({actual:t,expected:r,message:n,operator:"strictEqual",stackStartFn:e})};Gr.notStrictEqual=function e(t,r,n){if(arguments.length<2)throw new id("actual","expected");DZ(t,r)&&Wa({actual:t,expected:r,message:n,operator:"notStrictEqual",stackStartFn:e})};var CZ=function e(t,r,n){var i=this;sIe(this,e),r.forEach(function(o){o in t&&(n!==void 0&&typeof n[o]=="string"&&_9(t[o])&&t[o].test(n[o])?i[o]=n[o]:i[o]=t[o])})};function pIe(e,t,r,n,i,o){if(!(r in e)||!N3(e[r],t[r])){if(!n){var s=new CZ(e,i),a=new CZ(t,i,e),c=new s0({actual:s,expected:a,operator:"deepStrictEqual",stackStartFn:o});throw c.actual=e,c.expected=t,c.operator=o.name,c}Wa({actual:e,expected:t,message:n,operator:o.name,stackStartFn:o})}}function LZ(e,t,r,n){if(typeof t!="function"){if(_9(t))return t.test(e);if(arguments.length===2)throw new fw("expected",["Function","RegExp"],t);if(rd(e)!=="object"||e===null){var i=new s0({actual:e,expected:t,message:r,operator:"deepStrictEqual",stackStartFn:n});throw i.operator=n.name,i}var o=Object.keys(t);if(t instanceof Error)o.push("name","message");else if(o.length===0)throw new cIe("error",t,"may not be an empty object");return nd===void 0&&dw(),o.forEach(function(s){typeof e[s]=="string"&&_9(t[s])&&t[s].test(e[s])||pIe(e,t,s,r,o,n)}),!0}return t.prototype!==void 0&&e instanceof t?!0:Error.isPrototypeOf(t)?!1:t.call({},e)===!0}function VZ(e){if(typeof e!="function")throw new fw("fn","Function",e);try{e()}catch(t){return t}return M3}function NZ(e){return dIe(e)||e!==null&&rd(e)==="object"&&typeof e.then=="function"&&typeof e.catch=="function"}function KZ(e){return Promise.resolve().then(function(){var t;if(typeof e=="function"){if(t=e(),!NZ(t))throw new uIe("instance of Promise","promiseFn",t)}else if(NZ(e))t=e;else throw new fw("promiseFn",["Function","Promise"],e);return Promise.resolve().then(function(){return t}).then(function(){return M3}).catch(function(r){return r})})}function FZ(e,t,r,n){if(typeof r=="string"){if(arguments.length===4)throw new fw("error",["Object","Error","Function","RegExp"],r);if(rd(t)==="object"&&t!==null){if(t.message===r)throw new BZ("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===r)throw new BZ("error/message",'The error "'.concat(t,'" is identical to the message.'));n=r,r=void 0}else if(r!=null&&rd(r)!=="object"&&typeof r!="function")throw new fw("error",["Object","Error","Function","RegExp"],r);if(t===M3){var i="";r&&r.name&&(i+=" (".concat(r.name,")")),i+=n?": ".concat(n):".";var o=e.name==="rejects"?"rejection":"exception";Wa({actual:void 0,expected:r,operator:e.name,message:"Missing expected ".concat(o).concat(i),stackStartFn:e})}if(r&&!LZ(t,r,n,e))throw t}function HZ(e,t,r,n){if(t!==M3){if(typeof r=="string"&&(n=r,r=void 0),!r||LZ(t,r)){var i=n?": ".concat(n):".",o=e.name==="doesNotReject"?"rejection":"exception";Wa({actual:t,expected:r,operator:e.name,message:"Got unwanted ".concat(o).concat(i,`
`)+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}Gr.throws=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];FZ.apply(void 0,[e,VZ(t)].concat(n))};Gr.rejects=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return KZ(t).then(function(o){return FZ.apply(void 0,[e,o].concat(n))})};Gr.doesNotThrow=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];HZ.apply(void 0,[e,VZ(t)].concat(n))};Gr.doesNotReject=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return KZ(t).then(function(o){return HZ.apply(void 0,[e,o].concat(n))})};Gr.ifError=function e(t){if(t!=null){var r="ifError got unwanted exception: ";rd(t)==="object"&&typeof t.message=="string"?t.message.length===0&&t.constructor?r+=t.constructor.name:r+=t.message:r+=lIe(t);var n=new s0({actual:t,expected:null,operator:"ifError",message:r,stackStartFn:e}),i=t.stack;if(typeof i=="string"){var o=i.split(`
`);o.shift();for(var s=n.stack.split(`
`),a=0;a<o.length;a++){var c=s.indexOf(o[a]);if(c!==-1){s=s.slice(0,c);break}}n.stack="".concat(s.join(`
`),`
`).concat(o.join(`
`))}throw n}};function qZ(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];UZ.apply(void 0,[qZ,t.length].concat(t))}Gr.strict=hIe(qZ,Gr,{equal:Gr.strictEqual,deepEqual:Gr.deepStrictEqual,notEqual:Gr.notStrictEqual,notDeepEqual:Gr.notDeepStrictEqual});Gr.strict.strict=Gr.strict});var cm=W(qt=>{"use strict";l();d();Object.defineProperty(qt,"__esModule",{value:!0});qt.baToJSON=qt.addHexPrefix=qt.toUnsigned=qt.fromSigned=qt.bufferToHex=qt.bufferToInt=qt.toBuffer=qt.stripZeros=qt.unpad=qt.setLengthRight=qt.setLength=qt.setLengthLeft=qt.zeros=void 0;var am=Zh(),N9=$h();qt.zeros=function(e){return Buffer.allocUnsafe(e).fill(0)};qt.setLengthLeft=function(e,t,r){r===void 0&&(r=!1);var n=qt.zeros(t);return e=qt.toBuffer(e),r?e.length<t?(e.copy(n),n):e.slice(0,t):e.length<t?(e.copy(n,t-e.length),n):e.slice(-t)};qt.setLength=qt.setLengthLeft;qt.setLengthRight=function(e,t){return qt.setLength(e,t,!0)};qt.unpad=function(e){e=am.stripHexPrefix(e);for(var t=e[0];e.length>0&&t.toString()==="0";)e=e.slice(1),t=e[0];return e};qt.stripZeros=qt.unpad;qt.toBuffer=function(e){if(!Buffer.isBuffer(e))if(Array.isArray(e))e=Buffer.from(e);else if(typeof e=="string")if(am.isHexString(e))e=Buffer.from(am.padToEven(am.stripHexPrefix(e)),"hex");else throw new Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: "+e);else if(typeof e=="number")e=am.intToBuffer(e);else if(e==null)e=Buffer.allocUnsafe(0);else if(N9.isBN(e))e=e.toArrayLike(Buffer);else if(e.toArray)e=Buffer.from(e.toArray());else throw new Error("invalid type");return e};qt.bufferToInt=function(e){return new N9(qt.toBuffer(e)).toNumber()};qt.bufferToHex=function(e){return e=qt.toBuffer(e),"0x"+e.toString("hex")};qt.fromSigned=function(e){return new N9(e).fromTwos(256)};qt.toUnsigned=function(e){return Buffer.from(e.toTwos(256).toArray())};qt.addHexPrefix=function(e){return typeof e!="string"||am.isHexPrefixed(e)?e:"0x"+e};qt.baToJSON=function(e){if(Buffer.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var t=[],r=0;r<e.length;r++)t.push(qt.baToJSON(e[r]));return t}}});var WZ=W(M9=>{"use strict";l();d();Object.defineProperty(M9,"__esModule",{value:!0});function yIe(e){return function(t){var r=e();return r.update(t),Buffer.from(r.digest())}}M9.createHashFunction=yIe});var $Z=W((Umt,GZ)=>{l();d();var{Transform:mIe}=aM();GZ.exports=e=>class zZ extends mIe{constructor(r,n,i,o,s){super(s),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._hashBitLength=o,this._options=s,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let o=null;try{this.update(r,n)}catch(s){o=s}i(o)}_flush(r){let n=null;try{this.push(this.digest())}catch(i){n=i}r(n)}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new zZ(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var JZ=W((Vmt,ZZ)=>{l();d();var{Transform:gIe}=aM();ZZ.exports=e=>class YZ extends gIe{constructor(r,n,i,o){super(o),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._options=o,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let o=null;try{this.update(r,n)}catch(s){o=s}i(o)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let i=this._state.squeeze(r);return n!==void 0&&(i=i.toString(n)),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new YZ(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var QZ=W((Hmt,XZ)=>{l();d();var bIe=$Z(),xIe=JZ();XZ.exports=function(e){let t=bIe(e),r=xIe(e);return function(n,i){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new t(1152,448,null,224,i);case"keccak256":return new t(1088,512,null,256,i);case"keccak384":return new t(832,768,null,384,i);case"keccak512":return new t(576,1024,null,512,i);case"sha3-224":return new t(1152,448,6,224,i);case"sha3-256":return new t(1088,512,6,256,i);case"sha3-384":return new t(832,768,6,384,i);case"sha3-512":return new t(576,1024,6,512,i);case"shake128":return new r(1344,256,31,i);case"shake256":return new r(1088,512,31,i);default:throw new Error("Invald algorithm: "+n)}}}});var rJ=W(tJ=>{l();d();var eJ=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];tJ.p1600=function(e){for(let t=0;t<24;++t){let r=e[0]^e[10]^e[20]^e[30]^e[40],n=e[1]^e[11]^e[21]^e[31]^e[41],i=e[2]^e[12]^e[22]^e[32]^e[42],o=e[3]^e[13]^e[23]^e[33]^e[43],s=e[4]^e[14]^e[24]^e[34]^e[44],a=e[5]^e[15]^e[25]^e[35]^e[45],c=e[6]^e[16]^e[26]^e[36]^e[46],u=e[7]^e[17]^e[27]^e[37]^e[47],h=e[8]^e[18]^e[28]^e[38]^e[48],f=e[9]^e[19]^e[29]^e[39]^e[49],m=h^(i<<1|o>>>31),b=f^(o<<1|i>>>31),w=e[0]^m,S=e[1]^b,P=e[10]^m,N=e[11]^b,O=e[20]^m,C=e[21]^b,L=e[30]^m,V=e[31]^b,j=e[40]^m,$=e[41]^b;m=r^(s<<1|a>>>31),b=n^(a<<1|s>>>31);let H=e[2]^m,Y=e[3]^b,B=e[12]^m,p=e[13]^b,g=e[22]^m,x=e[23]^b,A=e[32]^m,v=e[33]^b,_=e[42]^m,D=e[43]^b;m=i^(c<<1|u>>>31),b=o^(u<<1|c>>>31);let T=e[4]^m,y=e[5]^b,I=e[14]^m,q=e[15]^b,K=e[24]^m,F=e[25]^b,J=e[34]^m,ae=e[35]^b,ce=e[44]^m,ye=e[45]^b;m=s^(h<<1|f>>>31),b=a^(f<<1|h>>>31);let he=e[6]^m,U=e[7]^b,G=e[16]^m,Z=e[17]^b,ee=e[26]^m,fe=e[27]^b,Q=e[36]^m,se=e[37]^b,gt=e[46]^m,Pe=e[47]^b;m=c^(r<<1|n>>>31),b=u^(n<<1|r>>>31);let Oe=e[8]^m,gs=e[9]^b,Ke=e[18]^m,Ue=e[19]^b,ac=e[28]^m,Re=e[29]^b,ut=e[38]^m,hf=e[39]^b,ft=e[48]^m,lt=e[49]^b,tu=w,Fe=S,He=N<<4|P>>>28,ru=P<<4|N>>>28,qe=O<<3|C>>>29,je=C<<3|O>>>29,nu=V<<9|L>>>23,We=L<<9|V>>>23,ze=j<<18|$>>>14,iu=$<<18|j>>>14,Ge=H<<1|Y>>>31,$e=Y<<1|H>>>31,ou=p<<12|B>>>20,Ye=B<<12|p>>>20,Ze=g<<10|x>>>22,su=x<<10|g>>>22,Je=v<<13|A>>>19,Xe=A<<13|v>>>19,au=_<<2|D>>>30,Qe=D<<2|_>>>30,et=y<<30|T>>>2,cu=T<<30|y>>>2,tt=I<<6|q>>>26,rt=q<<6|I>>>26,uu=F<<11|K>>>21,nt=K<<11|F>>>21,it=J<<15|ae>>>17,fu=ae<<15|J>>>17,ot=ye<<29|ce>>>3,st=ce<<29|ye>>>3,lu=he<<28|U>>>4,at=U<<28|he>>>4,ct=Z<<23|G>>>9,ra=G<<23|Z>>>9,na=ee<<25|fe>>>7,ia=fe<<25|ee>>>7,oa=Q<<21|se>>>11,sa=se<<21|Q>>>11,aa=Pe<<24|gt>>>8,ca=gt<<24|Pe>>>8,ua=Oe<<27|gs>>>5,fa=gs<<27|Oe>>>5,la=Ke<<20|Ue>>>12,da=Ue<<20|Ke>>>12,ha=Re<<7|ac>>>25,pa=ac<<7|Re>>>25,ya=ut<<8|hf>>>24,ma=hf<<8|ut>>>24,ga=ft<<14|lt>>>18,ba=lt<<14|ft>>>18;e[0]=tu^~ou&uu,e[1]=Fe^~Ye&nt,e[10]=lu^~la&qe,e[11]=at^~da&je,e[20]=Ge^~tt&na,e[21]=$e^~rt&ia,e[30]=ua^~He&Ze,e[31]=fa^~ru&su,e[40]=et^~ct&ha,e[41]=cu^~ra&pa,e[2]=ou^~uu&oa,e[3]=Ye^~nt&sa,e[12]=la^~qe&Je,e[13]=da^~je&Xe,e[22]=tt^~na&ya,e[23]=rt^~ia&ma,e[32]=He^~Ze&it,e[33]=ru^~su&fu,e[42]=ct^~ha&nu,e[43]=ra^~pa&We,e[4]=uu^~oa&ga,e[5]=nt^~sa&ba,e[14]=qe^~Je&ot,e[15]=je^~Xe&st,e[24]=na^~ya&ze,e[25]=ia^~ma&iu,e[34]=Ze^~it&aa,e[35]=su^~fu&ca,e[44]=ha^~nu&au,e[45]=pa^~We&Qe,e[6]=oa^~ga&tu,e[7]=sa^~ba&Fe,e[16]=Je^~ot&lu,e[17]=Xe^~st&at,e[26]=ya^~ze&Ge,e[27]=ma^~iu&$e,e[36]=it^~aa&ua,e[37]=fu^~ca&fa,e[46]=nu^~au&et,e[47]=We^~Qe&cu,e[8]=ga^~tu&ou,e[9]=ba^~Fe&Ye,e[18]=ot^~lu&la,e[19]=st^~at&da,e[28]=ze^~Ge&tt,e[29]=iu^~$e&rt,e[38]=aa^~ua&He,e[39]=ca^~fa&ru,e[48]=au^~et&ct,e[49]=Qe^~cu&ra,e[0]^=eJ[t*2],e[1]^=eJ[t*2+1]}}});var iJ=W(($mt,nJ)=>{l();d();var D3=rJ();function um(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}um.prototype.initialize=function(e,t){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1};um.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(D3.p1600(this.state),this.count=0)};um.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<8*(this.count%4),e&128&&this.count===this.blockSize-1&&D3.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),D3.p1600(this.state),this.count=0,this.squeezing=!0};um.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);let t=Buffer.alloc(e);for(let r=0;r<e;++r)t[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(D3.p1600(this.state),this.count=0);return t};um.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing};nJ.exports=um});var sJ=W((Jmt,oJ)=>{l();d();oJ.exports=QZ()(iJ())});var aJ=W(fm=>{"use strict";l();d();Object.defineProperty(fm,"__esModule",{value:!0});var O3=WZ(),U3=sJ();fm.keccak224=O3.createHashFunction(function(){return U3("keccak224")});fm.keccak256=O3.createHashFunction(function(){return U3("keccak256")});fm.keccak384=O3.createHashFunction(function(){return U3("keccak384")});fm.keccak512=O3.createHashFunction(function(){return U3("keccak512")})});var V3=W(Mo=>{"use strict";l();d();Object.defineProperty(Mo,"__esModule",{value:!0});Mo.rlphash=Mo.ripemd160=Mo.sha256=Mo.keccak256=Mo.keccak=void 0;var L3=aJ(),wIe=L3.keccak224,SIe=L3.keccak384,vIe=L3.keccak256,AIe=L3.keccak512,cJ=cM(),EIe=Zh(),IIe=QE(),R3=cm();Mo.keccak=function(e,t){switch(t===void 0&&(t=256),typeof e=="string"&&!EIe.isHexString(e)?e=Buffer.from(e,"utf8"):e=R3.toBuffer(e),t||(t=256),t){case 224:return wIe(e);case 256:return vIe(e);case 384:return SIe(e);case 512:return AIe(e);default:throw new Error("Invald algorithm: keccak"+t)}};Mo.keccak256=function(e){return Mo.keccak(e)};Mo.sha256=function(e){return e=R3.toBuffer(e),cJ("sha256").update(e).digest()};Mo.ripemd160=function(e,t){e=R3.toBuffer(e);var r=cJ("rmd160").update(e).digest();return t===!0?R3.setLength(r,32):r};Mo.rlphash=function(e){return Mo.keccak(IIe.encode(e))}});var uJ=W(Ct=>{"use strict";l();d();Object.defineProperty(Ct,"__esModule",{value:!0});Ct.importPublic=Ct.privateToPublic=Ct.privateToAddress=Ct.publicToAddress=Ct.pubToAddress=Ct.isValidPublic=Ct.isValidPrivate=Ct.isPrecompiled=Ct.generateAddress2=Ct.generateAddress=Ct.isValidChecksumAddress=Ct.toChecksumAddress=Ct.isZeroAddress=Ct.isValidAddress=Ct.zeroAddress=void 0;var D9=nw(),kIe=Zh(),lm=JE(),TIe=$h(),za=cm(),dm=V3();Ct.zeroAddress=function(){var e=20,t=za.zeros(e);return za.bufferToHex(t)};Ct.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)};Ct.isZeroAddress=function(e){var t=Ct.zeroAddress();return t===za.addHexPrefix(e)};Ct.toChecksumAddress=function(e,t){e=kIe.stripHexPrefix(e).toLowerCase();for(var r=t!==void 0?t.toString()+"0x":"",n=dm.keccak(r+e).toString("hex"),i="0x",o=0;o<e.length;o++)parseInt(n[o],16)>=8?i+=e[o].toUpperCase():i+=e[o];return i};Ct.isValidChecksumAddress=function(e,t){return Ct.isValidAddress(e)&&Ct.toChecksumAddress(e,t)===e};Ct.generateAddress=function(e,t){e=za.toBuffer(e);var r=new TIe(t);return r.isZero()?dm.rlphash([e,null]).slice(-20):dm.rlphash([e,Buffer.from(r.toArray())]).slice(-20)};Ct.generateAddress2=function(e,t,r){var n=za.toBuffer(e),i=za.toBuffer(t),o=za.toBuffer(r);D9(n.length===20),D9(i.length===32);var s=dm.keccak256(Buffer.concat([Buffer.from("ff","hex"),n,i,dm.keccak256(o)]));return s.slice(-20)};Ct.isPrecompiled=function(e){var t=za.unpad(e);return t.length===1&&t[0]>=1&&t[0]<=8};Ct.isValidPrivate=function(e){return lm.privateKeyVerify(e)};Ct.isValidPublic=function(e,t){return t===void 0&&(t=!1),e.length===64?lm.publicKeyVerify(Buffer.concat([Buffer.from([4]),e])):t?lm.publicKeyVerify(e):!1};Ct.pubToAddress=function(e,t){return t===void 0&&(t=!1),e=za.toBuffer(e),t&&e.length!==64&&(e=lm.publicKeyConvert(e,!1).slice(1)),D9(e.length===64),dm.keccak(e).slice(-20)};Ct.publicToAddress=Ct.pubToAddress;Ct.privateToAddress=function(e){return Ct.publicToAddress(Ct.privateToPublic(e))};Ct.privateToPublic=function(e){return e=za.toBuffer(e),lm.publicKeyCreate(e,!1).slice(1)};Ct.importPublic=function(e){return e=za.toBuffer(e),e.length!==64&&(e=lm.publicKeyConvert(e,!1).slice(1)),e}});var fJ=W(Do=>{"use strict";l();d();Object.defineProperty(Do,"__esModule",{value:!0});Do.hashPersonalMessage=Do.isValidSignature=Do.fromRpcSig=Do.toRpcSig=Do.ecrecover=Do.ecsign=void 0;var O9=JE(),K3=$h(),a0=cm(),PIe=V3();Do.ecsign=function(e,t,r){var n=O9.sign(e,t),i=n.recovery,o={r:n.signature.slice(0,32),s:n.signature.slice(32,64),v:r?i+(r*2+35):i+27};return o};Do.ecrecover=function(e,t,r,n,i){var o=Buffer.concat([a0.setLength(r,32),a0.setLength(n,32)],64),s=U9(t,i);if(!R9(s))throw new Error("Invalid signature v value");var a=O9.recover(e,o,s);return O9.publicKeyConvert(a,!1).slice(1)};Do.toRpcSig=function(e,t,r,n){var i=U9(e,n);if(!R9(i))throw new Error("Invalid signature v value");return a0.bufferToHex(Buffer.concat([a0.setLengthLeft(t,32),a0.setLengthLeft(r,32),a0.toBuffer(e)]))};Do.fromRpcSig=function(e){var t=a0.toBuffer(e);if(t.length!==65)throw new Error("Invalid signature length");var r=t[64];return r<27&&(r+=27),{v:r,r:t.slice(0,32),s:t.slice(32,64)}};Do.isValidSignature=function(e,t,r,n,i){n===void 0&&(n=!0);var o=new K3("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),s=new K3("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(t.length!==32||r.length!==32||!R9(U9(e,i)))return!1;var a=new K3(t),c=new K3(r);return!(a.isZero()||a.gt(s)||c.isZero()||c.gt(s)||n&&c.cmp(o)===1)};Do.hashPersonalMessage=function(e){var t=Buffer.from(`Ethereum Signed Message:
`+e.length.toString(),"utf-8");return PIe.keccak(Buffer.concat([t,e]))};function U9(e,t){return t?e-(2*t+35):e-27}function R9(e){return e===0||e===1}});var hJ=W(H3=>{"use strict";l();d();Object.defineProperty(H3,"__esModule",{value:!0});H3.defineProperties=void 0;var lJ=nw(),BIe=Zh(),dJ=QE(),F3=cm();H3.defineProperties=function(e,t,r){if(e.raw=[],e._fields=[],e.toJSON=function(i){if(i===void 0&&(i=!1),i){var o={};return e._fields.forEach(function(s){o[s]="0x"+e[s].toString("hex")}),o}return F3.baToJSON(e.raw)},e.serialize=function(){return dJ.encode(e.raw)},t.forEach(function(i,o){e._fields.push(i.name);function s(){return e.raw[o]}function a(c){c=F3.toBuffer(c),c.toString("hex")==="00"&&!i.allowZero&&(c=Buffer.allocUnsafe(0)),i.allowLess&&i.length?(c=F3.stripZeros(c),lJ(i.length>=c.length,"The field "+i.name+" must not have more "+i.length+" bytes")):!(i.allowZero&&c.length===0)&&i.length&&lJ(i.length===c.length,"The field "+i.name+" must have byte length of "+i.length),e.raw[o]=c}Object.defineProperty(e,i.name,{enumerable:!0,configurable:!0,get:s,set:a}),i.default&&(e[i.name]=i.default),i.alias&&Object.defineProperty(e,i.alias,{enumerable:!1,configurable:!0,set:a,get:s})}),r)if(typeof r=="string"&&(r=Buffer.from(BIe.stripHexPrefix(r),"hex")),Buffer.isBuffer(r)&&(r=dJ.decode(r)),Array.isArray(r)){if(r.length>e._fields.length)throw new Error("wrong number of fields in data");r.forEach(function(i,o){e[e._fields[o]]=F3.toBuffer(i)})}else if(typeof r=="object"){var n=Object.keys(r);t.forEach(function(i){n.indexOf(i.name)!==-1&&(e[i.name]=r[i.name]),n.indexOf(i.alias)!==-1&&(e[i.alias]=r[i.alias])})}else throw new Error("invalid data")}});var hw=W(Kn=>{"use strict";l();d();var _Ie=Kn&&Kn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),hm=Kn&&Kn.__exportStar||function(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&_Ie(t,e,r)};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.secp256k1=Kn.rlp=Kn.BN=void 0;var CIe=JE();Kn.secp256k1=CIe;var NIe=Zh(),MIe=$h();Kn.BN=MIe;var DIe=QE();Kn.rlp=DIe;Object.assign(Kn,NIe);hm($G(),Kn);hm(uJ(),Kn);hm(V3(),Kn);hm(fJ(),Kn);hm(cm(),Kn);hm(hJ(),Kn)});var pw=W(Oo=>{"use strict";l();d();Object.defineProperty(Oo,"__esModule",{value:!0});Oo.normalize=Oo.recoverPublicKey=Oo.concatSig=Oo.legacyToBuffer=Oo.isNullish=Oo.padWithZeroes=void 0;var Gs=hw(),L9=Zh();function V9(e,t){if(e!==""&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}Oo.padWithZeroes=V9;function OIe(e){return e==null}Oo.isNullish=OIe;function UIe(e){return typeof e=="string"&&!L9.isHexString(e)?Buffer.from(e):Gs.toBuffer(e)}Oo.legacyToBuffer=UIe;function RIe(e,t,r){let n=Gs.fromSigned(t),i=Gs.fromSigned(r),o=Gs.bufferToInt(e),s=V9(Gs.toUnsigned(n).toString("hex"),64),a=V9(Gs.toUnsigned(i).toString("hex"),64),c=L9.stripHexPrefix(L9.intToHex(o));return Gs.addHexPrefix(s.concat(a,c))}Oo.concatSig=RIe;function LIe(e,t){let r=Gs.fromRpcSig(t);return Gs.ecrecover(e,r.v,r.r,r.s)}Oo.recoverPublicKey=LIe;function VIe(e){if(e){if(typeof e=="number"){let t=Gs.toBuffer(e);e=Gs.bufferToHex(t)}if(typeof e!="string"){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return Gs.addHexPrefix(e.toLowerCase())}}Oo.normalize=VIe});var yJ=W(od=>{"use strict";l();d();Object.defineProperty(od,"__esModule",{value:!0});od.extractPublicKey=od.recoverPersonalSignature=od.personalSign=void 0;var pm=hw(),qc=pw();function KIe({privateKey:e,data:t}){if(qc.isNullish(t))throw new Error("Missing data parameter");if(qc.isNullish(e))throw new Error("Missing privateKey parameter");let r=qc.legacyToBuffer(t),n=pm.hashPersonalMessage(r),i=pm.ecsign(n,e);return qc.concatSig(pm.toBuffer(i.v),i.r,i.s)}od.personalSign=KIe;function FIe({data:e,signature:t}){if(qc.isNullish(e))throw new Error("Missing data parameter");if(qc.isNullish(t))throw new Error("Missing signature parameter");let r=pJ(e,t),n=pm.publicToAddress(r);return pm.bufferToHex(n)}od.recoverPersonalSignature=FIe;function HIe({data:e,signature:t}){if(qc.isNullish(e))throw new Error("Missing data parameter");if(qc.isNullish(t))throw new Error("Missing signature parameter");return`0x${pJ(e,t).toString("hex")}`}od.extractPublicKey=HIe;function pJ(e,t){let r=pm.hashPersonalMessage(qc.legacyToBuffer(e));return qc.recoverPublicKey(r,t)}});var gJ=W((mJ,K9)=>{l();d();(function(e,t){"use strict";function r(B,p){if(!B)throw new Error(p||"Assertion failed")}function n(B,p){B.super_=p;var g=function(){};g.prototype=p.prototype,B.prototype=new g,B.prototype.constructor=B}function i(B,p,g){if(i.isBN(B))return B;this.negative=0,this.words=null,this.length=0,this.red=null,B!==null&&((p==="le"||p==="be")&&(g=p,p=10),this._init(B||0,p||10,g||"be"))}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof self<"u"&&typeof self.Buffer<"u"?o=self.Buffer:o=uM().Buffer}catch{}i.isBN=function(p){return p instanceof i?!0:p!==null&&typeof p=="object"&&p.constructor.wordSize===i.wordSize&&Array.isArray(p.words)},i.max=function(p,g){return p.cmp(g)>0?p:g},i.min=function(p,g){return p.cmp(g)<0?p:g},i.prototype._init=function(p,g,x){if(typeof p=="number")return this._initNumber(p,g,x);if(typeof p=="object")return this._initArray(p,g,x);g==="hex"&&(g=16),r(g===(g|0)&&g>=2&&g<=36),p=p.toString().replace(/\s+/g,"");var A=0;p[0]==="-"&&(A++,this.negative=1),A<p.length&&(g===16?this._parseHex(p,A,x):(this._parseBase(p,g,A),x==="le"&&this._initArray(this.toArray(),g,x)))},i.prototype._initNumber=function(p,g,x){p<0&&(this.negative=1,p=-p),p<67108864?(this.words=[p&67108863],this.length=1):p<4503599627370496?(this.words=[p&67108863,p/67108864&67108863],this.length=2):(r(p<9007199254740992),this.words=[p&67108863,p/67108864&67108863,1],this.length=3),x==="le"&&this._initArray(this.toArray(),g,x)},i.prototype._initArray=function(p,g,x){if(r(typeof p.length=="number"),p.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(p.length/3),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var v,_,D=0;if(x==="be")for(A=p.length-1,v=0;A>=0;A-=3)_=p[A]|p[A-1]<<8|p[A-2]<<16,this.words[v]|=_<<D&67108863,this.words[v+1]=_>>>26-D&67108863,D+=24,D>=26&&(D-=26,v++);else if(x==="le")for(A=0,v=0;A<p.length;A+=3)_=p[A]|p[A+1]<<8|p[A+2]<<16,this.words[v]|=_<<D&67108863,this.words[v+1]=_>>>26-D&67108863,D+=24,D>=26&&(D-=26,v++);return this.strip()};function s(B,p){var g=B.charCodeAt(p);return g>=65&&g<=70?g-55:g>=97&&g<=102?g-87:g-48&15}function a(B,p,g){var x=s(B,g);return g-1>=p&&(x|=s(B,g-1)<<4),x}i.prototype._parseHex=function(p,g,x){this.length=Math.ceil((p.length-g)/6),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var v=0,_=0,D;if(x==="be")for(A=p.length-1;A>=g;A-=2)D=a(p,g,A)<<v,this.words[_]|=D&67108863,v>=18?(v-=18,_+=1,this.words[_]|=D>>>26):v+=8;else{var T=p.length-g;for(A=T%2===0?g+1:g;A<p.length;A+=2)D=a(p,g,A)<<v,this.words[_]|=D&67108863,v>=18?(v-=18,_+=1,this.words[_]|=D>>>26):v+=8}this.strip()};function c(B,p,g,x){for(var A=0,v=Math.min(B.length,g),_=p;_<v;_++){var D=B.charCodeAt(_)-48;A*=x,D>=49?A+=D-49+10:D>=17?A+=D-17+10:A+=D}return A}i.prototype._parseBase=function(p,g,x){this.words=[0],this.length=1;for(var A=0,v=1;v<=67108863;v*=g)A++;A--,v=v/g|0;for(var _=p.length-x,D=_%A,T=Math.min(_,_-D)+x,y=0,I=x;I<T;I+=A)y=c(p,I,I+A,g),this.imuln(v),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y);if(D!==0){var q=1;for(y=c(p,I,p.length,g),I=0;I<D;I++)q*=g;this.imuln(q),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y)}this.strip()},i.prototype.copy=function(p){p.words=new Array(this.length);for(var g=0;g<this.length;g++)p.words[g]=this.words[g];p.length=this.length,p.negative=this.negative,p.red=this.red},i.prototype.clone=function(){var p=new i(null);return this.copy(p),p},i.prototype._expand=function(p){for(;this.length<p;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(p,g){p=p||10,g=g|0||1;var x;if(p===16||p==="hex"){x="";for(var A=0,v=0,_=0;_<this.length;_++){var D=this.words[_],T=((D<<A|v)&16777215).toString(16);v=D>>>24-A&16777215,v!==0||_!==this.length-1?x=u[6-T.length]+T+x:x=T+x,A+=2,A>=26&&(A-=26,_--)}for(v!==0&&(x=v.toString(16)+x);x.length%g!==0;)x="0"+x;return this.negative!==0&&(x="-"+x),x}if(p===(p|0)&&p>=2&&p<=36){var y=h[p],I=f[p];x="";var q=this.clone();for(q.negative=0;!q.isZero();){var K=q.modn(I).toString(p);q=q.idivn(I),q.isZero()?x=K+x:x=u[y-K.length]+K+x}for(this.isZero()&&(x="0"+x);x.length%g!==0;)x="0"+x;return this.negative!==0&&(x="-"+x),x}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var p=this.words[0];return this.length===2?p+=this.words[1]*67108864:this.length===3&&this.words[2]===1?p+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-p:p},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(p,g){return r(typeof o<"u"),this.toArrayLike(o,p,g)},i.prototype.toArray=function(p,g){return this.toArrayLike(Array,p,g)},i.prototype.toArrayLike=function(p,g,x){var A=this.byteLength(),v=x||Math.max(1,A);r(A<=v,"byte array longer than desired length"),r(v>0,"Requested array length <= 0"),this.strip();var _=g==="le",D=new p(v),T,y,I=this.clone();if(_){for(y=0;!I.isZero();y++)T=I.andln(255),I.iushrn(8),D[y]=T;for(;y<v;y++)D[y]=0}else{for(y=0;y<v-A;y++)D[y]=0;for(y=0;!I.isZero();y++)T=I.andln(255),I.iushrn(8),D[v-y-1]=T}return D},Math.clz32?i.prototype._countBits=function(p){return 32-Math.clz32(p)}:i.prototype._countBits=function(p){var g=p,x=0;return g>=4096&&(x+=13,g>>>=13),g>=64&&(x+=7,g>>>=7),g>=8&&(x+=4,g>>>=4),g>=2&&(x+=2,g>>>=2),x+g},i.prototype._zeroBits=function(p){if(p===0)return 26;var g=p,x=0;return g&8191||(x+=13,g>>>=13),g&127||(x+=7,g>>>=7),g&15||(x+=4,g>>>=4),g&3||(x+=2,g>>>=2),g&1||x++,x},i.prototype.bitLength=function(){var p=this.words[this.length-1],g=this._countBits(p);return(this.length-1)*26+g};function m(B){for(var p=new Array(B.bitLength()),g=0;g<p.length;g++){var x=g/26|0,A=g%26;p[g]=(B.words[x]&1<<A)>>>A}return p}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var p=0,g=0;g<this.length;g++){var x=this._zeroBits(this.words[g]);if(p+=x,x!==26)break}return p},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(p){return this.negative!==0?this.abs().inotn(p).iaddn(1):this.clone()},i.prototype.fromTwos=function(p){return this.testn(p-1)?this.notn(p).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(p){for(;this.length<p.length;)this.words[this.length++]=0;for(var g=0;g<p.length;g++)this.words[g]=this.words[g]|p.words[g];return this.strip()},i.prototype.ior=function(p){return r((this.negative|p.negative)===0),this.iuor(p)},i.prototype.or=function(p){return this.length>p.length?this.clone().ior(p):p.clone().ior(this)},i.prototype.uor=function(p){return this.length>p.length?this.clone().iuor(p):p.clone().iuor(this)},i.prototype.iuand=function(p){var g;this.length>p.length?g=p:g=this;for(var x=0;x<g.length;x++)this.words[x]=this.words[x]&p.words[x];return this.length=g.length,this.strip()},i.prototype.iand=function(p){return r((this.negative|p.negative)===0),this.iuand(p)},i.prototype.and=function(p){return this.length>p.length?this.clone().iand(p):p.clone().iand(this)},i.prototype.uand=function(p){return this.length>p.length?this.clone().iuand(p):p.clone().iuand(this)},i.prototype.iuxor=function(p){var g,x;this.length>p.length?(g=this,x=p):(g=p,x=this);for(var A=0;A<x.length;A++)this.words[A]=g.words[A]^x.words[A];if(this!==g)for(;A<g.length;A++)this.words[A]=g.words[A];return this.length=g.length,this.strip()},i.prototype.ixor=function(p){return r((this.negative|p.negative)===0),this.iuxor(p)},i.prototype.xor=function(p){return this.length>p.length?this.clone().ixor(p):p.clone().ixor(this)},i.prototype.uxor=function(p){return this.length>p.length?this.clone().iuxor(p):p.clone().iuxor(this)},i.prototype.inotn=function(p){r(typeof p=="number"&&p>=0);var g=Math.ceil(p/26)|0,x=p%26;this._expand(g),x>0&&g--;for(var A=0;A<g;A++)this.words[A]=~this.words[A]&67108863;return x>0&&(this.words[A]=~this.words[A]&67108863>>26-x),this.strip()},i.prototype.notn=function(p){return this.clone().inotn(p)},i.prototype.setn=function(p,g){r(typeof p=="number"&&p>=0);var x=p/26|0,A=p%26;return this._expand(x+1),g?this.words[x]=this.words[x]|1<<A:this.words[x]=this.words[x]&~(1<<A),this.strip()},i.prototype.iadd=function(p){var g;if(this.negative!==0&&p.negative===0)return this.negative=0,g=this.isub(p),this.negative^=1,this._normSign();if(this.negative===0&&p.negative!==0)return p.negative=0,g=this.isub(p),p.negative=1,g._normSign();var x,A;this.length>p.length?(x=this,A=p):(x=p,A=this);for(var v=0,_=0;_<A.length;_++)g=(x.words[_]|0)+(A.words[_]|0)+v,this.words[_]=g&67108863,v=g>>>26;for(;v!==0&&_<x.length;_++)g=(x.words[_]|0)+v,this.words[_]=g&67108863,v=g>>>26;if(this.length=x.length,v!==0)this.words[this.length]=v,this.length++;else if(x!==this)for(;_<x.length;_++)this.words[_]=x.words[_];return this},i.prototype.add=function(p){var g;return p.negative!==0&&this.negative===0?(p.negative=0,g=this.sub(p),p.negative^=1,g):p.negative===0&&this.negative!==0?(this.negative=0,g=p.sub(this),this.negative=1,g):this.length>p.length?this.clone().iadd(p):p.clone().iadd(this)},i.prototype.isub=function(p){if(p.negative!==0){p.negative=0;var g=this.iadd(p);return p.negative=1,g._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(p),this.negative=1,this._normSign();var x=this.cmp(p);if(x===0)return this.negative=0,this.length=1,this.words[0]=0,this;var A,v;x>0?(A=this,v=p):(A=p,v=this);for(var _=0,D=0;D<v.length;D++)g=(A.words[D]|0)-(v.words[D]|0)+_,_=g>>26,this.words[D]=g&67108863;for(;_!==0&&D<A.length;D++)g=(A.words[D]|0)+_,_=g>>26,this.words[D]=g&67108863;if(_===0&&D<A.length&&A!==this)for(;D<A.length;D++)this.words[D]=A.words[D];return this.length=Math.max(this.length,D),A!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(p){return this.clone().isub(p)};function b(B,p,g){g.negative=p.negative^B.negative;var x=B.length+p.length|0;g.length=x,x=x-1|0;var A=B.words[0]|0,v=p.words[0]|0,_=A*v,D=_&67108863,T=_/67108864|0;g.words[0]=D;for(var y=1;y<x;y++){for(var I=T>>>26,q=T&67108863,K=Math.min(y,p.length-1),F=Math.max(0,y-B.length+1);F<=K;F++){var J=y-F|0;A=B.words[J]|0,v=p.words[F]|0,_=A*v+q,I+=_/67108864|0,q=_&67108863}g.words[y]=q|0,T=I|0}return T!==0?g.words[y]=T|0:g.length--,g.strip()}var w=function(p,g,x){var A=p.words,v=g.words,_=x.words,D=0,T,y,I,q=A[0]|0,K=q&8191,F=q>>>13,J=A[1]|0,ae=J&8191,ce=J>>>13,ye=A[2]|0,he=ye&8191,U=ye>>>13,G=A[3]|0,Z=G&8191,ee=G>>>13,fe=A[4]|0,Q=fe&8191,se=fe>>>13,gt=A[5]|0,Pe=gt&8191,Oe=gt>>>13,gs=A[6]|0,Ke=gs&8191,Ue=gs>>>13,ac=A[7]|0,Re=ac&8191,ut=ac>>>13,hf=A[8]|0,ft=hf&8191,lt=hf>>>13,tu=A[9]|0,Fe=tu&8191,He=tu>>>13,ru=v[0]|0,qe=ru&8191,je=ru>>>13,nu=v[1]|0,We=nu&8191,ze=nu>>>13,iu=v[2]|0,Ge=iu&8191,$e=iu>>>13,ou=v[3]|0,Ye=ou&8191,Ze=ou>>>13,su=v[4]|0,Je=su&8191,Xe=su>>>13,au=v[5]|0,Qe=au&8191,et=au>>>13,cu=v[6]|0,tt=cu&8191,rt=cu>>>13,uu=v[7]|0,nt=uu&8191,it=uu>>>13,fu=v[8]|0,ot=fu&8191,st=fu>>>13,lu=v[9]|0,at=lu&8191,ct=lu>>>13;x.negative=p.negative^g.negative,x.length=19,T=Math.imul(K,qe),y=Math.imul(K,je),y=y+Math.imul(F,qe)|0,I=Math.imul(F,je);var ra=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(ra>>>26)|0,ra&=67108863,T=Math.imul(ae,qe),y=Math.imul(ae,je),y=y+Math.imul(ce,qe)|0,I=Math.imul(ce,je),T=T+Math.imul(K,We)|0,y=y+Math.imul(K,ze)|0,y=y+Math.imul(F,We)|0,I=I+Math.imul(F,ze)|0;var na=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(na>>>26)|0,na&=67108863,T=Math.imul(he,qe),y=Math.imul(he,je),y=y+Math.imul(U,qe)|0,I=Math.imul(U,je),T=T+Math.imul(ae,We)|0,y=y+Math.imul(ae,ze)|0,y=y+Math.imul(ce,We)|0,I=I+Math.imul(ce,ze)|0,T=T+Math.imul(K,Ge)|0,y=y+Math.imul(K,$e)|0,y=y+Math.imul(F,Ge)|0,I=I+Math.imul(F,$e)|0;var ia=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(ia>>>26)|0,ia&=67108863,T=Math.imul(Z,qe),y=Math.imul(Z,je),y=y+Math.imul(ee,qe)|0,I=Math.imul(ee,je),T=T+Math.imul(he,We)|0,y=y+Math.imul(he,ze)|0,y=y+Math.imul(U,We)|0,I=I+Math.imul(U,ze)|0,T=T+Math.imul(ae,Ge)|0,y=y+Math.imul(ae,$e)|0,y=y+Math.imul(ce,Ge)|0,I=I+Math.imul(ce,$e)|0,T=T+Math.imul(K,Ye)|0,y=y+Math.imul(K,Ze)|0,y=y+Math.imul(F,Ye)|0,I=I+Math.imul(F,Ze)|0;var oa=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(oa>>>26)|0,oa&=67108863,T=Math.imul(Q,qe),y=Math.imul(Q,je),y=y+Math.imul(se,qe)|0,I=Math.imul(se,je),T=T+Math.imul(Z,We)|0,y=y+Math.imul(Z,ze)|0,y=y+Math.imul(ee,We)|0,I=I+Math.imul(ee,ze)|0,T=T+Math.imul(he,Ge)|0,y=y+Math.imul(he,$e)|0,y=y+Math.imul(U,Ge)|0,I=I+Math.imul(U,$e)|0,T=T+Math.imul(ae,Ye)|0,y=y+Math.imul(ae,Ze)|0,y=y+Math.imul(ce,Ye)|0,I=I+Math.imul(ce,Ze)|0,T=T+Math.imul(K,Je)|0,y=y+Math.imul(K,Xe)|0,y=y+Math.imul(F,Je)|0,I=I+Math.imul(F,Xe)|0;var sa=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(sa>>>26)|0,sa&=67108863,T=Math.imul(Pe,qe),y=Math.imul(Pe,je),y=y+Math.imul(Oe,qe)|0,I=Math.imul(Oe,je),T=T+Math.imul(Q,We)|0,y=y+Math.imul(Q,ze)|0,y=y+Math.imul(se,We)|0,I=I+Math.imul(se,ze)|0,T=T+Math.imul(Z,Ge)|0,y=y+Math.imul(Z,$e)|0,y=y+Math.imul(ee,Ge)|0,I=I+Math.imul(ee,$e)|0,T=T+Math.imul(he,Ye)|0,y=y+Math.imul(he,Ze)|0,y=y+Math.imul(U,Ye)|0,I=I+Math.imul(U,Ze)|0,T=T+Math.imul(ae,Je)|0,y=y+Math.imul(ae,Xe)|0,y=y+Math.imul(ce,Je)|0,I=I+Math.imul(ce,Xe)|0,T=T+Math.imul(K,Qe)|0,y=y+Math.imul(K,et)|0,y=y+Math.imul(F,Qe)|0,I=I+Math.imul(F,et)|0;var aa=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(aa>>>26)|0,aa&=67108863,T=Math.imul(Ke,qe),y=Math.imul(Ke,je),y=y+Math.imul(Ue,qe)|0,I=Math.imul(Ue,je),T=T+Math.imul(Pe,We)|0,y=y+Math.imul(Pe,ze)|0,y=y+Math.imul(Oe,We)|0,I=I+Math.imul(Oe,ze)|0,T=T+Math.imul(Q,Ge)|0,y=y+Math.imul(Q,$e)|0,y=y+Math.imul(se,Ge)|0,I=I+Math.imul(se,$e)|0,T=T+Math.imul(Z,Ye)|0,y=y+Math.imul(Z,Ze)|0,y=y+Math.imul(ee,Ye)|0,I=I+Math.imul(ee,Ze)|0,T=T+Math.imul(he,Je)|0,y=y+Math.imul(he,Xe)|0,y=y+Math.imul(U,Je)|0,I=I+Math.imul(U,Xe)|0,T=T+Math.imul(ae,Qe)|0,y=y+Math.imul(ae,et)|0,y=y+Math.imul(ce,Qe)|0,I=I+Math.imul(ce,et)|0,T=T+Math.imul(K,tt)|0,y=y+Math.imul(K,rt)|0,y=y+Math.imul(F,tt)|0,I=I+Math.imul(F,rt)|0;var ca=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(ca>>>26)|0,ca&=67108863,T=Math.imul(Re,qe),y=Math.imul(Re,je),y=y+Math.imul(ut,qe)|0,I=Math.imul(ut,je),T=T+Math.imul(Ke,We)|0,y=y+Math.imul(Ke,ze)|0,y=y+Math.imul(Ue,We)|0,I=I+Math.imul(Ue,ze)|0,T=T+Math.imul(Pe,Ge)|0,y=y+Math.imul(Pe,$e)|0,y=y+Math.imul(Oe,Ge)|0,I=I+Math.imul(Oe,$e)|0,T=T+Math.imul(Q,Ye)|0,y=y+Math.imul(Q,Ze)|0,y=y+Math.imul(se,Ye)|0,I=I+Math.imul(se,Ze)|0,T=T+Math.imul(Z,Je)|0,y=y+Math.imul(Z,Xe)|0,y=y+Math.imul(ee,Je)|0,I=I+Math.imul(ee,Xe)|0,T=T+Math.imul(he,Qe)|0,y=y+Math.imul(he,et)|0,y=y+Math.imul(U,Qe)|0,I=I+Math.imul(U,et)|0,T=T+Math.imul(ae,tt)|0,y=y+Math.imul(ae,rt)|0,y=y+Math.imul(ce,tt)|0,I=I+Math.imul(ce,rt)|0,T=T+Math.imul(K,nt)|0,y=y+Math.imul(K,it)|0,y=y+Math.imul(F,nt)|0,I=I+Math.imul(F,it)|0;var ua=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(ua>>>26)|0,ua&=67108863,T=Math.imul(ft,qe),y=Math.imul(ft,je),y=y+Math.imul(lt,qe)|0,I=Math.imul(lt,je),T=T+Math.imul(Re,We)|0,y=y+Math.imul(Re,ze)|0,y=y+Math.imul(ut,We)|0,I=I+Math.imul(ut,ze)|0,T=T+Math.imul(Ke,Ge)|0,y=y+Math.imul(Ke,$e)|0,y=y+Math.imul(Ue,Ge)|0,I=I+Math.imul(Ue,$e)|0,T=T+Math.imul(Pe,Ye)|0,y=y+Math.imul(Pe,Ze)|0,y=y+Math.imul(Oe,Ye)|0,I=I+Math.imul(Oe,Ze)|0,T=T+Math.imul(Q,Je)|0,y=y+Math.imul(Q,Xe)|0,y=y+Math.imul(se,Je)|0,I=I+Math.imul(se,Xe)|0,T=T+Math.imul(Z,Qe)|0,y=y+Math.imul(Z,et)|0,y=y+Math.imul(ee,Qe)|0,I=I+Math.imul(ee,et)|0,T=T+Math.imul(he,tt)|0,y=y+Math.imul(he,rt)|0,y=y+Math.imul(U,tt)|0,I=I+Math.imul(U,rt)|0,T=T+Math.imul(ae,nt)|0,y=y+Math.imul(ae,it)|0,y=y+Math.imul(ce,nt)|0,I=I+Math.imul(ce,it)|0,T=T+Math.imul(K,ot)|0,y=y+Math.imul(K,st)|0,y=y+Math.imul(F,ot)|0,I=I+Math.imul(F,st)|0;var fa=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(fa>>>26)|0,fa&=67108863,T=Math.imul(Fe,qe),y=Math.imul(Fe,je),y=y+Math.imul(He,qe)|0,I=Math.imul(He,je),T=T+Math.imul(ft,We)|0,y=y+Math.imul(ft,ze)|0,y=y+Math.imul(lt,We)|0,I=I+Math.imul(lt,ze)|0,T=T+Math.imul(Re,Ge)|0,y=y+Math.imul(Re,$e)|0,y=y+Math.imul(ut,Ge)|0,I=I+Math.imul(ut,$e)|0,T=T+Math.imul(Ke,Ye)|0,y=y+Math.imul(Ke,Ze)|0,y=y+Math.imul(Ue,Ye)|0,I=I+Math.imul(Ue,Ze)|0,T=T+Math.imul(Pe,Je)|0,y=y+Math.imul(Pe,Xe)|0,y=y+Math.imul(Oe,Je)|0,I=I+Math.imul(Oe,Xe)|0,T=T+Math.imul(Q,Qe)|0,y=y+Math.imul(Q,et)|0,y=y+Math.imul(se,Qe)|0,I=I+Math.imul(se,et)|0,T=T+Math.imul(Z,tt)|0,y=y+Math.imul(Z,rt)|0,y=y+Math.imul(ee,tt)|0,I=I+Math.imul(ee,rt)|0,T=T+Math.imul(he,nt)|0,y=y+Math.imul(he,it)|0,y=y+Math.imul(U,nt)|0,I=I+Math.imul(U,it)|0,T=T+Math.imul(ae,ot)|0,y=y+Math.imul(ae,st)|0,y=y+Math.imul(ce,ot)|0,I=I+Math.imul(ce,st)|0,T=T+Math.imul(K,at)|0,y=y+Math.imul(K,ct)|0,y=y+Math.imul(F,at)|0,I=I+Math.imul(F,ct)|0;var la=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(la>>>26)|0,la&=67108863,T=Math.imul(Fe,We),y=Math.imul(Fe,ze),y=y+Math.imul(He,We)|0,I=Math.imul(He,ze),T=T+Math.imul(ft,Ge)|0,y=y+Math.imul(ft,$e)|0,y=y+Math.imul(lt,Ge)|0,I=I+Math.imul(lt,$e)|0,T=T+Math.imul(Re,Ye)|0,y=y+Math.imul(Re,Ze)|0,y=y+Math.imul(ut,Ye)|0,I=I+Math.imul(ut,Ze)|0,T=T+Math.imul(Ke,Je)|0,y=y+Math.imul(Ke,Xe)|0,y=y+Math.imul(Ue,Je)|0,I=I+Math.imul(Ue,Xe)|0,T=T+Math.imul(Pe,Qe)|0,y=y+Math.imul(Pe,et)|0,y=y+Math.imul(Oe,Qe)|0,I=I+Math.imul(Oe,et)|0,T=T+Math.imul(Q,tt)|0,y=y+Math.imul(Q,rt)|0,y=y+Math.imul(se,tt)|0,I=I+Math.imul(se,rt)|0,T=T+Math.imul(Z,nt)|0,y=y+Math.imul(Z,it)|0,y=y+Math.imul(ee,nt)|0,I=I+Math.imul(ee,it)|0,T=T+Math.imul(he,ot)|0,y=y+Math.imul(he,st)|0,y=y+Math.imul(U,ot)|0,I=I+Math.imul(U,st)|0,T=T+Math.imul(ae,at)|0,y=y+Math.imul(ae,ct)|0,y=y+Math.imul(ce,at)|0,I=I+Math.imul(ce,ct)|0;var da=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(da>>>26)|0,da&=67108863,T=Math.imul(Fe,Ge),y=Math.imul(Fe,$e),y=y+Math.imul(He,Ge)|0,I=Math.imul(He,$e),T=T+Math.imul(ft,Ye)|0,y=y+Math.imul(ft,Ze)|0,y=y+Math.imul(lt,Ye)|0,I=I+Math.imul(lt,Ze)|0,T=T+Math.imul(Re,Je)|0,y=y+Math.imul(Re,Xe)|0,y=y+Math.imul(ut,Je)|0,I=I+Math.imul(ut,Xe)|0,T=T+Math.imul(Ke,Qe)|0,y=y+Math.imul(Ke,et)|0,y=y+Math.imul(Ue,Qe)|0,I=I+Math.imul(Ue,et)|0,T=T+Math.imul(Pe,tt)|0,y=y+Math.imul(Pe,rt)|0,y=y+Math.imul(Oe,tt)|0,I=I+Math.imul(Oe,rt)|0,T=T+Math.imul(Q,nt)|0,y=y+Math.imul(Q,it)|0,y=y+Math.imul(se,nt)|0,I=I+Math.imul(se,it)|0,T=T+Math.imul(Z,ot)|0,y=y+Math.imul(Z,st)|0,y=y+Math.imul(ee,ot)|0,I=I+Math.imul(ee,st)|0,T=T+Math.imul(he,at)|0,y=y+Math.imul(he,ct)|0,y=y+Math.imul(U,at)|0,I=I+Math.imul(U,ct)|0;var ha=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(ha>>>26)|0,ha&=67108863,T=Math.imul(Fe,Ye),y=Math.imul(Fe,Ze),y=y+Math.imul(He,Ye)|0,I=Math.imul(He,Ze),T=T+Math.imul(ft,Je)|0,y=y+Math.imul(ft,Xe)|0,y=y+Math.imul(lt,Je)|0,I=I+Math.imul(lt,Xe)|0,T=T+Math.imul(Re,Qe)|0,y=y+Math.imul(Re,et)|0,y=y+Math.imul(ut,Qe)|0,I=I+Math.imul(ut,et)|0,T=T+Math.imul(Ke,tt)|0,y=y+Math.imul(Ke,rt)|0,y=y+Math.imul(Ue,tt)|0,I=I+Math.imul(Ue,rt)|0,T=T+Math.imul(Pe,nt)|0,y=y+Math.imul(Pe,it)|0,y=y+Math.imul(Oe,nt)|0,I=I+Math.imul(Oe,it)|0,T=T+Math.imul(Q,ot)|0,y=y+Math.imul(Q,st)|0,y=y+Math.imul(se,ot)|0,I=I+Math.imul(se,st)|0,T=T+Math.imul(Z,at)|0,y=y+Math.imul(Z,ct)|0,y=y+Math.imul(ee,at)|0,I=I+Math.imul(ee,ct)|0;var pa=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(pa>>>26)|0,pa&=67108863,T=Math.imul(Fe,Je),y=Math.imul(Fe,Xe),y=y+Math.imul(He,Je)|0,I=Math.imul(He,Xe),T=T+Math.imul(ft,Qe)|0,y=y+Math.imul(ft,et)|0,y=y+Math.imul(lt,Qe)|0,I=I+Math.imul(lt,et)|0,T=T+Math.imul(Re,tt)|0,y=y+Math.imul(Re,rt)|0,y=y+Math.imul(ut,tt)|0,I=I+Math.imul(ut,rt)|0,T=T+Math.imul(Ke,nt)|0,y=y+Math.imul(Ke,it)|0,y=y+Math.imul(Ue,nt)|0,I=I+Math.imul(Ue,it)|0,T=T+Math.imul(Pe,ot)|0,y=y+Math.imul(Pe,st)|0,y=y+Math.imul(Oe,ot)|0,I=I+Math.imul(Oe,st)|0,T=T+Math.imul(Q,at)|0,y=y+Math.imul(Q,ct)|0,y=y+Math.imul(se,at)|0,I=I+Math.imul(se,ct)|0;var ya=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(ya>>>26)|0,ya&=67108863,T=Math.imul(Fe,Qe),y=Math.imul(Fe,et),y=y+Math.imul(He,Qe)|0,I=Math.imul(He,et),T=T+Math.imul(ft,tt)|0,y=y+Math.imul(ft,rt)|0,y=y+Math.imul(lt,tt)|0,I=I+Math.imul(lt,rt)|0,T=T+Math.imul(Re,nt)|0,y=y+Math.imul(Re,it)|0,y=y+Math.imul(ut,nt)|0,I=I+Math.imul(ut,it)|0,T=T+Math.imul(Ke,ot)|0,y=y+Math.imul(Ke,st)|0,y=y+Math.imul(Ue,ot)|0,I=I+Math.imul(Ue,st)|0,T=T+Math.imul(Pe,at)|0,y=y+Math.imul(Pe,ct)|0,y=y+Math.imul(Oe,at)|0,I=I+Math.imul(Oe,ct)|0;var ma=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(ma>>>26)|0,ma&=67108863,T=Math.imul(Fe,tt),y=Math.imul(Fe,rt),y=y+Math.imul(He,tt)|0,I=Math.imul(He,rt),T=T+Math.imul(ft,nt)|0,y=y+Math.imul(ft,it)|0,y=y+Math.imul(lt,nt)|0,I=I+Math.imul(lt,it)|0,T=T+Math.imul(Re,ot)|0,y=y+Math.imul(Re,st)|0,y=y+Math.imul(ut,ot)|0,I=I+Math.imul(ut,st)|0,T=T+Math.imul(Ke,at)|0,y=y+Math.imul(Ke,ct)|0,y=y+Math.imul(Ue,at)|0,I=I+Math.imul(Ue,ct)|0;var ga=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(ga>>>26)|0,ga&=67108863,T=Math.imul(Fe,nt),y=Math.imul(Fe,it),y=y+Math.imul(He,nt)|0,I=Math.imul(He,it),T=T+Math.imul(ft,ot)|0,y=y+Math.imul(ft,st)|0,y=y+Math.imul(lt,ot)|0,I=I+Math.imul(lt,st)|0,T=T+Math.imul(Re,at)|0,y=y+Math.imul(Re,ct)|0,y=y+Math.imul(ut,at)|0,I=I+Math.imul(ut,ct)|0;var ba=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(ba>>>26)|0,ba&=67108863,T=Math.imul(Fe,ot),y=Math.imul(Fe,st),y=y+Math.imul(He,ot)|0,I=Math.imul(He,st),T=T+Math.imul(ft,at)|0,y=y+Math.imul(ft,ct)|0,y=y+Math.imul(lt,at)|0,I=I+Math.imul(lt,ct)|0;var Ld=(D+T|0)+((y&8191)<<13)|0;D=(I+(y>>>13)|0)+(Ld>>>26)|0,Ld&=67108863,T=Math.imul(Fe,at),y=Math.imul(Fe,ct),y=y+Math.imul(He,at)|0,I=Math.imul(He,ct);var Vd=(D+T|0)+((y&8191)<<13)|0;return D=(I+(y>>>13)|0)+(Vd>>>26)|0,Vd&=67108863,_[0]=ra,_[1]=na,_[2]=ia,_[3]=oa,_[4]=sa,_[5]=aa,_[6]=ca,_[7]=ua,_[8]=fa,_[9]=la,_[10]=da,_[11]=ha,_[12]=pa,_[13]=ya,_[14]=ma,_[15]=ga,_[16]=ba,_[17]=Ld,_[18]=Vd,D!==0&&(_[19]=D,x.length++),x};Math.imul||(w=b);function S(B,p,g){g.negative=p.negative^B.negative,g.length=B.length+p.length;for(var x=0,A=0,v=0;v<g.length-1;v++){var _=A;A=0;for(var D=x&67108863,T=Math.min(v,p.length-1),y=Math.max(0,v-B.length+1);y<=T;y++){var I=v-y,q=B.words[I]|0,K=p.words[y]|0,F=q*K,J=F&67108863;_=_+(F/67108864|0)|0,J=J+D|0,D=J&67108863,_=_+(J>>>26)|0,A+=_>>>26,_&=67108863}g.words[v]=D,x=_,_=A}return x!==0?g.words[v]=x:g.length--,g.strip()}function P(B,p,g){var x=new N;return x.mulp(B,p,g)}i.prototype.mulTo=function(p,g){var x,A=this.length+p.length;return this.length===10&&p.length===10?x=w(this,p,g):A<63?x=b(this,p,g):A<1024?x=S(this,p,g):x=P(this,p,g),x};function N(B,p){this.x=B,this.y=p}N.prototype.makeRBT=function(p){for(var g=new Array(p),x=i.prototype._countBits(p)-1,A=0;A<p;A++)g[A]=this.revBin(A,x,p);return g},N.prototype.revBin=function(p,g,x){if(p===0||p===x-1)return p;for(var A=0,v=0;v<g;v++)A|=(p&1)<<g-v-1,p>>=1;return A},N.prototype.permute=function(p,g,x,A,v,_){for(var D=0;D<_;D++)A[D]=g[p[D]],v[D]=x[p[D]]},N.prototype.transform=function(p,g,x,A,v,_){this.permute(_,p,g,x,A,v);for(var D=1;D<v;D<<=1)for(var T=D<<1,y=Math.cos(2*Math.PI/T),I=Math.sin(2*Math.PI/T),q=0;q<v;q+=T)for(var K=y,F=I,J=0;J<D;J++){var ae=x[q+J],ce=A[q+J],ye=x[q+J+D],he=A[q+J+D],U=K*ye-F*he;he=K*he+F*ye,ye=U,x[q+J]=ae+ye,A[q+J]=ce+he,x[q+J+D]=ae-ye,A[q+J+D]=ce-he,J!==T&&(U=y*K-I*F,F=y*F+I*K,K=U)}},N.prototype.guessLen13b=function(p,g){var x=Math.max(g,p)|1,A=x&1,v=0;for(x=x/2|0;x;x=x>>>1)v++;return 1<<v+1+A},N.prototype.conjugate=function(p,g,x){if(!(x<=1))for(var A=0;A<x/2;A++){var v=p[A];p[A]=p[x-A-1],p[x-A-1]=v,v=g[A],g[A]=-g[x-A-1],g[x-A-1]=-v}},N.prototype.normalize13b=function(p,g){for(var x=0,A=0;A<g/2;A++){var v=Math.round(p[2*A+1]/g)*8192+Math.round(p[2*A]/g)+x;p[A]=v&67108863,v<67108864?x=0:x=v/67108864|0}return p},N.prototype.convert13b=function(p,g,x,A){for(var v=0,_=0;_<g;_++)v=v+(p[_]|0),x[2*_]=v&8191,v=v>>>13,x[2*_+1]=v&8191,v=v>>>13;for(_=2*g;_<A;++_)x[_]=0;r(v===0),r((v&-8192)===0)},N.prototype.stub=function(p){for(var g=new Array(p),x=0;x<p;x++)g[x]=0;return g},N.prototype.mulp=function(p,g,x){var A=2*this.guessLen13b(p.length,g.length),v=this.makeRBT(A),_=this.stub(A),D=new Array(A),T=new Array(A),y=new Array(A),I=new Array(A),q=new Array(A),K=new Array(A),F=x.words;F.length=A,this.convert13b(p.words,p.length,D,A),this.convert13b(g.words,g.length,I,A),this.transform(D,_,T,y,A,v),this.transform(I,_,q,K,A,v);for(var J=0;J<A;J++){var ae=T[J]*q[J]-y[J]*K[J];y[J]=T[J]*K[J]+y[J]*q[J],T[J]=ae}return this.conjugate(T,y,A),this.transform(T,y,F,_,A,v),this.conjugate(F,_,A),this.normalize13b(F,A),x.negative=p.negative^g.negative,x.length=p.length+g.length,x.strip()},i.prototype.mul=function(p){var g=new i(null);return g.words=new Array(this.length+p.length),this.mulTo(p,g)},i.prototype.mulf=function(p){var g=new i(null);return g.words=new Array(this.length+p.length),P(this,p,g)},i.prototype.imul=function(p){return this.clone().mulTo(p,this)},i.prototype.imuln=function(p){r(typeof p=="number"),r(p<67108864);for(var g=0,x=0;x<this.length;x++){var A=(this.words[x]|0)*p,v=(A&67108863)+(g&67108863);g>>=26,g+=A/67108864|0,g+=v>>>26,this.words[x]=v&67108863}return g!==0&&(this.words[x]=g,this.length++),this},i.prototype.muln=function(p){return this.clone().imuln(p)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(p){var g=m(p);if(g.length===0)return new i(1);for(var x=this,A=0;A<g.length&&g[A]===0;A++,x=x.sqr());if(++A<g.length)for(var v=x.sqr();A<g.length;A++,v=v.sqr())g[A]!==0&&(x=x.mul(v));return x},i.prototype.iushln=function(p){r(typeof p=="number"&&p>=0);var g=p%26,x=(p-g)/26,A=67108863>>>26-g<<26-g,v;if(g!==0){var _=0;for(v=0;v<this.length;v++){var D=this.words[v]&A,T=(this.words[v]|0)-D<<g;this.words[v]=T|_,_=D>>>26-g}_&&(this.words[v]=_,this.length++)}if(x!==0){for(v=this.length-1;v>=0;v--)this.words[v+x]=this.words[v];for(v=0;v<x;v++)this.words[v]=0;this.length+=x}return this.strip()},i.prototype.ishln=function(p){return r(this.negative===0),this.iushln(p)},i.prototype.iushrn=function(p,g,x){r(typeof p=="number"&&p>=0);var A;g?A=(g-g%26)/26:A=0;var v=p%26,_=Math.min((p-v)/26,this.length),D=67108863^67108863>>>v<<v,T=x;if(A-=_,A=Math.max(0,A),T){for(var y=0;y<_;y++)T.words[y]=this.words[y];T.length=_}if(_!==0)if(this.length>_)for(this.length-=_,y=0;y<this.length;y++)this.words[y]=this.words[y+_];else this.words[0]=0,this.length=1;var I=0;for(y=this.length-1;y>=0&&(I!==0||y>=A);y--){var q=this.words[y]|0;this.words[y]=I<<26-v|q>>>v,I=q&D}return T&&I!==0&&(T.words[T.length++]=I),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(p,g,x){return r(this.negative===0),this.iushrn(p,g,x)},i.prototype.shln=function(p){return this.clone().ishln(p)},i.prototype.ushln=function(p){return this.clone().iushln(p)},i.prototype.shrn=function(p){return this.clone().ishrn(p)},i.prototype.ushrn=function(p){return this.clone().iushrn(p)},i.prototype.testn=function(p){r(typeof p=="number"&&p>=0);var g=p%26,x=(p-g)/26,A=1<<g;if(this.length<=x)return!1;var v=this.words[x];return!!(v&A)},i.prototype.imaskn=function(p){r(typeof p=="number"&&p>=0);var g=p%26,x=(p-g)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=x)return this;if(g!==0&&x++,this.length=Math.min(x,this.length),g!==0){var A=67108863^67108863>>>g<<g;this.words[this.length-1]&=A}return this.strip()},i.prototype.maskn=function(p){return this.clone().imaskn(p)},i.prototype.iaddn=function(p){return r(typeof p=="number"),r(p<67108864),p<0?this.isubn(-p):this.negative!==0?this.length===1&&(this.words[0]|0)<p?(this.words[0]=p-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(p),this.negative=1,this):this._iaddn(p)},i.prototype._iaddn=function(p){this.words[0]+=p;for(var g=0;g<this.length&&this.words[g]>=67108864;g++)this.words[g]-=67108864,g===this.length-1?this.words[g+1]=1:this.words[g+1]++;return this.length=Math.max(this.length,g+1),this},i.prototype.isubn=function(p){if(r(typeof p=="number"),r(p<67108864),p<0)return this.iaddn(-p);if(this.negative!==0)return this.negative=0,this.iaddn(p),this.negative=1,this;if(this.words[0]-=p,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var g=0;g<this.length&&this.words[g]<0;g++)this.words[g]+=67108864,this.words[g+1]-=1;return this.strip()},i.prototype.addn=function(p){return this.clone().iaddn(p)},i.prototype.subn=function(p){return this.clone().isubn(p)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(p,g,x){var A=p.length+x,v;this._expand(A);var _,D=0;for(v=0;v<p.length;v++){_=(this.words[v+x]|0)+D;var T=(p.words[v]|0)*g;_-=T&67108863,D=(_>>26)-(T/67108864|0),this.words[v+x]=_&67108863}for(;v<this.length-x;v++)_=(this.words[v+x]|0)+D,D=_>>26,this.words[v+x]=_&67108863;if(D===0)return this.strip();for(r(D===-1),D=0,v=0;v<this.length;v++)_=-(this.words[v]|0)+D,D=_>>26,this.words[v]=_&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(p,g){var x=this.length-p.length,A=this.clone(),v=p,_=v.words[v.length-1]|0,D=this._countBits(_);x=26-D,x!==0&&(v=v.ushln(x),A.iushln(x),_=v.words[v.length-1]|0);var T=A.length-v.length,y;if(g!=="mod"){y=new i(null),y.length=T+1,y.words=new Array(y.length);for(var I=0;I<y.length;I++)y.words[I]=0}var q=A.clone()._ishlnsubmul(v,1,T);q.negative===0&&(A=q,y&&(y.words[T]=1));for(var K=T-1;K>=0;K--){var F=(A.words[v.length+K]|0)*67108864+(A.words[v.length+K-1]|0);for(F=Math.min(F/_|0,67108863),A._ishlnsubmul(v,F,K);A.negative!==0;)F--,A.negative=0,A._ishlnsubmul(v,1,K),A.isZero()||(A.negative^=1);y&&(y.words[K]=F)}return y&&y.strip(),A.strip(),g!=="div"&&x!==0&&A.iushrn(x),{div:y||null,mod:A}},i.prototype.divmod=function(p,g,x){if(r(!p.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var A,v,_;return this.negative!==0&&p.negative===0?(_=this.neg().divmod(p,g),g!=="mod"&&(A=_.div.neg()),g!=="div"&&(v=_.mod.neg(),x&&v.negative!==0&&v.iadd(p)),{div:A,mod:v}):this.negative===0&&p.negative!==0?(_=this.divmod(p.neg(),g),g!=="mod"&&(A=_.div.neg()),{div:A,mod:_.mod}):this.negative&p.negative?(_=this.neg().divmod(p.neg(),g),g!=="div"&&(v=_.mod.neg(),x&&v.negative!==0&&v.isub(p)),{div:_.div,mod:v}):p.length>this.length||this.cmp(p)<0?{div:new i(0),mod:this}:p.length===1?g==="div"?{div:this.divn(p.words[0]),mod:null}:g==="mod"?{div:null,mod:new i(this.modn(p.words[0]))}:{div:this.divn(p.words[0]),mod:new i(this.modn(p.words[0]))}:this._wordDiv(p,g)},i.prototype.div=function(p){return this.divmod(p,"div",!1).div},i.prototype.mod=function(p){return this.divmod(p,"mod",!1).mod},i.prototype.umod=function(p){return this.divmod(p,"mod",!0).mod},i.prototype.divRound=function(p){var g=this.divmod(p);if(g.mod.isZero())return g.div;var x=g.div.negative!==0?g.mod.isub(p):g.mod,A=p.ushrn(1),v=p.andln(1),_=x.cmp(A);return _<0||v===1&&_===0?g.div:g.div.negative!==0?g.div.isubn(1):g.div.iaddn(1)},i.prototype.modn=function(p){r(p<=67108863);for(var g=(1<<26)%p,x=0,A=this.length-1;A>=0;A--)x=(g*x+(this.words[A]|0))%p;return x},i.prototype.idivn=function(p){r(p<=67108863);for(var g=0,x=this.length-1;x>=0;x--){var A=(this.words[x]|0)+g*67108864;this.words[x]=A/p|0,g=A%p}return this.strip()},i.prototype.divn=function(p){return this.clone().idivn(p)},i.prototype.egcd=function(p){r(p.negative===0),r(!p.isZero());var g=this,x=p.clone();g.negative!==0?g=g.umod(p):g=g.clone();for(var A=new i(1),v=new i(0),_=new i(0),D=new i(1),T=0;g.isEven()&&x.isEven();)g.iushrn(1),x.iushrn(1),++T;for(var y=x.clone(),I=g.clone();!g.isZero();){for(var q=0,K=1;!(g.words[0]&K)&&q<26;++q,K<<=1);if(q>0)for(g.iushrn(q);q-- >0;)(A.isOdd()||v.isOdd())&&(A.iadd(y),v.isub(I)),A.iushrn(1),v.iushrn(1);for(var F=0,J=1;!(x.words[0]&J)&&F<26;++F,J<<=1);if(F>0)for(x.iushrn(F);F-- >0;)(_.isOdd()||D.isOdd())&&(_.iadd(y),D.isub(I)),_.iushrn(1),D.iushrn(1);g.cmp(x)>=0?(g.isub(x),A.isub(_),v.isub(D)):(x.isub(g),_.isub(A),D.isub(v))}return{a:_,b:D,gcd:x.iushln(T)}},i.prototype._invmp=function(p){r(p.negative===0),r(!p.isZero());var g=this,x=p.clone();g.negative!==0?g=g.umod(p):g=g.clone();for(var A=new i(1),v=new i(0),_=x.clone();g.cmpn(1)>0&&x.cmpn(1)>0;){for(var D=0,T=1;!(g.words[0]&T)&&D<26;++D,T<<=1);if(D>0)for(g.iushrn(D);D-- >0;)A.isOdd()&&A.iadd(_),A.iushrn(1);for(var y=0,I=1;!(x.words[0]&I)&&y<26;++y,I<<=1);if(y>0)for(x.iushrn(y);y-- >0;)v.isOdd()&&v.iadd(_),v.iushrn(1);g.cmp(x)>=0?(g.isub(x),A.isub(v)):(x.isub(g),v.isub(A))}var q;return g.cmpn(1)===0?q=A:q=v,q.cmpn(0)<0&&q.iadd(p),q},i.prototype.gcd=function(p){if(this.isZero())return p.abs();if(p.isZero())return this.abs();var g=this.clone(),x=p.clone();g.negative=0,x.negative=0;for(var A=0;g.isEven()&&x.isEven();A++)g.iushrn(1),x.iushrn(1);do{for(;g.isEven();)g.iushrn(1);for(;x.isEven();)x.iushrn(1);var v=g.cmp(x);if(v<0){var _=g;g=x,x=_}else if(v===0||x.cmpn(1)===0)break;g.isub(x)}while(!0);return x.iushln(A)},i.prototype.invm=function(p){return this.egcd(p).a.umod(p)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(p){return this.words[0]&p},i.prototype.bincn=function(p){r(typeof p=="number");var g=p%26,x=(p-g)/26,A=1<<g;if(this.length<=x)return this._expand(x+1),this.words[x]|=A,this;for(var v=A,_=x;v!==0&&_<this.length;_++){var D=this.words[_]|0;D+=v,v=D>>>26,D&=67108863,this.words[_]=D}return v!==0&&(this.words[_]=v,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(p){var g=p<0;if(this.negative!==0&&!g)return-1;if(this.negative===0&&g)return 1;this.strip();var x;if(this.length>1)x=1;else{g&&(p=-p),r(p<=67108863,"Number is too big");var A=this.words[0]|0;x=A===p?0:A<p?-1:1}return this.negative!==0?-x|0:x},i.prototype.cmp=function(p){if(this.negative!==0&&p.negative===0)return-1;if(this.negative===0&&p.negative!==0)return 1;var g=this.ucmp(p);return this.negative!==0?-g|0:g},i.prototype.ucmp=function(p){if(this.length>p.length)return 1;if(this.length<p.length)return-1;for(var g=0,x=this.length-1;x>=0;x--){var A=this.words[x]|0,v=p.words[x]|0;if(A!==v){A<v?g=-1:A>v&&(g=1);break}}return g},i.prototype.gtn=function(p){return this.cmpn(p)===1},i.prototype.gt=function(p){return this.cmp(p)===1},i.prototype.gten=function(p){return this.cmpn(p)>=0},i.prototype.gte=function(p){return this.cmp(p)>=0},i.prototype.ltn=function(p){return this.cmpn(p)===-1},i.prototype.lt=function(p){return this.cmp(p)===-1},i.prototype.lten=function(p){return this.cmpn(p)<=0},i.prototype.lte=function(p){return this.cmp(p)<=0},i.prototype.eqn=function(p){return this.cmpn(p)===0},i.prototype.eq=function(p){return this.cmp(p)===0},i.red=function(p){return new H(p)},i.prototype.toRed=function(p){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),p.convertTo(this)._forceRed(p)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(p){return this.red=p,this},i.prototype.forceRed=function(p){return r(!this.red,"Already a number in reduction context"),this._forceRed(p)},i.prototype.redAdd=function(p){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,p)},i.prototype.redIAdd=function(p){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,p)},i.prototype.redSub=function(p){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,p)},i.prototype.redISub=function(p){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,p)},i.prototype.redShl=function(p){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,p)},i.prototype.redMul=function(p){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,p),this.red.mul(this,p)},i.prototype.redIMul=function(p){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,p),this.red.imul(this,p)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(p){return r(this.red&&!p.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,p)};var O={k256:null,p224:null,p192:null,p25519:null};function C(B,p){this.name=B,this.p=new i(p,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}C.prototype._tmp=function(){var p=new i(null);return p.words=new Array(Math.ceil(this.n/13)),p},C.prototype.ireduce=function(p){var g=p,x;do this.split(g,this.tmp),g=this.imulK(g),g=g.iadd(this.tmp),x=g.bitLength();while(x>this.n);var A=x<this.n?-1:g.ucmp(this.p);return A===0?(g.words[0]=0,g.length=1):A>0?g.isub(this.p):g.strip!==void 0?g.strip():g._strip(),g},C.prototype.split=function(p,g){p.iushrn(this.n,0,g)},C.prototype.imulK=function(p){return p.imul(this.k)};function L(){C.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(L,C),L.prototype.split=function(p,g){for(var x=4194303,A=Math.min(p.length,9),v=0;v<A;v++)g.words[v]=p.words[v];if(g.length=A,p.length<=9){p.words[0]=0,p.length=1;return}var _=p.words[9];for(g.words[g.length++]=_&x,v=10;v<p.length;v++){var D=p.words[v]|0;p.words[v-10]=(D&x)<<4|_>>>22,_=D}_>>>=22,p.words[v-10]=_,_===0&&p.length>10?p.length-=10:p.length-=9},L.prototype.imulK=function(p){p.words[p.length]=0,p.words[p.length+1]=0,p.length+=2;for(var g=0,x=0;x<p.length;x++){var A=p.words[x]|0;g+=A*977,p.words[x]=g&67108863,g=A*64+(g/67108864|0)}return p.words[p.length-1]===0&&(p.length--,p.words[p.length-1]===0&&p.length--),p};function V(){C.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(V,C);function j(){C.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(j,C);function $(){C.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n($,C),$.prototype.imulK=function(p){for(var g=0,x=0;x<p.length;x++){var A=(p.words[x]|0)*19+g,v=A&67108863;A>>>=26,p.words[x]=v,g=A}return g!==0&&(p.words[p.length++]=g),p},i._prime=function(p){if(O[p])return O[p];var g;if(p==="k256")g=new L;else if(p==="p224")g=new V;else if(p==="p192")g=new j;else if(p==="p25519")g=new $;else throw new Error("Unknown prime "+p);return O[p]=g,g};function H(B){if(typeof B=="string"){var p=i._prime(B);this.m=p.p,this.prime=p}else r(B.gtn(1),"modulus must be greater than 1"),this.m=B,this.prime=null}H.prototype._verify1=function(p){r(p.negative===0,"red works only with positives"),r(p.red,"red works only with red numbers")},H.prototype._verify2=function(p,g){r((p.negative|g.negative)===0,"red works only with positives"),r(p.red&&p.red===g.red,"red works only with red numbers")},H.prototype.imod=function(p){return this.prime?this.prime.ireduce(p)._forceRed(this):p.umod(this.m)._forceRed(this)},H.prototype.neg=function(p){return p.isZero()?p.clone():this.m.sub(p)._forceRed(this)},H.prototype.add=function(p,g){this._verify2(p,g);var x=p.add(g);return x.cmp(this.m)>=0&&x.isub(this.m),x._forceRed(this)},H.prototype.iadd=function(p,g){this._verify2(p,g);var x=p.iadd(g);return x.cmp(this.m)>=0&&x.isub(this.m),x},H.prototype.sub=function(p,g){this._verify2(p,g);var x=p.sub(g);return x.cmpn(0)<0&&x.iadd(this.m),x._forceRed(this)},H.prototype.isub=function(p,g){this._verify2(p,g);var x=p.isub(g);return x.cmpn(0)<0&&x.iadd(this.m),x},H.prototype.shl=function(p,g){return this._verify1(p),this.imod(p.ushln(g))},H.prototype.imul=function(p,g){return this._verify2(p,g),this.imod(p.imul(g))},H.prototype.mul=function(p,g){return this._verify2(p,g),this.imod(p.mul(g))},H.prototype.isqr=function(p){return this.imul(p,p.clone())},H.prototype.sqr=function(p){return this.mul(p,p)},H.prototype.sqrt=function(p){if(p.isZero())return p.clone();var g=this.m.andln(3);if(r(g%2===1),g===3){var x=this.m.add(new i(1)).iushrn(2);return this.pow(p,x)}for(var A=this.m.subn(1),v=0;!A.isZero()&&A.andln(1)===0;)v++,A.iushrn(1);r(!A.isZero());var _=new i(1).toRed(this),D=_.redNeg(),T=this.m.subn(1).iushrn(1),y=this.m.bitLength();for(y=new i(2*y*y).toRed(this);this.pow(y,T).cmp(D)!==0;)y.redIAdd(D);for(var I=this.pow(y,A),q=this.pow(p,A.addn(1).iushrn(1)),K=this.pow(p,A),F=v;K.cmp(_)!==0;){for(var J=K,ae=0;J.cmp(_)!==0;ae++)J=J.redSqr();r(ae<F);var ce=this.pow(I,new i(1).iushln(F-ae-1));q=q.redMul(ce),I=ce.redSqr(),K=K.redMul(I),F=ae}return q},H.prototype.invm=function(p){var g=p._invmp(this.m);return g.negative!==0?(g.negative=0,this.imod(g).redNeg()):this.imod(g)},H.prototype.pow=function(p,g){if(g.isZero())return new i(1).toRed(this);if(g.cmpn(1)===0)return p.clone();var x=4,A=new Array(1<<x);A[0]=new i(1).toRed(this),A[1]=p;for(var v=2;v<A.length;v++)A[v]=this.mul(A[v-1],p);var _=A[0],D=0,T=0,y=g.bitLength()%26;for(y===0&&(y=26),v=g.length-1;v>=0;v--){for(var I=g.words[v],q=y-1;q>=0;q--){var K=I>>q&1;if(_!==A[0]&&(_=this.sqr(_)),K===0&&D===0){T=0;continue}D<<=1,D|=K,T++,!(T!==x&&(v!==0||q!==0))&&(_=this.mul(_,A[D]),T=0,D=0)}y=26}return _},H.prototype.convertTo=function(p){var g=p.umod(this.m);return g===p?g.clone():g},H.prototype.convertFrom=function(p){var g=p.clone();return g.red=null,g},i.mont=function(p){return new Y(p)};function Y(B){H.call(this,B),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(Y,H),Y.prototype.convertTo=function(p){return this.imod(p.ushln(this.shift))},Y.prototype.convertFrom=function(p){var g=this.imod(p.mul(this.rinv));return g.red=null,g},Y.prototype.imul=function(p,g){if(p.isZero()||g.isZero())return p.words[0]=0,p.length=1,p;var x=p.imul(g),A=x.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=x.isub(A).iushrn(this.shift),_=v;return v.cmp(this.m)>=0?_=v.isub(this.m):v.cmpn(0)<0&&(_=v.iadd(this.m)),_._forceRed(this)},Y.prototype.mul=function(p,g){if(p.isZero()||g.isZero())return new i(0)._forceRed(this);var x=p.mul(g),A=x.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=x.isub(A).iushrn(this.shift),_=v;return v.cmp(this.m)>=0?_=v.isub(this.m):v.cmpn(0)<0&&(_=v.iadd(this.m)),_._forceRed(this)},Y.prototype.invm=function(p){var g=this.imod(p._invmp(this.m).mul(this.r2));return g._forceRed(this)}})(typeof K9>"u"||K9,mJ)});var SJ=W((kgt,wJ)=>{l();d();var Wc=hw(),Uo=gJ(),$r=function(){};function q3(e){return e.startsWith("int[")?"int256"+e.slice(3):e==="int"?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):e==="uint"?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):e==="fixed"?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):e==="ufixed"?"ufixed128x128":e}$r.eventID=function(e,t){var r=e+"("+t.map(q3).join(",")+")";return Wc.keccak256(Buffer.from(r))};$r.methodID=function(e,t){return $r.eventID(e,t).slice(0,4)};function sd(e){return parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function F9(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}function mw(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?t[2]===""?"dynamic":parseInt(t[2],10):null}function c0(e){var t=typeof e;if(t==="string")return Wc.isHexPrefixed(e)?new Uo(Wc.stripHexPrefix(e),16):new Uo(e,10);if(t==="number")return new Uo(e);if(e.toArray)return e;throw new Error("Argument is not a number")}function xJ(e){var t=/^(\w+)\((.*)\)$/.exec(e);if(t.length!==3)throw new Error("Invalid method signature");var r=/^(.+)\):\((.+)$/.exec(t[2]);if(r!==null&&r.length===3)return{method:t[1],args:r[1].split(","),retargs:r[2].split(",")};var n=t[2].split(",");return n.length===1&&n[0]===""&&(n=[]),{method:t[1],args:n}}function jc(e,t){var r,n,i,o;if(e==="address")return jc("uint160",c0(t));if(e==="bool")return jc("uint8",t?1:0);if(e==="string")return jc("bytes",Buffer.from(t,"utf8"));if(yw(e)){if(typeof t.length>"u")throw new Error("Not an array?");if(r=mw(e),r!=="dynamic"&&r!==0&&t.length>r)throw new Error("Elements exceed array size: "+r);i=[],e=e.slice(0,e.lastIndexOf("[")),typeof t=="string"&&(t=JSON.parse(t));for(o in t)i.push(jc(e,t[o]));if(r==="dynamic"){var s=jc("uint256",t.length);i.unshift(s)}return Buffer.concat(i)}else{if(e==="bytes")return t=Buffer.from(t),i=Buffer.concat([jc("uint256",t.length),t]),t.length%32!==0&&(i=Buffer.concat([i,Wc.zeros(32-t.length%32)])),i;if(e.startsWith("bytes")){if(r=sd(e),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);return Wc.setLengthRight(t,32)}else if(e.startsWith("uint")){if(r=sd(e),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);if(n=c0(t),n.bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+n.bitLength());if(n<0)throw new Error("Supplied uint is negative");return n.toArrayLike(Buffer,"be",32)}else if(e.startsWith("int")){if(r=sd(e),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);if(n=c0(t),n.bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+n.bitLength());return n.toTwos(256).toArrayLike(Buffer,"be",32)}else if(e.startsWith("ufixed")){if(r=F9(e),n=c0(t),n<0)throw new Error("Supplied ufixed is negative");return jc("uint256",n.mul(new Uo(2).pow(new Uo(r[1]))))}else if(e.startsWith("fixed"))return r=F9(e),jc("int256",c0(t).mul(new Uo(2).pow(new Uo(r[1]))))}throw new Error("Unsupported or invalid type: "+e)}function Ga(e,t,r){typeof e=="string"&&(e=H9(e));var n,i,o,s;if(e.name==="address")return Ga(e.rawType,t,r).toArrayLike(Buffer,"be",20).toString("hex");if(e.name==="bool")return Ga(e.rawType,t,r).toString()===new Uo(1).toString();if(e.name==="string"){var a=Ga(e.rawType,t,r);return Buffer.from(a,"utf8").toString()}else if(e.isArray){for(o=[],n=e.size,e.size==="dynamic"&&(r=Ga("uint256",t,r).toNumber(),n=Ga("uint256",t,r).toNumber(),r=r+32),s=0;s<n;s++){var c=Ga(e.subArray,t,r);o.push(c),r+=e.subArray.memoryUsage}return o}else{if(e.name==="bytes")return r=Ga("uint256",t,r).toNumber(),n=Ga("uint256",t,r).toNumber(),t.slice(r+32,r+32+n);if(e.name.startsWith("bytes"))return t.slice(r,r+e.size);if(e.name.startsWith("uint")){if(i=new Uo(t.slice(r,r+32),16,"be"),i.bitLength()>e.size)throw new Error("Decoded int exceeds width: "+e.size+" vs "+i.bitLength());return i}else if(e.name.startsWith("int")){if(i=new Uo(t.slice(r,r+32),16,"be").fromTwos(256),i.bitLength()>e.size)throw new Error("Decoded uint exceeds width: "+e.size+" vs "+i.bitLength());return i}else if(e.name.startsWith("ufixed")){if(n=new Uo(2).pow(new Uo(e.size[1])),i=Ga("uint256",t,r),!i.mod(n).isZero())throw new Error("Decimals not supported yet");return i.div(n)}else if(e.name.startsWith("fixed")){if(n=new Uo(2).pow(new Uo(e.size[1])),i=Ga("int256",t,r),!i.mod(n).isZero())throw new Error("Decimals not supported yet");return i.div(n)}}throw new Error("Unsupported or invalid type: "+e.name)}function H9(e){var t,r;if(yw(e)){t=mw(e);var n=e.slice(0,e.lastIndexOf("["));return n=H9(n),r={isArray:!0,name:e,size:t,memoryUsage:t==="dynamic"?32:n.memoryUsage*t,subArray:n},r}else{var i;switch(e){case"address":i="uint160";break;case"bool":i="uint8";break;case"string":i="bytes";break}if(r={rawType:i,name:e,memoryUsage:32},e.startsWith("bytes")&&e!=="bytes"||e.startsWith("uint")||e.startsWith("int")?r.size=sd(e):(e.startsWith("ufixed")||e.startsWith("fixed"))&&(r.size=F9(e)),e.startsWith("bytes")&&e!=="bytes"&&(r.size<1||r.size>32))throw new Error("Invalid bytes<N> width: "+r.size);if((e.startsWith("uint")||e.startsWith("int"))&&(r.size%8||r.size<8||r.size>256))throw new Error("Invalid int/uint<N> width: "+r.size);return r}}function qIe(e){return e==="string"||e==="bytes"||mw(e)==="dynamic"}function yw(e){return e.lastIndexOf("]")===e.length-1}$r.rawEncode=function(e,t){var r=[],n=[],i=0;e.forEach(function(u){if(yw(u)){var h=mw(u);h!=="dynamic"?i+=32*h:i+=32}else i+=32});for(var o=0;o<e.length;o++){var s=q3(e[o]),a=t[o],c=jc(s,a);qIe(s)?(r.push(jc("uint256",i)),n.push(c),i+=c.length):r.push(c)}return Buffer.concat(r.concat(n))};$r.rawDecode=function(e,t){var r=[];t=Buffer.from(t);for(var n=0,i=0;i<e.length;i++){var o=q3(e[i]),s=H9(o,t,n),a=Ga(s,t,n);n+=s.memoryUsage,r.push(a)}return r};$r.simpleEncode=function(e){var t=Array.prototype.slice.call(arguments).slice(1),r=xJ(e);if(t.length!==r.args.length)throw new Error("Argument count mismatch");return Buffer.concat([$r.methodID(r.method,r.args),$r.rawEncode(r.args,t)])};$r.simpleDecode=function(e,t){var r=xJ(e);if(!r.retargs)throw new Error("No return values in method");return $r.rawDecode(r.retargs,t)};function bJ(e,t){return e.startsWith("address")||e.startsWith("bytes")?"0x"+t.toString("hex"):t.toString()}$r.stringify=function(e,t){var r=[];for(var n in e){var i=e[n],o=t[n];/^[^\[]+\[.*\]$/.test(i)?o=o.map(function(s){return bJ(i,s)}).join(", "):o=bJ(i,o),r.push(o)}return r};$r.solidityHexValue=function(e,t,r){var n,i;if(yw(e)){var o=e.replace(/\[.*?\]/,"");if(!yw(o)){var s=mw(e);if(s!=="dynamic"&&s!==0&&t.length>s)throw new Error("Elements exceed array size: "+s)}var a=t.map(function(h){return $r.solidityHexValue(o,h,256)});return Buffer.concat(a)}else{if(e==="bytes")return t;if(e==="string")return Buffer.from(t,"utf8");if(e==="bool"){r=r||8;var c=Array(r/4).join("0");return Buffer.from(t?c+"1":c+"0","hex")}else if(e==="address"){var u=20;return r&&(u=r/8),Wc.setLengthLeft(t,u)}else if(e.startsWith("bytes")){if(n=sd(e),n<1||n>32)throw new Error("Invalid bytes<N> width: "+n);return Wc.setLengthRight(t,n)}else if(e.startsWith("uint")){if(n=sd(e),n%8||n<8||n>256)throw new Error("Invalid uint<N> width: "+n);if(i=c0(t),i.bitLength()>n)throw new Error("Supplied uint exceeds width: "+n+" vs "+i.bitLength());return r=r||n,i.toArrayLike(Buffer,"be",r/8)}else if(e.startsWith("int")){if(n=sd(e),n%8||n<8||n>256)throw new Error("Invalid int<N> width: "+n);if(i=c0(t),i.bitLength()>n)throw new Error("Supplied int exceeds width: "+n+" vs "+i.bitLength());return r=r||n,i.toTwos(n).toArrayLike(Buffer,"be",r/8)}else throw new Error("Unsupported or invalid type: "+e)}};$r.solidityPack=function(e,t){if(e.length!==t.length)throw new Error("Number of types are not matching the values");for(var r=[],n=0;n<e.length;n++){var i=q3(e[n]),o=t[n];r.push($r.solidityHexValue(i,o,null))}return Buffer.concat(r)};$r.soliditySHA3=function(e,t){return Wc.keccak256($r.solidityPack(e,t))};$r.soliditySHA256=function(e,t){return Wc.sha256($r.solidityPack(e,t))};$r.solidityRIPEMD160=function(e,t){return Wc.ripemd160($r.solidityPack(e,t),!0)};function jIe(e){return e>="0"&&e<="9"}$r.fromSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n==="s")t.push("bytes");else if(n==="b"){for(var i="bytes",o=r+1;o<e.length&&jIe(e[o]);)i+=e[o]-"0",o++;r=o-1,t.push(i)}else if(n==="i")t.push("int256");else if(n==="a")t.push("int256[]");else throw new Error("Unsupported or invalid type: "+n)}return t};$r.toSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n==="bytes")t.push("s");else if(n.startsWith("bytes"))t.push("b"+sd(n));else if(n==="int256")t.push("i");else if(n==="int256[]")t.push("a");else throw new Error("Unsupported or invalid type: "+n)}return t.join("")};wJ.exports=$r});var AJ=W((Bgt,vJ)=>{l();d();vJ.exports=SJ()});var PJ=W(ui=>{"use strict";l();d();Object.defineProperty(ui,"__esModule",{value:!0});ui.recoverTypedSignature=ui.signTypedData=ui.typedSignatureHash=ui.TypedDataUtils=ui.TYPED_MESSAGE_SCHEMA=ui.SignTypedDataVersion=void 0;var $s=hw(),gw=AJ(),u0=pw(),mo;(function(e){e.V1="V1",e.V3="V3",e.V4="V4"})(mo=ui.SignTypedDataVersion||(ui.SignTypedDataVersion={}));ui.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]};function ym(e,t){if(Object.keys(mo).includes(e)){if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}else throw new Error(`Invalid version: '${e}'`)}function EJ(e,t,r,n,i){if(ym(i,[mo.V3,mo.V4]),e[r]!==void 0)return["bytes32",i===mo.V4&&n==null?"0x0000000000000000000000000000000000000000000000000000000000000000":$s.keccak(j9(r,n,e,i))];if(n===void 0)throw new Error(`missing value for field ${t} of type ${r}`);if(r==="bytes")return["bytes32",$s.keccak(n)];if(r==="string")return typeof n=="string"&&(n=Buffer.from(n,"utf8")),["bytes32",$s.keccak(n)];if(r.lastIndexOf("]")===r.length-1){if(i===mo.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");let o=r.slice(0,r.lastIndexOf("[")),s=n.map(a=>EJ(e,t,o,a,i));return["bytes32",$s.keccak(gw.rawEncode(s.map(([a])=>a),s.map(([,a])=>a)))]}return[r,n]}function j9(e,t,r,n){ym(n,[mo.V3,mo.V4]);let i=["bytes32"],o=[kJ(e,r)];for(let s of r[e]){if(n===mo.V3&&t[s.name]===void 0)continue;let[a,c]=EJ(r,s.name,s.type,t[s.name],n);i.push(a),o.push(c)}return gw.rawEncode(i,o)}function IJ(e,t){let r="",n=W9(e,t);n.delete(e);let i=[e,...Array.from(n).sort()];for(let o of i){if(!t[o])throw new Error(`No type definition specified: ${o}`);r+=`${o}(${t[o].map(({name:a,type:c})=>`${c} ${a}`).join(",")})`}return r}function W9(e,t,r=new Set){if([e]=e.match(/^\w*/u),r.has(e)||t[e]===void 0)return r;r.add(e);for(let n of t[e])W9(n.type,t,r);return r}function q9(e,t,r,n){return ym(n,[mo.V3,mo.V4]),$s.keccak(j9(e,t,r,n))}function kJ(e,t){return $s.keccak(IJ(e,t))}function TJ(e){let t={};for(let r in ui.TYPED_MESSAGE_SCHEMA.properties)e[r]&&(t[r]=e[r]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}function WIe(e,t){ym(t,[mo.V3,mo.V4]);let r=TJ(e),n=[Buffer.from("1901","hex")];return n.push(q9("EIP712Domain",r.domain,r.types,t)),r.primaryType!=="EIP712Domain"&&n.push(q9(r.primaryType,r.message,r.types,t)),$s.keccak(Buffer.concat(n))}ui.TypedDataUtils={encodeData:j9,encodeType:IJ,findTypeDependencies:W9,hashStruct:q9,hashType:kJ,sanitizeData:TJ,eip712Hash:WIe};function zIe(e){let t=z9(e);return $s.bufferToHex(t)}ui.typedSignatureHash=zIe;function z9(e){let t=new Error("Expect argument to be non-empty array");if(typeof e!="object"||!("length"in e)||!e.length)throw t;let r=e.map(function(o){return o.type!=="bytes"?o.value:u0.legacyToBuffer(o.value)}),n=e.map(function(o){return o.type}),i=e.map(function(o){if(!o.name)throw t;return`${o.type} ${o.name}`});return gw.soliditySHA3(["bytes32","bytes32"],[gw.soliditySHA3(new Array(e.length).fill("string"),i),gw.soliditySHA3(n,r)])}function GIe({privateKey:e,data:t,version:r}){if(ym(r),u0.isNullish(t))throw new Error("Missing data parameter");if(u0.isNullish(e))throw new Error("Missing private key parameter");let n=r===mo.V1?z9(t):ui.TypedDataUtils.eip712Hash(t,r),i=$s.ecsign(n,e);return u0.concatSig($s.toBuffer(i.v),i.r,i.s)}ui.signTypedData=GIe;function $Ie({data:e,signature:t,version:r}){if(ym(r),u0.isNullish(e))throw new Error("Missing data parameter");if(u0.isNullish(t))throw new Error("Missing signature parameter");let n=r===mo.V1?z9(e):ui.TypedDataUtils.eip712Hash(e,r),i=u0.recoverPublicKey(n,t),o=$s.publicToAddress(i);return $s.bufferToHex(o)}ui.recoverTypedSignature=$Ie});var _J=W((BJ,j3)=>{l();d();(function(e,t){"use strict";typeof j3<"u"&&j3.exports?j3.exports=t():(e.nacl||(e.nacl={}),e.nacl.util=t())})(BJ,function(){"use strict";var e={};function t(r){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(r))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(r){if(typeof r!="string")throw new TypeError("expected string");var n,i=unescape(encodeURIComponent(r)),o=new Uint8Array(i.length);for(n=0;n<i.length;n++)o[n]=i.charCodeAt(n);return o},e.encodeUTF8=function(r){var n,i=[];for(n=0;n<r.length;n++)i.push(String.fromCharCode(r[n]));return decodeURIComponent(escape(i.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(e.encodeBase64=function(r){return Buffer.from(r).toString("base64")},e.decodeBase64=function(r){return t(r),new Uint8Array(Array.prototype.slice.call(Buffer.from(r,"base64"),0))}):(e.encodeBase64=function(r){return new Buffer(r).toString("base64")},e.decodeBase64=function(r){return t(r),new Uint8Array(Array.prototype.slice.call(new Buffer(r,"base64"),0))}):(e.encodeBase64=function(r){var n,i=[],o=r.length;for(n=0;n<o;n++)i.push(String.fromCharCode(r[n]));return btoa(i.join(""))},e.decodeBase64=function(r){t(r);var n,i=atob(r),o=new Uint8Array(i.length);for(n=0;n<i.length;n++)o[n]=i.charCodeAt(n);return o}),e})});var OJ=W(fi=>{"use strict";l();d();var YIe=fi&&fi.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ZIe=fi&&fi.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),CJ=fi&&fi.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&YIe(t,e,r);return ZIe(t,e),t};Object.defineProperty(fi,"__esModule",{value:!0});fi.getEncryptionPublicKey=fi.decryptSafely=fi.decrypt=fi.encryptSafely=fi.encrypt=void 0;var f0=CJ(bs()),$a=CJ(_J()),zc=pw();function NJ({publicKey:e,data:t,version:r}){if(zc.isNullish(e))throw new Error("Missing publicKey parameter");if(zc.isNullish(t))throw new Error("Missing data parameter");if(zc.isNullish(r))throw new Error("Missing version parameter");switch(r){case"x25519-xsalsa20-poly1305":{if(typeof t!="string")throw new Error("Message data must be given as a string");let n=f0.box.keyPair(),i;try{i=$a.decodeBase64(e)}catch{throw new Error("Bad public key")}let o=$a.decodeUTF8(t),s=f0.randomBytes(f0.box.nonceLength),a=f0.box(o,s,i,n.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:$a.encodeBase64(s),ephemPublicKey:$a.encodeBase64(n.publicKey),ciphertext:$a.encodeBase64(a)}}default:throw new Error("Encryption type/version not supported")}}fi.encrypt=NJ;function JIe({publicKey:e,data:t,version:r}){if(zc.isNullish(e))throw new Error("Missing publicKey parameter");if(zc.isNullish(t))throw new Error("Missing data parameter");if(zc.isNullish(r))throw new Error("Missing version parameter");let n=2**11,i=16;if(typeof t=="object"&&"toJSON"in t)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");let o={data:t,padding:""},a=Buffer.byteLength(JSON.stringify(o),"utf-8")%n,c=0;a>0&&(c=n-a-i),o.padding="0".repeat(c);let u=JSON.stringify(o);return NJ({publicKey:e,data:u,version:r})}fi.encryptSafely=JIe;function MJ({encryptedData:e,privateKey:t}){if(zc.isNullish(e))throw new Error("Missing encryptedData parameter");if(zc.isNullish(t))throw new Error("Missing privateKey parameter");switch(e.version){case"x25519-xsalsa20-poly1305":{let r=DJ(t),n=f0.box.keyPair.fromSecretKey(r).secretKey,i=$a.decodeBase64(e.nonce),o=$a.decodeBase64(e.ciphertext),s=$a.decodeBase64(e.ephemPublicKey),a=f0.box.open(o,i,s,n),c;try{c=$a.encodeUTF8(a)}catch{throw new Error("Decryption failed.")}if(c)return c;throw new Error("Decryption failed.")}default:throw new Error("Encryption type/version not supported.")}}fi.decrypt=MJ;function XIe({encryptedData:e,privateKey:t}){if(zc.isNullish(e))throw new Error("Missing encryptedData parameter");if(zc.isNullish(t))throw new Error("Missing privateKey parameter");return JSON.parse(MJ({encryptedData:e,privateKey:t})).data}fi.decryptSafely=XIe;function QIe(e){let t=DJ(e),r=f0.box.keyPair.fromSecretKey(t).publicKey;return $a.encodeBase64(r)}fi.getEncryptionPublicKey=QIe;function DJ(e){let t=Buffer.from(e,"hex").toString("base64");return $a.decodeBase64(t)}});var $9=W(cs=>{"use strict";l();d();var eke=cs&&cs.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),G9=cs&&cs.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&eke(t,e,r)};Object.defineProperty(cs,"__esModule",{value:!0});cs.normalize=cs.concatSig=void 0;G9(yJ(),cs);G9(PJ(),cs);G9(OJ(),cs);var UJ=pw();Object.defineProperty(cs,"concatSig",{enumerable:!0,get:function(){return UJ.concatSig}});Object.defineProperty(cs,"normalize",{enumerable:!0,get:function(){return UJ.normalize}})});var Tee=W(Km=>{"use strict";l();d();Object.defineProperty(Km,"__esModule",{value:!0});Km.testnet=Km.bitcoin=void 0;Km.bitcoin={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128};Km.testnet={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}});var Pee=W(Er=>{"use strict";l();d();Object.defineProperty(Er,"__esModule",{value:!0});Er.maybe=Er.Boolean=Er.Array=Er.Buffer256bit=Er.Network=Er.typeforce=void 0;Er.typeforce=sP();Er.Network=Er.typeforce.compile({messagePrefix:Er.typeforce.oneOf(Er.typeforce.Buffer,Er.typeforce.String),bip32:{public:Er.typeforce.UInt32,private:Er.typeforce.UInt32},pubKeyHash:Er.typeforce.UInt8,scriptHash:Er.typeforce.UInt8,wif:Er.typeforce.UInt8});Er.Buffer256bit=Er.typeforce.BufferN(32);Er.Array=Er.typeforce.Array;Er.Boolean=Er.typeforce.Boolean;Er.maybe=Er.typeforce.maybe});var Bee=W(f6=>{"use strict";l();d();Object.defineProperty(f6,"__esModule",{value:!0});f6.testEcc=void 0;var _e=e=>Buffer.from(e,"hex");function t_e(e){Vr(e.isPoint(_e("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),Vr(!e.isPoint(_e("030000000000000000000000000000000000000000000000000000000000000005"))),Vr(e.isPrivate(_e("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),Vr(e.isPrivate(_e("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),Vr(!e.isPrivate(_e("0000000000000000000000000000000000000000000000000000000000000000"))),Vr(!e.isPrivate(_e("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"))),Vr(!e.isPrivate(_e("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364142"))),Vr(Buffer.from(e.privateAdd(_e("0000000000000000000000000000000000000000000000000000000000000001"),_e("0000000000000000000000000000000000000000000000000000000000000000"))).equals(_e("0000000000000000000000000000000000000000000000000000000000000001"))),Vr(e.privateAdd(_e("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"),_e("0000000000000000000000000000000000000000000000000000000000000003"))===null),Vr(Buffer.from(e.privateAdd(_e("e211078564db65c3ce7704f08262b1f38f1ef412ad15b5ac2d76657a63b2c500"),_e("b51fbb69051255d1becbd683de5848242a89c229348dd72896a87ada94ae8665"))).equals(_e("9730c2ee69edbb958d42db7460bafa18fef9d955325aec99044c81c8282b0a24"))),Vr(Buffer.from(e.privateNegate(_e("0000000000000000000000000000000000000000000000000000000000000001"))).equals(_e("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),Vr(Buffer.from(e.privateNegate(_e("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"))).equals(_e("0000000000000000000000000000000000000000000000000000000000000003"))),Vr(Buffer.from(e.privateNegate(_e("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(_e("4eede1bf775995d70a494f0a7bb6bc11e0b8cccd41cce8009ab1132c8b0a3792"))),Vr(Buffer.from(e.pointCompress(_e("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!0)).equals(_e("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),Vr(Buffer.from(e.pointCompress(_e("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!1)).equals(_e("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),Vr(Buffer.from(e.pointCompress(_e("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!0)).equals(_e("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),Vr(Buffer.from(e.pointCompress(_e("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!1)).equals(_e("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),Vr(Buffer.from(e.pointFromScalar(_e("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(_e("02b07ba9dca9523b7ef4bd97703d43d20399eb698e194704791a25ce77a400df99"))),Vr(e.xOnlyPointAddTweak(_e("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),_e("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))===null);let t=e.xOnlyPointAddTweak(_e("1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b"),_e("a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac"));Vr(Buffer.from(t.xOnlyPubkey).equals(_e("e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"))&&t.parity===1),t=e.xOnlyPointAddTweak(_e("2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991"),_e("823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47")),Vr(Buffer.from(t.xOnlyPubkey).equals(_e("9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"))&&t.parity===0),Vr(Buffer.from(e.sign(_e("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),_e("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))).equals(_e("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),Vr(e.verify(_e("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),_e("0379be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),_e("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),e.signSchnorr&&Vr(Buffer.from(e.signSchnorr(_e("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),_e("c90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b14e5c9"),_e("c87aa53824b4d7ae2eb035a2b5bbbccc080e76cdc6d1692c4b0b62d798e6d906"))).equals(_e("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7"))),e.verifySchnorr&&Vr(e.verifySchnorr(_e("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),_e("dd308afec5777e13121fa72b9cc1b7cc0139715309b086c960e18fd969774eb8"),_e("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7")))}f6.testEcc=t_e;function Vr(e){if(!e)throw new Error("ecc library invalid")}});var Cee=W(Fm=>{"use strict";l();d();Object.defineProperty(Fm,"__esModule",{value:!0});Fm.ECPairFactory=Fm.networks=void 0;var iN=Tee();Fm.networks=iN;var bo=Pee(),r_e=sM(),_ee=zv(),n_e=Bee(),nN=bo.typeforce.maybe(bo.typeforce.compile({compressed:bo.maybe(bo.Boolean),network:bo.maybe(bo.Network)})),i_e=e=>e.length===32?e:e.slice(1,33);function o_e(e){(0,n_e.testEcc)(e);function t(a){return e.isPoint(a)}function r(a,c){if(bo.typeforce(bo.Buffer256bit,a),!e.isPrivate(a))throw new TypeError("Private key not in range [1, n)");return bo.typeforce(nN,c),new s(a,void 0,c)}function n(a,c){return bo.typeforce(e.isPoint,a),bo.typeforce(nN,c),new s(void 0,a,c)}function i(a,c){let u=_ee.decode(a),h=u.version;if(bo.Array(c)){if(c=c.filter(f=>h===f.wif).pop(),!c)throw new Error("Unknown network version")}else if(c=c||iN.bitcoin,h!==c.wif)throw new Error("Invalid network version");return r(u.privateKey,{compressed:u.compressed,network:c})}function o(a){bo.typeforce(nN,a),a===void 0&&(a={});let c=a.rng||r_e,u;do u=c(32),bo.typeforce(bo.Buffer256bit,u);while(!e.isPrivate(u));return r(u,a)}class s{__D;__Q;compressed;network;lowR;constructor(c,u,h){this.__D=c,this.__Q=u,this.lowR=!1,h===void 0&&(h={}),this.compressed=h.compressed===void 0?!0:h.compressed,this.network=h.network||iN.bitcoin,u!==void 0&&(this.__Q=Buffer.from(e.pointCompress(u,this.compressed)))}get privateKey(){return this.__D}get publicKey(){if(!this.__Q){let c=e.pointFromScalar(this.__D,this.compressed);this.__Q=Buffer.from(c)}return this.__Q}toWIF(){if(!this.__D)throw new Error("Missing private key");return _ee.encode(this.network.wif,this.__D,this.compressed)}tweak(c){return this.privateKey?this.tweakFromPrivateKey(c):this.tweakFromPublicKey(c)}sign(c,u){if(!this.__D)throw new Error("Missing private key");if(u===void 0&&(u=this.lowR),u===!1)return Buffer.from(e.sign(c,this.__D));{let h=e.sign(c,this.__D),f=Buffer.alloc(32,0),m=0;for(;h[0]>127;)m++,f.writeUIntLE(m,0,6),h=e.sign(c,this.__D,f);return Buffer.from(h)}}signSchnorr(c){if(!this.privateKey)throw new Error("Missing private key");if(!e.signSchnorr)throw new Error("signSchnorr not supported by ecc library");return Buffer.from(e.signSchnorr(c,this.privateKey))}verify(c,u){return e.verify(c,this.publicKey,u)}verifySchnorr(c,u){if(!e.verifySchnorr)throw new Error("verifySchnorr not supported by ecc library");return e.verifySchnorr(c,this.publicKey.subarray(1,33),u)}tweakFromPublicKey(c){let u=i_e(this.publicKey),h=e.xOnlyPointAddTweak(u,c);if(!h||h.xOnlyPubkey===null)throw new Error("Cannot tweak public key!");let f=Buffer.from([h.parity===0?2:3]);return n(Buffer.concat([f,h.xOnlyPubkey]),{network:this.network,compressed:this.compressed})}tweakFromPrivateKey(c){let h=this.publicKey[0]===3||this.publicKey[0]===4&&(this.publicKey[64]&1)===1?e.privateNegate(this.privateKey):this.privateKey,f=e.privateAdd(h,c);if(!f)throw new Error("Invalid tweaked private key!");return r(Buffer.from(f),{network:this.network,compressed:this.compressed})}}return{isPoint:t,fromPrivateKey:r,fromPublicKey:n,fromWIF:i,makeRandom:o}}Fm.ECPairFactory=o_e});var Nee=W(Dd=>{"use strict";l();d();Object.defineProperty(Dd,"__esModule",{value:!0});Dd.networks=Dd.ECPairFactory=Dd.default=void 0;var oN=Cee();Object.defineProperty(Dd,"default",{enumerable:!0,get:function(){return oN.ECPairFactory}});Object.defineProperty(Dd,"ECPairFactory",{enumerable:!0,get:function(){return oN.ECPairFactory}});Object.defineProperty(Dd,"networks",{enumerable:!0,get:function(){return oN.networks}})});l();d();var nh=re(Bn()),dn=re($2()),Eu=re(Ho());l();d();Qm.config({EXPONENTIAL_AT:1e3,DECIMAL_PLACES:78});l();d();var lfe=(e,t)=>e+t,HU=e=>e.reduce(lfe,0);var qU=nh.Buffer.alloc(64).fill(0),jI=e=>As(e)?nh.Buffer.from(e.message.serialize()):e.serializeMessage(),Y2=e=>Eu.default.encode(jI(e)),jU=e=>{try{return Y2(dp(e,"bs58"))}catch{return Y2(dp(e,"base64"))}},WU=e=>{try{return dp(e,"bs58").version}catch{return dp(e,"base64").version}},zU=e=>WI(GI(e)),As=e=>e&&"version"in e,Z2=(e,t)=>As(e)?nh.Buffer.from(e.serialize()):e.serialize(t??{requireAllSignatures:!1,verifySignatures:!1}),WI=(e,t)=>Eu.default.encode(Z2(e,t)),GU=(e,t)=>Z2(e,t).toString("base64"),dp=(e,t)=>{let r;if(t==="base64")r=nh.Buffer.from(e,"base64");else if(t==="bs58")r=Eu.default.decode(e);else throw new Error("Unsupported encoding");return dn.VersionedTransaction.deserialize(r)};function zI(e){return As(e)?e.signatures.filter(r=>r.every(i=>i===0)===!1).length>0:e.signatures.filter(({signature:r})=>r?r.find(i=>i!==0)!==void 0:!1).length>0}var $U=e=>{let t=e.map(r=>dn.VersionedMessage.deserialize(Eu.default.decode(r)));return HU(t.map(r=>r.header.numRequiredSignatures))},GI=e=>{let t=Eu.default.decode(e);if(dn.VersionedMessage.deserializeMessageVersion(t)==="legacy"){let i=dn.Message.from(t);return dn.Transaction.populate(i,[])}let n=dn.VersionedMessage.deserialize(t);return new dn.VersionedTransaction(n)},YU=(e,t=[])=>{let r=Eu.default.decode(e);if(dn.VersionedMessage.deserializeMessageVersion(r)==="legacy"){let i=dn.Message.from(r);return dn.Transaction.populate(i,t.map(s=>s?Eu.default.encode(s):Eu.default.encode(qU)))}else{let i=dn.VersionedMessage.deserialize(r);return new dn.VersionedTransaction(i,t.map(s=>s||qU))}},ZU=e=>e.compileMessage().accountKeys,$I=e=>As(e)?e.message.recentBlockhash:e.recentBlockhash,JU=(e,t)=>{As(e)?e.message.recentBlockhash=t:e.recentBlockhash=t},XU=async(e,t)=>{if($I(e))return;let r=(await t.getLatestBlockhash("confirmed")).blockhash;JU(e,r)},QU=async(e,t)=>{if(zI(e))return;let r=(await t.getLatestBlockhash("confirmed")).blockhash;JU(e,r)},YI=(e,t)=>{As(e)||(e.feePayer=t)},ZI=e=>As(e)?e.message.staticAccountKeys[0]:e.feePayer,eR=(e,t)=>{ZI(e)||YI(e,t)},tR=(e,t)=>{As(e)?e.sign(t):e.partialSign(...t)},rR=e=>As(e)?e.message.staticAccountKeys:e.signatures.map(t=>t.publicKey),nR=e=>As(e)?e.signatures.map(t=>nh.Buffer.from(t)):e.signatures.map(t=>t.signature).filter(t=>t!==null);function iR(e){if(!dfe(nh.Buffer.from(e)))return!1;let t;try{t=dn.Message.from(e)}catch{t=void 0}let r;try{r=dn.VersionedMessage.deserialize(e)}catch{r=void 0}return!t&&!r||(t?.instructions?.length??0)===0&&(r?.compiledInstructions?.length??0)===0}function dfe(e){let t=e.length,r=0;for(;r<t;)if(!(e[r]&128))r++;else if((e[r]&224)===192){if(r+1===t||(e[r+1]&192)!==128||(e[r]&254)===192)return!1;r+=2}else if((e[r]&240)===224){if(r+2>=t||(e[r+1]&192)!==128||(e[r+2]&192)!==128||e[r]===224&&(e[r+1]&224)===128||e[r]===237&&(e[r+1]&224)===160)return!1;r+=3}else if((e[r]&248)===240){if(r+3>=t||(e[r+1]&192)!==128||(e[r+2]&192)!==128||(e[r+3]&192)!==128||e[r]===240&&(e[r+1]&240)===128||e[r]===244&&e[r+1]>143||e[r]>244)return!1;r+=4}else return!1;return!0}var oR=e=>Qm(e).dividedBy(dn.LAMPORTS_PER_SOL),sR=e=>Qm(e).multipliedBy(dn.LAMPORTS_PER_SOL);var $o={};j6($o,{BufferLayout:()=>mfe,Message:()=>ko.Message,MessageV0:()=>ko.MessageV0,Transaction:()=>ko.Transaction,TransactionInstruction:()=>ko.TransactionInstruction,TransactionMessage:()=>ko.TransactionMessage,VersionedMessage:()=>ko.VersionedMessage,VersionedTransaction:()=>ko.VersionedTransaction,getAccountsFromTransaction:()=>ZU,getFeePayer:()=>ZI,getRecentBlockhash:()=>$I,getRequiredSignatures:()=>$U,getSignaturePubKeys:()=>rR,getSignatures:()=>nR,isAlreadySigned:()=>zI,isSafeMessage:()=>iR,isVersionedTransaction:()=>As,lamportsToSolana:()=>oR,messageAndSignaturesToTransaction:()=>YU,messageStringToTransaction:()=>GI,messageStringToTransactionString:()=>zU,setFeePayer:()=>YI,setFeePayerIfNotExists:()=>eR,setRecentBlockhashIfNotExists:()=>XU,setRecentBlockhashIfNotSigned:()=>QU,signWithAdditionalSigners:()=>tR,solanaInstructionEncodeData:()=>lR,solanaToLamports:()=>sR,transactionStringToMessageString:()=>jU,transactionStringToTransaction:()=>dp,transactionStringToVersion:()=>WU,transactionToBase58TransactionString:()=>WI,transactionToBase64TransactionString:()=>GU,transactionToMessageString:()=>Y2,transactionToSerializedMessage:()=>jI,transactionToSerializedTransaction:()=>Z2,u64:()=>uR});l();d();var mfe=re(dg()),ko=re($2());du($o,re($2()));l();d();var aR=re(tg()),cR=re(dg()),J2=re(L4()),hfe=e=>{let t=e.decode.bind(e),r=e.encode.bind(e);return{decode:t,encode:r}},X2=e=>t=>{let r=(0,cR.blob)(e,t),{encode:n,decode:i}=hfe(r),o=r;return o.decode=(s,a)=>{let c=i(s,a);return(0,J2.toBigIntLE)(aR.Buffer.from(c))},o.encode=(s,a,c)=>{let u=(0,J2.toBufferLE)(s,e);return n(u,a,c)},o},uR=X2(8),lMe=X2(16),dMe=X2(24),hMe=X2(32);l();d();var fR=re(tg());l();d();var pfe=re(tg()),hp=re(dg());function JI(e,t){let r=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(t[i.property]);if("count"in i&&"elementLayout"in i){let o=t[i.property];if(Array.isArray(o))return o.length*r(i.elementLayout)}else if("fields"in i)return JI({layout:i},t[i.property]);return 0},n=0;return e.layout.fields.forEach(i=>{n+=r(i)}),n}function lR(e,t){let r=e.layout.span>=0?e.layout.span:JI(e,t),n=fR.Buffer.alloc(r),i=Object.assign({instruction:e.index},t);return e.layout.encode(i,n),n}l();d();l();d();l();d();l();d();var gfe=re(Xm(),1);var ei=BigInt(0),Gt=BigInt(1),Hf=BigInt(2),bfe=BigInt(8),dR=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),Nr=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:dR,n:dR,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")});var gR=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),Yg=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),PMe=BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),xfe=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),wfe=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),Sfe=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),vfe=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),Nn=class e{constructor(t,r,n,i){this.x=t,this.y=r,this.z=n,this.t=i}static fromAffine(t){if(!(t instanceof hn))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(hn.ZERO)?e.ZERO:new e(t.x,t.y,Gt,ue(t.x*t.y))}static toAffineBatch(t){let r=Ife(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){pR(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t,c=ue(r*a),u=ue(o*i),h=ue(n*a),f=ue(s*i);return c===u&&h===f}negate(){return new e(ue(-this.x),this.y,this.z,ue(-this.t))}double(){let{x:t,y:r,z:n}=this,{a:i}=Nr,o=ue(t*t),s=ue(r*r),a=ue(Hf*ue(n*n)),c=ue(i*o),u=t+r,h=ue(ue(u*u)-o-s),f=c+s,m=f-a,b=c-s,w=ue(h*m),S=ue(f*b),P=ue(h*b),N=ue(m*f);return new e(w,S,N,P)}add(t){pR(t);let{x:r,y:n,z:i,t:o}=this,{x:s,y:a,z:c,t:u}=t,h=ue((n-r)*(a+s)),f=ue((n+r)*(a-s)),m=ue(f-h);if(m===ei)return this.double();let b=ue(i*Hf*u),w=ue(o*Hf*c),S=w+b,P=f+h,N=w-b,O=ue(S*m),C=ue(P*N),L=ue(S*N),V=ue(m*P);return new e(O,C,V,L)}subtract(t){return this.add(t.negate())}precomputeWindow(t){let r=1+256/t,n=[],i=this,o=i;for(let s=0;s<r;s++){o=i,n.push(o);for(let a=1;a<2**(t-1);a++)o=o.add(i),n.push(o);i=o.double()}return n}wNAF(t,r){!r&&this.equals(e.BASE)&&(r=hn.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&tk.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=e.normalizeZ(i),tk.set(r,i)));let o=e.ZERO,s=e.BASE,a=1+256/n,c=2**(n-1),u=BigInt(2**n-1),h=2**n,f=BigInt(n);for(let m=0;m<a;m++){let b=m*c,w=Number(t&u);t>>=f,w>c&&(w-=h,t+=Gt);let S=b,P=b+Math.abs(w)-1,N=m%2!==0,O=w<0;w===0?s=s.add(hR(N,i[S])):o=o.add(hR(O,i[P]))}return e.normalizeZ([o,s])[0]}multiply(t,r){return this.wNAF(eS(t,Nr.l),r)}multiplyUnsafe(t){let r=eS(t,Nr.l,!1),n=e.BASE,i=e.ZERO;if(r===ei)return i;if(this.equals(i)||r===Gt)return this;if(this.equals(n))return this.wNAF(r);let o=i,s=this;for(;r>ei;)r&Gt&&(o=o.add(s)),s=s.double(),r>>=Gt;return o}isSmallOrder(){return this.multiplyUnsafe(Nr.h).equals(e.ZERO)}isTorsionFree(){let t=this.multiplyUnsafe(Nr.l/Hf).double();return Nr.l%Hf&&(t=t.add(this)),t.equals(e.ZERO)}toAffine(t){let{x:r,y:n,z:i}=this,o=this.equals(e.ZERO);t==null&&(t=o?bfe:rS(i));let s=ue(r*t),a=ue(n*t),c=ue(i*t);if(o)return hn.ZERO;if(c!==Gt)throw new Error("invZ was invalid");return new hn(s,a)}fromRistrettoBytes(){QI()}toRistrettoBytes(){QI()}fromRistrettoHash(){QI()}};Nn.BASE=new Nn(Nr.Gx,Nr.Gy,Gt,ue(Nr.Gx*Nr.Gy));Nn.ZERO=new Nn(ei,Gt,Gt,ei);function hR(e,t){let r=t.negate();return e?r:t}function pR(e){if(!(e instanceof Nn))throw new TypeError("ExtendedPoint expected")}function XI(e){if(!(e instanceof ih))throw new TypeError("RistrettoPoint expected")}function QI(){throw new Error("Legacy method: switch to RistrettoPoint")}var ih=class e{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){let{d:r}=Nr,n=ue(Yg*t*t),i=ue((n+Gt)*Sfe),o=BigInt(-1),s=ue((o-r*n)*ue(n+r)),{isValid:a,value:c}=nk(i,s),u=ue(c*t);Ff(u)||(u=ue(-u)),a||(c=u),a||(o=n);let h=ue(o*(n-Gt)*vfe-s),f=c*c,m=ue((c+c)*s),b=ue(h*xfe),w=ue(Gt-f),S=ue(Gt+f);return new Nn(ue(m*S),ue(w*b),ue(b*S),ue(m*w))}static hashToCurve(t){t=qf(t,64);let r=ek(t.slice(0,32)),n=this.calcElligatorRistrettoMap(r),i=ek(t.slice(32,64)),o=this.calcElligatorRistrettoMap(i);return new e(n.add(o))}static fromHex(t){t=qf(t,32);let{a:r,d:n}=Nr,i="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",o=ek(t);if(!Tfe(Xg(o),t)||Ff(o))throw new Error(i);let s=ue(o*o),a=ue(Gt+r*s),c=ue(Gt-r*s),u=ue(a*a),h=ue(c*c),f=ue(r*n*u-h),{isValid:m,value:b}=mR(ue(f*h)),w=ue(b*c),S=ue(b*w*f),P=ue((o+o)*w);Ff(P)&&(P=ue(-P));let N=ue(a*S),O=ue(P*N);if(!m||Ff(O)||N===ei)throw new Error(i);return new e(new Nn(P,N,Gt,O))}toRawBytes(){let{x:t,y:r,z:n,t:i}=this.ep,o=ue(ue(n+r)*ue(n-r)),s=ue(t*r),a=ue(s*s),{value:c}=mR(ue(o*a)),u=ue(c*o),h=ue(c*s),f=ue(u*h*i),m;if(Ff(i*f)){let w=ue(r*Yg),S=ue(t*Yg);t=w,r=S,m=ue(u*wfe)}else m=h;Ff(t*f)&&(r=ue(-r));let b=ue((n-r)*m);return Ff(b)&&(b=ue(-b)),Xg(b)}toHex(){return Qg(this.toRawBytes())}toString(){return this.toHex()}equals(t){XI(t);let r=this.ep,n=t.ep,i=ue(r.x*n.y)===ue(r.y*n.x),o=ue(r.y*n.y)===ue(r.x*n.x);return i||o}add(t){return XI(t),new e(this.ep.add(t.ep))}subtract(t){return XI(t),new e(this.ep.subtract(t.ep))}multiply(t){return new e(this.ep.multiply(t))}multiplyUnsafe(t){return new e(this.ep.multiplyUnsafe(t))}};ih.BASE=new ih(Nn.BASE);ih.ZERO=new ih(Nn.ZERO);var tk=new WeakMap,hn=class e{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,tk.delete(this)}static fromHex(t,r=!0){let{d:n,P:i}=Nr;t=qf(t,32);let o=t.slice();o[31]=t[31]&-129;let s=eb(o);if(r&&s>=i)throw new Error("Expected 0 < hex < P");if(!r&&s>=gR)throw new Error("Expected 0 < hex < 2**256");let a=ue(s*s),c=ue(a-Gt),u=ue(n*a+Gt),{isValid:h,value:f}=nk(c,u);if(!h)throw new Error("Point.fromHex: invalid y coordinate");let m=(f&Gt)===Gt;return(t[31]&128)!==0!==m&&(f=ue(-f)),new e(f,s)}static async fromPrivateKey(t){return(await SR(t)).point}toRawBytes(){let t=Xg(this.y);return t[31]|=this.x&Gt?128:0,t}toHex(){return Qg(this.toRawBytes())}toX25519(){let{y:t}=this,r=ue((Gt+t)*rS(Gt-t));return Xg(r)}isTorsionFree(){return Nn.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new e(ue(-this.x),this.y)}add(t){return Nn.fromAffine(this).add(Nn.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return Nn.fromAffine(this).multiply(t,this).toAffine()}};hn.BASE=new hn(Nr.Gx,Nr.Gy);hn.ZERO=new hn(ei,Gt);var Jg=class e{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromHex(t){let r=qf(t,64),n=hn.fromHex(r.slice(0,32),!1),i=eb(r.slice(32,64));return new e(n,i)}assertValidity(){let{r:t,s:r}=this;if(!(t instanceof hn))throw new Error("Expected Point instance");return eS(r,Nr.l,!1),this}toRawBytes(){let t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(Xg(this.s),32),t}toHex(){return Qg(this.toRawBytes())}};function yR(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var Afe=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Qg(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=Afe[e[r]];return t}function rk(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function bR(e){let r=e.toString(16).padStart(64,"0");return rk(r)}function Xg(e){return bR(e).reverse()}function Ff(e){return(ue(e)&Gt)===Gt}function eb(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+Qg(Uint8Array.from(e).reverse()))}var Efe=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function ek(e){return ue(eb(e)&Efe)}function ue(e,t=Nr.P){let r=e%t;return r>=ei?r:t+r}function rS(e,t=Nr.P){if(e===ei||t<=ei)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=ue(e,t),n=t,i=ei,o=Gt,s=Gt,a=ei;for(;r!==ei;){let u=n/r,h=n%r,f=i-s*u,m=o-a*u;n=r,r=h,i=s,o=a,s=f,a=m}if(n!==Gt)throw new Error("invert: does not exist");return ue(i,t)}function Ife(e,t=Nr.P){let r=new Array(e.length),n=e.reduce((o,s,a)=>s===ei?o:(r[a]=o,ue(o*s,t)),Gt),i=rS(n,t);return e.reduceRight((o,s,a)=>s===ei?o:(r[a]=ue(o*r[a],t),ue(o*s,t)),i),r}function xc(e,t){let{P:r}=Nr,n=e;for(;t-- >ei;)n*=n,n%=r;return n}function kfe(e){let{P:t}=Nr,r=BigInt(5),n=BigInt(10),i=BigInt(20),o=BigInt(40),s=BigInt(80),c=e*e%t*e%t,u=xc(c,Hf)*c%t,h=xc(u,Gt)*e%t,f=xc(h,r)*h%t,m=xc(f,n)*f%t,b=xc(m,i)*m%t,w=xc(b,o)*b%t,S=xc(w,s)*w%t,P=xc(S,s)*w%t,N=xc(P,n)*f%t;return{pow_p_5_8:xc(N,Hf)*e%t,b2:c}}function nk(e,t){let r=ue(t*t*t),n=ue(r*r*t),i=kfe(e*n).pow_p_5_8,o=ue(e*r*i),s=ue(t*o*o),a=o,c=ue(o*Yg),u=s===e,h=s===ue(-e),f=s===ue(-e*Yg);return u&&(o=a),(h||f)&&(o=c),Ff(o)&&(o=ue(-o)),{isValid:u||h,value:o}}function mR(e){return nk(Gt,e)}function Q2(e){return ue(eb(e),Nr.l)}function Tfe(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function qf(e,t){let r=e instanceof Uint8Array?Uint8Array.from(e):rk(e);if(typeof t=="number"&&r.length!==t)throw new Error(`Expected ${t} bytes`);return r}function eS(e,t,r=!0){if(!t)throw new TypeError("Specify max value");if(typeof e=="number"&&Number.isSafeInteger(e)&&(e=BigInt(e)),typeof e=="bigint"&&e<t){if(r){if(ei<e)return e}else if(ei<=e)return e}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function Pfe(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function xR(e){if(e=typeof e=="bigint"||typeof e=="number"?bR(eS(e,gR)):qf(e),e.length!==32)throw new Error("Expected 32 bytes");return e}function wR(e){let t=Pfe(e.slice(0,32)),r=e.slice(32,64),n=Q2(t),i=hn.BASE.multiply(n),o=i.toRawBytes();return{head:t,prefix:r,scalar:n,point:i,pointBytes:o}}var Zg;function tS(...e){if(typeof Zg!="function")throw new Error("utils.sha512Sync must be set to use sync methods");return Zg(...e)}async function SR(e){return wR(await Iu.sha512(xR(e)))}function ik(e){return wR(tS(xR(e)))}function Bfe(e){return ik(e).pointBytes}function _fe(e,t){e=qf(e);let{prefix:r,scalar:n,pointBytes:i}=ik(t),o=Q2(tS(r,e)),s=hn.BASE.multiply(o),a=Q2(tS(s.toRawBytes(),i,e)),c=ue(o+a*n,Nr.l);return new Jg(s,c).toRawBytes()}function Cfe(e,t,r){t=qf(t),r instanceof hn||(r=hn.fromHex(r,!1));let{r:n,s:i}=e instanceof Jg?e.assertValidity():Jg.fromHex(e),o=Nn.BASE.multiplyUnsafe(i);return{r:n,s:i,SB:o,pub:r,msg:t}}function Nfe(e,t,r,n){let i=Q2(n),o=Nn.fromAffine(e).multiplyUnsafe(i);return Nn.fromAffine(t).add(o).subtract(r).multiplyUnsafe(Nr.h).equals(Nn.ZERO)}function Mfe(e,t,r){let{r:n,SB:i,msg:o,pub:s}=Cfe(e,t,r),a=tS(n.toRawBytes(),s.toRawBytes(),o);return Nfe(s,n,i,a)}var nS={getExtendedPublicKey:ik,getPublicKey:Bfe,sign:_fe,verify:Mfe};hn.BASE._setWindowSize(8);var Kf={node:gfe,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Iu={bytesToHex:Qg,hexToBytes:rk,concatBytes:yR,getExtendedPublicKey:SR,mod:ue,invert:rS,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:e=>{if(e=qf(e),e.length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return ue(eb(e),Nr.l-Gt)+Gt},randomBytes:(e=32)=>{if(Kf.web)return Kf.web.getRandomValues(new Uint8Array(e));if(Kf.node){let{randomBytes:t}=Kf.node;return new Uint8Array(t(e).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Iu.randomBytes(32),sha512:async(...e)=>{let t=yR(...e);if(Kf.web){let r=await Kf.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(r)}else{if(Kf.node)return Uint8Array.from(Kf.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(e=8,t=hn.BASE){let r=t.equals(hn.BASE)?t:new hn(t.x,t.y);return r._setWindowSize(e),r.multiply(Hf),r},sha512Sync:void 0};Object.defineProperties(Iu,{sha512Sync:{configurable:!1,get(){return Zg},set(e){Zg||(Zg=e)}}});l();d();l();d();l();d();function ok(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Dfe(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function vR(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Ofe(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ok(e.outputLen),ok(e.blockLen)}function Ufe(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Rfe(e,t){vR(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var Lfe={number:ok,bool:Dfe,bytes:vR,hash:Ofe,exists:Ufe,output:Rfe},ku=Lfe;l();d();l();d();var Vfe={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var iS=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);var Kfe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Kfe)throw new Error("Non little-endian hardware is not supported");var VMe=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ffe(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function tb(e){if(typeof e=="string"&&(e=Ffe(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}var pp=class{clone(){return this._cloneInto()}};function rb(e){let t=n=>e().update(tb(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Hfe(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var oS=class extends pp{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=iS(this.buffer)}update(t){ku.exists(this);let{view:r,buffer:n,blockLen:i}=this;t=tb(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=iS(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ku.exists(this),ku.output(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let f=s;f<i;f++)r[f]=0;Hfe(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=iS(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,h[f],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};l();d();var sS=BigInt(4294967295),sk=BigInt(32);function AR(e,t=!1){return t?{h:Number(e&sS),l:Number(e>>sk&sS)}:{h:Number(e>>sk&sS)|0,l:Number(e&sS)|0}}function qfe(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:o,l:s}=AR(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}var jfe=(e,t)=>BigInt(e>>>0)<<sk|BigInt(t>>>0),Wfe=(e,t,r)=>e>>>r,zfe=(e,t,r)=>e<<32-r|t>>>r,Gfe=(e,t,r)=>e>>>r|t<<32-r,$fe=(e,t,r)=>e<<32-r|t>>>r,Yfe=(e,t,r)=>e<<64-r|t>>>r-32,Zfe=(e,t,r)=>e>>>r-32|t<<64-r,Jfe=(e,t)=>t,Xfe=(e,t)=>e,Qfe=(e,t,r)=>e<<r|t>>>32-r,ele=(e,t,r)=>t<<r|e>>>32-r,tle=(e,t,r)=>t<<r-32|e>>>64-r,rle=(e,t,r)=>e<<r-32|t>>>64-r;function nle(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}var ile=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),ole=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,sle=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),ale=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,cle=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),ule=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0,fle={fromBig:AR,split:qfe,toBig:jfe,shrSH:Wfe,shrSL:zfe,rotrSH:Gfe,rotrSL:$fe,rotrBH:Yfe,rotrBL:Zfe,rotr32H:Jfe,rotr32L:Xfe,rotlSH:Qfe,rotlSL:ele,rotlBH:tle,rotlBL:rle,add:nle,add3L:ile,add3H:ole,add4L:sle,add4H:ale,add5H:ule,add5L:cle},bt=fle;var[lle,dle]=bt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),jf=new Uint32Array(80),Wf=new Uint32Array(80),yp=class extends oS{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:u,El:h,Fh:f,Fl:m,Gh:b,Gl:w,Hh:S,Hl:P}=this;return[t,r,n,i,o,s,a,c,u,h,f,m,b,w,S,P]}set(t,r,n,i,o,s,a,c,u,h,f,m,b,w,S,P){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=h|0,this.Fh=f|0,this.Fl=m|0,this.Gh=b|0,this.Gl=w|0,this.Hh=S|0,this.Hl=P|0}process(t,r){for(let C=0;C<16;C++,r+=4)jf[C]=t.getUint32(r),Wf[C]=t.getUint32(r+=4);for(let C=16;C<80;C++){let L=jf[C-15]|0,V=Wf[C-15]|0,j=bt.rotrSH(L,V,1)^bt.rotrSH(L,V,8)^bt.shrSH(L,V,7),$=bt.rotrSL(L,V,1)^bt.rotrSL(L,V,8)^bt.shrSL(L,V,7),H=jf[C-2]|0,Y=Wf[C-2]|0,B=bt.rotrSH(H,Y,19)^bt.rotrBH(H,Y,61)^bt.shrSH(H,Y,6),p=bt.rotrSL(H,Y,19)^bt.rotrBL(H,Y,61)^bt.shrSL(H,Y,6),g=bt.add4L($,p,Wf[C-7],Wf[C-16]),x=bt.add4H(g,j,B,jf[C-7],jf[C-16]);jf[C]=x|0,Wf[C]=g|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:u,Dl:h,Eh:f,El:m,Fh:b,Fl:w,Gh:S,Gl:P,Hh:N,Hl:O}=this;for(let C=0;C<80;C++){let L=bt.rotrSH(f,m,14)^bt.rotrSH(f,m,18)^bt.rotrBH(f,m,41),V=bt.rotrSL(f,m,14)^bt.rotrSL(f,m,18)^bt.rotrBL(f,m,41),j=f&b^~f&S,$=m&w^~m&P,H=bt.add5L(O,V,$,dle[C],Wf[C]),Y=bt.add5H(H,N,L,j,lle[C],jf[C]),B=H|0,p=bt.rotrSH(n,i,28)^bt.rotrBH(n,i,34)^bt.rotrBH(n,i,39),g=bt.rotrSL(n,i,28)^bt.rotrBL(n,i,34)^bt.rotrBL(n,i,39),x=n&o^n&a^o&a,A=i&s^i&c^s&c;N=S|0,O=P|0,S=b|0,P=w|0,b=f|0,w=m|0,{h:f,l:m}=bt.add(u|0,h|0,Y|0,B|0),u=a|0,h=c|0,a=o|0,c=s|0,o=n|0,s=i|0;let v=bt.add3L(B,g,A);n=bt.add3H(v,Y,p,x),i=v|0}({h:n,l:i}=bt.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=bt.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:c}=bt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:h}=bt.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:f,l:m}=bt.add(this.Eh|0,this.El|0,f|0,m|0),{h:b,l:w}=bt.add(this.Fh|0,this.Fl|0,b|0,w|0),{h:S,l:P}=bt.add(this.Gh|0,this.Gl|0,S|0,P|0),{h:N,l:O}=bt.add(this.Hh|0,this.Hl|0,N|0,O|0),this.set(n,i,o,s,a,c,u,h,f,m,b,w,S,P,N,O)}roundClean(){jf.fill(0),Wf.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},ak=class extends yp{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},ck=class extends yp{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},uk=class extends yp{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}},zf=rb(()=>new yp),eDe=rb(()=>new ak),tDe=rb(()=>new ck),rDe=rb(()=>new uk);l();d();var hle=re(Xm(),1);var tr=BigInt(0),qr=BigInt(1),$f=BigInt(2),ob=BigInt(3),ER=BigInt(8),jr=Object.freeze({a:tr,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:qr,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),IR=(e,t)=>(e+t/$f)/t,aS={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){let{n:t}=jr,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-qr*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=IR(o*e,t),c=IR(-n*e,t),u=xe(e-a*r-c*i,t),h=xe(-a*n-c*o,t),f=u>s,m=h>s;if(f&&(u=t-u),m&&(h=t-h),u>s||h>s)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:f,k1:u,k2neg:m,k2:h}}},mp=32,ab=32;var kR=mp+1,TR=2*mp+1;function PR(e){let{a:t,b:r}=jr,n=xe(e*e),i=xe(n*e);return xe(i+t*e+r)}var cS=jr.a===tr,dS=class extends Error{constructor(t){super(t)}};function BR(e){if(!(e instanceof ro))throw new TypeError("JacobianPoint expected")}var ro=class e{constructor(t,r,n){this.x=t,this.y=r,this.z=n}static fromAffine(t){if(!(t instanceof pn))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(pn.ZERO)?e.ZERO:new e(t.x,t.y,qr)}static toAffineBatch(t){let r=ble(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return e.toAffineBatch(t).map(e.fromAffine)}equals(t){BR(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t,c=xe(i*i),u=xe(a*a),h=xe(r*u),f=xe(o*c),m=xe(xe(n*a)*u),b=xe(xe(s*i)*c);return h===f&&m===b}negate(){return new e(this.x,xe(-this.y),this.z)}double(){let{x:t,y:r,z:n}=this,i=xe(t*t),o=xe(r*r),s=xe(o*o),a=t+o,c=xe($f*(xe(a*a)-i-s)),u=xe(ob*i),h=xe(u*u),f=xe(h-$f*c),m=xe(u*(c-f)-ER*s),b=xe($f*r*n);return new e(f,m,b)}add(t){BR(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t;if(o===tr||s===tr)return this;if(r===tr||n===tr)return t;let c=xe(i*i),u=xe(a*a),h=xe(r*u),f=xe(o*c),m=xe(xe(n*a)*u),b=xe(xe(s*i)*c),w=xe(f-h),S=xe(b-m);if(w===tr)return S===tr?this.double():e.ZERO;let P=xe(w*w),N=xe(w*P),O=xe(h*P),C=xe(S*S-N-$f*O),L=xe(S*(O-C)-m*N),V=xe(i*a*w);return new e(C,L,V)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){let r=e.ZERO;if(typeof t=="bigint"&&t===tr)return r;let n=NR(t);if(n===qr)return this;if(!cS){let f=r,m=this;for(;n>tr;)n&qr&&(f=f.add(m)),m=m.double(),n>>=qr;return f}let{k1neg:i,k1:o,k2neg:s,k2:a}=aS.splitScalar(n),c=r,u=r,h=this;for(;o>tr||a>tr;)o&qr&&(c=c.add(h)),a&qr&&(u=u.add(h)),h=h.double(),o>>=qr,a>>=qr;return i&&(c=c.negate()),s&&(u=u.negate()),u=new e(xe(u.x*aS.beta),u.y,u.z),c.add(u)}precomputeWindow(t){let r=cS?128/t+1:256/t+1,n=[],i=this,o=i;for(let s=0;s<r;s++){o=i,n.push(o);for(let a=1;a<2**(t-1);a++)o=o.add(i),n.push(o);i=o.double()}return n}wNAF(t,r){!r&&this.equals(e.BASE)&&(r=pn.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&lk.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=e.normalizeZ(i),lk.set(r,i)));let o=e.ZERO,s=e.BASE,a=1+(cS?128/n:256/n),c=2**(n-1),u=BigInt(2**n-1),h=2**n,f=BigInt(n);for(let m=0;m<a;m++){let b=m*c,w=Number(t&u);t>>=f,w>c&&(w-=h,t+=qr);let S=b,P=b+Math.abs(w)-1,N=m%2!==0,O=w<0;w===0?s=s.add(uS(N,i[S])):o=o.add(uS(O,i[P]))}return{p:o,f:s}}multiply(t,r){let n=NR(t),i,o;if(cS){let{k1neg:s,k1:a,k2neg:c,k2:u}=aS.splitScalar(n),{p:h,f}=this.wNAF(a,r),{p:m,f:b}=this.wNAF(u,r);h=uS(s,h),m=uS(c,m),m=new e(xe(m.x*aS.beta),m.y,m.z),i=h.add(m),o=f.add(b)}else{let{p:s,f:a}=this.wNAF(n,r);i=s,o=a}return e.normalizeZ([i,o])[0]}toAffine(t){let{x:r,y:n,z:i}=this,o=this.equals(e.ZERO);t==null&&(t=o?ER:mS(i));let s=t,a=xe(s*s),c=xe(a*s),u=xe(r*a),h=xe(n*c),f=xe(i*s);if(o)return pn.ZERO;if(f!==qr)throw new Error("invZ was invalid");return new pn(u,h)}};ro.BASE=new ro(jr.Gx,jr.Gy,qr);ro.ZERO=new ro(tr,qr,tr);function uS(e,t){let r=t.negate();return e?r:t}var lk=new WeakMap,pn=class e{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,lk.delete(this)}hasEvenY(){return this.y%$f===tr}static fromCompressedHex(t){let r=t.length===32,n=Is(r?t:t.subarray(1));if(!lS(n))throw new Error("Point is not on curve");let i=PR(n),o=gle(i),s=(o&qr)===qr;r?s&&(o=xe(-o)):(t[0]&1)===1!==s&&(o=xe(-o));let a=new e(n,o);return a.assertValidity(),a}static fromUncompressedHex(t){let r=Is(t.subarray(1,mp+1)),n=Is(t.subarray(mp+1,mp*2+1)),i=new e(r,n);return i.assertValidity(),i}static fromHex(t){let r=oh(t),n=r.length,i=r[0];if(n===mp)return this.fromCompressedHex(r);if(n===kR&&(i===2||i===3))return this.fromCompressedHex(r);if(n===TR&&i===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-${kR} compressed bytes or ${TR} uncompressed bytes, not ${n}`)}static fromPrivateKey(t){return e.BASE.multiply(fb(t))}static fromSignature(t,r,n){let{r:i,s:o}=vle(r);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");let s=wle(oh(t)),{n:a}=jr,c=n===2||n===3?i+a:i,u=mS(c,a),h=xe(-s*u,a),f=xe(o*u,a),m=n&1?"03":"02",b=e.fromHex(m+Yf(c)),w=e.BASE.multiplyAndAddUnsafe(b,h,f);if(!w)throw new Error("Cannot recover signature: point at infinify");return w.assertValidity(),w}toRawBytes(t=!1){return Zf(this.toHex(t))}toHex(t=!1){let r=Yf(this.x);return t?`${this.hasEvenY()?"02":"03"}${r}`:`04${r}${Yf(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let t="Point is not on elliptic curve",{x:r,y:n}=this;if(!lS(r)||!lS(n))throw new Error(t);let i=xe(n*n),o=PR(r);if(xe(i-o)!==tr)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new e(this.x,xe(-this.y))}double(){return ro.fromAffine(this).double().toAffine()}add(t){return ro.fromAffine(this).add(ro.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return ro.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,r,n){let i=ro.fromAffine(this),o=r===tr||r===qr||this!==e.BASE?i.multiplyUnsafe(r):i.multiply(r),s=ro.fromAffine(t).multiplyUnsafe(n),a=o.add(s);return a.equals(ro.ZERO)?void 0:a.toAffine()}};pn.BASE=new pn(jr.Gx,jr.Gy);pn.ZERO=new pn(tr,tr);function _R(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function CR(e){if(e.length<2||e[0]!==2)throw new Error(`Invalid signature integer tag: ${bp(e)}`);let t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:Is(r),left:e.subarray(t+2)}}function ple(e){if(e.length<2||e[0]!=48)throw new Error(`Invalid signature tag: ${bp(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");let{data:t,left:r}=CR(e.subarray(2)),{data:n,left:i}=CR(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${bp(i)}`);return{r:t,s:n}}var sb=class e{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromCompact(t){let r=t instanceof Uint8Array,n="Signature.fromCompact";if(typeof t!="string"&&!r)throw new TypeError(`${n}: Expected string or Uint8Array`);let i=r?bp(t):t;if(i.length!==128)throw new Error(`${n}: Expected 64-byte hex`);return new e(hS(i.slice(0,64)),hS(i.slice(64,128)))}static fromDER(t){let r=t instanceof Uint8Array;if(typeof t!="string"&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:n,s:i}=ple(r?t:Zf(t));return new e(n,i)}static fromHex(t){return this.fromDER(t)}assertValidity(){let{r:t,s:r}=this;if(!ub(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!ub(r))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let t=jr.n>>qr;return this.s>t}normalizeS(){return this.hasHighS()?new e(this.r,xe(-this.s,jr.n)):this}toDERRawBytes(){return Zf(this.toDERHex())}toDERHex(){let t=_R(ib(this.s)),r=_R(ib(this.r)),n=t.length/2,i=r.length/2,o=ib(n),s=ib(i);return`30${ib(i+n+4)}02${s}${r}02${o}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Zf(this.toCompactHex())}toCompactHex(){return Yf(this.r)+Yf(this.s)}};function nb(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var yle=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function bp(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=yle[e[r]];return t}var mle=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Yf(e){if(typeof e!="bigint")throw new Error("Expected bigint");if(!(tr<=e&&e<mle))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function cb(e){let t=Zf(Yf(e));if(t.length!==32)throw new Error("Error: expected 32 bytes");return t}function ib(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function hS(e){if(typeof e!="string")throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function Zf(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function Is(e){return hS(bp(e))}function oh(e){return e instanceof Uint8Array?Uint8Array.from(e):Zf(e)}function NR(e){if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if(typeof e=="bigint"&&ub(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function xe(e,t=jr.P){let r=e%t;return r>=tr?r:t+r}function Es(e,t){let{P:r}=jr,n=e;for(;t-- >tr;)n*=n,n%=r;return n}function gle(e){let{P:t}=jr,r=BigInt(6),n=BigInt(11),i=BigInt(22),o=BigInt(23),s=BigInt(44),a=BigInt(88),c=e*e*e%t,u=c*c*e%t,h=Es(u,ob)*u%t,f=Es(h,ob)*u%t,m=Es(f,$f)*c%t,b=Es(m,n)*m%t,w=Es(b,i)*b%t,S=Es(w,s)*w%t,P=Es(S,a)*S%t,N=Es(P,s)*w%t,O=Es(N,ob)*u%t,C=Es(O,o)*b%t,L=Es(C,r)*c%t,V=Es(L,$f);if(V*V%t!==e)throw new Error("Cannot find square root");return V}function mS(e,t=jr.P){if(e===tr||t<=tr)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=xe(e,t),n=t,i=tr,o=qr,s=qr,a=tr;for(;r!==tr;){let u=n/r,h=n%r,f=i-s*u,m=o-a*u;n=r,r=h,i=s,o=a,s=f,a=m}if(n!==qr)throw new Error("invert: does not exist");return xe(i,t)}function ble(e,t=jr.P){let r=new Array(e.length),n=e.reduce((o,s,a)=>s===tr?o:(r[a]=o,xe(o*s,t)),qr),i=mS(n,t);return e.reduceRight((o,s,a)=>s===tr?o:(r[a]=xe(o*r[a],t),xe(o*s,t)),i),r}function xle(e){let t=e.length*8-ab*8,r=Is(e);return t>0?r>>BigInt(t):r}function wle(e,t=!1){let r=xle(e);if(t)return r;let{n}=jr;return r>=n?r-n:r}var gp,fk;function ub(e){return tr<e&&e<jr.n}function lS(e){return tr<e&&e<jr.P}function fb(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if(typeof e=="string"){if(e.length!==2*ab)throw new Error("Expected 32 bytes of private key");t=hS(e)}else if(e instanceof Uint8Array){if(e.length!==ab)throw new Error("Expected 32 bytes of private key");t=Is(e)}else throw new TypeError("Expected valid private key");if(!ub(t))throw new Error("Expected private key: 0 < key < n");return t}function Sle(e){return e instanceof pn?(e.assertValidity(),e):pn.fromHex(e)}function vle(e){if(e instanceof sb)return e.assertValidity(),e;try{return sb.fromDER(e)}catch{return sb.fromCompact(e)}}function Tu(e,t=!1){return pn.fromPrivateKey(e).toRawBytes(t)}function pS(e){return xe(Is(e),jr.n)}var xp=class e{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromHex(t){let r=oh(t);if(r.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${r.length}`);let n=Is(r.subarray(0,32)),i=Is(r.subarray(32,64));return new e(n,i)}assertValidity(){let{r:t,s:r}=this;if(!lS(t)||!ub(r))throw new Error("Invalid signature")}toHex(){return Yf(this.r)+Yf(this.s)}toRawBytes(){return Zf(this.toHex())}};function Ale(e){return pn.fromPrivateKey(e).toRawX()}var yS=class{constructor(t,r,n=wc.randomBytes()){if(t==null)throw new TypeError(`sign: Expected valid message, not "${t}"`);this.m=oh(t);let{x:i,scalar:o}=this.getScalar(fb(r));if(this.px=i,this.d=o,this.rand=oh(n),this.rand.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(t){let r=pn.fromPrivateKey(t),n=r.hasEvenY()?t:jr.n-t;return{point:r,scalar:n,x:r.toRawX()}}initNonce(t,r){return cb(t^Is(r))}finalizeNonce(t){let r=xe(Is(t),jr.n);if(r===tr)throw new Error("sign: Creation of signature failed. k is zero");let{point:n,x:i,scalar:o}=this.getScalar(r);return{R:n,rx:i,k:o}}finalizeSig(t,r,n,i){return new xp(t.x,xe(r+n*i,jr.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){let{m:t,d:r,px:n,rand:i}=this,o=wc.taggedHash,s=this.initNonce(r,await o(Gf.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(await o(Gf.nonce,s,n,t)),h=pS(await o(Gf.challenge,c,n,t)),f=this.finalizeSig(a,u,h,r);return await OR(f,t,n)||this.error(),f}calcSync(){let{m:t,d:r,px:n,rand:i}=this,o=wc.taggedHashSync,s=this.initNonce(r,o(Gf.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(o(Gf.nonce,s,n,t)),h=pS(o(Gf.challenge,c,n,t)),f=this.finalizeSig(a,u,h,r);return UR(f,t,n)||this.error(),f}};async function Ele(e,t,r){return new yS(e,t,r).calc()}function Ile(e,t,r){return new yS(e,t,r).calcSync()}function MR(e,t,r){let n=e instanceof xp,i=n?e:xp.fromHex(e);return n&&i.assertValidity(),{...i,m:oh(t),P:Sle(r)}}function DR(e,t,r,n){let i=pn.BASE.multiplyAndAddUnsafe(t,fb(r),xe(-n,jr.n));return!(!i||!i.hasEvenY()||i.x!==e)}async function OR(e,t,r){try{let{r:n,s:i,m:o,P:s}=MR(e,t,r),a=pS(await wc.taggedHash(Gf.challenge,cb(n),s.toRawX(),o));return DR(n,s,i,a)}catch{return!1}}function UR(e,t,r){try{let{r:n,s:i,m:o,P:s}=MR(e,t,r),a=pS(wc.taggedHashSync(Gf.challenge,cb(n),s.toRawX(),o));return DR(n,s,i,a)}catch(n){if(n instanceof dS)throw n;return!1}}var RR={Signature:xp,getPublicKey:Ale,sign:Ele,verify:OR,signSync:Ile,verifySync:UR};pn.BASE._setWindowSize(8);var Yo={node:hle,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Gf={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},fS={},wc={bytesToHex:bp,hexToBytes:Zf,concatBytes:nb,mod:xe,invert:mS,isValidPrivateKey(e){try{return fb(e),!0}catch{return!1}},_bigintTo32Bytes:cb,_normalizePrivateKey:fb,hashToPrivateKey:e=>{e=oh(e);let t=ab+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");let r=xe(Is(e),jr.n-qr)+qr;return cb(r)},randomBytes:(e=32)=>{if(Yo.web)return Yo.web.getRandomValues(new Uint8Array(e));if(Yo.node){let{randomBytes:t}=Yo.node;return Uint8Array.from(t(e))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>wc.hashToPrivateKey(wc.randomBytes(ab+8)),precompute(e=8,t=pn.BASE){let r=t===pn.BASE?t:new pn(t.x,t.y);return r._setWindowSize(e),r.multiply(ob),r},sha256:async(...e)=>{if(Yo.web){let t=await Yo.web.subtle.digest("SHA-256",nb(...e));return new Uint8Array(t)}else if(Yo.node){let{createHash:t}=Yo.node,r=t("sha256");return e.forEach(n=>r.update(n)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(Yo.web){let r=await Yo.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=nb(...t),i=await Yo.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}else if(Yo.node){let{createHmac:r}=Yo.node,n=r("sha256",e);return t.forEach(i=>n.update(i)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let r=fS[e];if(r===void 0){let n=await wc.sha256(Uint8Array.from(e,i=>i.charCodeAt(0)));r=nb(n,n),fS[e]=r}return wc.sha256(r,...t)},taggedHashSync:(e,...t)=>{if(typeof gp!="function")throw new dS("sha256Sync is undefined, you need to set it");let r=fS[e];if(r===void 0){let n=gp(Uint8Array.from(e,i=>i.charCodeAt(0)));r=nb(n,n),fS[e]=r}return gp(r,...t)},_JacobianPoint:ro};Object.defineProperties(wc,{sha256Sync:{configurable:!1,get(){return gp},set(e){gp||(gp=e)}},hmacSha256Sync:{configurable:!1,get(){return fk},set(e){fk||(fk=e)}}});l();d();var LR=new RegExp("^[0-9]+'?$"),wp=2147483648;l();d();l();d();var gS=class extends pp{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,ku.hash(t);let n=tb(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return ku.exists(this),this.iHash.update(t),this}digestInto(t){ku.exists(this),ku.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},sh=(e,t,r)=>new gS(e,t).update(r).digest();sh.create=(e,t)=>new gS(e,t);var xDe=new RegExp("^m(\\/[0-9]+')+$");var Tle="ed25519 seed",VR=e=>{let t=Buffer.from(sh(zf,Buffer.from(Tle),e)).toString("hex"),r=t.slice(0,64),n=t.slice(64);return{key:Buffer.from(r,"hex"),chainCode:Buffer.from(n,"hex")}},KR=({key:e,chainCode:t},r)=>{let n=Buffer.allocUnsafe(4);n.writeUInt32BE(r,0);let i=Buffer.concat([Buffer.alloc(1,0),e,n]),o=Buffer.from(sh(zf,t,i)).toString("hex"),s=o.slice(0,64),a=o.slice(64);return{key:Buffer.from(s,"hex"),chainCode:Buffer.from(a,"hex")}};l();d();var Pu=re(Bn());var Sp=re(Jn());var Ple=Pu.Buffer.from("Bitcoin seed"),FR=ur.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),HR=e=>{let t=Pu.Buffer.from(sh(zf,Pu.Buffer.from(Ple),e)).toString("hex"),r=t.slice(0,64),n=t.slice(64);return{key:Pu.Buffer.from(r,"hex"),chainCode:Pu.Buffer.from(n,"hex")}},qR=(e,t)=>{let{key:r,chainCode:n}=e,i=new Uint8Array(37);if(t&wp)i.set(r,1);else{let f=Tu(r,!0);i.set((0,Sp.arrayify)(f))}for(let f=24;f>=0;f-=8)i[33+(f>>3)]=t>>24-f&255;let o=Pu.Buffer.from(sh(zf,n,i)).toString("hex"),s=o.slice(0,64),a=o.slice(64),c=ur.from(`0x${s}`);if(c.gte(FR))throw new Error("Invalid private key");let u=c.add(`0x${r.toString("hex")}`).mod(FR);if(u.eq(ur.from(0)))throw new Error("Invalid private key");let h=(0,Sp.hexZeroPad)((0,Sp.hexlify)(u),32);return{key:Pu.Buffer.from(h.replace("0x",""),"hex"),chainCode:Pu.Buffer.from(a,"hex")}};l();d();var dk=R.string().refine(e=>{if(typeof e!="string")return!1;let t=e.split("/");if(t.length<2||t[0]!=="m")return!1;for(let r=1;r<t.length;++r)if(!LR.test(t[r]))return!1;return!0},{message:"Value is not a valid derivation path."});var lb=R.union([R.literal("bitcoinTaproot"),R.literal("bitcoinNativeSegwit"),R.literal("bitcoinNestedSegwit"),R.literal("bitcoinLegacy")]),db=R.union([R.literal("bip44RootEthereum"),R.literal("bip44Ethereum"),R.literal("bip44EthereumSecondary"),R.literal("bip44EthereumTertiary")]),hb=R.union([R.literal("bip44Root"),R.literal("bip44"),R.literal("bip44Change"),R.literal("deprecated")]),hk=R.literal("bip44Sui");l();d();var Ble=R.union([R.literal("bip44Change"),R.literal("bip44"),R.literal("deprecated")]),_le=R.union([R.literal("bip44Ethereum"),R.literal("bip44EthereumSecondary"),R.literal("bip44EthereumTertiary")]),Cle=R.union([R.literal("bitcoinTaproot"),R.literal("bitcoinNativeSegwit"),R.literal("bitcoinNestedSegwit"),R.literal("bitcoinLegacy")]),Nle=R.literal("bip44Sui"),bS=R.number().int().min(0),Mle=R.object({pathType:R.literal("bip44Root"),index:R.number().optional()}),Dle=R.object({pathType:Ble,index:bS}),Ole=R.object({pathType:R.literal("bip44RootEthereum"),index:R.number().optional()}),Ule=R.object({pathType:_le,index:bS}),Rle=R.object({pathType:Cle,index:bS}),Lle=R.object({pathType:Nle,index:bS}),xS=R.union([Mle,Dle,Ole,Ule,Rle,Lle]),pb=new Error("Invalid derivation path."),WR=new Error("Unsupported derivation path."),pk=e=>{if(!xS.safeParse(e).success)throw pb;switch(e.pathType){case"bitcoinTaproot":return`m/86'/0'/0'/0/${e.index}`;case"bitcoinNativeSegwit":return`m/84'/0'/0'/0/${e.index}`;case"bitcoinNestedSegwit":return`m/46'/0'/0'/0/${e.index}`;case"bitcoinLegacy":return`m/44'/0'/0'/0/${e.index}`;case"bip44RootEthereum":return"m/44'/60'";case"bip44Ethereum":return`m/44'/60'/0'/0/${e.index}`;case"bip44EthereumSecondary":return`m/44'/60'/1'/0/${e.index}`;case"bip44EthereumTertiary":return`m/44'/60'/2'/0/${e.index}`;case"bip44Root":return"m/44'/501'";case"deprecated":return`m/501'/${e.index}'/0/0`;case"bip44":return`m/44'/501'/${e.index}'`;case"bip44Change":return`m/44'/501'/${e.index}'/0'`;case"bip44Sui":return`m/44'/784'/${e.index}'/0'/0'`}},jR=1<<31>>>0,Vle=e=>{try{let t=e.replace("0x","").match(/.{1,2}/g)??[];if(t.length===0)throw pb;let r=parseInt(t[0],16),n="m";for(let i=0;i<r;i++){let o="";for(let c=0;c<4;c++)o+=t[1+i*4+c];let s=parseInt(o,16),a=s>=jR;a&&(s-=jR),n+=`/${s.toString(10)}${a?"'":""}`}return n}catch{throw pb}},Kle=e=>{let t,r=dk.safeParse(`m/${e.replace("m/","")}`);if(r.success)t=r.data;else try{t=Vle(e)}catch{throw pb}if(t==="m/44'/501'")return{pathType:"bip44Root"};if(t==="m/44'/60'")return{pathType:"bip44RootEthereum"};let n=t.replace("m/","").split("/");try{if(n.length===5&&n[0]==="86'"&&n[1]==="0'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bitcoinTaproot",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="84'"&&n[1]==="0'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bitcoinNativeSegwit",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="46'"&&n[1]==="0'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bitcoinNestedSegwit",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="44'"&&n[1]==="0'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bitcoinLegacy",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="44'"&&n[1]==="60'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bip44Ethereum",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="44'"&&n[1]==="60'"&&n[2]==="1'"&&n[3]==="0")return{pathType:"bip44EthereumSecondary",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="44'"&&n[1]==="60'"&&n[2]==="2'"&&n[3]==="0")return{pathType:"bip44EthereumTertiary",index:parseInt(n[4],10)};if(n.length===4&&n[0]==="44'"&&n[1]==="501'"&&n[3]==="0'")return{pathType:"bip44Change",index:parseInt(n[2],10)};if(n.length===3&&n[0]==="44'"&&n[1]==="501'")return{pathType:"bip44",index:parseInt(n[2],10)};if(n.length===4&&n[0]==="501'"&&n[2]==="0"&&n[3]==="0")return{pathType:"deprecated",index:parseInt(n[1],10)}}catch{}throw WR};l();d();var HDe=new Error("Unsupported path."),yk=e=>{switch(e){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":return!0;case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":case"bip44Root":case"bip44":case"bip44Change":case"deprecated":case"bip44Sui":return!1}},mk=e=>{switch(e){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":return!1;case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":return!0;case"bip44Root":case"bip44":case"bip44Change":case"deprecated":case"bip44Sui":return!1}},gk=e=>{switch(e){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":case"bip44Sui":return!1;case"bip44Root":case"bip44":case"bip44Change":case"deprecated":return!0}},bk=e=>{switch(e){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":case"bip44Root":case"bip44":case"bip44Change":case"deprecated":return!1;case"bip44Sui":return!0}};Iu.sha512Sync=(...e)=>zf(Iu.concatBytes(...e));var{getPublicKey:Fle}=nS,Li=class{#e;#t;constructor(t){this.#e={ellipticCurve:"ed25519",value:VR(t),nodes:{}},this.#t={ellipticCurve:"secp256k1",value:HR(t),nodes:{}}}derivePathType(t,r){switch(t){case"bitcoinTaproot":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/86'/0'/0'/0/${r}`,useCompressedPublicKey:!0});case"bitcoinNativeSegwit":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/84'/0'/0'/0/${r}`,useCompressedPublicKey:!0});case"bitcoinNestedSegwit":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/46'/0'/0'/0/${r}`,useCompressedPublicKey:!0});case"bitcoinLegacy":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/44'/0'/0'/0/${r}`,useCompressedPublicKey:!0});case"bip44Ethereum":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/44'/60'/0'/0/${r}`});case"bip44EthereumSecondary":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/44'/60'/1'/0/${r}`});case"bip44EthereumTertiary":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/44'/60'/2'/0/${r}`});case"bip44RootEthereum":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:"m/44'/60'"});case"bip44Change":return this.derivePath({ellipticCurve:"ed25519",derivationPath:`m/44'/501'/${r}'/0'`,bytesInPrivateKey:64});case"bip44":return this.derivePath({ellipticCurve:"ed25519",derivationPath:`m/44'/501'/${r}'`,bytesInPrivateKey:64});case"deprecated":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/501'/${r}'/0/0`});case"bip44Root":return this.derivePath({ellipticCurve:"ed25519",derivationPath:"m/44'/501'",bytesInPrivateKey:64});case"bip44Sui":return this.derivePath({ellipticCurve:"ed25519",derivationPath:`m/44'/784'/${r}'/0'/0'`,bytesInPrivateKey:32})}}derivePath(t){return t.ellipticCurve==="ed25519"?this.deriveED25519Path(t):t.ellipticCurve==="secp256k1"?this.deriveSECP256K1Path(t):Ae(t)}deriveED25519Path(t){let{ellipticCurve:r,derivationPath:n,bytesInPrivateKey:i}=t,o=n.split("/"),s=this.#e;for(let u of o){if(u==="m")continue;if(!s)throw new Error("Cannot derive path, no current node.");let h=s.nodes?.[u]??null;if(!h){let f={ellipticCurve:r,value:KR(s.value,parseInt(u,10)+wp),nodes:{}};h=f,s.nodes[u]=f}s=h}if(!s)throw new Error(`Unable to derive ${n} on curve ${r}.`);let a=Fle(s.value.key),c;switch(i){case 32:return c=new Uint8Array(32),c.set(s.value.key),{publicKey:a,secretKey:c};case 64:return c=new Uint8Array(64),c.set(s.value.key),c.set(a,32),{publicKey:a,secretKey:c}}}deriveSECP256K1Path(t){let{ellipticCurve:r,derivationPath:n,useCompressedPublicKey:i=!1}=t,o=n.split("/"),s=this.#t;for(let u of o){if(u==="m")continue;if(!s)throw new Error("Cannot derive path, no current node.");let h=s.nodes?.[u]??null;if(!h){let f=0;u.endsWith("'")&&(f=wp);let m={ellipticCurve:r,value:qR(s.value,parseInt(u,10)+f),nodes:{}};h=m,s.nodes[u]=m}s=h}if(!s)throw new Error(`Unable to derive ${n} on curve ${r}.`);let a=s.value.key;return{publicKey:Tu(a,i),secretKey:new Uint8Array(a)}}cleanUpTree(t){if(t){t.value.key.fill(0),t.value.chainCode.fill(0);let r=Object.values(t.nodes);for(let n of r)this.cleanUpTree(n)}}cleanup(){this.cleanUpTree(this.#e),this.cleanUpTree(this.#t),this.#e=null,this.#t=null}};l();d();var we=(a=>(a.BitcoinTaproot="bip122_p2tr",a.BitcoinNativeSegwit="bip122_p2wpkh",a.BitcoinNestedSegwit="bip122_p2sh",a.BitcoinLegacy="bip122_p2pkh",a.Solana="solana",a.EVM="eip155",a.Sui="sui",a))(we||{}),zR=["bip122_p2tr","bip122_p2wpkh","bip122_p2sh","bip122_p2pkh"],Jf=R.enum(zR);var wS=class{type="bip122_p2pkh";displayName="Legacy";defaultDerivationPathType="bitcoinLegacy";otherDerivationPathType=[]};l();d();var SS=class{type="bip122_p2wpkh";displayName="Native Segwit";defaultDerivationPathType="bitcoinNativeSegwit";otherDerivationPathType=[]};l();d();var vS=class{type="bip122_p2sh";displayName="Nested Segwit";defaultDerivationPathType="bitcoinNestedSegwit";otherDerivationPathType=[]};l();d();var AS=class{type="bip122_p2tr";displayName="Taproot";defaultDerivationPathType="bitcoinTaproot";otherDerivationPathType=[]};l();d();var ES=class{type="eip155";displayName="Ethereum";defaultDerivationPathType="bip44Ethereum";otherDerivationPathType=["bip44RootEthereum","bip44EthereumSecondary","bip44EthereumTertiary"]};l();d();var IS=class{type="solana";displayName="Solana";defaultDerivationPathType="bip44Change";otherDerivationPathType=["bip44Root","bip44","deprecated"]};l();d();var kS=class{type="sui";displayName="Sui";defaultDerivationPathType="bip44Sui";otherDerivationPathType=[]};var xk=class{bip122_p2tr=new AS;bip122_p2wpkh=new SS;bip122_p2sh=new vS;bip122_p2pkh=new wS;eip155=new ES;solana=new IS;sui=new kS;allAddressTypes=Object.values(we);allAddressTypeDefinitions=this.allAddressTypes.map(t=>this[t]);addressTypeByDerivationPathType={};constructor(){this.allAddressTypeDefinitions.forEach(t=>{this.addressTypeByDerivationPathType[t.defaultDerivationPathType]=t.type,t.otherDerivationPathType.forEach(r=>{this.addressTypeByDerivationPathType[r]=t.type})})}getAll(){return this.allAddressTypes}getDisplayName(t){return this[t].displayName}getAddressType(t){return this.addressTypeByDerivationPathType[t]}},Vi=new xk;l();d();l();d();l();d();var TS=class{addressTypes=["bip122_p2tr","bip122_p2wpkh","bip122_p2sh","bip122_p2pkh"];generateKeypairFromPrivateKey(t){let r=t.fold(i=>Buffer.from(i));return{publicKey:Tu(r,!0),privateKey:r}}generateKeypairFromSeed(t,r,n){let i=t.fold(o=>new Li(o));try{let o=i.derivePathType(n,r);return{publicKey:o.publicKey,privateKey:o.secretKey}}finally{i.cleanup()}}};l();d();l();d();l();d();l();d();var $R=re(Ji());l();d();var GR="properties/5.7.0";var Hle=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(f){s(f)}}function c(h){try{u(n.throw(h))}catch(f){s(f)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},PS=new $R.Logger(GR);function Be(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}function hUe(e,t){for(let r=0;r<32;r++){if(e[t])return e[t];if(!e.prototype||typeof e.prototype!="object")break;e=Object.getPrototypeOf(e.prototype).constructor}return null}function Bu(e){return Hle(this,void 0,void 0,function*(){let t=Object.keys(e).map(n=>{let i=e[n];return Promise.resolve(i).then(o=>({key:n,value:o}))});return(yield Promise.all(t)).reduce((n,i)=>(n[i.key]=i.value,n),{})})}function YR(e,t){(!e||typeof e!="object")&&PS.throwArgumentError("invalid object","object",e),Object.keys(e).forEach(r=>{t[r]||PS.throwArgumentError("invalid object key - "+r,"transaction:"+r,e)})}function mb(e){let t={};for(let r in e)t[r]=e[r];return t}var qle={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function ZR(e){if(e==null||qle[typeof e])return!0;if(Array.isArray(e)||typeof e=="object"){if(!Object.isFrozen(e))return!1;let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=null;try{n=e[t[r]]}catch{continue}if(!ZR(n))return!1}return!0}return PS.throwArgumentError(`Cannot deepCopy ${typeof e}`,"object",e)}function jle(e){if(ZR(e))return e;if(Array.isArray(e))return Object.freeze(e.map(t=>yb(t)));if(typeof e=="object"){let t={};for(let r in e){let n=e[r];n!==void 0&&Be(t,r,yb(n))}return t}return PS.throwArgumentError(`Cannot deepCopy ${typeof e}`,"object",e)}function yb(e){return jle(e)}var Xf=class{constructor(t){for(let r in t)this[r]=yb(t[r])}};var QR=re(Ji());l();d();var JR="abstract-provider/5.7.0";var Wle=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(f){s(f)}}function c(h){try{u(n.throw(h))}catch(f){s(f)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},zle=new QR.Logger(JR),XR=class extends Xf{static isForkEvent(t){return!!(t&&t._isForkEvent)}};var BS=class e{constructor(){zle.checkAbstract(new.target,e),Be(this,"_isProvider",!0)}getFeeData(){return Wle(this,void 0,void 0,function*(){let{block:t,gasPrice:r}=yield Bu({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(s=>null)}),n=null,i=null,o=null;return t&&t.baseFeePerGas&&(n=t.baseFeePerGas,o=ur.from("1500000000"),i=t.baseFeePerGas.mul(2).add(o)),{lastBaseFeePerGas:n,maxFeePerGas:i,maxPriorityFeePerGas:o,gasPrice:r}})}addListener(t,r){return this.on(t,r)}removeListener(t,r){return this.off(t,r)}static isProvider(t){return!!(t&&t._isProvider)}};l();d();var Sc=re(Ji());l();d();var eL="abstract-signer/5.7.0";var Ia=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(f){s(f)}}function c(h){try{u(n.throw(h))}catch(f){s(f)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},ks=new Sc.Logger(eL),Gle=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],$le=[Sc.Logger.errors.INSUFFICIENT_FUNDS,Sc.Logger.errors.NONCE_EXPIRED,Sc.Logger.errors.REPLACEMENT_UNDERPRICED],gb=class e{constructor(){ks.checkAbstract(new.target,e),Be(this,"_isSigner",!0)}getBalance(t){return Ia(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),t)})}getTransactionCount(t){return Ia(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),t)})}estimateGas(t){return Ia(this,void 0,void 0,function*(){this._checkProvider("estimateGas");let r=yield Bu(this.checkTransaction(t));return yield this.provider.estimateGas(r)})}call(t,r){return Ia(this,void 0,void 0,function*(){this._checkProvider("call");let n=yield Bu(this.checkTransaction(t));return yield this.provider.call(n,r)})}sendTransaction(t){return Ia(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");let r=yield this.populateTransaction(t),n=yield this.signTransaction(r);return yield this.provider.sendTransaction(n)})}getChainId(){return Ia(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return Ia(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return Ia(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(t){return Ia(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(t)})}checkTransaction(t){for(let n in t)Gle.indexOf(n)===-1&&ks.throwArgumentError("invalid transaction key: "+n,"transaction",t);let r=mb(t);return r.from==null?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&ks.throwArgumentError("from address mismatch","transaction",t),n[0])),r}populateTransaction(t){return Ia(this,void 0,void 0,function*(){let r=yield Bu(this.checkTransaction(t));r.to!=null&&(r.to=Promise.resolve(r.to).then(i=>Ia(this,void 0,void 0,function*(){if(i==null)return null;let o=yield this.resolveName(i);return o==null&&ks.throwArgumentError("provided ENS name resolves to null","tx.to",i),o})),r.to.catch(i=>{}));let n=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||n)?ks.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",t):(r.type===0||r.type===1)&&n&&ks.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",t),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1)r.gasPrice==null&&(r.gasPrice=this.getGasPrice());else{let i=yield this.getFeeData();if(r.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){let o=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=o,r.maxPriorityFeePerGas=o}else r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(n&&ks.throwError("network does not support EIP-1559",Sc.Logger.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=i.gasPrice),r.type=0):ks.throwError("failed to get consistent fee data",Sc.Logger.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else r.type===2&&(r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return r.nonce==null&&(r.nonce=this.getTransactionCount("pending")),r.gasLimit==null&&(r.gasLimit=this.estimateGas(r).catch(i=>{if($le.indexOf(i.code)>=0)throw i;return ks.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Sc.Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:r})})),r.chainId==null?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&ks.throwArgumentError("chainId address mismatch","transaction",t),i[0])),yield Bu(r)})}_checkProvider(t){this.provider||ks.throwError("missing provider",Sc.Logger.errors.UNSUPPORTED_OPERATION,{operation:t||"_checkProvider"})}static isSigner(t){return!!(t&&t._isSigner)}},tL=class e extends gb{constructor(t,r){super(),Be(this,"address",t),Be(this,"provider",r||null)}getAddress(){return Promise.resolve(this.address)}_fail(t,r){return Promise.resolve().then(()=>{ks.throwError(t,Sc.Logger.errors.UNSUPPORTED_OPERATION,{operation:r})})}signMessage(t){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(t){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(t,r,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(t){return new e(this.address,t)}};var Pa=re(Jn());l();d();l();d();l();d();l();d();l();d();var Yle="0x0000000000000000000000000000000000000000";l();d();var Zle=ur.from(-1),wk=ur.from(0),Jle=ur.from(1);var Xle=ur.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");l();d();var Qle="0x0000000000000000000000000000000000000000000000000000000000000000";l();d();var Sk=re(Jn()),nL=re(Ji());l();d();var rL="strings/5.7.0";var iL=new nL.Logger(rL),ka;(function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"})(ka||(ka={}));var To;(function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"})(To||(To={}));function ede(e,t,r,n,i){return iL.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",r)}function oL(e,t,r,n,i){if(e===To.BAD_PREFIX||e===To.UNEXPECTED_CONTINUE){let o=0;for(let s=t+1;s<r.length&&r[s]>>6===2;s++)o++;return o}return e===To.OVERRUN?r.length-t-1:0}function tde(e,t,r,n,i){return e===To.OVERLONG?(n.push(i),0):(n.push(65533),oL(e,t,r,n,i))}var sL=Object.freeze({error:ede,ignore:oL,replace:tde});function aL(e,t){t==null&&(t=sL.error),e=(0,Sk.arrayify)(e);let r=[],n=0;for(;n<e.length;){let i=e[n++];if(!(i>>7)){r.push(i);continue}let o=null,s=null;if((i&224)===192)o=1,s=127;else if((i&240)===224)o=2,s=2047;else if((i&248)===240)o=3,s=65535;else{(i&192)===128?n+=t(To.UNEXPECTED_CONTINUE,n-1,e,r):n+=t(To.BAD_PREFIX,n-1,e,r);continue}if(n-1+o>=e.length){n+=t(To.OVERRUN,n-1,e,r);continue}let a=i&(1<<8-o-1)-1;for(let c=0;c<o;c++){let u=e[n];if((u&192)!=128){n+=t(To.MISSING_CONTINUE,n,e,r),a=null;break}a=a<<6|u&63,n++}if(a!==null){if(a>1114111){n+=t(To.OUT_OF_RANGE,n-1-o,e,r,a);continue}if(a>=55296&&a<=57343){n+=t(To.UTF16_SURROGATE,n-1-o,e,r,a);continue}if(a<=s){n+=t(To.OVERLONG,n-1-o,e,r,a);continue}r.push(a)}}return r}function ti(e,t=ka.current){t!=ka.current&&(iL.checkNormalize(),e=e.normalize(t));let r=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(i&63|128);else if((i&64512)==55296){n++;let o=e.charCodeAt(n);if(n>=e.length||(o&64512)!==56320)throw new Error("invalid utf-8 string");let s=65536+((i&1023)<<10)+(o&1023);r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(i&63|128)}return(0,Sk.arrayify)(r)}function rde(e){return e.map(t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320))).join("")}function cL(e,t){return rde(aL(e,t))}function vk(e,t=ka.current){return aL(ti(e,t))}function vp(e){return dr(ti(e))}l();d();var Ap=re(Jn());var vL=re(Ji());l();d();var _S="hash/5.7.0";l();d();l();d();l();d();l();d();var Ak=re(Jn());function Ek(e){e=atob(e);let t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return(0,Ak.arrayify)(t)}function nde(e){e=(0,Ak.arrayify)(e);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}l();d();function fL(e,t){t==null&&(t=1);let r=[],n=r.forEach,i=function(o,s){n.call(o,function(a){s>0&&Array.isArray(a)?i(a,s-1):r.push(a)})};return i(e,t),r}function ide(e){let t={};for(let r=0;r<e.length;r++){let n=e[r];t[n[0]]=n[1]}return t}function ode(e){let t=0;function r(){return e[t++]<<8|e[t++]}let n=r(),i=1,o=[0,1];for(let V=1;V<n;V++)o.push(i+=r());let s=r(),a=t;t+=s;let c=0,u=0;function h(){return c==0&&(u=u<<8|e[t++],c=8),u>>--c&1}let f=31,m=Math.pow(2,f),b=m>>>1,w=b>>1,S=m-1,P=0;for(let V=0;V<f;V++)P=P<<1|h();let N=[],O=0,C=m;for(;;){let V=Math.floor(((P-O+1)*i-1)/C),j=0,$=n;for(;$-j>1;){let B=j+$>>>1;V<o[B]?$=B:j=B}if(j==0)break;N.push(j);let H=O+Math.floor(C*o[j]/i),Y=O+Math.floor(C*o[j+1]/i)-1;for(;!((H^Y)&b);)P=P<<1&S|h(),H=H<<1&S,Y=Y<<1&S|1;for(;H&~Y&w;)P=P&b|P<<1&S>>>1|h(),H=H<<1^b,Y=(Y^b)<<1|b|1;O=H,C=1+Y-H}let L=n-4;return N.map(V=>{switch(V-L){case 3:return L+65792+(e[a++]<<16|e[a++]<<8|e[a++]);case 2:return L+256+(e[a++]<<8|e[a++]);case 1:return L+e[a++];default:return V-1}})}function sde(e){let t=0;return()=>e[t++]}function lL(e){return sde(ode(e))}function ade(e){return e&1?~e>>1:e>>1}function cde(e,t){let r=Array(e);for(let n=0;n<e;n++)r[n]=1+t();return r}function uL(e,t){let r=Array(e);for(let n=0,i=-1;n<e;n++)r[n]=i+=1+t();return r}function ude(e,t){let r=Array(e);for(let n=0,i=0;n<e;n++)r[n]=i+=ade(t());return r}function bb(e,t){let r=uL(e(),e),n=e(),i=uL(n,e),o=cde(n,e);for(let s=0;s<n;s++)for(let a=0;a<o[s];a++)r.push(i[s]+a);return t?r.map(s=>t[s]):r}function dL(e){let t=[];for(;;){let r=e();if(r==0)break;t.push(lde(r,e))}for(;;){let r=e()-1;if(r<0)break;t.push(dde(r,e))}return ide(fL(t))}function fde(e){let t=[];for(;;){let r=e();if(r==0)break;t.push(r)}return t}function hL(e,t,r){let n=Array(e).fill(void 0).map(()=>[]);for(let i=0;i<t;i++)ude(e,r).forEach((o,s)=>n[s].push(o));return n}function lde(e,t){let r=1+t(),n=t(),i=fde(t),o=hL(i.length,1+e,t);return fL(o.map((s,a)=>{let c=s[0],u=s.slice(1);return Array(i[a]).fill(void 0).map((h,f)=>{let m=f*n;return[c+f*r,u.map(b=>b+m)]})}))}function dde(e,t){let r=1+t();return hL(r,1+e,t).map(i=>[i[0],i.slice(1)])}function pL(e){let t=bb(e).sort((n,i)=>n-i);return r();function r(){let n=[];for(;;){let u=bb(e,t);if(u.length==0)break;n.push({set:new Set(u),node:r()})}n.sort((u,h)=>h.set.size-u.set.size);let i=e(),o=i%3;i=i/3|0;let s=!!(i&1);i>>=1;let a=i==1,c=i==2;return{branches:n,valid:o,fe0f:s,save:a,check:c}}}function yL(){return lL(Ek("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}var CS=yL(),hde=new Set(bb(CS)),pde=new Set(bb(CS)),yde=dL(CS),mde=pL(CS),mL=45,gL=95;function bL(e){return vk(e)}function gde(e){return e.filter(t=>t!=65039)}function xL(e){for(let t of e.split(".")){let r=bL(t);try{for(let n=r.lastIndexOf(gL)-1;n>=0;n--)if(r[n]!==gL)throw new Error("underscore only allowed at start");if(r.length>=4&&r.every(n=>n<128)&&r[2]===mL&&r[3]===mL)throw new Error("invalid label extension")}catch(n){throw new Error(`Invalid label "${t}": ${n.message}`)}}return e}function wL(e){return xL(bde(e,gde))}function bde(e,t){let r=bL(e).reverse(),n=[];for(;r.length;){let i=wde(r);if(i){n.push(...t(i));continue}let o=r.pop();if(hde.has(o)){n.push(o);continue}if(pde.has(o))continue;let s=yde[o];if(s){n.push(...s);continue}throw new Error(`Disallowed codepoint: 0x${o.toString(16).toUpperCase()}`)}return xL(xde(String.fromCodePoint(...n)))}function xde(e){return e.normalize("NFC")}function wde(e,t){var r;let n=mde,i,o,s=[],a=e.length;for(t&&(t.length=0);a;){let c=e[--a];if(n=(r=n.branches.find(u=>u.set.has(c)))===null||r===void 0?void 0:r.node,!n)break;if(n.save)o=c;else if(n.check&&c===o)break;s.push(c),n.fe0f&&(s.push(65039),a>0&&e[a-1]==65039&&a--),n.valid&&(i=s.slice(),n.valid==2&&i.splice(1,1),t&&t.push(...e.slice(a).reverse()),e.length=a)}return i}var Sde=new vL.Logger(_S),AL=new Uint8Array(32);AL.fill(0);function SL(e){if(e.length===0)throw new Error("invalid ENS name; empty component");return e}function EL(e){let t=ti(wL(e)),r=[];if(e.length===0)return r;let n=0;for(let i=0;i<t.length;i++)t[i]===46&&(r.push(SL(t.slice(n,i))),n=i+1);if(n>=t.length)throw new Error("invalid ENS name; empty component");return r.push(SL(t.slice(n))),r}function vde(e){typeof e!="string"&&Sde.throwArgumentError("invalid ENS name; not a string","name",e);let t=AL,r=EL(e);for(;r.length;)t=dr((0,Ap.concat)([t,dr(r.pop())]));return(0,Ap.hexlify)(t)}function Ade(e){return(0,Ap.hexlify)((0,Ap.concat)(EL(e).map(t=>{if(t.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");let r=new Uint8Array(t.length+1);return r.set(t,1),r[0]=r.length-1,r})))+"00"}l();d();var IL=re(Jn());var kL=`Ethereum Signed Message:
`;function Ik(e){return typeof e=="string"&&(e=ti(e)),dr((0,IL.concat)([ti(kL),ti(String(e.length)),e]))}l();d();var cn=re(Jn());var _L=re(Ji());var Ede=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(f){s(f)}}function c(h){try{u(n.throw(h))}catch(f){s(f)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},en=new _L.Logger(_S),CL=new Uint8Array(32);CL.fill(0);var Ide=ur.from(-1),NL=ur.from(0),ML=ur.from(1),kde=ur.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Tde(e){let t=(0,cn.arrayify)(e),r=t.length%32;return r?(0,cn.hexConcat)([t,CL.slice(r)]):(0,cn.hexlify)(t)}var Pde=(0,cn.hexZeroPad)(ML.toHexString(),32),Bde=(0,cn.hexZeroPad)(NL.toHexString(),32),TL={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},kk=["name","version","chainId","verifyingContract","salt"];function PL(e){return function(t){return typeof t!="string"&&en.throwArgumentError(`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}var _de={name:PL("name"),version:PL("version"),chainId:function(e){try{return ur.from(e).toString()}catch{}return en.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",e)},verifyingContract:function(e){try{return di(e).toLowerCase()}catch{}return en.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){try{let t=(0,cn.arrayify)(e);if(t.length!==32)throw new Error("bad length");return(0,cn.hexlify)(t)}catch{}return en.throwArgumentError('invalid domain value "salt"',"domain.salt",e)}};function Tk(e){{let t=e.match(/^(u?)int(\d*)$/);if(t){let r=t[1]==="",n=parseInt(t[2]||"256");(n%8!==0||n>256||t[2]&&t[2]!==String(n))&&en.throwArgumentError("invalid numeric width","type",e);let i=kde.mask(r?n-1:n),o=r?i.add(ML).mul(Ide):NL;return function(s){let a=ur.from(s);return(a.lt(o)||a.gt(i))&&en.throwArgumentError(`value out-of-bounds for ${e}`,"value",s),(0,cn.hexZeroPad)(a.toTwos(256).toHexString(),32)}}}{let t=e.match(/^bytes(\d+)$/);if(t){let r=parseInt(t[1]);return(r===0||r>32||t[1]!==String(r))&&en.throwArgumentError("invalid bytes width","type",e),function(n){return(0,cn.arrayify)(n).length!==r&&en.throwArgumentError(`invalid length for ${e}`,"value",n),Tde(n)}}}switch(e){case"address":return function(t){return(0,cn.hexZeroPad)(di(t),32)};case"bool":return function(t){return t?Pde:Bde};case"bytes":return function(t){return dr(t)};case"string":return function(t){return vp(t)}}return null}function BL(e,t){return`${e}(${t.map(({name:r,type:n})=>n+" "+r).join(",")})`}var Ep=class e{constructor(t){Be(this,"types",Object.freeze(yb(t))),Be(this,"_encoderCache",{}),Be(this,"_types",{});let r={},n={},i={};Object.keys(t).forEach(a=>{r[a]={},n[a]=[],i[a]={}});for(let a in t){let c={};t[a].forEach(u=>{c[u.name]&&en.throwArgumentError(`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(a)}`,"types",t),c[u.name]=!0;let h=u.type.match(/^([^\x5b]*)(\x5b|$)/)[1];h===a&&en.throwArgumentError(`circular type reference to ${JSON.stringify(h)}`,"types",t),!Tk(h)&&(n[h]||en.throwArgumentError(`unknown type ${JSON.stringify(h)}`,"types",t),n[h].push(a),r[a][h]=!0)})}let o=Object.keys(n).filter(a=>n[a].length===0);o.length===0?en.throwArgumentError("missing primary type","types",t):o.length>1&&en.throwArgumentError(`ambiguous primary types or unused types: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"types",t),Be(this,"primaryType",o[0]);function s(a,c){c[a]&&en.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",t),c[a]=!0,Object.keys(r[a]).forEach(u=>{n[u]&&(s(u,c),Object.keys(c).forEach(h=>{i[h][u]=!0}))}),delete c[a]}s(this.primaryType,{});for(let a in i){let c=Object.keys(i[a]);c.sort(),this._types[a]=BL(a,t[a])+c.map(u=>BL(u,t[u])).join("")}}getEncoder(t){let r=this._encoderCache[t];return r||(r=this._encoderCache[t]=this._getEncoder(t)),r}_getEncoder(t){{let i=Tk(t);if(i)return i}let r=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){let i=r[1],o=this.getEncoder(i),s=parseInt(r[3]);return a=>{s>=0&&a.length!==s&&en.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",a);let c=a.map(o);return this._types[i]&&(c=c.map(dr)),dr((0,cn.hexConcat)(c))}}let n=this.types[t];if(n){let i=vp(this._types[t]);return o=>{let s=n.map(({name:a,type:c})=>{let u=this.getEncoder(c)(o[a]);return this._types[c]?dr(u):u});return s.unshift(i),(0,cn.hexConcat)(s)}}return en.throwArgumentError(`unknown type: ${t}`,"type",t)}encodeType(t){let r=this._types[t];return r||en.throwArgumentError(`unknown type: ${JSON.stringify(t)}`,"name",t),r}encodeData(t,r){return this.getEncoder(t)(r)}hashStruct(t,r){return dr(this.encodeData(t,r))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,r,n){if(Tk(t))return n(t,r);let i=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){let s=i[1],a=parseInt(i[3]);return a>=0&&r.length!==a&&en.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",r),r.map(c=>this._visit(s,c,n))}let o=this.types[t];return o?o.reduce((s,{name:a,type:c})=>(s[a]=this._visit(c,r[a],n),s),{}):en.throwArgumentError(`unknown type: ${t}`,"type",t)}visit(t,r){return this._visit(this.primaryType,t,r)}static from(t){return new e(t)}static getPrimaryType(t){return e.from(t).primaryType}static hashStruct(t,r,n){return e.from(r).hashStruct(t,n)}static hashDomain(t){let r=[];for(let n in t){let i=TL[n];i||en.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",t),r.push({name:n,type:i})}return r.sort((n,i)=>kk.indexOf(n.name)-kk.indexOf(i.name)),e.hashStruct("EIP712Domain",{EIP712Domain:r},t)}static encode(t,r,n){return(0,cn.hexConcat)(["0x1901",e.hashDomain(t),e.from(r).hash(n)])}static hash(t,r,n){return dr(e.encode(t,r,n))}static resolveNames(t,r,n,i){return Ede(this,void 0,void 0,function*(){t=mb(t);let o={};t.verifyingContract&&!(0,cn.isHexString)(t.verifyingContract,20)&&(o[t.verifyingContract]="0x");let s=e.from(r);s.visit(n,(a,c)=>(a==="address"&&!(0,cn.isHexString)(c,20)&&(o[c]="0x"),c));for(let a in o)o[a]=yield i(a);return t.verifyingContract&&o[t.verifyingContract]&&(t.verifyingContract=o[t.verifyingContract]),n=s.visit(n,(a,c)=>a==="address"&&o[c]?o[c]:c),{domain:t,value:n}})}static getPayload(t,r,n){e.hashDomain(t);let i={},o=[];kk.forEach(c=>{let u=t[c];u!=null&&(i[c]=_de[c](u),o.push({name:c,type:TL[c]}))});let s=e.from(r),a=mb(r);return a.EIP712Domain?en.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):a.EIP712Domain=o,s.encode(n),{types:a,domain:i,primaryType:s.primaryType,message:s.visit(n,(c,u)=>{if(c.match(/^bytes(\d*)/))return(0,cn.hexlify)((0,cn.arrayify)(u));if(c.match(/^u?int/))return ur.from(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return typeof u!="string"&&en.throwArgumentError("invalid string","value",u),u}return en.throwArgumentError("unsupported type","type",c)})}}};l();d();l();d();var Pk=re(Jn());var NS=class{constructor(t){Be(this,"alphabet",t),Be(this,"base",t.length),Be(this,"_alphabetMap",{}),Be(this,"_leader",t.charAt(0));for(let r=0;r<t.length;r++)this._alphabetMap[t.charAt(r)]=r}encode(t){let r=(0,Pk.arrayify)(t);if(r.length===0)return"";let n=[0];for(let o=0;o<r.length;++o){let s=r[o];for(let a=0;a<n.length;++a)s+=n[a]<<8,n[a]=s%this.base,s=s/this.base|0;for(;s>0;)n.push(s%this.base),s=s/this.base|0}let i="";for(let o=0;r[o]===0&&o<r.length-1;++o)i+=this._leader;for(let o=n.length-1;o>=0;--o)i+=this.alphabet[n[o]];return i}decode(t){if(typeof t!="string")throw new TypeError("Expected String");let r=[];if(t.length===0)return new Uint8Array(r);r.push(0);for(let n=0;n<t.length;n++){let i=this._alphabetMap[t[n]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let o=i;for(let s=0;s<r.length;++s)o+=r[s]*this.base,r[s]=o&255,o>>=8;for(;o>0;)r.push(o&255),o>>=8}for(let n=0;t[n]===this._leader&&n<t.length-1;++n)r.push(0);return(0,Pk.arrayify)(new Uint8Array(r.reverse()))}},gLe=new NS("abcdefghijklmnopqrstuvwxyz234567"),Bk=new NS("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var Jt=re(Jn());l();d();l();d();var Qf=re(Jn()),Nk=re(Ck());function ah(e,t,r,n,i){e=(0,Qf.arrayify)(e),t=(0,Qf.arrayify)(t);let o,s=1,a=new Uint8Array(n),c=new Uint8Array(t.length+4);c.set(t);let u,h;for(let f=1;f<=s;f++){c[t.length]=f>>24&255,c[t.length+1]=f>>16&255,c[t.length+2]=f>>8&255,c[t.length+3]=f&255;let m=(0,Qf.arrayify)((0,Nk.computeHmac)(i,e,c));o||(o=m.length,h=new Uint8Array(o),s=Math.ceil(n/o),u=n-(s-1)*o),h.set(m);for(let S=1;S<r;S++){m=(0,Qf.arrayify)((0,Nk.computeHmac)(i,e,m));for(let P=0;P<o;P++)h[P]^=m[P]}let b=(f-1)*o,w=f===s?u:o;a.set((0,Qf.arrayify)(h).slice(0,w),b)}return(0,Qf.hexlify)(a)}l();d();l();d();var pt=re(r1()),vc=re(fM());function Ip(e,t,r){return r={path:t,exports:{},require:function(n,i){return Fde(n,i??r.path)}},e(r,r.exports),r.exports}function Fde(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Uk=LL;function LL(e,t){if(!e)throw new Error(t||"Assertion failed")}LL.equal=function(t,r,n){if(t!=r)throw new Error(n||"Assertion failed: "+t+" != "+r)};var Ta=Ip(function(e,t){"use strict";var r=t;function n(s,a){if(Array.isArray(s))return s.slice();if(!s)return[];var c=[];if(typeof s!="string"){for(var u=0;u<s.length;u++)c[u]=s[u]|0;return c}if(a==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var u=0;u<s.length;u+=2)c.push(parseInt(s[u]+s[u+1],16))}else for(var u=0;u<s.length;u++){var h=s.charCodeAt(u),f=h>>8,m=h&255;f?c.push(f,m):c.push(m)}return c}r.toArray=n;function i(s){return s.length===1?"0"+s:s}r.zero2=i;function o(s){for(var a="",c=0;c<s.length;c++)a+=i(s[c].toString(16));return a}r.toHex=o,r.encode=function(a,c){return c==="hex"?o(a):a}}),Zo=Ip(function(e,t){"use strict";var r=t;r.assert=Uk,r.toArray=Ta.toArray,r.zero2=Ta.zero2,r.toHex=Ta.toHex,r.encode=Ta.encode;function n(c,u,h){var f=new Array(Math.max(c.bitLength(),h)+1);f.fill(0);for(var m=1<<u+1,b=c.clone(),w=0;w<f.length;w++){var S,P=b.andln(m-1);b.isOdd()?(P>(m>>1)-1?S=(m>>1)-P:S=P,b.isubn(S)):S=0,f[w]=S,b.iushrn(1)}return f}r.getNAF=n;function i(c,u){var h=[[],[]];c=c.clone(),u=u.clone();for(var f=0,m=0,b;c.cmpn(-f)>0||u.cmpn(-m)>0;){var w=c.andln(3)+f&3,S=u.andln(3)+m&3;w===3&&(w=-1),S===3&&(S=-1);var P;w&1?(b=c.andln(7)+f&7,(b===3||b===5)&&S===2?P=-w:P=w):P=0,h[0].push(P);var N;S&1?(b=u.andln(7)+m&7,(b===3||b===5)&&w===2?N=-S:N=S):N=0,h[1].push(N),2*f===P+1&&(f=1-f),2*m===N+1&&(m=1-m),c.iushrn(1),u.iushrn(1)}return h}r.getJSF=i;function o(c,u,h){var f="_"+u;c.prototype[u]=function(){return this[f]!==void 0?this[f]:this[f]=h.call(this)}}r.cachedProperty=o;function s(c){return typeof c=="string"?r.toArray(c,"hex"):c}r.parseBytes=s;function a(c){return new pt.default(c,"hex","le")}r.intFromLE=a}),RS=Zo.getNAF,Hde=Zo.getJSF,LS=Zo.assert;function tl(e,t){this.type=e,this.p=new pt.default(t.p,16),this.red=t.prime?pt.default.red(t.prime):pt.default.mont(this.p),this.zero=new pt.default(0).toRed(this.red),this.one=new pt.default(1).toRed(this.red),this.two=new pt.default(2).toRed(this.red),this.n=t.n&&new pt.default(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var ch=tl;tl.prototype.point=function(){throw new Error("Not implemented")};tl.prototype.validate=function(){throw new Error("Not implemented")};tl.prototype._fixedNafMul=function(t,r){LS(t.precomputed);var n=t._getDoubles(),i=RS(r,1,this._bitLength),o=(1<<n.step+1)-(n.step%2===0?2:1);o/=3;var s=[],a,c;for(a=0;a<i.length;a+=n.step){c=0;for(var u=a+n.step-1;u>=a;u--)c=(c<<1)+i[u];s.push(c)}for(var h=this.jpoint(null,null,null),f=this.jpoint(null,null,null),m=o;m>0;m--){for(a=0;a<s.length;a++)c=s[a],c===m?f=f.mixedAdd(n.points[a]):c===-m&&(f=f.mixedAdd(n.points[a].neg()));h=h.add(f)}return h.toP()};tl.prototype._wnafMul=function(t,r){var n=4,i=t._getNAFPoints(n);n=i.wnd;for(var o=i.points,s=RS(r,n,this._bitLength),a=this.jpoint(null,null,null),c=s.length-1;c>=0;c--){for(var u=0;c>=0&&s[c]===0;c--)u++;if(c>=0&&u++,a=a.dblp(u),c<0)break;var h=s[c];LS(h!==0),t.type==="affine"?h>0?a=a.mixedAdd(o[h-1>>1]):a=a.mixedAdd(o[-h-1>>1].neg()):h>0?a=a.add(o[h-1>>1]):a=a.add(o[-h-1>>1].neg())}return t.type==="affine"?a.toP():a};tl.prototype._wnafMulAdd=function(t,r,n,i,o){var s=this._wnafT1,a=this._wnafT2,c=this._wnafT3,u=0,h,f,m;for(h=0;h<i;h++){m=r[h];var b=m._getNAFPoints(t);s[h]=b.wnd,a[h]=b.points}for(h=i-1;h>=1;h-=2){var w=h-1,S=h;if(s[w]!==1||s[S]!==1){c[w]=RS(n[w],s[w],this._bitLength),c[S]=RS(n[S],s[S],this._bitLength),u=Math.max(c[w].length,u),u=Math.max(c[S].length,u);continue}var P=[r[w],null,null,r[S]];r[w].y.cmp(r[S].y)===0?(P[1]=r[w].add(r[S]),P[2]=r[w].toJ().mixedAdd(r[S].neg())):r[w].y.cmp(r[S].y.redNeg())===0?(P[1]=r[w].toJ().mixedAdd(r[S]),P[2]=r[w].add(r[S].neg())):(P[1]=r[w].toJ().mixedAdd(r[S]),P[2]=r[w].toJ().mixedAdd(r[S].neg()));var N=[-3,-1,-5,-7,0,7,5,1,3],O=Hde(n[w],n[S]);for(u=Math.max(O[0].length,u),c[w]=new Array(u),c[S]=new Array(u),f=0;f<u;f++){var C=O[0][f]|0,L=O[1][f]|0;c[w][f]=N[(C+1)*3+(L+1)],c[S][f]=0,a[w]=P}}var V=this.jpoint(null,null,null),j=this._wnafT4;for(h=u;h>=0;h--){for(var $=0;h>=0;){var H=!0;for(f=0;f<i;f++)j[f]=c[f][h]|0,j[f]!==0&&(H=!1);if(!H)break;$++,h--}if(h>=0&&$++,V=V.dblp($),h<0)break;for(f=0;f<i;f++){var Y=j[f];Y!==0&&(Y>0?m=a[f][Y-1>>1]:Y<0&&(m=a[f][-Y-1>>1].neg()),m.type==="affine"?V=V.mixedAdd(m):V=V.add(m))}}for(h=0;h<i;h++)a[h]=null;return o?V:V.toP()};function _s(e,t){this.curve=e,this.type=t,this.precomputed=null}tl.BasePoint=_s;_s.prototype.eq=function(){throw new Error("Not implemented")};_s.prototype.validate=function(){return this.curve.validate(this)};tl.prototype.decodePoint=function(t,r){t=Zo.toArray(t,r);var n=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*n){t[0]===6?LS(t[t.length-1]%2===0):t[0]===7&&LS(t[t.length-1]%2===1);var i=this.point(t.slice(1,1+n),t.slice(1+n,1+2*n));return i}else if((t[0]===2||t[0]===3)&&t.length-1===n)return this.pointFromX(t.slice(1,1+n),t[0]===3);throw new Error("Unknown point format")};_s.prototype.encodeCompressed=function(t){return this.encode(t,!0)};_s.prototype._encode=function(t){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return t?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};_s.prototype.encode=function(t,r){return Zo.encode(this._encode(r),t)};_s.prototype.precompute=function(t){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,t),r.beta=this._getBeta(),this.precomputed=r,this};_s.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((t.bitLength()+1)/r.step):!1};_s.prototype._getDoubles=function(t,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,o=0;o<r;o+=t){for(var s=0;s<t;s++)i=i.dbl();n.push(i)}return{step:t,points:n}};_s.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<t)-1,i=n===1?null:this.dbl(),o=1;o<n;o++)r[o]=r[o-1].add(i);return{wnd:t,points:r}};_s.prototype._getBeta=function(){return null};_s.prototype.dblp=function(t){for(var r=this,n=0;n<t;n++)r=r.dbl();return r};var Rk=Ip(function(e){typeof Object.create=="function"?e.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),qde=Zo.assert;function Cs(e){ch.call(this,"short",e),this.a=new pt.default(e.a,16).toRed(this.red),this.b=new pt.default(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Rk(Cs,ch);var jde=Cs;Cs.prototype._getEndomorphism=function(t){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(t.beta)r=new pt.default(t.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(t.lambda)n=new pt.default(t.lambda,16);else{var o=this._getEndoRoots(this.n);this.g.mul(o[0]).x.cmp(this.g.x.redMul(r))===0?n=o[0]:(n=o[1],qde(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var s;return t.basis?s=t.basis.map(function(a){return{a:new pt.default(a.a,16),b:new pt.default(a.b,16)}}):s=this._getEndoBasis(n),{beta:r,lambda:n,basis:s}}};Cs.prototype._getEndoRoots=function(t){var r=t===this.p?this.red:pt.default.mont(t),n=new pt.default(2).toRed(r).redInvm(),i=n.redNeg(),o=new pt.default(3).toRed(r).redNeg().redSqrt().redMul(n),s=i.redAdd(o).fromRed(),a=i.redSub(o).fromRed();return[s,a]};Cs.prototype._getEndoBasis=function(t){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=t,i=this.n.clone(),o=new pt.default(1),s=new pt.default(0),a=new pt.default(0),c=new pt.default(1),u,h,f,m,b,w,S,P=0,N,O;n.cmpn(0)!==0;){var C=i.div(n);N=i.sub(C.mul(n)),O=a.sub(C.mul(o));var L=c.sub(C.mul(s));if(!f&&N.cmp(r)<0)u=S.neg(),h=o,f=N.neg(),m=O;else if(f&&++P===2)break;S=N,i=n,n=N,a=o,o=O,c=s,s=L}b=N.neg(),w=O;var V=f.sqr().add(m.sqr()),j=b.sqr().add(w.sqr());return j.cmp(V)>=0&&(b=u,w=h),f.negative&&(f=f.neg(),m=m.neg()),b.negative&&(b=b.neg(),w=w.neg()),[{a:f,b:m},{a:b,b:w}]};Cs.prototype._endoSplit=function(t){var r=this.endo.basis,n=r[0],i=r[1],o=i.b.mul(t).divRound(this.n),s=n.b.neg().mul(t).divRound(this.n),a=o.mul(n.a),c=s.mul(i.a),u=o.mul(n.b),h=s.mul(i.b),f=t.sub(a).sub(c),m=u.add(h).neg();return{k1:f,k2:m}};Cs.prototype.pointFromX=function(t,r){t=new pt.default(t,16),t.red||(t=t.toRed(this.red));var n=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var o=i.fromRed().isOdd();return(r&&!o||!r&&o)&&(i=i.redNeg()),this.point(t,i)};Cs.prototype.validate=function(t){if(t.inf)return!0;var r=t.x,n=t.y,i=this.a.redMul(r),o=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(o).cmpn(0)===0};Cs.prototype._endoWnafMulAdd=function(t,r,n){for(var i=this._endoWnafT1,o=this._endoWnafT2,s=0;s<t.length;s++){var a=this._endoSplit(r[s]),c=t[s],u=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),i[s*2]=c,i[s*2+1]=u,o[s*2]=a.k1,o[s*2+1]=a.k2}for(var h=this._wnafMulAdd(1,i,o,s*2,n),f=0;f<s*2;f++)i[f]=null,o[f]=null;return h};function ri(e,t,r,n){ch.BasePoint.call(this,e,"affine"),t===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new pt.default(t,16),this.y=new pt.default(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Rk(ri,ch.BasePoint);Cs.prototype.point=function(t,r,n){return new ri(this,t,r,n)};Cs.prototype.pointFromJSON=function(t,r){return ri.fromJSON(this,t,r)};ri.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var n=this.curve,i=function(o){return n.point(o.x.redMul(n.endo.beta),o.y)};t.beta=r,r.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return r}};ri.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};ri.fromJSON=function(t,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=t.point(r[0],r[1],n);if(!r[2])return i;function o(a){return t.point(a[0],a[1],n)}var s=r[2];return i.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[i].concat(s.doubles.points.map(o))},naf:s.naf&&{wnd:s.naf.wnd,points:[i].concat(s.naf.points.map(o))}},i};ri.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};ri.prototype.isInfinity=function(){return this.inf};ri.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var r=this.y.redSub(t.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(t.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(t.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};ri.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=t.redInvm(),o=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),s=o.redSqr().redISub(this.x.redAdd(this.x)),a=o.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,a)};ri.prototype.getX=function(){return this.x.fromRed()};ri.prototype.getY=function(){return this.y.fromRed()};ri.prototype.mul=function(t){return t=new pt.default(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)};ri.prototype.mulAdd=function(t,r,n){var i=[this,r],o=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o):this.curve._wnafMulAdd(1,i,o,2)};ri.prototype.jmulAdd=function(t,r,n){var i=[this,r],o=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o,!0):this.curve._wnafMulAdd(1,i,o,2,!0)};ri.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)};ri.prototype.neg=function(t){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var n=this.precomputed,i=function(o){return o.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};ri.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function gi(e,t,r,n){ch.BasePoint.call(this,e,"jacobian"),t===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new pt.default(0)):(this.x=new pt.default(t,16),this.y=new pt.default(r,16),this.z=new pt.default(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Rk(gi,ch.BasePoint);Cs.prototype.jpoint=function(t,r,n){return new gi(this,t,r,n)};gi.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),r=t.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(t);return this.curve.point(n,i)};gi.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};gi.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var r=t.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),o=t.x.redMul(n),s=this.y.redMul(r.redMul(t.z)),a=t.y.redMul(n.redMul(this.z)),c=i.redSub(o),u=s.redSub(a);if(c.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var h=c.redSqr(),f=h.redMul(c),m=i.redMul(h),b=u.redSqr().redIAdd(f).redISub(m).redISub(m),w=u.redMul(m.redISub(b)).redISub(s.redMul(f)),S=this.z.redMul(t.z).redMul(c);return this.curve.jpoint(b,w,S)};gi.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=t.x.redMul(r),o=this.y,s=t.y.redMul(r).redMul(this.z),a=n.redSub(i),c=o.redSub(s);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),h=u.redMul(a),f=n.redMul(u),m=c.redSqr().redIAdd(h).redISub(f).redISub(f),b=c.redMul(f.redISub(m)).redISub(o.redMul(h)),w=this.z.redMul(a);return this.curve.jpoint(m,b,w)};gi.prototype.dblp=function(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<t;r++)n=n.dbl();return n}var i=this.curve.a,o=this.curve.tinv,s=this.x,a=this.y,c=this.z,u=c.redSqr().redSqr(),h=a.redAdd(a);for(r=0;r<t;r++){var f=s.redSqr(),m=h.redSqr(),b=m.redSqr(),w=f.redAdd(f).redIAdd(f).redIAdd(i.redMul(u)),S=s.redMul(m),P=w.redSqr().redISub(S.redAdd(S)),N=S.redISub(P),O=w.redMul(N);O=O.redIAdd(O).redISub(b);var C=h.redMul(c);r+1<t&&(u=u.redMul(b)),s=P,c=C,h=O}return this.curve.jpoint(s,h.redMul(o),c)};gi.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};gi.prototype._zeroDbl=function(){var t,r,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),s=o.redSqr(),a=this.x.redAdd(o).redSqr().redISub(i).redISub(s);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i),u=c.redSqr().redISub(a).redISub(a),h=s.redIAdd(s);h=h.redIAdd(h),h=h.redIAdd(h),t=u,r=c.redMul(a.redISub(u)).redISub(h),n=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),m=this.y.redSqr(),b=m.redSqr(),w=this.x.redAdd(m).redSqr().redISub(f).redISub(b);w=w.redIAdd(w);var S=f.redAdd(f).redIAdd(f),P=S.redSqr(),N=b.redIAdd(b);N=N.redIAdd(N),N=N.redIAdd(N),t=P.redISub(w).redISub(w),r=S.redMul(w.redISub(t)).redISub(N),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(t,r,n)};gi.prototype._threeDbl=function(){var t,r,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),s=o.redSqr(),a=this.x.redAdd(o).redSqr().redISub(i).redISub(s);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),u=c.redSqr().redISub(a).redISub(a);t=u;var h=s.redIAdd(s);h=h.redIAdd(h),h=h.redIAdd(h),r=c.redMul(a.redISub(u)).redISub(h),n=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),m=this.y.redSqr(),b=this.x.redMul(m),w=this.x.redSub(f).redMul(this.x.redAdd(f));w=w.redAdd(w).redIAdd(w);var S=b.redIAdd(b);S=S.redIAdd(S);var P=S.redAdd(S);t=w.redSqr().redISub(P),n=this.y.redAdd(this.z).redSqr().redISub(m).redISub(f);var N=m.redSqr();N=N.redIAdd(N),N=N.redIAdd(N),N=N.redIAdd(N),r=w.redMul(S.redISub(t)).redISub(N)}return this.curve.jpoint(t,r,n)};gi.prototype._dbl=function(){var t=this.curve.a,r=this.x,n=this.y,i=this.z,o=i.redSqr().redSqr(),s=r.redSqr(),a=n.redSqr(),c=s.redAdd(s).redIAdd(s).redIAdd(t.redMul(o)),u=r.redAdd(r);u=u.redIAdd(u);var h=u.redMul(a),f=c.redSqr().redISub(h.redAdd(h)),m=h.redISub(f),b=a.redSqr();b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var w=c.redMul(m).redISub(b),S=n.redAdd(n).redMul(i);return this.curve.jpoint(f,w,S)};gi.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),o=t.redAdd(t).redIAdd(t),s=o.redSqr(),a=this.x.redAdd(r).redSqr().redISub(t).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(s);var c=a.redSqr(),u=i.redIAdd(i);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var h=o.redIAdd(a).redSqr().redISub(s).redISub(c).redISub(u),f=r.redMul(h);f=f.redIAdd(f),f=f.redIAdd(f);var m=this.x.redMul(c).redISub(f);m=m.redIAdd(m),m=m.redIAdd(m);var b=this.y.redMul(h.redMul(u.redISub(h)).redISub(a.redMul(c)));b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var w=this.z.redAdd(a).redSqr().redISub(n).redISub(c);return this.curve.jpoint(m,b,w)};gi.prototype.mul=function(t,r){return t=new pt.default(t,r),this.curve._wnafMul(this,t)};gi.prototype.eq=function(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return!0;var r=this.z.redSqr(),n=t.z.redSqr();if(this.x.redMul(n).redISub(t.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),o=n.redMul(t.z);return this.y.redMul(o).redISub(t.y.redMul(i)).cmpn(0)===0};gi.prototype.eqXToP=function(t){var r=this.z.redSqr(),n=t.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=t.clone(),o=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(o),this.x.cmp(n)===0)return!0}};gi.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};gi.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var OS=Ip(function(e,t){"use strict";var r=t;r.base=ch,r.short=jde,r.mont=null,r.edwards=null}),US=Ip(function(e,t){"use strict";var r=t,n=Zo.assert;function i(a){a.type==="short"?this.curve=new OS.short(a):a.type==="edwards"?this.curve=new OS.edwards(a):this.curve=new OS.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function o(a,c){Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){var u=new i(c);return Object.defineProperty(r,a,{configurable:!0,enumerable:!0,value:u}),u}})}o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:vc.default.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:vc.default.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:vc.default.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:vc.default.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:vc.default.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:vc.default.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:vc.default.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var s;try{s=null.crash()}catch{s=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:vc.default.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",s]})});function el(e){if(!(this instanceof el))return new el(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=Ta.toArray(e.entropy,e.entropyEnc||"hex"),r=Ta.toArray(e.nonce,e.nonceEnc||"hex"),n=Ta.toArray(e.pers,e.persEnc||"hex");Uk(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var VL=el;el.prototype._init=function(t,r,n){var i=t.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var o=0;o<this.V.length;o++)this.K[o]=0,this.V[o]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};el.prototype._hmac=function(){return new vc.default.hmac(this.hash,this.K)};el.prototype._update=function(t){var r=this._hmac().update(this.V).update([0]);t&&(r=r.update(t)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())};el.prototype.reseed=function(t,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),t=Ta.toArray(t,r),n=Ta.toArray(n,i),Uk(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(n||[])),this._reseed=1};el.prototype.generate=function(t,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=Ta.toArray(n,i||"hex"),this._update(n));for(var o=[];o.length<t;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var s=o.slice(0,t);return this._update(n),this._reseed++,Ta.encode(s,r)};var Ok=Zo.assert;function Ki(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var Lk=Ki;Ki.fromPublic=function(t,r,n){return r instanceof Ki?r:new Ki(t,{pub:r,pubEnc:n})};Ki.fromPrivate=function(t,r,n){return r instanceof Ki?r:new Ki(t,{priv:r,privEnc:n})};Ki.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Ki.prototype.getPublic=function(t,r){return typeof t=="string"&&(r=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,t):this.pub};Ki.prototype.getPrivate=function(t){return t==="hex"?this.priv.toString(16,2):this.priv};Ki.prototype._importPrivate=function(t,r){this.priv=new pt.default(t,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Ki.prototype._importPublic=function(t,r){if(t.x||t.y){this.ec.curve.type==="mont"?Ok(t.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Ok(t.x&&t.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,r)};Ki.prototype.derive=function(t){return t.validate()||Ok(t.validate(),"public point not validated"),t.mul(this.priv).getX()};Ki.prototype.sign=function(t,r,n){return this.ec.sign(t,this,r,n)};Ki.prototype.verify=function(t,r){return this.ec.verify(t,r,this)};Ki.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Wde=Zo.assert;function VS(e,t){if(e instanceof VS)return e;this._importDER(e,t)||(Wde(e.r&&e.s,"Signature without r or s"),this.r=new pt.default(e.r,16),this.s=new pt.default(e.s,16),e.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var KS=VS;function zde(){this.place=0}function Mk(e,t){var r=e[t.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,o=0,s=t.place;o<n;o++,s++)i<<=8,i|=e[s],i>>>=0;return i<=127?!1:(t.place=s,i)}function RL(e){for(var t=0,r=e.length-1;!e[t]&&!(e[t+1]&128)&&t<r;)t++;return t===0?e:e.slice(t)}VS.prototype._importDER=function(t,r){t=Zo.toArray(t,r);var n=new zde;if(t[n.place++]!==48)return!1;var i=Mk(t,n);if(i===!1||i+n.place!==t.length||t[n.place++]!==2)return!1;var o=Mk(t,n);if(o===!1)return!1;var s=t.slice(n.place,o+n.place);if(n.place+=o,t[n.place++]!==2)return!1;var a=Mk(t,n);if(a===!1||t.length!==a+n.place)return!1;var c=t.slice(n.place,a+n.place);if(s[0]===0)if(s[1]&128)s=s.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new pt.default(s),this.s=new pt.default(c),this.recoveryParam=null,!0};function Dk(e,t){if(t<128){e.push(t);return}var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(r|128);--r;)e.push(t>>>(r<<3)&255);e.push(t)}VS.prototype.toDER=function(t){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=RL(r),n=RL(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];Dk(i,r.length),i=i.concat(r),i.push(2),Dk(i,n.length);var o=i.concat(n),s=[48];return Dk(s,o.length),s=s.concat(o),Zo.encode(s,t)};var Gde=function(){throw new Error("unsupported")},KL=Zo.assert;function Bs(e){if(!(this instanceof Bs))return new Bs(e);typeof e=="string"&&(KL(Object.prototype.hasOwnProperty.call(US,e),"Unknown curve "+e),e=US[e]),e instanceof US.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var $de=Bs;Bs.prototype.keyPair=function(t){return new Lk(this,t)};Bs.prototype.keyFromPrivate=function(t,r){return Lk.fromPrivate(this,t,r)};Bs.prototype.keyFromPublic=function(t,r){return Lk.fromPublic(this,t,r)};Bs.prototype.genKeyPair=function(t){t||(t={});for(var r=new VL({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||Gde(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new pt.default(2));;){var o=new pt.default(r.generate(n));if(!(o.cmp(i)>0))return o.iaddn(1),this.keyFromPrivate(o)}};Bs.prototype._truncateToN=function(t,r){var n=t.byteLength()*8-this.n.bitLength();return n>0&&(t=t.ushrn(n)),!r&&t.cmp(this.n)>=0?t.sub(this.n):t};Bs.prototype.sign=function(t,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),t=this._truncateToN(new pt.default(t,16));for(var o=this.n.byteLength(),s=r.getPrivate().toArray("be",o),a=t.toArray("be",o),c=new VL({hash:this.hash,entropy:s,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),u=this.n.sub(new pt.default(1)),h=0;;h++){var f=i.k?i.k(h):new pt.default(c.generate(this.n.byteLength()));if(f=this._truncateToN(f,!0),!(f.cmpn(1)<=0||f.cmp(u)>=0)){var m=this.g.mul(f);if(!m.isInfinity()){var b=m.getX(),w=b.umod(this.n);if(w.cmpn(0)!==0){var S=f.invm(this.n).mul(w.mul(r.getPrivate()).iadd(t));if(S=S.umod(this.n),S.cmpn(0)!==0){var P=(m.getY().isOdd()?1:0)|(b.cmp(w)!==0?2:0);return i.canonical&&S.cmp(this.nh)>0&&(S=this.n.sub(S),P^=1),new KS({r:w,s:S,recoveryParam:P})}}}}}};Bs.prototype.verify=function(t,r,n,i){t=this._truncateToN(new pt.default(t,16)),n=this.keyFromPublic(n,i),r=new KS(r,"hex");var o=r.r,s=r.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a=s.invm(this.n),c=a.mul(t).umod(this.n),u=a.mul(o).umod(this.n),h;return this.curve._maxwellTrick?(h=this.g.jmulAdd(c,n.getPublic(),u),h.isInfinity()?!1:h.eqXToP(o)):(h=this.g.mulAdd(c,n.getPublic(),u),h.isInfinity()?!1:h.getX().umod(this.n).cmp(o)===0)};Bs.prototype.recoverPubKey=function(e,t,r,n){KL((3&r)===r,"The recovery param is more than two bits"),t=new KS(t,n);var i=this.n,o=new pt.default(e),s=t.r,a=t.s,c=r&1,u=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");u?s=this.curve.pointFromX(s.add(this.curve.n),c):s=this.curve.pointFromX(s,c);var h=t.r.invm(i),f=i.sub(o).mul(h).umod(i),m=a.mul(h).umod(i);return this.g.mulAdd(f,s,m)};Bs.prototype.getKeyRecoveryParam=function(e,t,r,n){if(t=new KS(t,n),t.recoveryParam!==null)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch{continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var Yde=Ip(function(e,t){"use strict";var r=t;r.version="6.5.4",r.utils=Zo,r.rand=function(){throw new Error("unsupported")},r.curve=OS,r.curves=US,r.ec=$de,r.eddsa=null}),FL=Yde.ec;var Mr=re(Jn());var qL=re(Ji());l();d();var HL="signing-key/5.7.0";var Kk=new qL.Logger(HL),Vk=null;function Ac(){return Vk||(Vk=new FL("secp256k1")),Vk}var Ns=class{constructor(t){Be(this,"curve","secp256k1"),Be(this,"privateKey",(0,Mr.hexlify)(t)),(0,Mr.hexDataLength)(this.privateKey)!==32&&Kk.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");let r=Ac().keyFromPrivate((0,Mr.arrayify)(this.privateKey));Be(this,"publicKey","0x"+r.getPublic(!1,"hex")),Be(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),Be(this,"_isSigningKey",!0)}_addPoint(t){let r=Ac().keyFromPublic((0,Mr.arrayify)(this.publicKey)),n=Ac().keyFromPublic((0,Mr.arrayify)(t));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(t){let r=Ac().keyFromPrivate((0,Mr.arrayify)(this.privateKey)),n=(0,Mr.arrayify)(t);n.length!==32&&Kk.throwArgumentError("bad digest length","digest",t);let i=r.sign(n,{canonical:!0});return(0,Mr.splitSignature)({recoveryParam:i.recoveryParam,r:(0,Mr.hexZeroPad)("0x"+i.r.toString(16),32),s:(0,Mr.hexZeroPad)("0x"+i.s.toString(16),32)})}computeSharedSecret(t){let r=Ac().keyFromPrivate((0,Mr.arrayify)(this.privateKey)),n=Ac().keyFromPublic((0,Mr.arrayify)(Fk(t)));return(0,Mr.hexZeroPad)("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(t){return!!(t&&t._isSigningKey)}};function jL(e,t){let r=(0,Mr.splitSignature)(t),n={r:(0,Mr.arrayify)(r.r),s:(0,Mr.arrayify)(r.s)};return"0x"+Ac().recoverPubKey((0,Mr.arrayify)(e),n,r.recoveryParam).encode("hex",!1)}function Fk(e,t){let r=(0,Mr.arrayify)(e);if(r.length===32){let n=new Ns(r);return t?"0x"+Ac().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}else{if(r.length===33)return t?(0,Mr.hexlify)(r):"0x"+Ac().keyFromPublic(r).getPublic(!1,"hex");if(r.length===65)return t?"0x"+Ac().keyFromPublic(r).getPublic(!0,"hex"):(0,Mr.hexlify)(r)}return Kk.throwArgumentError("invalid public or private key","key","[REDACTED]")}var Po=re(Ck());l();d();var dt=re(Jn());var FS=re(Ji());l();d();var WL="transactions/5.7.0";var Hi=new FS.Logger(WL),zL;(function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"})(zL||(zL={}));function qk(e){return e==="0x"?null:di(e)}function Fi(e){return e==="0x"?wk:ur.from(e)}var Zde=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],Jde={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function Ec(e){let t=Fk(e);return di((0,dt.hexDataSlice)(dr((0,dt.hexDataSlice)(t,1)),12))}function jk(e,t){return Ec(jL((0,dt.arrayify)(e),t))}function Jo(e,t){let r=(0,dt.stripZeros)(ur.from(e).toHexString());return r.length>32&&Hi.throwArgumentError("invalid length for "+t,"transaction:"+t,e),r}function Hk(e,t){return{address:di(e),storageKeys:(t||[]).map((r,n)=>((0,dt.hexDataLength)(r)!==32&&Hi.throwArgumentError("invalid access list storageKey",`accessList[${e}:${n}]`,r),r.toLowerCase()))}}function Wk(e){if(Array.isArray(e))return e.map((r,n)=>Array.isArray(r)?(r.length>2&&Hi.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,r),Hk(r[0],r[1])):Hk(r.address,r.storageKeys));let t=Object.keys(e).map(r=>{let n=e[r].reduce((i,o)=>(i[o]=!0,i),{});return Hk(r,Object.keys(n).sort())});return t.sort((r,n)=>r.address.localeCompare(n.address)),t}function GL(e){return Wk(e).map(t=>[t.address,t.storageKeys])}function $L(e,t){if(e.gasPrice!=null){let n=ur.from(e.gasPrice),i=ur.from(e.maxFeePerGas||0);n.eq(i)||Hi.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:i})}let r=[Jo(e.chainId||0,"chainId"),Jo(e.nonce||0,"nonce"),Jo(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Jo(e.maxFeePerGas||0,"maxFeePerGas"),Jo(e.gasLimit||0,"gasLimit"),e.to!=null?di(e.to):"0x",Jo(e.value||0,"value"),e.data||"0x",GL(e.accessList||[])];if(t){let n=(0,dt.splitSignature)(t);r.push(Jo(n.recoveryParam,"recoveryParam")),r.push((0,dt.stripZeros)(n.r)),r.push((0,dt.stripZeros)(n.s))}return(0,dt.hexConcat)(["0x02",_0(r)])}function YL(e,t){let r=[Jo(e.chainId||0,"chainId"),Jo(e.nonce||0,"nonce"),Jo(e.gasPrice||0,"gasPrice"),Jo(e.gasLimit||0,"gasLimit"),e.to!=null?di(e.to):"0x",Jo(e.value||0,"value"),e.data||"0x",GL(e.accessList||[])];if(t){let n=(0,dt.splitSignature)(t);r.push(Jo(n.recoveryParam,"recoveryParam")),r.push((0,dt.stripZeros)(n.r)),r.push((0,dt.stripZeros)(n.s))}return(0,dt.hexConcat)(["0x01",_0(r)])}function Xde(e,t){YR(e,Jde);let r=[];Zde.forEach(function(s){let a=e[s.name]||[],c={};s.numeric&&(c.hexPad="left"),a=(0,dt.arrayify)((0,dt.hexlify)(a,c)),s.length&&a.length!==s.length&&a.length>0&&Hi.throwArgumentError("invalid length for "+s.name,"transaction:"+s.name,a),s.maxLength&&(a=(0,dt.stripZeros)(a),a.length>s.maxLength&&Hi.throwArgumentError("invalid length for "+s.name,"transaction:"+s.name,a)),r.push((0,dt.hexlify)(a))});let n=0;if(e.chainId!=null?(n=e.chainId,typeof n!="number"&&Hi.throwArgumentError("invalid transaction.chainId","transaction",e)):t&&!(0,dt.isBytesLike)(t)&&t.v>28&&(n=Math.floor((t.v-35)/2)),n!==0&&(r.push((0,dt.hexlify)(n)),r.push("0x"),r.push("0x")),!t)return _0(r);let i=(0,dt.splitSignature)(t),o=27+i.recoveryParam;return n!==0?(r.pop(),r.pop(),r.pop(),o+=n*2+8,i.v>28&&i.v!==o&&Hi.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t)):i.v!==o&&Hi.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t),r.push((0,dt.hexlify)(o)),r.push((0,dt.stripZeros)((0,dt.arrayify)(i.r))),r.push((0,dt.stripZeros)((0,dt.arrayify)(i.s))),_0(r)}function zk(e,t){if(e.type==null||e.type===0)return e.accessList!=null&&Hi.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",e),Xde(e,t);switch(e.type){case 1:return YL(e,t);case 2:return $L(e,t);default:break}return Hi.throwError(`unsupported transaction type: ${e.type}`,FS.Logger.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:e.type})}function ZL(e,t,r){try{let n=Fi(t[0]).toNumber();if(n!==0&&n!==1)throw new Error("bad recid");e.v=n}catch{Hi.throwArgumentError("invalid v for transaction type: 1","v",t[0])}e.r=(0,dt.hexZeroPad)(t[1],32),e.s=(0,dt.hexZeroPad)(t[2],32);try{let n=dr(r(e));e.from=jk(n,{r:e.r,s:e.s,recoveryParam:e.v})}catch{}}function Qde(e){let t=n1(e.slice(1));t.length!==9&&t.length!==12&&Hi.throwArgumentError("invalid component count for transaction type: 2","payload",(0,dt.hexlify)(e));let r=Fi(t[2]),n=Fi(t[3]),i={type:2,chainId:Fi(t[0]).toNumber(),nonce:Fi(t[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:Fi(t[4]),to:qk(t[5]),value:Fi(t[6]),data:t[7],accessList:Wk(t[8])};return t.length===9||(i.hash=dr(e),ZL(i,t.slice(9),$L)),i}function ehe(e){let t=n1(e.slice(1));t.length!==8&&t.length!==11&&Hi.throwArgumentError("invalid component count for transaction type: 1","payload",(0,dt.hexlify)(e));let r={type:1,chainId:Fi(t[0]).toNumber(),nonce:Fi(t[1]).toNumber(),gasPrice:Fi(t[2]),gasLimit:Fi(t[3]),to:qk(t[4]),value:Fi(t[5]),data:t[6],accessList:Wk(t[7])};return t.length===8||(r.hash=dr(e),ZL(r,t.slice(8),YL)),r}function the(e){let t=n1(e);t.length!==9&&t.length!==6&&Hi.throwArgumentError("invalid raw transaction","rawTransaction",e);let r={nonce:Fi(t[0]).toNumber(),gasPrice:Fi(t[1]),gasLimit:Fi(t[2]),to:qk(t[3]),value:Fi(t[4]),data:t[5],chainId:0};if(t.length===6)return r;try{r.v=ur.from(t[6]).toNumber()}catch{return r}if(r.r=(0,dt.hexZeroPad)(t[7],32),r.s=(0,dt.hexZeroPad)(t[8],32),ur.from(r.r).isZero()&&ur.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27,i=t.slice(0,6);r.chainId!==0&&(i.push((0,dt.hexlify)(r.chainId)),i.push("0x"),i.push("0x"),n-=r.chainId*2+8);let o=dr(_0(i));try{r.from=jk(o,{r:(0,dt.hexlify)(r.r),s:(0,dt.hexlify)(r.s),recoveryParam:n})}catch{}r.hash=dr(e)}return r.type=null,r}function uVe(e){let t=(0,dt.arrayify)(e);if(t[0]>127)return the(t);switch(t[0]){case 1:return ehe(t);case 2:return Qde(t);default:break}return Hi.throwError(`unsupported transaction type: ${t[0]}`,FS.Logger.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:t[0]})}l();d();l();d();var XL=re(Ji());l();d();var JL="wordlists/5.7.0";var rhe=!1,nhe=new XL.Logger(JL),kp=class e{constructor(t){nhe.checkAbstract(new.target,e),Be(this,"locale",t)}split(t){return t.toLowerCase().split(/ +/g)}join(t){return t.join(" ")}static check(t){let r=[];for(let n=0;n<2048;n++){let i=t.getWord(n);if(n!==t.getWordIndex(i))return"0x";r.push(i)}return vp(r.join(`
`)+`
`)}static register(t,r){if(r||(r=t.locale),rhe)try{let n=self;n._ethers&&n._ethers.wordlists&&(n._ethers.wordlists[r]||Be(n._ethers.wordlists,r,t))}catch{}}};l();d();l();d();var ihe="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo",vb=null;function QL(e){if(vb==null&&(vb=ihe.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),kp.check(e)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw vb=null,new Error("BIP39 Wordlist for en (English) FAILED")}var Gk=class extends kp{constructor(){super("en")}getWord(t){return QL(this),vb[t]}getWordIndex(t){return QL(this),vb.indexOf(t)}},$k=new Gk;kp.register($k);var HS={en:$k};var rV=re(Ji());l();d();var eV="hdnode/5.7.0";var jS=new rV.Logger(eV),ohe=ur.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),she=ti("Bitcoin seed"),Ab=2147483648;function nV(e){return(1<<e)-1<<8-e}function ahe(e){return(1<<e)-1}function qS(e){return(0,Jt.hexZeroPad)((0,Jt.hexlify)(e),32)}function tV(e){return Bk.encode((0,Jt.concat)([e,(0,Jt.hexDataSlice)((0,Po.sha256)((0,Po.sha256)(e)),0,4)]))}function Yk(e){if(e==null)return HS.en;if(typeof e=="string"){let t=HS[e];return t==null&&jS.throwArgumentError("unknown locale","wordlist",e),t}return e}var Tp={},uh="m/44'/60'/0'/0/0",rl=class e{constructor(t,r,n,i,o,s,a,c){if(t!==Tp)throw new Error("HDNode constructor cannot be called directly");if(r){let u=new Ns(r);Be(this,"privateKey",u.privateKey),Be(this,"publicKey",u.compressedPublicKey)}else Be(this,"privateKey",null),Be(this,"publicKey",(0,Jt.hexlify)(n));Be(this,"parentFingerprint",i),Be(this,"fingerprint",(0,Jt.hexDataSlice)((0,Po.ripemd160)((0,Po.sha256)(this.publicKey)),0,4)),Be(this,"address",Ec(this.publicKey)),Be(this,"chainCode",o),Be(this,"index",s),Be(this,"depth",a),c==null?(Be(this,"mnemonic",null),Be(this,"path",null)):typeof c=="string"?(Be(this,"mnemonic",null),Be(this,"path",c)):(Be(this,"mnemonic",c),Be(this,"path",c.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return tV((0,Jt.concat)([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",(0,Jt.hexlify)(this.depth),this.parentFingerprint,(0,Jt.hexZeroPad)((0,Jt.hexlify)(this.index),4),this.chainCode,this.privateKey!=null?(0,Jt.concat)(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new e(Tp,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(t){if(t>4294967295)throw new Error("invalid index - "+String(t));let r=this.path;r&&(r+="/"+(t&~Ab));let n=new Uint8Array(37);if(t&Ab){if(!this.privateKey)throw new Error("cannot derive child of neutered node");n.set((0,Jt.arrayify)(this.privateKey),1),r&&(r+="'")}else n.set((0,Jt.arrayify)(this.publicKey));for(let f=24;f>=0;f-=8)n[33+(f>>3)]=t>>24-f&255;let i=(0,Jt.arrayify)((0,Po.computeHmac)(Po.SupportedAlgorithm.sha512,this.chainCode,n)),o=i.slice(0,32),s=i.slice(32),a=null,c=null;this.privateKey?a=qS(ur.from(o).add(this.privateKey).mod(ohe)):c=new Ns((0,Jt.hexlify)(o))._addPoint(this.publicKey);let u=r,h=this.mnemonic;return h&&(u=Object.freeze({phrase:h.phrase,path:r,locale:h.locale||"en"})),new e(Tp,a,c,this.fingerprint,qS(s),t,this.depth+1,u)}derivePath(t){let r=t.split("/");if(r.length===0||r[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+t);r[0]==="m"&&r.shift();let n=this;for(let i=0;i<r.length;i++){let o=r[i];if(o.match(/^[0-9]+'$/)){let s=parseInt(o.substring(0,o.length-1));if(s>=Ab)throw new Error("invalid path index - "+o);n=n._derive(Ab+s)}else if(o.match(/^[0-9]+$/)){let s=parseInt(o);if(s>=Ab)throw new Error("invalid path index - "+o);n=n._derive(s)}else throw new Error("invalid path component - "+o)}return n}static _fromSeed(t,r){let n=(0,Jt.arrayify)(t);if(n.length<16||n.length>64)throw new Error("invalid seed");let i=(0,Jt.arrayify)((0,Po.computeHmac)(Po.SupportedAlgorithm.sha512,she,n));return new e(Tp,qS(i.slice(0,32)),null,"0x00000000",qS(i.slice(32)),0,0,r)}static fromMnemonic(t,r,n){return n=Yk(n),t=Eb(Zk(t,n),n),e._fromSeed(che(t,r),{phrase:t,path:"m",locale:n.locale})}static fromSeed(t){return e._fromSeed(t,null)}static fromExtendedKey(t){let r=Bk.decode(t);(r.length!==82||tV(r.slice(0,78))!==t)&&jS.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");let n=r[4],i=(0,Jt.hexlify)(r.slice(5,9)),o=parseInt((0,Jt.hexlify)(r.slice(9,13)).substring(2),16),s=(0,Jt.hexlify)(r.slice(13,45)),a=r.slice(45,78);switch((0,Jt.hexlify)(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new e(Tp,null,(0,Jt.hexlify)(a),i,s,o,n,null);case"0x0488ade4":case"0x04358394 ":if(a[0]!==0)break;return new e(Tp,(0,Jt.hexlify)(a.slice(1)),null,i,s,o,n,null)}return jS.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}};function che(e,t){t||(t="");let r=ti("mnemonic"+t,ka.NFKD);return ah(ti(e,ka.NFKD),r,2048,64,"sha512")}function Zk(e,t){t=Yk(t),jS.checkNormalize();let r=t.split(e);if(r.length%3!==0)throw new Error("invalid mnemonic");let n=(0,Jt.arrayify)(new Uint8Array(Math.ceil(11*r.length/8))),i=0;for(let u=0;u<r.length;u++){let h=t.getWordIndex(r[u].normalize("NFKD"));if(h===-1)throw new Error("invalid mnemonic");for(let f=0;f<11;f++)h&1<<10-f&&(n[i>>3]|=1<<7-i%8),i++}let o=32*r.length/3,s=r.length/3,a=nV(s);if(((0,Jt.arrayify)((0,Po.sha256)(n.slice(0,o/8)))[0]&a)!==(n[n.length-1]&a))throw new Error("invalid checksum");return(0,Jt.hexlify)(n.slice(0,o/8))}function Eb(e,t){if(t=Yk(t),e=(0,Jt.arrayify)(e),e.length%4!==0||e.length<16||e.length>32)throw new Error("invalid entropy");let r=[0],n=11;for(let s=0;s<e.length;s++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=e[s],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=e[s]>>8-n,r.push(e[s]&ahe(8-n)),n+=3);let i=e.length/4,o=(0,Jt.arrayify)((0,Po.sha256)(e))[0]&nV(i);return r[r.length-1]<<=i,r[r.length-1]|=o>>8-i,t.join(r.map(s=>t.getWord(s)))}l();d();l();d();var sV=re(Jn()),Xk=re(Ji());l();d();var iV="random/5.7.0";var Jk=new Xk.Logger(iV);function uhe(){if(typeof self<"u"||typeof self<"u"||typeof self<"u")return self;throw new Error("unable to locate global object")}var oV=uhe(),WS=oV.crypto||oV.msCrypto;(!WS||!WS.getRandomValues)&&(Jk.warn("WARNING: Missing strong random number source"),WS={getRandomValues:function(e){return Jk.throwError("no secure random source avaialble",Xk.Logger.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function nl(e){(e<=0||e>1024||e%1||e!=e)&&Jk.throwArgumentError("invalid length","length",e);let t=new Uint8Array(e);return WS.getRandomValues(t),(0,sV.arrayify)(t)}l();d();l();d();var tT=re(eT());var rT=re(Jn());var uV=re(Ji());l();d();var zS="json-wallets/5.7.0";l();d();var Pp=re(Jn());function _u(e){return typeof e=="string"&&e.substring(0,2)!=="0x"&&(e="0x"+e),(0,Pp.arrayify)(e)}function Bp(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}function Ib(e){return typeof e=="string"?ti(e,ka.NFKC):(0,Pp.arrayify)(e)}function tn(e,t){let r=e,n=t.toLowerCase().split("/");for(let i=0;i<n.length;i++){let o=null;for(let s in r)if(s.toLowerCase()===n[i]){o=r[s];break}if(o===null)return null;r=o}return r}function cV(e){let t=(0,Pp.arrayify)(e);t[6]=t[6]&15|64,t[8]=t[8]&63|128;let r=(0,Pp.hexlify)(t);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}var fhe=new uV.Logger(zS),nT=class extends Xf{isCrowdsaleAccount(t){return!!(t&&t._isCrowdsaleAccount)}};function iT(e,t){let r=JSON.parse(e);t=Ib(t);let n=di(tn(r,"ethaddr")),i=_u(tn(r,"encseed"));(!i||i.length%16!==0)&&fhe.throwArgumentError("invalid encseed","json",e);let o=(0,rT.arrayify)(ah(t,t,2e3,32,"sha256")).slice(0,16),s=i.slice(0,16),a=i.slice(16),c=new tT.default.ModeOfOperation.cbc(o,s),u=tT.default.padding.pkcs7.strip((0,rT.arrayify)(c.decrypt(a))),h="";for(let b=0;b<u.length;b++)h+=String.fromCharCode(u[b]);let f=ti(h),m=dr(f);return new nT({_isCrowdsaleAccount:!0,address:n,privateKey:m})}l();d();function oT(e){let t=null;try{t=JSON.parse(e)}catch{return!1}return t.encseed&&t.ethaddr}function sT(e){let t=null;try{t=JSON.parse(e)}catch{return!1}return!(!t.version||parseInt(t.version)!==t.version||parseInt(t.version)!==3)}l();d();var Cu=re(eT()),$S=re(lV());var rn=re(Jn());var GS=re(Ji());var lhe=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(f){s(f)}}function c(h){try{u(n.throw(h))}catch(f){s(f)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},cT=new GS.Logger(zS);function dV(e){return e!=null&&e.mnemonic&&e.mnemonic.phrase}var uT=class extends Xf{isKeystoreAccount(t){return!!(t&&t._isKeystoreAccount)}};function dhe(e,t,r){if(tn(e,"crypto/cipher")==="aes-128-ctr"){let i=_u(tn(e,"crypto/cipherparams/iv")),o=new Cu.default.Counter(i),s=new Cu.default.ModeOfOperation.ctr(t,o);return(0,rn.arrayify)(s.decrypt(r))}return null}function hV(e,t){let r=_u(tn(e,"crypto/ciphertext"));if((0,rn.hexlify)(dr((0,rn.concat)([t.slice(16,32),r]))).substring(2)!==tn(e,"crypto/mac").toLowerCase())throw new Error("invalid password");let i=dhe(e,t.slice(0,16),r);i||cT.throwError("unsupported cipher",GS.Logger.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});let o=t.slice(32,64),s=Ec(i);if(e.address){let c=e.address.toLowerCase();if(c.substring(0,2)!=="0x"&&(c="0x"+c),di(c)!==s)throw new Error("address mismatch")}let a={_isKeystoreAccount:!0,address:s,privateKey:(0,rn.hexlify)(i)};if(tn(e,"x-ethers/version")==="0.1"){let c=_u(tn(e,"x-ethers/mnemonicCiphertext")),u=_u(tn(e,"x-ethers/mnemonicCounter")),h=new Cu.default.Counter(u),f=new Cu.default.ModeOfOperation.ctr(o,h),m=tn(e,"x-ethers/path")||uh,b=tn(e,"x-ethers/locale")||"en",w=(0,rn.arrayify)(f.decrypt(c));try{let S=Eb(w,b),P=rl.fromMnemonic(S,null,b).derivePath(m);if(P.privateKey!=a.privateKey)throw new Error("mnemonic mismatch");a.mnemonic=P.mnemonic}catch(S){if(S.code!==GS.Logger.errors.INVALID_ARGUMENT||S.argument!=="wordlist")throw S}}return new uT(a)}function pV(e,t,r,n,i){return(0,rn.arrayify)(ah(e,t,r,n,i))}function hhe(e,t,r,n,i){return Promise.resolve(pV(e,t,r,n,i))}function yV(e,t,r,n,i){let o=Ib(t),s=tn(e,"crypto/kdf");if(s&&typeof s=="string"){let a=function(c,u){return cT.throwArgumentError("invalid key-derivation function parameters",c,u)};if(s.toLowerCase()==="scrypt"){let c=_u(tn(e,"crypto/kdfparams/salt")),u=parseInt(tn(e,"crypto/kdfparams/n")),h=parseInt(tn(e,"crypto/kdfparams/r")),f=parseInt(tn(e,"crypto/kdfparams/p"));(!u||!h||!f)&&a("kdf",s),u&u-1&&a("N",u);let m=parseInt(tn(e,"crypto/kdfparams/dklen"));return m!==32&&a("dklen",m),n(o,c,u,h,f,64,i)}else if(s.toLowerCase()==="pbkdf2"){let c=_u(tn(e,"crypto/kdfparams/salt")),u=null,h=tn(e,"crypto/kdfparams/prf");h==="hmac-sha256"?u="sha256":h==="hmac-sha512"?u="sha512":a("prf",h);let f=parseInt(tn(e,"crypto/kdfparams/c")),m=parseInt(tn(e,"crypto/kdfparams/dklen"));return m!==32&&a("dklen",m),r(o,c,f,m,u)}}return cT.throwArgumentError("unsupported key-derivation function","kdf",s)}function mV(e,t){let r=JSON.parse(e),n=yV(r,t,pV,$S.default.syncScrypt);return hV(r,n)}function gV(e,t,r){return lhe(this,void 0,void 0,function*(){let n=JSON.parse(e),i=yield yV(n,t,hhe,$S.default.scrypt,r);return hV(n,i)})}function fT(e,t,r,n){try{if(di(e.address)!==Ec(e.privateKey))throw new Error("address/privateKey mismatch");if(dV(e)){let P=e.mnemonic;if(rl.fromMnemonic(P.phrase,null,P.locale).derivePath(P.path||uh).privateKey!=e.privateKey)throw new Error("mnemonic mismatch")}}catch(P){return Promise.reject(P)}typeof r=="function"&&!n&&(n=r,r={}),r||(r={});let i=(0,rn.arrayify)(e.privateKey),o=Ib(t),s=null,a=null,c=null;if(dV(e)){let P=e.mnemonic;s=(0,rn.arrayify)(Zk(P.phrase,P.locale||"en")),a=P.path||uh,c=P.locale||"en"}let u=r.client;u||(u="ethers.js");let h=null;r.salt?h=(0,rn.arrayify)(r.salt):h=nl(32);let f=null;if(r.iv){if(f=(0,rn.arrayify)(r.iv),f.length!==16)throw new Error("invalid iv")}else f=nl(16);let m=null;if(r.uuid){if(m=(0,rn.arrayify)(r.uuid),m.length!==16)throw new Error("invalid uuid")}else m=nl(16);let b=1<<17,w=8,S=1;return r.scrypt&&(r.scrypt.N&&(b=r.scrypt.N),r.scrypt.r&&(w=r.scrypt.r),r.scrypt.p&&(S=r.scrypt.p)),$S.default.scrypt(o,h,b,w,S,64,n).then(P=>{P=(0,rn.arrayify)(P);let N=P.slice(0,16),O=P.slice(16,32),C=P.slice(32,64),L=new Cu.default.Counter(f),V=new Cu.default.ModeOfOperation.ctr(N,L),j=(0,rn.arrayify)(V.encrypt(i)),$=dr((0,rn.concat)([O,j])),H={address:e.address.substring(2).toLowerCase(),id:cV(m),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:(0,rn.hexlify)(f).substring(2)},ciphertext:(0,rn.hexlify)(j).substring(2),kdf:"scrypt",kdfparams:{salt:(0,rn.hexlify)(h).substring(2),n:b,dklen:32,p:S,r:w},mac:$.substring(2)}};if(s){let Y=nl(16),B=new Cu.default.Counter(Y),p=new Cu.default.ModeOfOperation.ctr(C,B),g=(0,rn.arrayify)(p.encrypt(s)),x=new Date,A=x.getUTCFullYear()+"-"+Bp(x.getUTCMonth()+1,2)+"-"+Bp(x.getUTCDate(),2)+"T"+Bp(x.getUTCHours(),2)+"-"+Bp(x.getUTCMinutes(),2)+"-"+Bp(x.getUTCSeconds(),2)+".0Z";H["x-ethers"]={client:u,gethFilename:"UTC--"+A+"--"+H.address,mnemonicCounter:(0,rn.hexlify)(Y).substring(2),mnemonicCiphertext:(0,rn.hexlify)(g).substring(2),path:a,locale:c,version:"0.1"}}return JSON.stringify(H)})}function bV(e,t,r){if(oT(e)){r&&r(0);let n=iT(e,t);return r&&r(1),Promise.resolve(n)}return sT(e)?gV(e,t,r):Promise.reject(new Error("invalid JSON wallet"))}function xV(e,t){if(oT(e))return iT(e,t);if(sT(e))return mV(e,t);throw new Error("invalid JSON wallet")}var lT=re(Ji());l();d();var wV="wallet/5.7.0";var SV=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(f){s(f)}}function c(h){try{u(n.throw(h))}catch(f){s(f)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},_p=new lT.Logger(wV);function phe(e){return e!=null&&(0,Pa.isHexString)(e.privateKey,32)&&e.address!=null}function yhe(e){let t=e.mnemonic;return t&&t.phrase}var Cp=class e extends gb{constructor(t,r){if(super(),phe(t)){let n=new Ns(t.privateKey);if(Be(this,"_signingKey",()=>n),Be(this,"address",Ec(this.publicKey)),this.address!==di(t.address)&&_p.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),yhe(t)){let i=t.mnemonic;Be(this,"_mnemonic",()=>({phrase:i.phrase,path:i.path||uh,locale:i.locale||"en"}));let o=this.mnemonic,s=rl.fromMnemonic(o.phrase,null,o.locale).derivePath(o.path);Ec(s.privateKey)!==this.address&&_p.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else Be(this,"_mnemonic",()=>null)}else{if(Ns.isSigningKey(t))t.curve!=="secp256k1"&&_p.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),Be(this,"_signingKey",()=>t);else{typeof t=="string"&&t.match(/^[0-9a-f]*$/i)&&t.length===64&&(t="0x"+t);let n=new Ns(t);Be(this,"_signingKey",()=>n)}Be(this,"_mnemonic",()=>null),Be(this,"address",Ec(this.publicKey))}r&&!BS.isProvider(r)&&_p.throwArgumentError("invalid provider","provider",r),Be(this,"provider",r||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(t){return new e(this,t)}signTransaction(t){return Bu(t).then(r=>{r.from!=null&&(di(r.from)!==this.address&&_p.throwArgumentError("transaction from address mismatch","transaction.from",t.from),delete r.from);let n=this._signingKey().signDigest(dr(zk(r)));return zk(r,n)})}signMessage(t){return SV(this,void 0,void 0,function*(){return(0,Pa.joinSignature)(this._signingKey().signDigest(Ik(t)))})}_signTypedData(t,r,n){return SV(this,void 0,void 0,function*(){let i=yield Ep.resolveNames(t,r,n,o=>(this.provider==null&&_p.throwError("cannot resolve ENS names without a provider",lT.Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:o}),this.provider.resolveName(o)));return(0,Pa.joinSignature)(this._signingKey().signDigest(Ep.hash(i.domain,r,i.value)))})}encrypt(t,r,n){if(typeof r=="function"&&!n&&(n=r,r={}),n&&typeof n!="function")throw new Error("invalid callback");return r||(r={}),fT(this,t,r,n)}static createRandom(t){let r=nl(16);t||(t={}),t.extraEntropy&&(r=(0,Pa.arrayify)((0,Pa.hexDataSlice)(dr((0,Pa.concat)([r,t.extraEntropy])),0,16)));let n=Eb(r,t.locale);return e.fromMnemonic(n,t.path,t.locale)}static fromEncryptedJson(t,r,n){return bV(t,r,n).then(i=>new e(i))}static fromEncryptedJsonSync(t,r){return new e(xV(t,r))}static fromMnemonic(t,r,n){return r||(r=uh),new e(rl.fromMnemonic(t,null,n).derivePath(r))}};var YS=class{addressTypes=["eip155"];generateKeypairFromPrivateKey(t){let r=t.fold(n=>new Cp(new Uint8Array(n)));return{publicKey:new Uint8Array(Buffer.from(r.publicKey.slice(2),"hex")),privateKey:new Uint8Array(Buffer.from(r.privateKey.slice(2),"hex"))}}generateKeypairFromSeed(t,r,n){let i=t.fold(o=>new Li(o));try{let o=i.derivePathType(n,r);return{publicKey:o.publicKey,privateKey:o.secretKey}}finally{i.cleanup()}}};l();d();l();d();l();d();l();d();l();d();function dT(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function mhe(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function vV(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function ghe(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");dT(e.outputLen),dT(e.blockLen)}function bhe(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function xhe(e,t){vV(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var whe={number:dT,bool:mhe,bytes:vV,hash:ghe,exists:bhe,output:xhe},Ba=whe;l();d();l();d();var She={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var AV=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),ZS=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);var vhe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!vhe)throw new Error("Non little-endian hardware is not supported");var kFe=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ahe(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Mp(e){if(typeof e=="string"&&(e=Ahe(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}var Np=class{clone(){return this._cloneInto()}};function fh(e){let t=n=>e().update(Mp(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function EV(e){let t=(n,i)=>e(i).update(Mp(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}function Ehe(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var JS=class extends Np{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=ZS(this.buffer)}update(t){Ba.exists(this);let{view:r,buffer:n,blockLen:i}=this;t=Mp(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=ZS(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ba.exists(this),Ba.output(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let f=s;f<i;f++)r[f]=0;Ehe(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=ZS(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,h[f],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};l();d();var XS=BigInt(4294967295),hT=BigInt(32);function IV(e,t=!1){return t?{h:Number(e&XS),l:Number(e>>hT&XS)}:{h:Number(e>>hT&XS)|0,l:Number(e&XS)|0}}function Ihe(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:o,l:s}=IV(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}var khe=(e,t)=>BigInt(e>>>0)<<hT|BigInt(t>>>0),The=(e,t,r)=>e>>>r,Phe=(e,t,r)=>e<<32-r|t>>>r,Bhe=(e,t,r)=>e>>>r|t<<32-r,_he=(e,t,r)=>e<<32-r|t>>>r,Che=(e,t,r)=>e<<64-r|t>>>r-32,Nhe=(e,t,r)=>e>>>r-32|t<<64-r,Mhe=(e,t)=>t,Dhe=(e,t)=>e,Ohe=(e,t,r)=>e<<r|t>>>32-r,Uhe=(e,t,r)=>t<<r|e>>>32-r,Rhe=(e,t,r)=>t<<r-32|e>>>64-r,Lhe=(e,t,r)=>e<<r-32|t>>>64-r;function Vhe(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}var Khe=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Fhe=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,Hhe=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),qhe=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,jhe=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),Whe=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0,zhe={fromBig:IV,split:Ihe,toBig:khe,shrSH:The,shrSL:Phe,rotrSH:Bhe,rotrSL:_he,rotrBH:Che,rotrBL:Nhe,rotr32H:Mhe,rotr32L:Dhe,rotlSH:Ohe,rotlSL:Uhe,rotlBH:Rhe,rotlBL:Lhe,add:Vhe,add3L:Khe,add3H:Fhe,add4L:Hhe,add4H:qhe,add5H:Whe,add5L:jhe},Le=zhe;var[Ghe,$he]=Le.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),il=new Uint32Array(80),ol=new Uint32Array(80),Dp=class extends JS{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:u,El:h,Fh:f,Fl:m,Gh:b,Gl:w,Hh:S,Hl:P}=this;return[t,r,n,i,o,s,a,c,u,h,f,m,b,w,S,P]}set(t,r,n,i,o,s,a,c,u,h,f,m,b,w,S,P){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=h|0,this.Fh=f|0,this.Fl=m|0,this.Gh=b|0,this.Gl=w|0,this.Hh=S|0,this.Hl=P|0}process(t,r){for(let C=0;C<16;C++,r+=4)il[C]=t.getUint32(r),ol[C]=t.getUint32(r+=4);for(let C=16;C<80;C++){let L=il[C-15]|0,V=ol[C-15]|0,j=Le.rotrSH(L,V,1)^Le.rotrSH(L,V,8)^Le.shrSH(L,V,7),$=Le.rotrSL(L,V,1)^Le.rotrSL(L,V,8)^Le.shrSL(L,V,7),H=il[C-2]|0,Y=ol[C-2]|0,B=Le.rotrSH(H,Y,19)^Le.rotrBH(H,Y,61)^Le.shrSH(H,Y,6),p=Le.rotrSL(H,Y,19)^Le.rotrBL(H,Y,61)^Le.shrSL(H,Y,6),g=Le.add4L($,p,ol[C-7],ol[C-16]),x=Le.add4H(g,j,B,il[C-7],il[C-16]);il[C]=x|0,ol[C]=g|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:u,Dl:h,Eh:f,El:m,Fh:b,Fl:w,Gh:S,Gl:P,Hh:N,Hl:O}=this;for(let C=0;C<80;C++){let L=Le.rotrSH(f,m,14)^Le.rotrSH(f,m,18)^Le.rotrBH(f,m,41),V=Le.rotrSL(f,m,14)^Le.rotrSL(f,m,18)^Le.rotrBL(f,m,41),j=f&b^~f&S,$=m&w^~m&P,H=Le.add5L(O,V,$,$he[C],ol[C]),Y=Le.add5H(H,N,L,j,Ghe[C],il[C]),B=H|0,p=Le.rotrSH(n,i,28)^Le.rotrBH(n,i,34)^Le.rotrBH(n,i,39),g=Le.rotrSL(n,i,28)^Le.rotrBL(n,i,34)^Le.rotrBL(n,i,39),x=n&o^n&a^o&a,A=i&s^i&c^s&c;N=S|0,O=P|0,S=b|0,P=w|0,b=f|0,w=m|0,{h:f,l:m}=Le.add(u|0,h|0,Y|0,B|0),u=a|0,h=c|0,a=o|0,c=s|0,o=n|0,s=i|0;let v=Le.add3L(B,g,A);n=Le.add3H(v,Y,p,x),i=v|0}({h:n,l:i}=Le.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=Le.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:c}=Le.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:h}=Le.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:f,l:m}=Le.add(this.Eh|0,this.El|0,f|0,m|0),{h:b,l:w}=Le.add(this.Fh|0,this.Fl|0,b|0,w|0),{h:S,l:P}=Le.add(this.Gh|0,this.Gl|0,S|0,P|0),{h:N,l:O}=Le.add(this.Hh|0,this.Hl|0,N|0,O|0),this.set(n,i,o,s,a,c,u,h,f,m,b,w,S,P,N,O)}roundClean(){il.fill(0),ol.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},pT=class extends Dp{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},yT=class extends Dp{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},mT=class extends Dp{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}},kV=fh(()=>new Dp),FFe=fh(()=>new pT),HFe=fh(()=>new yT),qFe=fh(()=>new mT);Iu.sha512Sync=(...e)=>kV(Iu.concatBytes(...e));var{getPublicKey:Yhe}=nS,gT=e=>{let t=Yhe(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}};var QS=class{addressTypes=["solana"];generateKeypairFromPrivateKey(t){let r=t.fold(n=>new $o.Account(new Uint8Array(n)));return{publicKey:r.publicKey.toBytes(),privateKey:r.secretKey}}generateKeypairFromSeed(t,r,n){let i=t.fold(o=>new Li(o));try{let o=i.derivePathType(n,r);switch(n){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":case"bip44Root":case"bip44":case"bip44Change":case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":case"bip44Sui":return{publicKey:o.publicKey,privateKey:o.secretKey};case"deprecated":{let s=gT(o.secretKey);return{publicKey:s.publicKey,privateKey:s.secretKey}}}}finally{i.cleanup()}}};l();d();l();d();l();d();l();d();l();d();l();d();l();d();function Zhe(e){if(e.length>=255)throw new TypeError("Alphabet too long");let t=new Uint8Array(256);for(let u=0;u<t.length;u++)t[u]=255;for(let u=0;u<e.length;u++){let h=e.charAt(u),f=h.charCodeAt(0);if(t[f]!==255)throw new TypeError(h+" is ambiguous");t[f]=u}let r=e.length,n=e.charAt(0),i=Math.log(r)/Math.log(256),o=Math.log(256)/Math.log(r);function s(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let h=0,f=0,m=0,b=u.length;for(;m!==b&&u[m]===0;)m++,h++;let w=(b-m)*o+1>>>0,S=new Uint8Array(w);for(;m!==b;){let O=u[m],C=0;for(let L=w-1;(O!==0||C<f)&&L!==-1;L--,C++)O+=256*S[L]>>>0,S[L]=O%r>>>0,O=O/r>>>0;if(O!==0)throw new Error("Non-zero carry");f=C,m++}let P=w-f;for(;P!==w&&S[P]===0;)P++;let N=n.repeat(h);for(;P<w;++P)N+=e.charAt(S[P]);return N}function a(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let h=0,f=0,m=0;for(;u[h]===n;)f++,h++;let b=(u.length-h)*i+1>>>0,w=new Uint8Array(b);for(;u[h];){let O=t[u.charCodeAt(h)];if(O===255)return;let C=0;for(let L=b-1;(O!==0||C<m)&&L!==-1;L--,C++)O+=r*w[L]>>>0,w[L]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");m=C,h++}let S=b-m;for(;S!==b&&w[S]===0;)S++;let P=new Uint8Array(f+(b-S)),N=f;for(;S!==b;)P[N++]=w[S++];return P}function c(u){let h=a(u);if(h)return h;throw new Error("Non-base"+r+" character")}return{encode:s,decodeUnsafe:a,decode:c}}var TV=Zhe;var Jhe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",bT=TV(Jhe);var Nu=e=>bT.encode(e),Ic=e=>bT.decode(e);l();d();function rr(e){return Uint8Array.from(atob(e),t=>t.charCodeAt(0))}var xT=8192;function xt(e){if(e.length<xT)return btoa(String.fromCharCode(...e));let t="";for(var r=0;r<e.length;r+=xT){let n=e.slice(r,r+xT);t+=String.fromCharCode(...n)}return btoa(t)}l();d();l();d();function Ms(e){let t=e.startsWith("0x")?e.slice(2):e,n=(t.length%2===0?t:`0${t}}`).match(/.{2}/g)?.map(i=>parseInt(i,16))??[];return Uint8Array.from(n)}function Mn(e){return e.reduce((t,r)=>t+r.toString(16).padStart(2,"0"),"")}l();d();l();d();function Op(e){let t=[],r=0;if(e===0)return[0];for(;e>0;)t[r]=e&127,(e>>=7)&&(t[r]|=128),r+=1;return t}function PV(e){let t=0,r=0,n=0;for(;;){let i=e[n];if(n+=1,t|=(i&127)<<r,!(i&128))break;r+=7}return{value:t,length:n}}var ev=class{constructor(t){this.bytePosition=0,this.dataView=new DataView(t.buffer)}shift(t){return this.bytePosition+=t,this}read8(){let t=this.dataView.getUint8(this.bytePosition);return this.shift(1),t}read16(){let t=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),t}read32(){let t=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),t}read64(){let t=this.read32(),n=this.read32().toString(16)+t.toString(16).padStart(8,"0");return BigInt("0x"+n).toString(10)}read128(){let t=BigInt(this.read64()),n=BigInt(this.read64()).toString(16)+t.toString(16).padStart(16,"0");return BigInt("0x"+n).toString(10)}read256(){let t=BigInt(this.read128()),n=BigInt(this.read128()).toString(16)+t.toString(16).padStart(32,"0");return BigInt("0x"+n).toString(10)}readBytes(t){let r=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,r,t);return this.shift(t),n}readULEB(){let t=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,t),{value:n,length:i}=PV(r);return this.shift(i),n}readVec(t){let r=this.readULEB(),n=[];for(let i=0;i<r;i++)n.push(t(this,i,r));return n}};l();d();l();d();function wT(e,t){switch(t){case"base58":return Nu(e);case"base64":return xt(e);case"hex":return Mn(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function kb(e,t=["<",">"]){let[r,n]=t,i=[],o="",s=0;for(let a=0;a<e.length;a++){let c=e[a];if(c===r&&s++,c===n&&s--,s===0&&c===","){i.push(o.trim()),o="";continue}o+=c}return i.push(o.trim()),i}var tv=class{constructor({initialSize:t=1024,maxSize:r=1/0,allocateSize:n=1024}={}){this.bytePosition=0,this.size=t,this.maxSize=r,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(t))}ensureSizeOrGrow(t){let r=this.bytePosition+t;if(r>this.size){let n=Math.min(this.maxSize,this.size+this.allocateSize);if(r>n)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${r}`);this.size=n;let i=new ArrayBuffer(this.size);new Uint8Array(i).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(i)}}shift(t){return this.bytePosition+=t,this}write8(t){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(t)),this.shift(1)}write16(t){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(t),!0),this.shift(2)}write32(t){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(t),!0),this.shift(4)}write64(t){return ST(BigInt(t),8).forEach(r=>this.write8(r)),this}write128(t){return ST(BigInt(t),16).forEach(r=>this.write8(r)),this}write256(t){return ST(BigInt(t),32).forEach(r=>this.write8(r)),this}writeULEB(t){return Op(t).forEach(r=>this.write8(r)),this}writeVec(t,r){return this.writeULEB(t.length),Array.from(t).forEach((n,i)=>r(this,n,i,t.length)),this}*[Symbol.iterator](){for(let t=0;t<this.bytePosition;t++)yield this.dataView.getUint8(t);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(t){return wT(this.toBytes(),t)}};function ST(e,t){let r=new Uint8Array(t),n=0;for(;e>0;)r[n]=Number(e%BigInt(256)),e=e/BigInt(256),n+=1;return r}var BV=e=>{throw TypeError(e)},_V=(e,t,r)=>t.has(e)||BV("Cannot "+r),_a=(e,t,r)=>(_V(e,t,"read from private field"),r?r.call(e):t.get(e)),nv=(e,t,r)=>t.has(e)?BV("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),iv=(e,t,r,n)=>(_V(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Up,Tb,rv,sl,Xhe=class CV{constructor(t){nv(this,Up),nv(this,Tb),this.name=t.name,this.read=t.read,this.serializedSize=t.serializedSize??(()=>null),iv(this,Up,t.write),iv(this,Tb,t.serialize??((r,n)=>{let i=new tv({initialSize:this.serializedSize(r)??void 0,...n});return _a(this,Up).call(this,r,i),i.toBytes()})),this.validate=t.validate??(()=>{})}write(t,r){this.validate(t),_a(this,Up).call(this,t,r)}serialize(t,r){return this.validate(t),new vT(this,_a(this,Tb).call(this,t,r))}parse(t){let r=new ev(t);return this.read(r)}fromHex(t){return this.parse(Ms(t))}fromBase58(t){return this.parse(Ic(t))}fromBase64(t){return this.parse(rr(t))}transform({name:t,input:r,output:n,validate:i}){return new CV({name:t??this.name,read:o=>n(this.read(o)),write:(o,s)=>_a(this,Up).call(this,r(o),s),serializedSize:o=>this.serializedSize(r(o)),serialize:(o,s)=>_a(this,Tb).call(this,r(o),s),validate:o=>{i?.(o),this.validate(r(o))}})}};Up=new WeakMap;Tb=new WeakMap;var kc=Xhe,Qhe=Symbol.for("@mysten/serialized-bcs");var vT=class{constructor(t,r){nv(this,rv),nv(this,sl),iv(this,rv,t),iv(this,sl,r)}get[Qhe](){return!0}toBytes(){return _a(this,sl)}toHex(){return Mn(_a(this,sl))}toBase64(){return xt(_a(this,sl))}toBase58(){return Nu(_a(this,sl))}parse(){return _a(this,rv).parse(_a(this,sl))}};rv=new WeakMap;sl=new WeakMap;function Pb({size:e,...t}){return new kc({...t,serializedSize:()=>e})}function ov({readMethod:e,writeMethod:t,...r}){return Pb({...r,read:n=>n[e](),write:(n,i)=>i[t](n),validate:n=>{if(n<0||n>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${n}. Expected value in range 0-${r.maxValue}`);r.validate?.(n)}})}function sv({readMethod:e,writeMethod:t,...r}){return Pb({...r,read:n=>n[e](),write:(n,i)=>i[t](BigInt(n)),validate:n=>{let i=BigInt(n);if(i<0||i>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${i}. Expected value in range 0-${r.maxValue}`);r.validate?.(i)}})}function NV({serialize:e,...t}){let r=new kc({...t,serialize:e,write:(n,i)=>{for(let o of r.serialize(n).toBytes())i.write8(o)}});return r}function MV({toBytes:e,fromBytes:t,...r}){return new kc({...r,read:n=>{let i=n.readULEB(),o=n.readBytes(i);return t(o)},write:(n,i)=>{let o=e(n);i.writeULEB(o.length);for(let s=0;s<o.length;s++)i.write8(o[s])},serialize:n=>{let i=e(n),o=Op(i.length),s=new Uint8Array(o.length+i.length);return s.set(o,0),s.set(i,o.length),s},validate:n=>{if(typeof n!="string")throw new TypeError(`Invalid ${r.name} value: ${n}. Expected string`);r.validate?.(n)}})}function DV(e){let t=null;function r(){return t||(t=e()),t}return new kc({name:"lazy",read:n=>r().read(n),serializedSize:n=>r().serializedSize(n),write:(n,i)=>r().write(n,i),serialize:(n,i)=>r().serialize(n,i).toBytes()})}l();d();var M={u8(e){return ov({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...e})},u16(e){return ov({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...e})},u32(e){return ov({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...e})},u64(e){return sv({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e})},u128(e){return sv({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e})},u256(e){return sv({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e})},bool(e){return Pb({name:"bool",size:1,read:t=>t.read8()===1,write:(t,r)=>r.write8(t?1:0),...e,validate:t=>{if(e?.validate?.(t),typeof t!="boolean")throw new TypeError(`Expected boolean, found ${typeof t}`)}})},uleb128(e){return NV({name:"uleb128",read:t=>t.readULEB(),serialize:t=>Uint8Array.from(Op(t)),...e})},bytes(e,t){return Pb({name:`bytes[${e}]`,size:e,read:r=>r.readBytes(e),write:(r,n)=>{let i=new Uint8Array(r);for(let o=0;o<e;o++)n.write8(i[o]??0)},...t,validate:r=>{if(t?.validate?.(r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==e)throw new TypeError(`Expected array of length ${e}, found ${r.length}`)}})},string(e){return MV({name:"string",toBytes:t=>new TextEncoder().encode(t),fromBytes:t=>new TextDecoder().decode(t),...e})},fixedArray(e,t,r){return new kc({name:`${t.name}[${e}]`,read:n=>{let i=new Array(e);for(let o=0;o<e;o++)i[o]=t.read(n);return i},write:(n,i)=>{for(let o of n)t.write(o,i)},...r,validate:n=>{if(r?.validate?.(n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==e)throw new TypeError(`Expected array of length ${e}, found ${n.length}`)}})},option(e){return M.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:t=>t==null?{None:!0}:{Some:t},output:t=>t.$kind==="Some"?t.Some:null})},vector(e,t){return new kc({name:`vector<${e.name}>`,read:r=>{let n=r.readULEB(),i=new Array(n);for(let o=0;o<n;o++)i[o]=e.read(r);return i},write:(r,n)=>{n.writeULEB(r.length);for(let i of r)e.write(i,n)},...t,validate:r=>{if(t?.validate?.(r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`)}})},tuple(e,t){return new kc({name:`(${e.map(r=>r.name).join(", ")})`,serializedSize:r=>{let n=0;for(let i=0;i<e.length;i++){let o=e[i].serializedSize(r[i]);if(o==null)return null;n+=o}return n},read:r=>{let n=[];for(let i of e)n.push(i.read(r));return n},write:(r,n)=>{for(let i=0;i<e.length;i++)e[i].write(r[i],n)},...t,validate:r=>{if(t?.validate?.(r),!Array.isArray(r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==e.length)throw new TypeError(`Expected array of length ${e.length}, found ${r.length}`)}})},struct(e,t,r){let n=Object.entries(t);return new kc({name:e,serializedSize:i=>{let o=0;for(let[s,a]of n){let c=a.serializedSize(i[s]);if(c==null)return null;o+=c}return o},read:i=>{let o={};for(let[s,a]of n)o[s]=a.read(i);return o},write:(i,o)=>{for(let[s,a]of n)a.write(i[s],o)},...r,validate:i=>{if(r?.validate?.(i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`)}})},enum(e,t,r){let n=Object.entries(t);return new kc({name:e,read:i=>{let o=i.readULEB(),s=n[o];if(!s)throw new TypeError(`Unknown value ${o} for enum ${e}`);let[a,c]=s;return{[a]:c?.read(i)??!0,$kind:a}},write:(i,o)=>{let[s,a]=Object.entries(i).filter(([c])=>Object.hasOwn(t,c))[0];for(let c=0;c<n.length;c++){let[u,h]=n[c];if(u===s){o.writeULEB(c),h?.write(a,o);return}}},...r,validate:i=>{if(r?.validate?.(i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`);let o=Object.keys(i).filter(a=>i[a]!==void 0&&Object.hasOwn(t,a));if(o.length!==1)throw new TypeError(`Expected object with one key, but found ${o.length} for type ${e}}`);let[s]=o;if(!Object.hasOwn(t,s))throw new TypeError(`Invalid enum variant ${s}`)}})},map(e,t){return M.vector(M.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:r=>[...r.entries()],output:r=>{let n=new Map;for(let[i,o]of r)n.set(i,o);return n}})},lazy(e){return DV(e)}};l();d();l();d();l();d();var al=32;function OV(e){return e0e(e)&&t0e(e)===al}function Tc(e,t=!1){let r=e.toLowerCase();return!t&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(al*2,"0")}`}function e0e(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}function t0e(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}l();d();var r0e=/^vector<(.+)>$/,n0e=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/,Bb=class e{static parseFromStr(t,r=!1){if(t==="address")return{address:null};if(t==="bool")return{bool:null};if(t==="u8")return{u8:null};if(t==="u16")return{u16:null};if(t==="u32")return{u32:null};if(t==="u64")return{u64:null};if(t==="u128")return{u128:null};if(t==="u256")return{u256:null};if(t==="signer")return{signer:null};let n=t.match(r0e);if(n)return{vector:e.parseFromStr(n[1],r)};let i=t.match(n0e);if(i)return{struct:{address:r?Tc(i[1]):i[1],module:i[2],name:i[3],typeParams:i[5]===void 0?[]:e.parseStructTypeArgs(i[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,r=!1){return kb(t).map(n=>e.parseFromStr(n,r))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${e.tagToString(t.vector)}>`;if("struct"in t){let r=t.struct,n=r.typeParams.map(e.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}};function i0e(e){return M.u64({name:"unsafe_u64",...e}).transform({input:t=>t,output:t=>Number(t)})}function o0e(e){return M.enum("Option",{None:null,Some:e})}var Dr=M.bytes(al).transform({validate:e=>{let t=typeof e=="string"?e:Mn(e);if(!t||!OV(Tc(t)))throw new Error(`Invalid Sui address ${t}`)},input:e=>typeof e=="string"?Ms(Tc(e)):e,output:e=>Tc(Mn(e))}),Xo=M.vector(M.u8()).transform({name:"ObjectDigest",input:e=>Ic(e),output:e=>Nu(new Uint8Array(e)),validate:e=>{if(Ic(e).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),Bo=M.struct("SuiObjectRef",{objectId:Dr,version:M.u64(),digest:Xo}),AT=M.struct("SharedObjectRef",{objectId:Dr,initialSharedVersion:M.u64(),mutable:M.bool()}),ET=M.enum("ObjectArg",{ImmOrOwnedObject:Bo,SharedObject:AT,Receiving:Bo}),IT=M.enum("CallArg",{Pure:M.struct("Pure",{bytes:M.vector(M.u8()).transform({input:e=>typeof e=="string"?rr(e):e,output:e=>xt(new Uint8Array(e))})}),Object:ET}),kT=M.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:M.lazy(()=>kT),struct:M.lazy(()=>NT),u16:null,u32:null,u256:null}),av=kT.transform({input:e=>typeof e=="string"?Bb.parseFromStr(e,!0):e,output:e=>Bb.tagToString(e)}),Ca=M.enum("Argument",{GasCoin:null,Input:M.u16(),Result:M.u16(),NestedResult:M.tuple([M.u16(),M.u16()])}),TT=M.struct("ProgrammableMoveCall",{package:Dr,module:M.string(),function:M.string(),typeArguments:M.vector(av),arguments:M.vector(Ca)}),PT=M.enum("Command",{MoveCall:TT,TransferObjects:M.struct("TransferObjects",{objects:M.vector(Ca),address:Ca}),SplitCoins:M.struct("SplitCoins",{coin:Ca,amounts:M.vector(Ca)}),MergeCoins:M.struct("MergeCoins",{destination:Ca,sources:M.vector(Ca)}),Publish:M.struct("Publish",{modules:M.vector(M.vector(M.u8()).transform({input:e=>typeof e=="string"?rr(e):e,output:e=>xt(new Uint8Array(e))})),dependencies:M.vector(Dr)}),MakeMoveVec:M.struct("MakeMoveVec",{type:o0e(av).transform({input:e=>e===null?{None:!0}:{Some:e},output:e=>e.Some??null}),elements:M.vector(Ca)}),Upgrade:M.struct("Upgrade",{modules:M.vector(M.vector(M.u8()).transform({input:e=>typeof e=="string"?rr(e):e,output:e=>xt(new Uint8Array(e))})),dependencies:M.vector(Dr),package:Dr,ticket:Ca})}),BT=M.struct("ProgrammableTransaction",{inputs:M.vector(IT),commands:M.vector(PT)}),_T=M.enum("TransactionKind",{ProgrammableTransaction:BT,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),CT=M.enum("TransactionExpiration",{None:null,Epoch:i0e()}),NT=M.struct("StructTag",{address:Dr,module:M.string(),name:M.string(),typeParams:M.vector(kT)}),MT=M.struct("GasData",{payment:M.vector(Bo),owner:Dr,price:M.u64(),budget:M.u64()}),DT=M.struct("TransactionDataV1",{kind:_T,sender:Dr,gasData:MT,expiration:CT}),OT=M.enum("TransactionData",{V1:DT}),UT=M.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),RT=M.enum("IntentVersion",{V0:null}),LT=M.enum("AppId",{Sui:null}),VT=M.struct("Intent",{scope:UT,version:RT,appId:LT});function KT(e){return M.struct(`IntentMessage<${e.name}>`,{intent:VT,value:e})}var FT=M.enum("CompressedSignature",{ED25519:M.fixedArray(64,M.u8()),Secp256k1:M.fixedArray(64,M.u8()),Secp256r1:M.fixedArray(64,M.u8()),ZkLogin:M.vector(M.u8())}),HT=M.enum("PublicKey",{ED25519:M.fixedArray(32,M.u8()),Secp256k1:M.fixedArray(33,M.u8()),Secp256r1:M.fixedArray(33,M.u8()),ZkLogin:M.vector(M.u8())}),qT=M.struct("MultiSigPkMap",{pubKey:HT,weight:M.u8()}),jT=M.struct("MultiSigPublicKey",{pk_map:M.vector(qT),threshold:M.u16()}),UV=M.struct("MultiSig",{sigs:M.vector(FT),bitmap:M.u16(),multisig_pk:jT}),s0e=M.vector(M.u8()).transform({input:e=>typeof e=="string"?rr(e):e,output:e=>xt(new Uint8Array(e))}),WT=M.struct("SenderSignedTransaction",{intentMessage:KT(OT),txSignatures:M.vector(s0e)}),RV=M.vector(WT,{name:"SenderSignedData"});l();d();var a0e=M.enum("PackageUpgradeError",{UnableToFetchPackage:M.struct("UnableToFetchPackage",{packageId:Dr}),NotAPackage:M.struct("NotAPackage",{objectId:Dr}),IncompatibleUpgrade:null,DigestDoesNotMatch:M.struct("DigestDoesNotMatch",{digest:M.vector(M.u8())}),UnknownUpgradePolicy:M.struct("UnknownUpgradePolicy",{policy:M.u8()}),PackageIDDoesNotMatch:M.struct("PackageIDDoesNotMatch",{packageId:Dr,ticketId:Dr})}),c0e=M.struct("ModuleId",{address:Dr,name:M.string()}),LV=M.struct("MoveLocation",{module:c0e,function:M.u16(),instruction:M.u16(),functionName:M.option(M.string())}),u0e=M.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:M.struct("IndexOutOfBounds",{idx:M.u16()}),SecondaryIndexOutOfBounds:M.struct("SecondaryIndexOutOfBounds",{resultIdx:M.u16(),secondaryIdx:M.u16()}),InvalidResultArity:M.struct("InvalidResultArity",{resultIdx:M.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),f0e=M.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),l0e=M.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:M.struct("MoveObjectTooBig",{objectSize:M.u64(),maxObjectSize:M.u64()}),MovePackageTooBig:M.struct("MovePackageTooBig",{objectSize:M.u64(),maxObjectSize:M.u64()}),CircularObjectOwnership:M.struct("CircularObjectOwnership",{object:Dr}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:M.option(LV),MoveAbort:M.tuple([LV,M.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:M.struct("CommandArgumentError",{argIdx:M.u16(),kind:u0e}),TypeArgumentError:M.struct("TypeArgumentError",{argumentIdx:M.u16(),kind:f0e}),UnusedValueWithoutDrop:M.struct("UnusedValueWithoutDrop",{resultIdx:M.u16(),secondaryIdx:M.u16()}),InvalidPublicFunctionReturnType:M.struct("InvalidPublicFunctionReturnType",{idx:M.u16()}),InvalidTransferObject:null,EffectsTooLarge:M.struct("EffectsTooLarge",{currentSize:M.u64(),maxSize:M.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:M.struct("PackageUpgradeError",{upgradeError:a0e}),WrittenObjectsTooLarge:M.struct("WrittenObjectsTooLarge",{currentSize:M.u64(),maxSize:M.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:M.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:M.vector(Dr)}),AddressDeniedForCoin:M.struct("AddressDeniedForCoin",{address:Dr,coinType:M.string()}),CoinTypeGlobalPause:M.struct("CoinTypeGlobalPause",{coinType:M.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),VV=M.enum("ExecutionStatus",{Success:null,Failed:M.struct("ExecutionFailed",{error:l0e,command:M.option(M.u64())})}),KV=M.struct("GasCostSummary",{computationCost:M.u64(),storageCost:M.u64(),storageRebate:M.u64(),nonRefundableStorageFee:M.u64()}),Rp=M.enum("Owner",{AddressOwner:Dr,ObjectOwner:Dr,Shared:M.struct("Shared",{initialSharedVersion:M.u64()}),Immutable:null}),d0e=M.struct("TransactionEffectsV1",{status:VV,executedEpoch:M.u64(),gasUsed:KV,modifiedAtVersions:M.vector(M.tuple([Dr,M.u64()])),sharedObjects:M.vector(Bo),transactionDigest:Xo,created:M.vector(M.tuple([Bo,Rp])),mutated:M.vector(M.tuple([Bo,Rp])),unwrapped:M.vector(M.tuple([Bo,Rp])),deleted:M.vector(Bo),unwrappedThenDeleted:M.vector(Bo),wrapped:M.vector(Bo),gasObject:M.tuple([Bo,Rp]),eventsDigest:M.option(Xo),dependencies:M.vector(Xo)}),zT=M.tuple([M.u64(),Xo]),h0e=M.enum("ObjectIn",{NotExist:null,Exist:M.tuple([zT,Rp])}),p0e=M.enum("ObjectOut",{NotExist:null,ObjectWrite:M.tuple([Xo,Rp]),PackageWrite:zT}),y0e=M.enum("IDOperation",{None:null,Created:null,Deleted:null}),m0e=M.struct("EffectsObjectChange",{inputState:h0e,outputState:p0e,idOperation:y0e}),g0e=M.enum("UnchangedSharedKind",{ReadOnlyRoot:zT,MutateDeleted:M.u64(),ReadDeleted:M.u64(),Cancelled:M.u64(),PerEpochConfig:null}),b0e=M.struct("TransactionEffectsV2",{status:VV,executedEpoch:M.u64(),gasUsed:KV,transactionDigest:Xo,gasObjectIndex:M.option(M.u32()),eventsDigest:M.option(Xo),dependencies:M.vector(Xo),lamportVersion:M.u64(),changedObjects:M.vector(M.tuple([Dr,m0e])),unchangedSharedObjects:M.vector(M.tuple([Dr,g0e])),auxDataDigest:M.option(Xo)}),FV=M.enum("TransactionEffects",{V1:d0e,V2:b0e});var Mu={...M,U8:M.u8(),U16:M.u16(),U32:M.u32(),U64:M.u64(),U128:M.u128(),U256:M.u256(),ULEB128:M.uleb128(),Bool:M.bool(),String:M.string(),Address:Dr,AppId:LT,Argument:Ca,CallArg:IT,CompressedSignature:FT,GasData:MT,Intent:VT,IntentMessage:KT,IntentScope:UT,IntentVersion:RT,MultiSig:UV,MultiSigPkMap:qT,MultiSigPublicKey:jT,ObjectArg:ET,ObjectDigest:Xo,ProgrammableMoveCall:TT,ProgrammableTransaction:BT,PublicKey:HT,SenderSignedData:RV,SenderSignedTransaction:WT,SharedObjectRef:AT,StructTag:NT,SuiObjectRef:Bo,Command:PT,TransactionData:OT,TransactionDataV1:DT,TransactionExpiration:CT,TransactionKind:_T,TypeTag:av,TransactionEffects:FV};l();d();l();d();l();d();l();d();function Lp(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function x0e(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Vp(e,...t){if(!x0e(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function HV(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Lp(e.outputLen),Lp(e.blockLen)}function Du(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function cv(e,t){Vp(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}l();d();var Kp=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),uv=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);var ul=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,jV=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,Na=ul?e=>e:e=>jV(e);function lh(e){for(let t=0;t<e.length;t++)e[t]=jV(e[t])}var w0e=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function fv(e){Vp(e);let t="";for(let r=0;r<e.length;r++)t+=w0e[e[r]];return t}var Ou={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function qV(e){if(e>=Ou._0&&e<=Ou._9)return e-Ou._0;if(e>=Ou._A&&e<=Ou._F)return e-(Ou._A-10);if(e>=Ou._a&&e<=Ou._f)return e-(Ou._a-10)}function WV(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let s=qV(e.charCodeAt(o)),a=qV(e.charCodeAt(o+1));if(s===void 0||a===void 0){let c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}n[i]=s*16+a}return n}function S0e(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Ds(e){return typeof e=="string"&&(e=S0e(e)),Vp(e),e}var cl=class{clone(){return this._cloneInto()}},jqe={}.toString;function zV(e){let t=n=>e().update(Ds(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function GV(e){let t=(n,i)=>e(i).update(Ds(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}var $V=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]),lv=class extends cl{constructor(t,r,n={},i,o,s){if(super(),this.blockLen=t,this.outputLen=r,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,Lp(t),Lp(r),Lp(i),r<0||r>i)throw new Error("outputLen bigger than keyLen");if(n.key!==void 0&&(n.key.length<1||n.key.length>i))throw new Error(`key must be up 1..${i} byte long or undefined`);if(n.salt!==void 0&&n.salt.length!==o)throw new Error(`salt must be ${o} byte long or undefined`);if(n.personalization!==void 0&&n.personalization.length!==s)throw new Error(`personalization must be ${s} byte long or undefined`);this.buffer32=Kp(this.buffer=new Uint8Array(t))}update(t){Du(this);let{blockLen:r,buffer:n,buffer32:i}=this;t=Ds(t);let o=t.length,s=t.byteOffset,a=t.buffer;for(let c=0;c<o;){this.pos===r&&(ul||lh(i),this.compress(i,0,!1),ul||lh(i),this.pos=0);let u=Math.min(r-this.pos,o-c),h=s+c;if(u===r&&!(h%4)&&c+u<o){let f=new Uint32Array(a,h,Math.floor((o-c)/4));ul||lh(f);for(let m=0;c+r<o;m+=i.length,c+=r)this.length+=r,this.compress(f,m,!1);ul||lh(f);continue}n.set(t.subarray(c,c+u),this.pos),this.pos+=u,this.length+=u,c+=u}return this}digestInto(t){Du(this),cv(t,this);let{pos:r,buffer32:n}=this;this.finished=!0,this.buffer.subarray(r).fill(0),ul||lh(n),this.compress(n,0,!0),ul||lh(n);let i=Kp(t);this.get().forEach((o,s)=>i[s]=Na(o))}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){let{buffer:r,length:n,finished:i,destroyed:o,outputLen:s,pos:a}=this;return t||(t=new this.constructor({dkLen:s})),t.set(...this.get()),t.length=n,t.finished=i,t.destroyed=o,t.outputLen=s,t.buffer.set(r),t.pos=a,t}};l();d();var dv=BigInt(4294967295),GT=BigInt(32);function YV(e,t=!1){return t?{h:Number(e&dv),l:Number(e>>GT&dv)}:{h:Number(e>>GT&dv)|0,l:Number(e&dv)|0}}function v0e(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:o,l:s}=YV(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}var A0e=(e,t)=>BigInt(e>>>0)<<GT|BigInt(t>>>0),E0e=(e,t,r)=>e>>>r,I0e=(e,t,r)=>e<<32-r|t>>>r,k0e=(e,t,r)=>e>>>r|t<<32-r,T0e=(e,t,r)=>e<<32-r|t>>>r,P0e=(e,t,r)=>e<<64-r|t>>>r-32,B0e=(e,t,r)=>e>>>r-32|t<<64-r,_0e=(e,t)=>t,C0e=(e,t)=>e,N0e=(e,t,r)=>e<<r|t>>>32-r,M0e=(e,t,r)=>t<<r|e>>>32-r,D0e=(e,t,r)=>t<<r-32|e>>>64-r,O0e=(e,t,r)=>e<<r-32|t>>>64-r;function U0e(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}var R0e=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),L0e=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,V0e=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),K0e=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,F0e=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),H0e=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0;var q0e={fromBig:YV,split:v0e,toBig:A0e,shrSH:E0e,shrSL:I0e,rotrSH:k0e,rotrSL:T0e,rotrBH:P0e,rotrBL:B0e,rotr32H:_0e,rotr32L:C0e,rotlSH:N0e,rotlSL:M0e,rotlBH:D0e,rotlBL:O0e,add:U0e,add3L:R0e,add3H:L0e,add4L:V0e,add4H:K0e,add5H:H0e,add5L:F0e},Ie=q0e;var Dn=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ge=new Uint32Array(32);function fl(e,t,r,n,i,o){let s=i[o],a=i[o+1],c=ge[2*e],u=ge[2*e+1],h=ge[2*t],f=ge[2*t+1],m=ge[2*r],b=ge[2*r+1],w=ge[2*n],S=ge[2*n+1],P=Ie.add3L(c,h,s);u=Ie.add3H(P,u,f,a),c=P|0,{Dh:S,Dl:w}={Dh:S^u,Dl:w^c},{Dh:S,Dl:w}={Dh:Ie.rotr32H(S,w),Dl:Ie.rotr32L(S,w)},{h:b,l:m}=Ie.add(b,m,S,w),{Bh:f,Bl:h}={Bh:f^b,Bl:h^m},{Bh:f,Bl:h}={Bh:Ie.rotrSH(f,h,24),Bl:Ie.rotrSL(f,h,24)},ge[2*e]=c,ge[2*e+1]=u,ge[2*t]=h,ge[2*t+1]=f,ge[2*r]=m,ge[2*r+1]=b,ge[2*n]=w,ge[2*n+1]=S}function ll(e,t,r,n,i,o){let s=i[o],a=i[o+1],c=ge[2*e],u=ge[2*e+1],h=ge[2*t],f=ge[2*t+1],m=ge[2*r],b=ge[2*r+1],w=ge[2*n],S=ge[2*n+1],P=Ie.add3L(c,h,s);u=Ie.add3H(P,u,f,a),c=P|0,{Dh:S,Dl:w}={Dh:S^u,Dl:w^c},{Dh:S,Dl:w}={Dh:Ie.rotrSH(S,w,16),Dl:Ie.rotrSL(S,w,16)},{h:b,l:m}=Ie.add(b,m,S,w),{Bh:f,Bl:h}={Bh:f^b,Bl:h^m},{Bh:f,Bl:h}={Bh:Ie.rotrBH(f,h,63),Bl:Ie.rotrBL(f,h,63)},ge[2*e]=c,ge[2*e+1]=u,ge[2*t]=h,ge[2*t+1]=f,ge[2*r]=m,ge[2*r+1]=b,ge[2*n]=w,ge[2*n+1]=S}var $T=class extends lv{constructor(t={}){super(128,t.dkLen===void 0?64:t.dkLen,t,64,16,16),this.v0l=Dn[0]|0,this.v0h=Dn[1]|0,this.v1l=Dn[2]|0,this.v1h=Dn[3]|0,this.v2l=Dn[4]|0,this.v2h=Dn[5]|0,this.v3l=Dn[6]|0,this.v3h=Dn[7]|0,this.v4l=Dn[8]|0,this.v4h=Dn[9]|0,this.v5l=Dn[10]|0,this.v5h=Dn[11]|0,this.v6l=Dn[12]|0,this.v6h=Dn[13]|0,this.v7l=Dn[14]|0,this.v7h=Dn[15]|0;let r=t.key?t.key.length:0;if(this.v0l^=this.outputLen|r<<8|65536|1<<24,t.salt){let n=Kp(Ds(t.salt));this.v4l^=Na(n[0]),this.v4h^=Na(n[1]),this.v5l^=Na(n[2]),this.v5h^=Na(n[3])}if(t.personalization){let n=Kp(Ds(t.personalization));this.v6l^=Na(n[0]),this.v6h^=Na(n[1]),this.v7l^=Na(n[2]),this.v7h^=Na(n[3])}if(t.key){let n=new Uint8Array(this.blockLen);n.set(Ds(t.key)),this.update(n)}}get(){let{v0l:t,v0h:r,v1l:n,v1h:i,v2l:o,v2h:s,v3l:a,v3h:c,v4l:u,v4h:h,v5l:f,v5h:m,v6l:b,v6h:w,v7l:S,v7h:P}=this;return[t,r,n,i,o,s,a,c,u,h,f,m,b,w,S,P]}set(t,r,n,i,o,s,a,c,u,h,f,m,b,w,S,P){this.v0l=t|0,this.v0h=r|0,this.v1l=n|0,this.v1h=i|0,this.v2l=o|0,this.v2h=s|0,this.v3l=a|0,this.v3h=c|0,this.v4l=u|0,this.v4h=h|0,this.v5l=f|0,this.v5h=m|0,this.v6l=b|0,this.v6h=w|0,this.v7l=S|0,this.v7h=P|0}compress(t,r,n){this.get().forEach((c,u)=>ge[u]=c),ge.set(Dn,16);let{h:i,l:o}=Ie.fromBig(BigInt(this.length));ge[24]=Dn[8]^o,ge[25]=Dn[9]^i,n&&(ge[28]=~ge[28],ge[29]=~ge[29]);let s=0,a=$V;for(let c=0;c<12;c++)fl(0,4,8,12,t,r+2*a[s++]),ll(0,4,8,12,t,r+2*a[s++]),fl(1,5,9,13,t,r+2*a[s++]),ll(1,5,9,13,t,r+2*a[s++]),fl(2,6,10,14,t,r+2*a[s++]),ll(2,6,10,14,t,r+2*a[s++]),fl(3,7,11,15,t,r+2*a[s++]),ll(3,7,11,15,t,r+2*a[s++]),fl(0,5,10,15,t,r+2*a[s++]),ll(0,5,10,15,t,r+2*a[s++]),fl(1,6,11,12,t,r+2*a[s++]),ll(1,6,11,12,t,r+2*a[s++]),fl(2,7,8,13,t,r+2*a[s++]),ll(2,7,8,13,t,r+2*a[s++]),fl(3,4,9,14,t,r+2*a[s++]),ll(3,4,9,14,t,r+2*a[s++]);this.v0l^=ge[0]^ge[16],this.v0h^=ge[1]^ge[17],this.v1l^=ge[2]^ge[18],this.v1h^=ge[3]^ge[19],this.v2l^=ge[4]^ge[20],this.v2h^=ge[5]^ge[21],this.v3l^=ge[6]^ge[22],this.v3h^=ge[7]^ge[23],this.v4l^=ge[8]^ge[24],this.v4h^=ge[9]^ge[25],this.v5l^=ge[10]^ge[26],this.v5h^=ge[11]^ge[27],this.v6l^=ge[12]^ge[28],this.v6h^=ge[13]^ge[29],this.v7l^=ge[14]^ge[30],this.v7h^=ge[15]^ge[31],ge.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},dh=GV(e=>new $T(e));l();d();l();d();function hv(e,t){return Mu.IntentMessage(Mu.fixedArray(t.length,Mu.u8())).serialize({intent:{scope:{[e]:!0},version:{V0:!0},appId:{Sui:!0}},value:t}).toBytes()}function YT(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var Fp=class{equals(t){return YT(this.toRawBytes(),t.toRawBytes())}toBase64(){return xt(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){let t=this.toSuiBytes();return xt(t)}verifyWithIntent(t,r,n){let i=hv(n,t),o=dh(i,{dkLen:32});return this.verify(o,r)}verifyPersonalMessage(t,r){return this.verifyWithIntent(Mu.vector(Mu.u8()).serialize(t).toBytes(),r,"PersonalMessage")}verifyTransaction(t,r){return this.verifyWithIntent(t,r,"TransactionData")}toSuiBytes(){let t=this.toRawBytes(),r=new Uint8Array(t.length+1);return r.set([this.flag()]),r.set(t,1),r}toSuiAddress(){return Tc(fv(dh(this.toSuiBytes(),{dkLen:32})).slice(0,al*2))}};l();d();var Uu={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5},ZV={ED25519:32,Secp256k1:33,Secp256r1:33},pv={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin"};l();d();l();d();l();d();function JV(e,t){if(!!!e)throw new Error(t)}l();d();var JT={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},j0e=new Set(Object.keys(JT));function XT(e){let t=e?.kind;return typeof t=="string"&&j0e.has(t)}var ZT;(function(e){e.QUERY="query",e.MUTATION="mutation",e.SUBSCRIPTION="subscription"})(ZT||(ZT={}));l();d();var _b;(function(e){e.NAME="Name",e.DOCUMENT="Document",e.OPERATION_DEFINITION="OperationDefinition",e.VARIABLE_DEFINITION="VariableDefinition",e.SELECTION_SET="SelectionSet",e.FIELD="Field",e.ARGUMENT="Argument",e.FRAGMENT_SPREAD="FragmentSpread",e.INLINE_FRAGMENT="InlineFragment",e.FRAGMENT_DEFINITION="FragmentDefinition",e.VARIABLE="Variable",e.INT="IntValue",e.FLOAT="FloatValue",e.STRING="StringValue",e.BOOLEAN="BooleanValue",e.NULL="NullValue",e.ENUM="EnumValue",e.LIST="ListValue",e.OBJECT="ObjectValue",e.OBJECT_FIELD="ObjectField",e.DIRECTIVE="Directive",e.NAMED_TYPE="NamedType",e.LIST_TYPE="ListType",e.NON_NULL_TYPE="NonNullType",e.SCHEMA_DEFINITION="SchemaDefinition",e.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",e.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",e.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",e.FIELD_DEFINITION="FieldDefinition",e.INPUT_VALUE_DEFINITION="InputValueDefinition",e.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",e.UNION_TYPE_DEFINITION="UnionTypeDefinition",e.ENUM_TYPE_DEFINITION="EnumTypeDefinition",e.ENUM_VALUE_DEFINITION="EnumValueDefinition",e.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",e.DIRECTIVE_DEFINITION="DirectiveDefinition",e.SCHEMA_EXTENSION="SchemaExtension",e.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",e.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",e.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",e.UNION_TYPE_EXTENSION="UnionTypeExtension",e.ENUM_TYPE_EXTENSION="EnumTypeExtension",e.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(_b||(_b={}));l();d();l();d();function QT(e){return e===9||e===32}function XV(e,t){let r=e.replace(/"""/g,'\\"""'),n=r.split(/\r\n|[\n\r]/g),i=n.length===1,o=n.length>1&&n.slice(1).every(b=>b.length===0||QT(b.charCodeAt(0))),s=r.endsWith('\\"""'),a=e.endsWith('"')&&!s,c=e.endsWith("\\"),u=a||c,h=!(t!=null&&t.minimize)&&(!i||e.length>70||u||o||s),f="",m=i&&QT(e.charCodeAt(0));return(h&&!m||o)&&(f+=`
`),f+=r,(h||u)&&(f+=`
`),'"""'+f+'"""'}l();d();function QV(e){return yv(e,[])}function yv(e,t){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return W0e(e,t);default:return String(e)}}function W0e(e,t){if(e===null)return"null";if(t.includes(e))return"[Circular]";let r=[...t,e];if(z0e(e)){let n=e.toJSON();if(n!==e)return typeof n=="string"?n:yv(n,r)}else if(Array.isArray(e))return $0e(e,r);return G0e(e,r)}function z0e(e){return typeof e.toJSON=="function"}function G0e(e,t){let r=Object.entries(e);return r.length===0?"{}":t.length>2?"["+Y0e(e)+"]":"{ "+r.map(([i,o])=>i+": "+yv(o,t)).join(", ")+" }"}function $0e(e,t){if(e.length===0)return"[]";if(t.length>2)return"[Array]";let r=Math.min(10,e.length),n=e.length-r,i=[];for(let o=0;o<r;++o)i.push(yv(e[o],t));return n===1?i.push("... 1 more item"):n>1&&i.push(`... ${n} more items`),"["+i.join(", ")+"]"}function Y0e(e){let t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if(t==="Object"&&typeof e.constructor=="function"){let r=e.constructor.name;if(typeof r=="string"&&r!=="")return r}return t}l();d();l();d();function eK(e){return`"${e.replace(Z0e,J0e)}"`}var Z0e=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function J0e(e){return X0e[e.charCodeAt(0)]}var X0e=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"];l();d();var tK=Object.freeze({});function e5(e,t,r=JT){let n=new Map;for(let N of Object.values(_b))n.set(N,rK(t,N));let i,o=Array.isArray(e),s=[e],a=-1,c=[],u=e,h,f,m=[],b=[];do{a++;let N=a===s.length,O=N&&c.length!==0;if(N){if(h=b.length===0?void 0:m[m.length-1],u=f,f=b.pop(),O)if(o){u=u.slice();let L=0;for(let[V,j]of c){let $=V-L;j===null?(u.splice($,1),L++):u[$]=j}}else{u=Object.defineProperties({},Object.getOwnPropertyDescriptors(u));for(let[L,V]of c)u[L]=V}a=i.index,s=i.keys,c=i.edits,o=i.inArray,i=i.prev}else if(f){if(h=o?a:s[a],u=f[h],u==null)continue;m.push(h)}let C;if(!Array.isArray(u)){var w,S;XT(u)||JV(!1,`Invalid AST Node: ${QV(u)}.`);let L=N?(w=n.get(u.kind))===null||w===void 0?void 0:w.leave:(S=n.get(u.kind))===null||S===void 0?void 0:S.enter;if(C=L?.call(t,u,h,f,m,b),C===tK)break;if(C===!1){if(!N){m.pop();continue}}else if(C!==void 0&&(c.push([h,C]),!N))if(XT(C))u=C;else{m.pop();continue}}if(C===void 0&&O&&c.push([h,u]),N)m.pop();else{var P;i={inArray:o,index:a,keys:s,edits:c,prev:i},o=Array.isArray(u),s=o?u:(P=r[u.kind])!==null&&P!==void 0?P:[],a=-1,c=[],f&&b.push(f),f=u}}while(i!==void 0);return c.length!==0?c[c.length-1][1]:e}function rK(e,t){let r=e[t];return typeof r=="object"?r:typeof r=="function"?{enter:r,leave:void 0}:{enter:e.enter,leave:e.leave}}function Hp(e){return e5(e,epe)}var Q0e=80,epe={Name:{leave:e=>e.value},Variable:{leave:e=>"$"+e.name},Document:{leave:e=>Se(e.definitions,`

`)},OperationDefinition:{leave(e){let t=Vt("(",Se(e.variableDefinitions,", "),")"),r=Se([e.operation,Se([e.name,t]),Se(e.directives," ")]," ");return(r==="query"?"":r+" ")+e.selectionSet}},VariableDefinition:{leave:({variable:e,type:t,defaultValue:r,directives:n})=>e+": "+t+Vt(" = ",r)+Vt(" ",Se(n," "))},SelectionSet:{leave:({selections:e})=>Ma(e)},Field:{leave({alias:e,name:t,arguments:r,directives:n,selectionSet:i}){let o=Vt("",e,": ")+t,s=o+Vt("(",Se(r,", "),")");return s.length>Q0e&&(s=o+Vt(`(
`,mv(Se(r,`
`)),`
)`)),Se([s,Se(n," "),i]," ")}},Argument:{leave:({name:e,value:t})=>e+": "+t},FragmentSpread:{leave:({name:e,directives:t})=>"..."+e+Vt(" ",Se(t," "))},InlineFragment:{leave:({typeCondition:e,directives:t,selectionSet:r})=>Se(["...",Vt("on ",e),Se(t," "),r]," ")},FragmentDefinition:{leave:({name:e,typeCondition:t,variableDefinitions:r,directives:n,selectionSet:i})=>`fragment ${e}${Vt("(",Se(r,", "),")")} on ${t} ${Vt("",Se(n," ")," ")}`+i},IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:({value:e,block:t})=>t?XV(e):eK(e)},BooleanValue:{leave:({value:e})=>e?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+Se(e,", ")+"]"},ObjectValue:{leave:({fields:e})=>"{"+Se(e,", ")+"}"},ObjectField:{leave:({name:e,value:t})=>e+": "+t},Directive:{leave:({name:e,arguments:t})=>"@"+e+Vt("(",Se(t,", "),")")},NamedType:{leave:({name:e})=>e},ListType:{leave:({type:e})=>"["+e+"]"},NonNullType:{leave:({type:e})=>e+"!"},SchemaDefinition:{leave:({description:e,directives:t,operationTypes:r})=>Vt("",e,`
`)+Se(["schema",Se(t," "),Ma(r)]," ")},OperationTypeDefinition:{leave:({operation:e,type:t})=>e+": "+t},ScalarTypeDefinition:{leave:({description:e,name:t,directives:r})=>Vt("",e,`
`)+Se(["scalar",t,Se(r," ")]," ")},ObjectTypeDefinition:{leave:({description:e,name:t,interfaces:r,directives:n,fields:i})=>Vt("",e,`
`)+Se(["type",t,Vt("implements ",Se(r," & ")),Se(n," "),Ma(i)]," ")},FieldDefinition:{leave:({description:e,name:t,arguments:r,type:n,directives:i})=>Vt("",e,`
`)+t+(nK(r)?Vt(`(
`,mv(Se(r,`
`)),`
)`):Vt("(",Se(r,", "),")"))+": "+n+Vt(" ",Se(i," "))},InputValueDefinition:{leave:({description:e,name:t,type:r,defaultValue:n,directives:i})=>Vt("",e,`
`)+Se([t+": "+r,Vt("= ",n),Se(i," ")]," ")},InterfaceTypeDefinition:{leave:({description:e,name:t,interfaces:r,directives:n,fields:i})=>Vt("",e,`
`)+Se(["interface",t,Vt("implements ",Se(r," & ")),Se(n," "),Ma(i)]," ")},UnionTypeDefinition:{leave:({description:e,name:t,directives:r,types:n})=>Vt("",e,`
`)+Se(["union",t,Se(r," "),Vt("= ",Se(n," | "))]," ")},EnumTypeDefinition:{leave:({description:e,name:t,directives:r,values:n})=>Vt("",e,`
`)+Se(["enum",t,Se(r," "),Ma(n)]," ")},EnumValueDefinition:{leave:({description:e,name:t,directives:r})=>Vt("",e,`
`)+Se([t,Se(r," ")]," ")},InputObjectTypeDefinition:{leave:({description:e,name:t,directives:r,fields:n})=>Vt("",e,`
`)+Se(["input",t,Se(r," "),Ma(n)]," ")},DirectiveDefinition:{leave:({description:e,name:t,arguments:r,repeatable:n,locations:i})=>Vt("",e,`
`)+"directive @"+t+(nK(r)?Vt(`(
`,mv(Se(r,`
`)),`
)`):Vt("(",Se(r,", "),")"))+(n?" repeatable":"")+" on "+Se(i," | ")},SchemaExtension:{leave:({directives:e,operationTypes:t})=>Se(["extend schema",Se(e," "),Ma(t)]," ")},ScalarTypeExtension:{leave:({name:e,directives:t})=>Se(["extend scalar",e,Se(t," ")]," ")},ObjectTypeExtension:{leave:({name:e,interfaces:t,directives:r,fields:n})=>Se(["extend type",e,Vt("implements ",Se(t," & ")),Se(r," "),Ma(n)]," ")},InterfaceTypeExtension:{leave:({name:e,interfaces:t,directives:r,fields:n})=>Se(["extend interface",e,Vt("implements ",Se(t," & ")),Se(r," "),Ma(n)]," ")},UnionTypeExtension:{leave:({name:e,directives:t,types:r})=>Se(["extend union",e,Se(t," "),Vt("= ",Se(r," | "))]," ")},EnumTypeExtension:{leave:({name:e,directives:t,values:r})=>Se(["extend enum",e,Se(t," "),Ma(r)]," ")},InputObjectTypeExtension:{leave:({name:e,directives:t,fields:r})=>Se(["extend input",e,Se(t," "),Ma(r)]," ")}};function Se(e,t=""){var r;return(r=e?.filter(n=>n).join(t))!==null&&r!==void 0?r:""}function Ma(e){return Vt(`{
`,mv(Se(e,`
`)),`
}`)}function Vt(e,t,r=""){return t!=null&&t!==""?e+t+r:""}function mv(e){return Vt("  ",e.replace(/\n/g,`
  `))}function nK(e){var t;return(t=e?.some(r=>r.includes(`
`)))!==null&&t!==void 0?t:!1}l();d();var iK=e=>{throw TypeError(e)},oK=(e,t,r)=>t.has(e)||iK("Cannot "+r),gv=(e,t,r)=>(oK(e,t,"read from private field"),r?r.call(e):t.get(e)),bv=(e,t,r)=>t.has(e)?iK("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),xv=(e,t,r,n)=>(oK(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),wv,Sv,vv,Av,t5=class extends Error{},Ev=class{constructor({url:t,fetch:r=fetch,headers:n={},queries:i={}}){bv(this,wv),bv(this,Sv),bv(this,vv),bv(this,Av),xv(this,wv,t),xv(this,Sv,i),xv(this,vv,n),xv(this,Av,(...o)=>r(...o))}async query(t){let r=await gv(this,Av).call(this,gv(this,wv),{method:"POST",headers:{"Content-Type":"application/json",...gv(this,vv)},body:JSON.stringify({query:typeof t.query=="string"?String(t.query):Hp(t.query),variables:t.variables,extensions:t.extensions,operationName:t.operationName})});if(!r.ok)throw new t5(`GraphQL request failed: ${r.statusText} (${r.status})`);return await r.json()}async execute(t,r){return this.query({...r,query:gv(this,Sv)[t]})}};wv=new WeakMap;Sv=new WeakMap;vv=new WeakMap;Av=new WeakMap;l();d();l();d();l();d();var Cb={NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType"};var i5=class extends Error{constructor(t,r,n,i,o,s,a){super(t),this.name="GraphQLError",this.message=t,o&&(this.path=o),r&&(this.nodes=Array.isArray(r)?r:[r]),n&&(this.source=n),i&&(this.positions=i),s&&(this.originalError=s);var c=a;if(!c&&s){var u=s.extensions;u&&typeof u=="object"&&(c=u)}this.extensions=c||{}}toJSON(){return{...this,message:this.message}}toString(){return this.message}get[Symbol.toStringTag](){return"GraphQLError"}},nr,Te;function yn(e){return new i5(`Syntax Error: Unexpected token at ${Te} in ${e}`)}function Qo(e){if(e.lastIndex=Te,e.test(nr))return nr.slice(Te,Te=e.lastIndex)}var Iv=/ +(?=[^\s])/y;function tpe(e){for(var t=e.split(`
`),r="",n=0,i=0,o=t.length-1,s=0;s<t.length;s++)Iv.lastIndex=0,Iv.test(t[s])&&(s&&(!n||Iv.lastIndex<n)&&(n=Iv.lastIndex),i=i||s,o=s);for(var a=i;a<=o;a++)a!==i&&(r+=`
`),r+=t[a].slice(n).replace(/\\"""/g,'"""');return r}function mt(){for(var e=0|nr.charCodeAt(Te++);e===9||e===10||e===13||e===32||e===35||e===44||e===65279;e=0|nr.charCodeAt(Te++))if(e===35)for(;(e=nr.charCodeAt(Te++))!==10&&e!==13;);Te--}var no=/[_A-Za-z]\w*/y,r5=new RegExp("(?:(null|true|false)|\\$("+no.source+')|(-?\\d+)((?:\\.\\d+)?[eE][+-]?\\d+|\\.\\d+)?|("""(?:"""|(?:[\\s\\S]*?[^\\\\])"""))|("(?:"|[^\\r\\n]*?[^\\\\]"))|('+no.source+"))","y"),dl=function(e){return e[e.Const=1]="Const",e[e.Var=2]="Var",e[e.Int=3]="Int",e[e.Float=4]="Float",e[e.BlockString=5]="BlockString",e[e.String=6]="String",e[e.Enum=7]="Enum",e}(dl||{}),rpe=/\\/;function kv(e){var t,r;if(r5.lastIndex=Te,nr.charCodeAt(Te)===91){Te++,mt();for(var n=[];nr.charCodeAt(Te)!==93;)n.push(kv(e));return Te++,mt(),{kind:"ListValue",values:n}}else if(nr.charCodeAt(Te)===123){Te++,mt();for(var i=[];nr.charCodeAt(Te)!==125;){if((t=Qo(no))==null||(mt(),nr.charCodeAt(Te++)!==58))throw yn("ObjectField");mt(),i.push({kind:"ObjectField",name:{kind:"Name",value:t},value:kv(e)})}return Te++,mt(),{kind:"ObjectValue",fields:i}}else if((r=r5.exec(nr))!=null){if(Te=r5.lastIndex,mt(),(t=r[dl.Const])!=null)return t==="null"?{kind:"NullValue"}:{kind:"BooleanValue",value:t==="true"};if((t=r[dl.Var])!=null){if(e)throw yn("Variable");return{kind:"Variable",name:{kind:"Name",value:t}}}else if((t=r[dl.Int])!=null){var o;return(o=r[dl.Float])!=null?{kind:"FloatValue",value:t+o}:{kind:"IntValue",value:t}}else{if((t=r[dl.BlockString])!=null)return{kind:"StringValue",value:tpe(t.slice(3,-3)),block:!0};if((t=r[dl.String])!=null)return{kind:"StringValue",value:rpe.test(t)?JSON.parse(t):t.slice(1,-1),block:!1};if((t=r[dl.Enum])!=null)return{kind:"EnumValue",value:t}}}throw yn("Value")}function sK(e){if(nr.charCodeAt(Te)===40){var t=[];Te++,mt();var r;do{if((r=Qo(no))==null||(mt(),nr.charCodeAt(Te++)!==58))throw yn("Argument");mt(),t.push({kind:"Argument",name:{kind:"Name",value:r},value:kv(e)})}while(nr.charCodeAt(Te)!==41);return Te++,mt(),t}}function qp(e){if(nr.charCodeAt(Te)===64){var t=[],r;do{if(Te++,(r=Qo(no))==null)throw yn("Directive");mt(),t.push({kind:"Directive",name:{kind:"Name",value:r},arguments:sK(e)})}while(nr.charCodeAt(Te)===64);return t}}function npe(){for(var e,t=0;nr.charCodeAt(Te)===91;)t++,Te++,mt();if((e=Qo(no))==null)throw yn("NamedType");mt();var r={kind:"NamedType",name:{kind:"Name",value:e}};do if(nr.charCodeAt(Te)===33&&(Te++,mt(),r={kind:"NonNullType",type:r}),t){if(nr.charCodeAt(Te++)!==93)throw yn("NamedType");mt(),r={kind:"ListType",type:r}}while(t--);return r}var n5=new RegExp("(?:(\\.{3})|("+no.source+"))","y"),o5=function(e){return e[e.Spread=1]="Spread",e[e.Name=2]="Name",e}(o5||{});function Tv(){var e=[],t,r;do if(n5.lastIndex=Te,(r=n5.exec(nr))!=null){if(Te=n5.lastIndex,r[o5.Spread]!=null){mt();var n=Qo(no);if(n!=null&&n!=="on")mt(),e.push({kind:"FragmentSpread",name:{kind:"Name",value:n},directives:qp(!1)});else{if(mt(),n==="on"){if((n=Qo(no))==null)throw yn("NamedType");mt()}var i=qp(!1);if(nr.charCodeAt(Te++)!==123)throw yn("InlineFragment");mt(),e.push({kind:"InlineFragment",typeCondition:n?{kind:"NamedType",name:{kind:"Name",value:n}}:void 0,directives:i,selectionSet:Tv()})}}else if((t=r[o5.Name])!=null){var o=void 0;if(mt(),nr.charCodeAt(Te)===58){if(Te++,mt(),o=t,(t=Qo(no))==null)throw yn("Field");mt()}var s=sK(!1);mt();var a=qp(!1),c=void 0;nr.charCodeAt(Te)===123&&(Te++,mt(),c=Tv()),e.push({kind:"Field",alias:o?{kind:"Name",value:o}:void 0,name:{kind:"Name",value:t},arguments:s,directives:a,selectionSet:c})}}else throw yn("SelectionSet");while(nr.charCodeAt(Te)!==125);return Te++,mt(),{kind:"SelectionSet",selections:e}}function ipe(){var e,t;if((e=Qo(no))==null||(mt(),Qo(no)!=="on")||(mt(),(t=Qo(no))==null))throw yn("FragmentDefinition");mt();var r=qp(!1);if(nr.charCodeAt(Te++)!==123)throw yn("FragmentDefinition");return mt(),{kind:"FragmentDefinition",name:{kind:"Name",value:e},typeCondition:{kind:"NamedType",name:{kind:"Name",value:t}},directives:r,selectionSet:Tv()}}var ope=/(?:query|mutation|subscription|fragment)/y;function spe(e){var t,r,n;if(e&&(mt(),t=Qo(no),r=function(){if(mt(),nr.charCodeAt(Te)===40){var o=[];Te++,mt();var s;do{if(nr.charCodeAt(Te++)!==36||(s=Qo(no))==null)throw yn("Variable");if(mt(),nr.charCodeAt(Te++)!==58)throw yn("VariableDefinition");mt();var a=npe(),c=void 0;nr.charCodeAt(Te)===61&&(Te++,mt(),c=kv(!0)),mt(),o.push({kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:s}},type:a,defaultValue:c,directives:qp(!0)})}while(nr.charCodeAt(Te)!==41);return Te++,mt(),o}}(),n=qp(!1)),nr.charCodeAt(Te)===123)return Te++,mt(),{kind:"OperationDefinition",operation:e||"query",name:t?{kind:"Name",value:t}:void 0,variableDefinitions:r,directives:n,selectionSet:Tv()}}function aK(e,t){return Te=0,function(n,i){var o,s;mt();var a=[];do if((o=Qo(ope))==="fragment")mt(),a.push(ipe());else if((s=spe(o))!=null)a.push(s);else throw yn("Document");while(Te<n.length);if(!i){var c;return{kind:"Document",definitions:a,set loc(u){c=u},get loc(){return c||(c={start:0,end:n.length,startToken:void 0,endToken:void 0,source:{body:n,name:"graphql.web",locationOffset:{line:1,column:1}}}),c}}}return{kind:"Document",definitions:a}}(nr=typeof e.body=="string"?e.body:e,t&&t.noLocation)}var cK=0,s5=new Set;function Nb(){function e(t,r){var n=aK(t).definitions,i=new Set;for(var o of r||[])for(var s of o.definitions)s.kind===Cb.FRAGMENT_DEFINITION&&!i.has(s)&&(n.push(s),i.add(s));var a;(a=n[0].kind===Cb.FRAGMENT_DEFINITION)&&n[0].directives&&(n[0].directives=n[0].directives.filter(u=>u.name.value!=="_unmask"));var c;return{kind:Cb.DOCUMENT,definitions:n,get loc(){if(!c&&a){var u=t+function(f){try{cK++;var m="";for(var b of f)if(!s5.has(b)){s5.add(b);var{loc:w}=b;w&&(m+=w.source.body)}return m}finally{--cK==0&&s5.clear()}}(r||[]);return{start:0,end:u.length,source:{body:u,name:"GraphQLTada",locationOffset:{line:1,column:1}}}}return c},set loc(u){c=u}}}return e.scalar=function(r,n){return n},e.persisted=function(r,n){return{kind:Cb.DOCUMENT,definitions:n?n.definitions:[],documentId:r}},e}var zWe=Nb();var uK=Nb();l();d();function ape(e){if(e.length!==1)throw new Error("Invalid base64Url character: "+e);let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(e);if(r===-1)throw new Error("Invalid base64Url character: "+e);let n=r.toString(2).padStart(6,"0");return Array.from(n).map(Number)}function cpe(e){let t=[];for(let r=0;r<e.length;r++){let n=e.charAt(r),i=ape(n);t=t.concat(i)}return t}function upe(e,t){if(e.length<2)throw new Error(`Input (s = ${e}) is not tightly packed because s.length < 2`);let r=cpe(e),n=t%4;if(n!==0)if(n===1)r=r.slice(2);else if(n===2)r=r.slice(4);else throw new Error(`Input (s = ${e}) is not tightly packed because i%4 = 3 (i = ${t}))`);let i=(t+e.length-1)%4;if(i!==3)if(i===2)r=r.slice(0,r.length-2);else if(i===1)r=r.slice(0,r.length-4);else throw new Error(`Input (s = ${e}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${t}))`);if(r.length%8!==0)throw new Error("We should never reach here...");let o=new Uint8Array(Math.floor(r.length/8)),s=0;for(let a=0;a<r.length;a+=8){let c=r.slice(a,a+8),u=parseInt(c.join(""),2);o[s++]=u}return new TextDecoder().decode(o)}function fpe(e){if(!(e.slice(-1)==="}"||e.slice(-1)===","))throw new Error("Invalid claim");let t=JSON.parse("{"+e.slice(0,-1)+"}");if(Object.keys(t).length!==1)throw new Error("Invalid claim");let r=Object.keys(t)[0];return[r,t[r]]}function fK(e,t){let r=upe(e.value,e.indexMod4),[n,i]=fpe(r);if(n!==t)throw new Error(`Invalid field name: found ${n} expected ${t}`);return i}l();d();l();d();var lK=M.struct("ZkLoginSignature",{inputs:M.struct("ZkLoginSignatureInputs",{proofPoints:M.struct("ZkLoginSignatureInputsProofPoints",{a:M.vector(M.string()),b:M.vector(M.vector(M.string())),c:M.vector(M.string())}),issBase64Details:M.struct("ZkLoginSignatureInputsClaim",{value:M.string(),indexMod4:M.u8()}),headerBase64:M.string(),addressSeed:M.string()}),maxEpoch:M.u64(),userSignature:M.vector(M.u8())});function dK(e){return lK.parse(typeof e=="string"?rr(e):e)}l();d();function lpe(e){for(let t=0;t<e.length;t++)if(e[t]!==0)return t;return-1}function Pv(e,t){let r=e.toString(16);return WV(r.padStart(t*2,"0").slice(-t*2))}function a5(e,t){let r=Pv(e,t),n=lpe(r);return n===-1?new Uint8Array([0]):r.slice(n)}var yK=e=>{throw TypeError(e)},mK=(e,t,r)=>t.has(e)||yK("Cannot "+r),Ru=(e,t,r)=>(mK(e,t,"read from private field"),r?r.call(e):t.get(e)),c5=(e,t,r)=>t.has(e)?yK("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),jp=(e,t,r,n)=>(mK(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Da,Mb,Db,dpe=class u5 extends Fp{constructor(t,{client:r}={}){super(),c5(this,Da),c5(this,Mb),c5(this,Db),jp(this,Mb,r),typeof t=="string"?jp(this,Da,rr(t)):t instanceof Uint8Array?jp(this,Da,t):jp(this,Da,Uint8Array.from(t)),jp(this,Db,Ru(this,Da).length!==Ru(this,Da)[0]+1+32),Ru(this,Db)&&jp(this,Da,hK(Ru(this,Da)))}equals(t){return super.equals(t)}toSuiAddress(){if(Ru(this,Db)){let t=hK(Ru(this,Da),!0),r=new Uint8Array(t.length+1);return r[0]=this.flag(),r.set(t,1),Tc(fv(dh(r,{dkLen:32})).slice(0,al*2))}return super.toSuiAddress()}toRawBytes(){return Ru(this,Da)}flag(){return Uu.ZkLogin}async verify(t,r){throw Error("does not support")}verifyPersonalMessage(t,r){let n=Bv(r),i=new u5(n.publicKey).toSuiAddress();return pK({address:i,bytes:xt(t),signature:n.serializedSignature,intentScope:"PERSONAL_MESSAGE",client:Ru(this,Mb)})}verifyTransaction(t,r){let n=Bv(r),i=new u5(n.publicKey).toSuiAddress();return pK({address:i,bytes:xt(t),signature:n.serializedSignature,intentScope:"TRANSACTION_DATA",client:Ru(this,Mb)})}};Da=new WeakMap;Mb=new WeakMap;Db=new WeakMap;var hpe=dpe;function ppe(e,t,r){let n=r?.legacyAddress?a5(e,32):Pv(e,32),i=new TextEncoder().encode(t),o=new Uint8Array(1+i.length+n.length);return o.set([i.length],0),o.set(i,1),o.set(n,1+i.length),new hpe(o,r)}var ype=uK(`
	query Zklogin(
		$bytes: Base64!
		$signature: Base64!
		$intentScope: ZkLoginIntentScope!
		$author: SuiAddress!
	) {
		verifyZkloginSignature(
			bytes: $bytes
			signature: $signature
			intentScope: $intentScope
			author: $author
		) {
			success
			errors
		}
	}
`);function hK(e,t=!1){let r=e[0]+1,n=BigInt(`0x${Mn(e.slice(r))}`),i=t?a5(n,32):Pv(n,32),o=new Uint8Array(r+i.length);return o.set(e.slice(0,r),0),o.set(i,r),o}async function pK({address:e,bytes:t,signature:r,intentScope:n,client:i=new Ev({url:"https://sui-mainnet.mystenlabs.com/graphql"})}){let o=await i.query({query:ype,variables:{bytes:t,signature:r,intentScope:n,author:e}});return o.data?.verifyZkloginSignature.success===!0&&o.data?.verifyZkloginSignature.errors.length===0}function Bv(e){let t=typeof e=="string"?rr(e):e;if(t[0]!==Uu.ZkLogin)throw new Error("Invalid signature scheme");let r=t.slice(1),{inputs:n,maxEpoch:i,userSignature:o}=dK(r),{issBase64Details:s,addressSeed:a}=n,c=fK(s,"iss"),u=ppe(BigInt(a),c);return{serializedSignature:xt(t),signatureScheme:"ZkLogin",zkLogin:{inputs:n,maxEpoch:i,userSignature:o,iss:c,addressSeed:BigInt(a)},signature:t,publicKey:u.toRawBytes()}}function gK({signature:e,signatureScheme:t,publicKey:r}){if(!r)throw new Error("`publicKey` is required");let n=r.toRawBytes(),i=new Uint8Array(1+e.length+n.length);return i.set([Uu[t]]),i.set(e,1),i.set(n,1+e.length),xt(i)}function bK(e){let t=rr(e),r=pv[t[0]];switch(r){case"MultiSig":let n=Mu.MultiSig.parse(t.slice(1));return{serializedSignature:e,signatureScheme:r,multisig:n,bytes:t};case"ZkLogin":return Bv(e);case"ED25519":case"Secp256k1":case"Secp256r1":let i=ZV[r],o=t.slice(1,t.length-i),s=t.slice(1+o.length);return{serializedSignature:e,signatureScheme:r,signature:o,publicKey:s,bytes:t};default:throw new Error("Unsupported signature scheme")}}l();d();l();d();l();d();function Wp(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function mpe(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Ob(e,...t){if(!mpe(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function _v(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Wp(e.outputLen),Wp(e.blockLen)}function zp(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function xK(e,t){Ob(e);let r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}l();d();l();d();l();d();var $p=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function gpe(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function hl(e){return typeof e=="string"&&(e=gpe(e)),Ob(e),e}var Gp=class{clone(){return this._cloneInto()}};function wK(e,t){if(t!==void 0&&{}.toString.call(t)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(e,t)}function SK(e){let t=n=>e().update(hl(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}var Cv=class extends Gp{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,_v(t);let n=hl(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return zp(this),this.iHash.update(t),this}digestInto(t){zp(this),Ob(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},f5=(e,t,r)=>new Cv(e,t).update(r).digest();f5.create=(e,t)=>new Cv(e,t);function bpe(e,t,r,n){_v(e);let i=wK({dkLen:32,asyncTick:10},n),{c:o,dkLen:s,asyncTick:a}=i;if(Wp(o),Wp(s),Wp(a),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");let c=hl(t),u=hl(r),h=new Uint8Array(s),f=f5.create(e,c),m=f._cloneInto().update(u);return{c:o,dkLen:s,asyncTick:a,DK:h,PRF:f,PRFSalt:m}}function xpe(e,t,r,n,i){return e.destroy(),t.destroy(),n&&n.destroy(),i.fill(0),r}function vK(e,t,r,n){let{c:i,dkLen:o,DK:s,PRF:a,PRFSalt:c}=bpe(e,t,r,n),u,h=new Uint8Array(4),f=$p(h),m=new Uint8Array(a.outputLen);for(let b=1,w=0;w<o;b++,w+=a.outputLen){let S=s.subarray(w,w+a.outputLen);f.setInt32(0,b,!1),(u=c._cloneInto(u)).update(h).digestInto(m),S.set(m.subarray(0,S.length));for(let P=1;P<i;P++){a._cloneInto(u).update(m).digestInto(m);for(let N=0;N<S.length;N++)S[N]^=m[N]}}return xpe(a,c,s,u,m)}l();d();function wpe(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var Nv=class extends Gp{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=$p(this.buffer)}update(t){zp(this);let{view:r,buffer:n,blockLen:i}=this;t=hl(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=$p(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){zp(this),xK(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let f=s;f<i;f++)r[f]=0;wpe(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=$p(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,h[f],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};l();d();l();d();var Mv=BigInt(4294967295),l5=BigInt(32);function AK(e,t=!1){return t?{h:Number(e&Mv),l:Number(e>>l5&Mv)}:{h:Number(e>>l5&Mv)|0,l:Number(e&Mv)|0}}function Spe(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:o,l:s}=AK(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}var vpe=(e,t)=>BigInt(e>>>0)<<l5|BigInt(t>>>0),Ape=(e,t,r)=>e>>>r,Epe=(e,t,r)=>e<<32-r|t>>>r,Ipe=(e,t,r)=>e>>>r|t<<32-r,kpe=(e,t,r)=>e<<32-r|t>>>r,Tpe=(e,t,r)=>e<<64-r|t>>>r-32,Ppe=(e,t,r)=>e>>>r-32|t<<64-r,Bpe=(e,t)=>t,_pe=(e,t)=>e,Cpe=(e,t,r)=>e<<r|t>>>32-r,Npe=(e,t,r)=>t<<r|e>>>32-r,Mpe=(e,t,r)=>t<<r-32|e>>>64-r,Dpe=(e,t,r)=>e<<r-32|t>>>64-r;function Ope(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}var Upe=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Rpe=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,Lpe=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),Vpe=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,Kpe=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),Fpe=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0;var Hpe={fromBig:AK,split:Spe,toBig:vpe,shrSH:Ape,shrSL:Epe,rotrSH:Ipe,rotrSL:kpe,rotrBH:Tpe,rotrBL:Ppe,rotr32H:Bpe,rotr32L:_pe,rotlSH:Cpe,rotlSL:Npe,rotlBH:Mpe,rotlBL:Dpe,add:Ope,add3L:Upe,add3H:Rpe,add4L:Lpe,add4H:Vpe,add5H:Fpe,add5L:Kpe},wt=Hpe;var[qpe,jpe]=wt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),pl=new Uint32Array(80),yl=new Uint32Array(80),d5=class extends Nv{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:u,El:h,Fh:f,Fl:m,Gh:b,Gl:w,Hh:S,Hl:P}=this;return[t,r,n,i,o,s,a,c,u,h,f,m,b,w,S,P]}set(t,r,n,i,o,s,a,c,u,h,f,m,b,w,S,P){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=h|0,this.Fh=f|0,this.Fl=m|0,this.Gh=b|0,this.Gl=w|0,this.Hh=S|0,this.Hl=P|0}process(t,r){for(let C=0;C<16;C++,r+=4)pl[C]=t.getUint32(r),yl[C]=t.getUint32(r+=4);for(let C=16;C<80;C++){let L=pl[C-15]|0,V=yl[C-15]|0,j=wt.rotrSH(L,V,1)^wt.rotrSH(L,V,8)^wt.shrSH(L,V,7),$=wt.rotrSL(L,V,1)^wt.rotrSL(L,V,8)^wt.shrSL(L,V,7),H=pl[C-2]|0,Y=yl[C-2]|0,B=wt.rotrSH(H,Y,19)^wt.rotrBH(H,Y,61)^wt.shrSH(H,Y,6),p=wt.rotrSL(H,Y,19)^wt.rotrBL(H,Y,61)^wt.shrSL(H,Y,6),g=wt.add4L($,p,yl[C-7],yl[C-16]),x=wt.add4H(g,j,B,pl[C-7],pl[C-16]);pl[C]=x|0,yl[C]=g|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:u,Dl:h,Eh:f,El:m,Fh:b,Fl:w,Gh:S,Gl:P,Hh:N,Hl:O}=this;for(let C=0;C<80;C++){let L=wt.rotrSH(f,m,14)^wt.rotrSH(f,m,18)^wt.rotrBH(f,m,41),V=wt.rotrSL(f,m,14)^wt.rotrSL(f,m,18)^wt.rotrBL(f,m,41),j=f&b^~f&S,$=m&w^~m&P,H=wt.add5L(O,V,$,jpe[C],yl[C]),Y=wt.add5H(H,N,L,j,qpe[C],pl[C]),B=H|0,p=wt.rotrSH(n,i,28)^wt.rotrBH(n,i,34)^wt.rotrBH(n,i,39),g=wt.rotrSL(n,i,28)^wt.rotrBL(n,i,34)^wt.rotrBL(n,i,39),x=n&o^n&a^o&a,A=i&s^i&c^s&c;N=S|0,O=P|0,S=b|0,P=w|0,b=f|0,w=m|0,{h:f,l:m}=wt.add(u|0,h|0,Y|0,B|0),u=a|0,h=c|0,a=o|0,c=s|0,o=n|0,s=i|0;let v=wt.add3L(B,g,A);n=wt.add3H(v,Y,p,x),i=v|0}({h:n,l:i}=wt.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=wt.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:c}=wt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:h}=wt.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:f,l:m}=wt.add(this.Eh|0,this.El|0,f|0,m|0),{h:b,l:w}=wt.add(this.Fh|0,this.Fl|0,b|0,w|0),{h:S,l:P}=wt.add(this.Gh|0,this.Gl|0,S|0,P|0),{h:N,l:O}=wt.add(this.Hh|0,this.Hl|0,N|0,O|0),this.set(n,i,o,s,a,c,u,h,f,m,b,w,S,P,N,O)}roundClean(){pl.fill(0),yl.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var EK=SK(()=>new d5);function IK(e){if(typeof e!="string")throw new TypeError("invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}function Wpe(e){let t=IK(e),r=t.split(" ");if(![12,15,18,21,24].includes(r.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:r}}var zpe=e=>IK("mnemonic"+e);function Dv(e,t=""){return vK(EK,Wpe(e).nfkd,zpe(t),{c:2048,dkLen:64})}function h5(e){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(e)}function Gpe(e){return Dv(e,"")}function kK(e){return Mn(Gpe(e))}l();d();var Ub=re(hh(),1);var Jp=32;var y5="suiprivkey",Uv=class{async signWithIntent(t,r){let n=hv(r,t),i=dh(n,{dkLen:32});return{signature:gK({signature:await this.sign(i),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:xt(t)}}async signTransaction(t){return this.signWithIntent(t,"TransactionData")}async signPersonalMessage(t){let{signature:r}=await this.signWithIntent(M.vector(M.u8()).serialize(t).toBytes(),"PersonalMessage");return{bytes:xt(t),signature:r}}toSuiAddress(){return this.getPublicKey().toSuiAddress()}},Rb=class extends Uv{};function ph(e){let{prefix:t,words:r}=Ub.bech32.decode(e);if(t!==y5)throw new Error("invalid private key prefix");let n=new Uint8Array(Ub.bech32.fromWords(r)),i=n.slice(1);return{schema:pv[n[0]],secretKey:i}}function m5(e,t){if(e.length!==Jp)throw new Error("Invalid bytes length");let r=Uu[t],n=new Uint8Array(e.length+1);return n.set([r]),n.set(e,1),Ub.bech32.encode(y5,Ub.bech32.toWords(n))}l();d();l();d();var yh=re(bs(),1);l();d();l();d();var Rv=class extends cl{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,HV(t);let n=Ds(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return Du(this),this.iHash.update(t),this}digestInto(t){Du(this),Vp(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Lv=(e,t,r)=>new Rv(e,t).update(r).digest();Lv.create=(e,t)=>new Rv(e,t);l();d();l();d();function Jpe(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var Vv=class extends cl{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=uv(this.buffer)}update(t){Du(this);let{view:r,buffer:n,blockLen:i}=this;t=Ds(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=uv(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Du(this),cv(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let f=s;f<i;f++)r[f]=0;Jpe(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=uv(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,h[f],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};var[Xpe,Qpe]=Ie.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),ml=new Uint32Array(80),gl=new Uint32Array(80),g5=class extends Vv{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:u,El:h,Fh:f,Fl:m,Gh:b,Gl:w,Hh:S,Hl:P}=this;return[t,r,n,i,o,s,a,c,u,h,f,m,b,w,S,P]}set(t,r,n,i,o,s,a,c,u,h,f,m,b,w,S,P){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=h|0,this.Fh=f|0,this.Fl=m|0,this.Gh=b|0,this.Gl=w|0,this.Hh=S|0,this.Hl=P|0}process(t,r){for(let C=0;C<16;C++,r+=4)ml[C]=t.getUint32(r),gl[C]=t.getUint32(r+=4);for(let C=16;C<80;C++){let L=ml[C-15]|0,V=gl[C-15]|0,j=Ie.rotrSH(L,V,1)^Ie.rotrSH(L,V,8)^Ie.shrSH(L,V,7),$=Ie.rotrSL(L,V,1)^Ie.rotrSL(L,V,8)^Ie.shrSL(L,V,7),H=ml[C-2]|0,Y=gl[C-2]|0,B=Ie.rotrSH(H,Y,19)^Ie.rotrBH(H,Y,61)^Ie.shrSH(H,Y,6),p=Ie.rotrSL(H,Y,19)^Ie.rotrBL(H,Y,61)^Ie.shrSL(H,Y,6),g=Ie.add4L($,p,gl[C-7],gl[C-16]),x=Ie.add4H(g,j,B,ml[C-7],ml[C-16]);ml[C]=x|0,gl[C]=g|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:u,Dl:h,Eh:f,El:m,Fh:b,Fl:w,Gh:S,Gl:P,Hh:N,Hl:O}=this;for(let C=0;C<80;C++){let L=Ie.rotrSH(f,m,14)^Ie.rotrSH(f,m,18)^Ie.rotrBH(f,m,41),V=Ie.rotrSL(f,m,14)^Ie.rotrSL(f,m,18)^Ie.rotrBL(f,m,41),j=f&b^~f&S,$=m&w^~m&P,H=Ie.add5L(O,V,$,Qpe[C],gl[C]),Y=Ie.add5H(H,N,L,j,Xpe[C],ml[C]),B=H|0,p=Ie.rotrSH(n,i,28)^Ie.rotrBH(n,i,34)^Ie.rotrBH(n,i,39),g=Ie.rotrSL(n,i,28)^Ie.rotrBL(n,i,34)^Ie.rotrBL(n,i,39),x=n&o^n&a^o&a,A=i&s^i&c^s&c;N=S|0,O=P|0,S=b|0,P=w|0,b=f|0,w=m|0,{h:f,l:m}=Ie.add(u|0,h|0,Y|0,B|0),u=a|0,h=c|0,a=o|0,c=s|0,o=n|0,s=i|0;let v=Ie.add3L(B,g,A);n=Ie.add3H(v,Y,p,x),i=v|0}({h:n,l:i}=Ie.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=Ie.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:c}=Ie.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:h}=Ie.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:f,l:m}=Ie.add(this.Eh|0,this.El|0,f|0,m|0),{h:b,l:w}=Ie.add(this.Fh|0,this.Fl|0,b|0,w|0),{h:S,l:P}=Ie.add(this.Gh|0,this.Gl|0,S|0,P|0),{h:N,l:O}=Ie.add(this.Hh|0,this.Hl|0,N|0,O|0),this.set(n,i,o,s,a,c,u,h,f,m,b,w,S,P,N,O)}roundClean(){ml.fill(0),gl.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var b5=zV(()=>new g5);var eye=re(bs(),1),tye="ed25519 seed",rye=2147483648,nye=new RegExp("^m(\\/[0-9]+')+$"),_K=e=>e.replace("'",""),iye=e=>{let r=Lv.create(b5,tye).update(Ms(e)).digest(),n=r.slice(0,32),i=r.slice(32);return{key:n,chainCode:i}},oye=({key:e,chainCode:t},r)=>{let n=new ArrayBuffer(4);new DataView(n).setUint32(0,r);let o=new Uint8Array(1+e.length+n.byteLength);o.set(new Uint8Array(1).fill(0)),o.set(e,1),o.set(new Uint8Array(n,0,n.byteLength),e.length+1);let s=Lv.create(b5,t).update(o).digest(),a=s.slice(0,32),c=s.slice(32);return{key:a,chainCode:c}};var sye=e=>nye.test(e)?!e.split("/").slice(1).map(_K).some(isNaN):!1,x5=(e,t,r=rye)=>{if(!sye(e))throw new Error("Invalid derivation path");let{key:n,chainCode:i}=iye(t);return e.split("/").slice(1).map(_K).map(s=>parseInt(s,10)).reduce((s,a)=>oye(s,a+r),{key:n,chainCode:i})};l();d();var CK=re(bs(),1);var w5=32,bl=class extends Fp{constructor(t){if(super(),typeof t=="string"?this.data=rr(t):t instanceof Uint8Array?this.data=t:this.data=Uint8Array.from(t),this.data.length!==w5)throw new Error(`Invalid public key input. Expected ${w5} bytes, got ${this.data.length}`)}equals(t){return super.equals(t)}toRawBytes(){return this.data}flag(){return Uu.ED25519}async verify(t,r){let n;if(typeof r=="string"){let i=bK(r);if(i.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!YT(this.toRawBytes(),i.publicKey))throw new Error("Signature does not match public key");n=i.signature}else n=r;return CK.default.sign.detached.verify(t,n,this.toRawBytes())}};bl.SIZE=w5;var S5="m/44'/784'/0'/0'/0'",mh=class e extends Rb{constructor(t){super(),t?this.keypair=t:this.keypair=yh.default.sign.keyPair()}getKeyScheme(){return"ED25519"}static generate(){return new e(yh.default.sign.keyPair())}static fromSecretKey(t,r){if(typeof t=="string"){let o=ph(t);if(o.schema!=="ED25519")throw new Error(`Expected a ED25519 keypair, got ${o.schema}`);return this.fromSecretKey(o.secretKey,r)}let n=t.length;if(n!==Jp)throw new Error(`Wrong secretKey size. Expected ${Jp} bytes, got ${n}.`);let i=yh.default.sign.keyPair.fromSeed(t);if(!r||!r.skipValidation){let s=new TextEncoder().encode("sui validation"),a=yh.default.sign.detached(s,i.secretKey);if(!yh.default.sign.detached.verify(s,a,i.publicKey))throw new Error("provided secretKey is invalid")}return new e(i)}getPublicKey(){return new bl(this.keypair.publicKey)}getSecretKey(){return m5(this.keypair.secretKey.slice(0,Jp),this.getKeyScheme())}async sign(t){return yh.default.sign.detached(t,this.keypair.secretKey)}static deriveKeypair(t,r){if(r==null&&(r=S5),!h5(r))throw new Error("Invalid derivation path");let{key:n}=x5(r,kK(t));return e.fromSecretKey(n)}static deriveKeypairFromSeed(t,r){if(r==null&&(r=S5),!h5(r))throw new Error("Invalid derivation path");let{key:n}=x5(r,t);return e.fromSecretKey(n)}};var Kv=class{addressTypes=["sui"];generateKeypairFromPrivateKey(t){let r=t.fold(s=>new Uint8Array(s)),n=mh.fromSecretKey(r),i=n.getPublicKey().toRawBytes(),o=ph(n.getSecretKey());if(o.schema!=="ED25519")throw new Error(`got unexpected schema ${o.schema} for Sui`);return{publicKey:i,privateKey:o.secretKey}}generateKeypairFromSeed(t,r,n){let i=t.fold(o=>new Li(o));try{let o=i.derivePathType(n,r);return{publicKey:o.publicKey,privateKey:o.secretKey}}finally{i.cleanup()}}};var Lb=class{cryptoChainPlugins=new Map;constructor(){this.registerChainPlugin(new TS),this.registerChainPlugin(new YS),this.registerChainPlugin(new QS),this.registerChainPlugin(new Kv)}registerChainPlugin(t){for(let r of t.addressTypes)this.cryptoChainPlugins.set(r,t)}generateKeypairFromPrivateKey(t,r){let n=this.cryptoChainPlugins.get(r);if(!n)throw new Error(`No plugin found for address type ${r}, please register the plugin first.`);return n.generateKeypairFromPrivateKey(t)}generateKeypairFromSeed(t,r,n){let i=Vi.getAddressType(n),o=this.cryptoChainPlugins.get(i);if(!o)throw new Error(`No plugin found for address type ${i}, please register the plugin first.`);return o.generateKeypairFromSeed(t,r,n)}};l();d();function v5(e){return Vi.getAll().includes(e)}l();d();var rF=re(Ho()),nF=re(Qp()),$v=re(bs()),iF=re(zv());var D5=e=>{let{privateKey:t,addressType:r}=e;switch(r){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":try{return{key:Lye(t,e.networkIDValue),encoding:"hex"}}catch{throw new Error("Could not find encoding for Bitcoin private key")}case"eip155":try{return{key:Vye(t),encoding:"hex"}}catch{throw new Error("Could not find encoding for EVM private key")}case"solana":try{return Fye(t)}catch{throw new Error("Could not find encoding for Solana private key")}case"sui":try{return{key:Kye(t),encoding:"base64"}}catch{throw new Error("Could not find encoding for Sui private key")}default:return Ae(r)}},Lye=(e,t)=>{try{let{privateKey:r}=iF.decodeRaw(nF.default.decode(e),t);return r}catch{throw new Error("Provided Bitcoin private key is invalid!")}},Vye=e=>{let t=Buffer.from(e.replace("0x",""),"hex");try{return new Cp(new Uint8Array(t)),t}catch{throw new Error("Provided Ethereum private key is invalid!")}},Gv=e=>{let t=$v.default.sign.keyPair.fromSecretKey(e),r=Buffer.from("phantom-secret-key-validation"),n=$v.default.sign.detached(r,e);if(!$v.default.sign.detached.verify(r,n,t.publicKey))throw new Error("Provided Solana private key is invalid!")},Kye=e=>{try{let t=ph(e);if(t.schema!=="ED25519")throw new Error("Invalid schema");return t.secretKey}catch{throw new Error("Provided Sui private key is invalid!")}},Fye=e=>{try{let t=JSON.parse(e);return Gv(Uint8Array.from(t)),{key:t,encoding:"uint8array"}}catch{}try{let t=rF.default.decode(e);return Gv(t),{key:t,encoding:"base58"}}catch{}try{let t=Buffer.from(e,"hex");return Gv(t),{key:t,encoding:"hex"}}catch{}try{let t=Buffer.from(e,"base64");return Gv(t),{key:t,encoding:"base64"}}catch{}throw new Error("Provided Solana private key is invalid!")};l();d();var oF=re(Ho()),sF=re(Qp()),aF=re(zv());var Hye=e=>{let{privateKey:t,addressType:r}=e;switch(r){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return sF.default.encode(aF.encodeRaw(e.networkIDValue,Buffer.from(t),!0));case"eip155":return"0x"+Buffer.from(t).toString("hex");case"solana":return oF.default.encode(t);case"sui":return mh.fromSecretKey(t).getSecretKey();default:return Ae(r)}};l();d();var Kb=e=>{try{return Xi.from(D5(e).key)}catch(t){return console.error(t),Xi.from(Buffer.from(""))}};l();d();var B2e=re(nA());l();d();var[PF,BF,_F]=[[],[],[]],Ume=BigInt(0),Wb=BigInt(1),Rme=BigInt(2),Lme=BigInt(7),Vme=BigInt(256),Kme=BigInt(113);for(let e=0,t=Wb,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],PF.push(2*(5*n+r)),BF.push((e+1)*(e+2)/2%64);let i=Ume;for(let o=0;o<7;o++)t=(t<<Wb^(t>>Lme)*Kme)%Vme,t&Rme&&(i^=Wb<<(Wb<<BigInt(o))-Wb);_F.push(i)}var[Fme,Hme]=Le.split(_F,!0),kF=(e,t,r)=>r>32?Le.rotlBH(e,t,r):Le.rotlSH(e,t,r),TF=(e,t,r)=>r>32?Le.rotlBL(e,t,r):Le.rotlSL(e,t,r);function qme(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let s=0;s<10;s++)r[s]=e[s]^e[s+10]^e[s+20]^e[s+30]^e[s+40];for(let s=0;s<10;s+=2){let a=(s+8)%10,c=(s+2)%10,u=r[c],h=r[c+1],f=kF(u,h,1)^r[a],m=TF(u,h,1)^r[a+1];for(let b=0;b<50;b+=10)e[s+b]^=f,e[s+b+1]^=m}let i=e[2],o=e[3];for(let s=0;s<24;s++){let a=BF[s],c=kF(i,o,a),u=TF(i,o,a),h=PF[s];i=e[h],o=e[h+1],e[h]=c,e[h+1]=u}for(let s=0;s<50;s+=10){for(let a=0;a<10;a++)r[a]=e[s+a];for(let a=0;a<10;a++)e[s+a]^=~r[(a+2)%10]&r[(a+4)%10]}e[0]^=Fme[n],e[1]^=Hme[n]}r.fill(0)}var iA=class e extends Np{constructor(t,r,n,i=!1,o=24){if(super(),this.blockLen=t,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Ba.number(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=AV(this.state)}keccak(){qme(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Ba.exists(this);let{blockLen:r,state:n}=this;t=Mp(t);let i=t.length;for(let o=0;o<i;){let s=Math.min(r-this.pos,i-o);for(let a=0;a<s;a++)n[this.pos++]^=t[o++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:r,pos:n,blockLen:i}=this;t[n]^=r,r&128&&n===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){Ba.exists(this,!1),Ba.bytes(t),this.finish();let r=this.state,{blockLen:n}=this;for(let i=0,o=t.length;i<o;){this.posOut>=n&&this.keccak();let s=Math.min(n-this.posOut,o-i);t.set(r.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Ba.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Ba.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:r,suffix:n,outputLen:i,rounds:o,enableXOF:s}=this;return t||(t=new e(r,n,i,s,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=n,t.outputLen=i,t.enableXOF=s,t.destroyed=this.destroyed,t}},Il=(e,t,r)=>fh(()=>new iA(t,e,r)),wZe=Il(6,144,224/8),SZe=Il(6,136,256/8),vZe=Il(6,104,384/8),AZe=Il(6,72,512/8),EZe=Il(1,144,224/8),Y5=Il(1,136,256/8),IZe=Il(1,104,384/8),kZe=Il(1,72,512/8),CF=(e,t,r)=>EV((n={})=>new iA(t,e,n.dkLen===void 0?r:n.dkLen,!0)),TZe=CF(31,168,128/8),PZe=CF(31,136,256/8);var Ra=re(hx()),eW=re(Ho());function oi(e){let{publicKey:t,addressType:r}=e;switch(r){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return _2e(t,r,e.networkID);case"eip155":return C2e(t);case"solana":return eW.default.encode(t);case"sui":return new bl(t).toSuiAddress();default:return Ae(r)}}var _2e=(e,t,r)=>{let n=r==="bip122:000000000933ea01ad0ee984209779ba"?Ra.networks.testnet:Ra.networks.bitcoin,i;switch(t){case"bip122_p2tr":Ra.initEccLib(B2e),i=Ra.payments.p2tr({internalPubkey:Buffer.from(e.slice(1,33)),network:n},{validate:!1})?.address;break;case"bip122_p2wpkh":i=Ra.payments.p2wpkh({pubkey:Buffer.from(e),network:n},{validate:!1})?.address;break;case"bip122_p2sh":{let o=Buffer.from(e),s=Ra.payments.p2wpkh({pubkey:o,network:n},{validate:!1});i=Ra.payments.p2sh({pubkey:o,network:n,redeem:s},{validate:!1})?.address;break}case"bip122_p2pkh":{i=Ra.payments.p2pkh({pubkey:Buffer.from(e),network:n},{validate:!1})?.address;break}default:Ae(t)}if(!i)throw new Error("Could not derive Bitcoin address from public key");return i},C2e=e=>{let t=e.slice(1),n=Y5(t).slice(12);return N2e(`0x${Buffer.from(n).toString("hex")}`)},N2e=e=>{if(!Kd.safeParse(e).success)throw new Error("toChecksumAddress: Input address is not a valid hex string.");let t=e.toLowerCase().replace("0x",""),r=Buffer.from(Y5(Buffer.from(t,"utf-8"))).toString("hex"),n="0x";for(let i=0;i<t.length;i++)parseInt(r[i],16)>=8?n+=t[i].toUpperCase():n+=t[i];return n};l();d();function Fl(e){return Jf.safeParse(e).success}l();d();function mB(e){switch(e){case"bip44Root":case"bip44Change":case"bip44":case"deprecated":return"solana";case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":return"eip155";case"bitcoinLegacy":return"bip122_p2pkh";case"bitcoinNativeSegwit":return"bip122_p2wpkh";case"bitcoinNestedSegwit":return"bip122_p2sh";case"bitcoinTaproot":return"bip122_p2tr";case"bip44Sui":return"sui"}}l();d();l();d();l();d();var Vn=(u=>(u.Solana="solana",u.Monad="monad",u.Ethereum="ethereum",u.Base="base",u.Arbitrum="arbitrum",u.Polygon="polygon",u.Bitcoin="bitcoin",u.Sui="sui",u.Hypercore="hypercore",u))(Vn||{}),po=(u=>(u.Ethereum="60",u.Monad="143",u.Polygon="966",u.Base="8453",u.Arbitrum="9001",u.Solana="501",u.Bitcoin="0",u.Sui="784",u.Hypercore="925",u))(po||{}),gB=class extends Error{constructor(r,n){super(`${n} is not yet supported for ${r}`);this.chain=r;this.feature=n;this.name="UnsupportedChainFeatureError"}},wy=class extends gB{constructor(t){super("sui",t)}};var dE=(r=>(r.Mainnet="eip155:42161",r.Sepolia="eip155:421614",r))(dE||{}),tW=R.union([R.literal("eip155:42161"),R.literal("eip155:421614")]),bB={id:"arbitrum",addressTypes:["eip155"],iconUrl:"https://static.phantom.app/assets/arbitrum.png",name:"Arbitrum",networks:{"eip155:42161":{id:"eip155:42161",name:"Arbitrum",rpcProxyUrl:"https://node-proxy.phantom.app/v1/chain/arbitrum/network/mainnet",value:42161},"eip155:421614":{id:"eip155:421614",name:"Arbitrum Sepolia",rpcProxyUrl:"https://node-proxy.phantom.app/v1/chain/arbitrum/network/sepolia",value:421614}},mainnetID:"eip155:42161",tokenDecimals:18,tokenSymbol:"ETH",slip44:"9001",parentChain:"ethereum"};l();d();var hE=(r=>(r.Mainnet="eip155:8453",r.Sepolia="eip155:84532",r))(hE||{}),rW=R.union([R.literal("eip155:8453"),R.literal("eip155:84532")]),xB={id:"base",addressTypes:["eip155"],iconUrl:"https://static.phantom.app/assets/base.png",name:"Base",networks:{"eip155:8453":{id:"eip155:8453",name:"Base",rpcProxyUrl:"https://node-proxy.phantom.app/v1/chain/base/network/mainnet",value:8453},"eip155:84532":{id:"eip155:84532",name:"Base Sepolia",rpcProxyUrl:"https://node-proxy.phantom.app/v1/chain/base/network/sepolia",value:84532}},mainnetID:"eip155:8453",tokenDecimals:18,tokenSymbol:"ETH",slip44:"8453",parentChain:"ethereum"};l();d();var M2e=re(nA());var yE=re(hx());l();d();var px=(r=>(r.Mainnet="sui:mainnet",r.Testnet="sui:testnet",r))(px||{}),Sy=R.union([R.literal("sui:mainnet"),R.literal("sui:testnet")]),wB={id:"sui",addressTypes:["sui"],iconUrl:"https://static.phantom.app/assets/sui.png",name:"Sui",networks:{"sui:mainnet":{id:"sui:mainnet",name:"Sui",rpcProxyUrl:"https://node-proxy.phantom.dev/v1/chain/sui/network/mainnet",value:"mainnet"},"sui:testnet":{id:"sui:testnet",name:"Sui Testnet",shortName:"Testnet",rpcProxyUrl:"https://node-proxy.phantom.dev/v1/chain/sui/network/testnet",value:"testnet"}},mainnetID:"sui:mainnet",tokenDecimals:9,tokenSymbol:"SUI",slip44:"784"},pE=R.object({networkID:Sy,addressType:R.nativeEnum(we),address:yf,publicKey:R.instanceof(Uint8Array).optional()});var En=(r=>(r.Mainnet="bip122:000000000019d6689c085ae165831e93",r.Testnet="bip122:000000000933ea01ad0ee984209779ba",r))(En||{}),Hl=R.union([R.literal("bip122:000000000019d6689c085ae165831e93"),R.literal("bip122:000000000933ea01ad0ee984209779ba")]),nW=R.union([R.literal("sui:mainnet"),R.literal("sui:testnet")]),ql=R.string().refine(e=>{try{return yE.initEccLib(M2e),yE.address.toOutputScript(e),!0}catch{return!1}},{message:"Invalid Bitcoin address."}),yx=R.object({networkID:Hl,addressType:R.nativeEnum(we),address:ql,publicKey:R.instanceof(Uint8Array).optional()}),SB={id:"bitcoin",addressTypes:["bip122_p2tr","bip122_p2wpkh"],iconUrl:"https://static.phantom.app/assets/bitcoin.png",name:"Bitcoin",networks:{"bip122:000000000019d6689c085ae165831e93":{id:"bip122:000000000019d6689c085ae165831e93",name:"Bitcoin",value:128},"bip122:000000000933ea01ad0ee984209779ba":{id:"bip122:000000000933ea01ad0ee984209779ba",name:"Bitcoin Testnet",shortName:"Testnet",value:239}},mainnetID:"bip122:000000000019d6689c085ae165831e93",tokenDecimals:8,tokenSymbol:"BTC",slip44:"0"};l();d();l();d();var mE=(r=>(r.Mainnet="hypercore:mainnet",r.Testnet="hypercore:testnet",r))(mE||{}),jl=R.union([R.literal("hypercore:mainnet"),R.literal("hypercore:testnet")]),vB={id:"hypercore",addressTypes:["eip155"],iconUrl:"https://static.phantom.app/assets/hypercore.png",name:"Hypercore",networks:{"hypercore:mainnet":{id:"hypercore:mainnet",name:"Hypercore",rpcProxyUrl:"https://node-proxy.phantom.dev/v1/chain/hypercore/network/mainnet",value:"mainnet"},"hypercore:testnet":{id:"hypercore:testnet",name:"Hypercore Testnet",shortName:"Testnet",rpcProxyUrl:"https://node-proxy.phantom.dev/v1/chain/hypercore/network/testnet",value:"testnet"}},mainnetID:"hypercore:mainnet",tokenDecimals:9,tokenSymbol:"ETH",slip44:"925"},iW=R.object({networkID:jl,addressType:R.nativeEnum(we),address:i1});l();d();var mx=(n=>(n.Mainnet="eip155:143",n.Testnet="eip155:10143",n.Devnet="eip155:41454",n))(mx||{}),AB=R.union([R.literal("eip155:143"),R.literal("eip155:10143"),R.literal("eip155:41454")]),EB={id:"monad",addressTypes:["eip155"],iconUrl:"https://static.phantom.app/assets/monad.png",name:"Monad",networks:{"eip155:143":{id:"eip155:143",name:"Monad",rpcProxyUrl:"https://node-proxy.phantom.app/v1/chain/monad/network/mainnet",value:143,hidden:!0},"eip155:10143":{id:"eip155:10143",name:"Monad Testnet",shortName:"Testnet",rpcProxyUrl:"https://node-proxy.phantom.app/v1/chain/monad/network/testnet",value:10143},"eip155:41454":{id:"eip155:41454",name:"Monad Devnet",shortName:"Devnet",rpcProxyUrl:"https://node-proxy.phantom.app/v1/chain/monad/network/devnet1",value:41454,hidden:!0}},mainnetID:"eip155:10143",tokenDecimals:18,tokenSymbol:"MON",slip44:"143"};l();d();var gE=(r=>(r.Mainnet="eip155:137",r.Amoy="eip155:80002",r))(gE||{}),IB=R.union([R.literal("eip155:137"),R.literal("eip155:80002")]),kB={id:"polygon",addressTypes:["eip155"],iconUrl:"https://static.phantom.app/assets/polygon.png",name:"Polygon",networks:{"eip155:137":{id:"eip155:137",name:"Polygon",rpcProxyUrl:"https://node-proxy.phantom.app/v1/chain/polygon/network/mainnet",value:137},"eip155:80002":{id:"eip155:80002",name:"Polygon Amoy",shortName:"Amoy",rpcProxyUrl:"https://node-proxy.phantom.app/v1/chain/polygon/network/amoy",value:80002}},mainnetID:"eip155:137",tokenDecimals:18,tokenSymbol:"POL",slip44:"966",parentChain:"ethereum"};var bE=(r=>(r.Mainnet="eip155:1",r.Sepolia="eip155:11155111",r))(bE||{}),oW=R.union([R.literal("eip155:1"),R.literal("eip155:11155111")]),Wl=R.union([oW,IB,rW,AB,tW,jl]),gx=R.object({networkID:Wl,addressType:R.nativeEnum(we),address:cc}),TB={id:"ethereum",addressTypes:["eip155"],iconUrl:"https://static.phantom.app/assets/ethereum.png",name:"Ethereum",networks:{"eip155:1":{id:"eip155:1",name:"Ethereum",rpcProxyUrl:"https://node-proxy.phantom.app/v1/chain/ethereum/network/mainnet",value:1},"eip155:11155111":{id:"eip155:11155111",name:"Ethereum Sepolia",shortName:"Sepolia",rpcProxyUrl:"https://node-proxy.phantom.app/v1/chain/ethereum/network/sepolia",value:11155111}},mainnetID:"eip155:1",tokenDecimals:18,tokenSymbol:"ETH",slip44:"60"};l();d();var bx=(i=>(i.Mainnet="solana:101",i.Testnet="solana:102",i.Devnet="solana:103",i.Localnet="solana:localnet",i))(bx||{}),zl=R.union([R.literal("solana:101"),R.literal("solana:102"),R.literal("solana:103"),R.literal("solana:localnet")]),xx=R.object({networkID:zl,addressType:R.nativeEnum(we),address:pf}),PB={id:"solana",addressTypes:["solana"],iconUrl:"https://static.phantom.app/assets/solana.png",name:"Solana",networks:{"solana:101":{id:"solana:101",name:"Solana",rpcProxyUrl:"https://solana-mainnet.phantom.app/YBPpkkN4g91xDiAnTE9r0RcMkjg0sKUIWvAfoFVJ?advancedTxSubmission=true",value:"mainnet"},"solana:102":{id:"solana:102",name:"Solana Testnet",shortName:"Testnet",value:"testnet"},"solana:103":{id:"solana:103",name:"Solana Devnet",shortName:"Devnet",value:"devnet"},"solana:localnet":{id:"solana:localnet",name:"Solana Localnet",shortName:"Localnet",value:"localnet"}},localnetID:"solana:localnet",mainnetID:"solana:101",tokenDecimals:9,tokenSymbol:"SOL",slip44:"501"};l();d();function xE(e){return Object.values(Vn).includes(e)}var Ai={bitcoin:SB,ethereum:TB,polygon:kB,monad:EB,solana:PB,base:xB,sui:wB,arbitrum:bB,hypercore:vB},wE={solana:1,ethereum:2,monad:3,base:4,sui:5,polygon:6,bitcoin:7,arbitrum:8,hypercore:9},D2e={solana:!0,ethereum:!0,monad:!1,base:!0,polygon:!0,bitcoin:!0,sui:!1,arbitrum:!1,hypercore:!1},BB=(e,t)=>{let r=wE[e]-wE[t];return r===0?0:r>0?1:-1},O2e=()=>{let e=Object.values(Vn).sort(BB),t=e.map(U=>Ai[U]),r={},n=[],i={},o={},s={};t.forEach(U=>{let G=Object.fromEntries(Object.entries(U.networks).filter(([fe,Q])=>!Q.hidden)),Z=Object.keys(G);n.push(...Z),Z.forEach(fe=>{r[fe]=U});let ee=Object.values(G);i[U.id]=ee.map(fe=>fe.id),ee.forEach(fe=>{o[fe.id]=fe});for(let fe of U.addressTypes){let Q=s[fe];Q?Q.push(U.id):s[fe]=[U.id]}});let a=new Set(n);function c(U){return U?.evmOnly?e.filter(G=>Ai[G].addressTypes.includes("eip155")):e}function u(U,G){return U==="sui"?G:D2e[U]}function h(U){return n.filter(G=>r[G].id===U)}function f(U){if(!U)return n;let G=n;return U.evmOnly&&(G=G.filter(Z=>D(Z))),U.mainnetOnly&&(G=G.filter(Z=>K(Z))),G}function m(U){return r[U]}function b(U){return o[U].rpcProxyUrl}function w(U){return r[U].addressTypes[0]}function S(U){let G=r[U];if(G.addressTypes.length===1){let[Z]=G.addressTypes;return Z}else throw`The chain ${G.id} has multiple address types`}function P(U){return r[U].addressTypes}function N(U){return r[U].id}function O(U){return Ai[he(U)].name}function C(U){return r[U].tokenDecimals}function L(U){return(Y(U)?r[U]:Ai[U]).tokenSymbol}function V(U){return(Y(U)?r[U]:Ai[U]).iconUrl}function j(U){return r[U].slip44}function $(U){return Ai[he(U)].mainnetID}function H(U){let G;if(D(U)&&(G=o[U].value),typeof G=="number")return G;throw new Error(`Invalid NetworkID: ${U}. Must be an EVM NetworkID.`)}function Y(U){return a.has(U)}function B(U){return Object.keys(Ai.bitcoin.networks).includes(U)}function p(U){return Object.keys(Ai.ethereum.networks).includes(U)}function g(U){return Object.keys(Ai.polygon.networks).includes(U)}function x(U){return Object.keys(Ai.base.networks).includes(U)}function A(U){return Object.keys(Ai.arbitrum.networks).includes(U)}function v(U){return Object.keys(Ai.monad.networks).includes(U)}function _(U){return Object.keys(Ai.hypercore.networks).includes(U)}function D(U){return p(U)||g(U)||x(U)||v(U)||A(U)||_(U)}function T(U){return Object.keys(Ai.solana.networks).includes(U)}function y(U){return Object.keys(Ai.sui.networks).includes(U)}function I(U){if(!T(U))throw new Error(`Invalid NetworkID: ${U}. Must be a Solana NetworkID.`);return Ai.solana.networks[U].value}function q(U){return r[U].localnetID===U}function K(U){return r[U].mainnetID===U}function F(U){return o[U]}function J(U,G=!1){let Z=o[U];return G&&Z.shortName?Z.shortName:Z.name}function ae(U){return r[U].parentChain}function ce(U){return s[U]}function ye(U,G){let Z=r[U].id,ee=r[G].id;return BB(Z,ee)}function he(U){return xE(U)?U:Y(U)?te.getChainID(U):Ae(U)}return{...Ai,getAllChainIDs:c,isChainDefaultEnabled:u,getNetworkIDs:h,getAllNetworkIDs:f,getChainDefinition:m,getAddressType:S,getAddressTypes:P,getChainID:N,getChainName:O,getTokenDecimals:C,getTokenSymbol:L,getChainIconUrl:V,getSlip44:j,getMainnetNetworkID:$,getEVMNetworkIDValue:H,getSolanaNetworkIDValue:I,_DO_NOT_USE_getAddressType:w,isNetworkID:Y,isBitcoinNetworkID:B,isEVMNetworkID:D,isSolanaNetworkID:T,isEthereumNetworkID:p,isPolygonNetworkID:g,isBaseNetworkID:x,isArbitrumNetworkID:A,isSuiNetworkID:y,isHypercoreNetworkID:_,isLocalNetworkID:q,isMainnetNetworkID:K,getNetworkDefinition:F,getNetworkName:J,getChainIDs:ce,compareChain:BB,compareNetworkID:ye,getRpcProxyUrl:b,getParentChain:ae}},te=O2e();l();d();var Ot={Bitcoin:En,Ethereum:bE,Polygon:gE,Solana:bx,Sui:px,Base:hE,Monad:mx,Arbitrum:dE,Hypercore:mE},Yu=R.union([Hl,Wl,zl,Sy,jl]),U2e=R.union([yx,gx,xx,pE,iW]);l();d();l();d();var Hs=(n=>(n.address="address",n.tx="tx",n.nativeToken="nativeToken",n))(Hs||{}),sW=R.string(),aW=R.object({chainId:Yu,resourceType:R.nativeEnum(Hs)}),_B=aW.extend({resourceType:R.literal("nativeToken"),slip44:R.nativeEnum(po)}),Gl=aW.extend({resourceType:R.literal("address"),address:R.string()}),CB=Gl.extend({chainId:zl,address:pf}),NB=Gl.extend({chainId:Wl,address:cc,tokenId:R.string().optional()}),MB=Gl.extend({chainId:Hl,address:ql.or(R.string())}),R2e=Gl.extend({chainId:nW,address:yf,tokenId:R.string().optional()}),cW=Gl.extend({chainId:jl,address:i1,tokenId:R.string().optional()}),uW=R.union([_B,Gl,CB,NB,MB,R2e]);var fW=e=>{let t=e.split("/");if(t.length>3||t.length<2)throw new Error(`Cannot decode malformed caip19 string '${e}'`);let r=t[0];if(!(te.isEVMNetworkID(r)||te.isSolanaNetworkID(r)||te.isBitcoinNetworkID(r)||te.isSuiNetworkID(r)))throw new Error(`Cannot decode unsupported chain '${r}'`);let n=t[1].split(/:(.+)/),[i,o]=n;if(!i||!o)throw new Error(`Invalid resource specification '${t[1]}'`);if(!Object.values(Hs).includes(i))throw new Error(`Unsupported resource type '${i}'`);if(i==="nativeToken"){if(!Object.values(po).includes(o))throw new Error(`Unsupported slip44 '${o}'`);return{chainId:r,resourceType:i,slip44:o}}else if(te.isEVMNetworkID(r)){if(i==="address")return t.length===3?{chainId:r,address:o,resourceType:i,tokenId:t[2]}:{chainId:r,address:o,resourceType:i};throw new Error(`Unsupported resource type ${i} for chain ${r}`)}else if(te.isSolanaNetworkID(r)){if(i==="address")return{chainId:r,address:o,resourceType:i};throw new Error(`Unsupported resource type ${i} for chain ${r}`)}else if(te.isBitcoinNetworkID(r)){if(i==="address")return{chainId:r,address:o,resourceType:i};throw new Error(`Unsupported resource type ${i} for chain ${r}`)}else if(te.isSuiNetworkID(r)){if(i==="address")return{chainId:r,address:o,resourceType:i};throw new Error(`Unsupported resource type ${i} for chain ${r}`)}throw new Error(`Cannot decode malformed caip19 string '${e}'`)};l();d();var SE=e=>{if(e.resourceType==="nativeToken")return`${e.chainId}/nativeToken:${e.slip44}`;if(te.isEVMNetworkID(e.chainId))return e.address=e.address.toLowerCase(),"tokenId"in e&&typeof e.tokenId=="string"&&e.tokenId?`${e.chainId}/address:${e.address}/${e.tokenId}`:`${e.chainId}/address:${e.address}`;if(te.isSolanaNetworkID(e.chainId))return`${e.chainId}/address:${e.address}`;if(te.isBitcoinNetworkID(e.chainId)){let t=e;return`${t.chainId}/address:${t.address}`}return te.isSuiNetworkID(e.chainId)?"tokenId"in e&&typeof e.tokenId=="string"&&e.tokenId?`${e.chainId}/address:${e.address}/${e.tokenId}`:`${e.chainId}/address:${e.address}`:Ae(e.chainId)};l();d();l();d();var lW=R.string().refine(e=>{let t=e.split("/");if(t.length<2)return!1;let r=t[0],i=t[1].split(":");if(i.length<2)return!1;let o=i[0],s=i[1];return typeof e=="string"&&te.isNetworkID(r)&&o.match(/^[-a-z0-9]{2,8}/)&&s.match(/^[-a-zA-Z0-9]{1,64}/)},{message:"Value is not a valid BRI string."});l();d();function dW(e){return!e||e.resourceType!=="address"?!1:!!te.isEVMNetworkID(e.chainId)}l();d();l();d();l();d();function vE(e,t){return te.isBitcoinNetworkID(t)?ql.safeParse(e).success:te.isEVMNetworkID(t)?cc.safeParse(e).success:te.isSolanaNetworkID(t)?pf.safeParse(e).success:te.isSuiNetworkID(t)?yf.safeParse(e).success:Ae(t)}l();d();var AE=e=>{let t=te.getNetworkIDs(e),r=te.getMainnetNetworkID(t[0]),n=te[e].slip44;return{chainId:r,resourceType:"nativeToken",slip44:n}};l();d();l();d();l();d();function hW(e){return yx.safeParse(e).success}function pW(e){return xx.safeParse(e).success}function yW(e){return gx.safeParse(e).success}var mW=R.object({networkID:Yu,addressType:R.nativeEnum(we),address:R.string()}),K2e=e=>`${e.networkID}-${e.address}`,gW={toKey:K2e},bW=e=>{let t={chainId:e.networkID,address:e.address,resourceType:"address"};return te.isEVMNetworkID(e.networkID)&&(t.address=t.address.toLowerCase()),t};l();d();function xW(e){return[Ot.Solana.Devnet,Ot.Solana.Testnet,Ot.Solana.Mainnet].map(r=>parseInt(r.replace("solana:",""))).includes(parseInt(e,16))?`solana:${parseInt(e,16)}`:`eip155:${parseInt(e,16)}`}l();d();var wW=R.object({id:Yu,name:R.string(),symbol:R.string(),imageUrl:R.string()});function SW(e){let{name:t,tokenSymbol:r,iconUrl:n}=te.getChainDefinition(e);return{id:e,name:t,symbol:r,imageUrl:n}}l();d();function vW(e){switch(e){case"devnet":return Ot.Solana.Devnet;case"mainnet":return Ot.Solana.Mainnet;case"testnet":return Ot.Solana.Testnet;case"localnet":return Ot.Solana.Localnet}}function AW(e){switch(e){case"mainnet":return"mainnet-beta";case"localnet":return"localhost";default:return e}}l();d();var Uc=(e,t)=>{if(te.isBitcoinNetworkID(e)){switch(!0){case(t.startsWith("bc1p")||t.startsWith("bcrt1p")||t.startsWith("tb1p")):return"bip122_p2tr";case(t.startsWith("bc1q")||t.startsWith("tb1q")):return"bip122_p2wpkh";case(t.startsWith("3")||t.startsWith("2")):return"bip122_p2sh";case(t.startsWith("1")||t.startsWith("m")):return"bip122_p2pkh"}throw new Error(`Unable to get address type from invalid Bitcoin address: ${t}`)}else return te.isEVMNetworkID(e)?"eip155":te.isSolanaNetworkID(e)?"solana":te.isSuiNetworkID(e)?"sui":Ae(e)};l();d();var F2e=te.getAllNetworkIDs().filter(e=>te.isEVMNetworkID(e)),EW=e=>F2e.find(t=>te.getNetworkDefinition(t).value===e);l();d();var IW=e=>te.getAllNetworkIDs({evmOnly:!0}).filter(t=>{if(e){if(e==="mainnets_only")return te.isMainnetNetworkID(t);if(e==="testnets_only")return!te.isMainnetNetworkID(t)}else return!0}).map(DB),DB=e=>`0x${te.getNetworkDefinition(e).value.toString(16)}`;l();d();var W2e={[Ot.Monad.Mainnet]:1,[Ot.Monad.Devnet]:1,[Ot.Monad.Testnet]:1,[Ot.Ethereum.Mainnet]:6,[Ot.Ethereum.Sepolia]:6,[Ot.Polygon.Mainnet]:128,[Ot.Polygon.Amoy]:128,[Ot.Base.Mainnet]:3,[Ot.Base.Sepolia]:3,[Ot.Arbitrum.Mainnet]:1,[Ot.Arbitrum.Sepolia]:1,[Ot.Hypercore.Mainnet]:1,[Ot.Hypercore.Testnet]:1},z2e={[Ot.Bitcoin.Mainnet]:1,[Ot.Bitcoin.Testnet]:1};var G2e="TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb",$2e=100;l();d();l();d();function Y2e(e,t){return t.getSupportedChains().includes(e)}function kW(e,t){if(xE(e))return t.get(e);if(te.isNetworkID(e)){let r=te.getChainID(e);if(Y2e(r,t))return t.get(r)}throw new Error("Invalid input type for chain config get method")}function OB(e){return{get:t=>kW(t,e),supportedChains:e.getSupportedChains()}}l();d();var wx=class{chainConfigMap=new Map;constructor(t){Object.entries(t).forEach(([r,n])=>{this.register(r,n)})}register(t,r){this.chainConfigMap.set(t,r)}getSupportedChains(){return Array.from(this.chainConfigMap.keys())}get(t){let r=this.chainConfigMap.get(t);if(!r)throw new Error(`No chain config found for chain: ${t}`);return r}};l();d();var TW=".phantom-labs.internal.enabledChainsOverrideSettings",PW=async e=>{try{return(await e.get(TW))?.settings}catch{return null}},BW=async(e,t,r)=>{let n=await PW(r);return r.set(TW,{version:1,settings:{...n!=null&&n,[e]:t}})},_W=async e=>{let t=[],r;try{r=await PW(e),r&&Object.entries(r).forEach(([i,o])=>{o||t.push(i)})}catch{}try{let i=await e.get(Z2e);!i||i.version===1||i.chains.forEach(o=>{r&&r[o]||t.push(o)})}catch{}let n=await Ci.isFeatureEnabledAsync("enable-sui-default-on");try{te.getAllChainIDs().forEach(i=>{r&&r[i]||te.isChainDefaultEnabled(i,n)||t.push(i)})}catch{}return[...new Set(t)]},CW=async(e,t)=>BW(e,!1,t),UB=async(e,t)=>BW(e,!0,t),vy=".phantom-labs.internal.disabledAddressTypes",NW=async e=>{let t;try{t=await e.get(vy)!==null}catch{t=!1}return t},MW=async e=>{let t;try{t=(await e.get(vy))?.addressTypes??[]}catch{t=[]}return[...new Set([...t,"bip122_p2sh","bip122_p2pkh"])]},DW=async(e,t)=>{let r=await t.get(vy),n=new Set(r?.addressTypes??[]);return n.delete(e),t.set(vy,{version:1,addressTypes:Array.from(n)})},OW=async(e,t)=>{let r=await t.get(vy),n=new Set(r?.addressTypes??[]);return n.add(e),t.set(vy,{version:1,addressTypes:Array.from(n)})},Z2e=".phantom-labs.internal.disabledChains";l();d();var UW=!1,Rh=async(e,t,r)=>{t=t??await Ci.isFeatureEnabledAsync("enable-monad"),r=r??await Ci.isFeatureEnabledAsync("enable-arbitrum");let n=!AM();UW||(oe.addBreadcrumb("network",`Fetched chain availability where ${JSON.stringify({isMonadFeatureEnabled:t})}`,"info"),UW=!0);let i=te.getAllChainIDs().filter(C=>(C!=="monad"||t)&&(C!=="arbitrum"||r)&&(C!=="hypercore"||n)),o=await _W(e),s=new Set(o),a=i.filter(C=>!s.has(C)),c=C=>{let L=te.getChainID(C);return a.includes(L)},u=te.getAllNetworkIDs({mainnetOnly:!1}).filter(c),h=te.getAllNetworkIDs({mainnetOnly:!0}).filter(c),f=new Set(o.flatMap(C=>te.getNetworkIDs(C))),m=u.filter(C=>!f.has(C)),b=h.filter(C=>!f.has(C)),w=m.filter(C=>!te.isMainnetNetworkID(C)),S=Vi.getAll(),P=await MW(e),N=new Set(P);for(let C of S){let L=te.getChainIDs(C);if(!L){N.add(C);continue}L.every(j=>s.has(j))&&N.add(C)}let O=S.filter(C=>!N.has(C));return{supportedChainIDs:i,supportedAddressTypes:S,disabledChainIDs:o,enabledChainIDs:a,enabledAddressTypes:O,enabledNetworkIDs:m,enabledMainnetOnlyNetworkIDs:b,enabledTestnetOnlyNetworkIDs:w}};l();d();l();d();var EE="@phantom/chains",IE={enabledChains:[`${EE}:enabled-chains`],enabledAddressTypes:[`${EE}:enabled-address-types`],enabledNetworkIDs(e){return[`${EE}:enabled-network-ids`,{mainnetOnly:e}]},chainAvailability(e){return[`${EE}:chain-availability`,e]}};var RW=[],RB=e=>{RW.push(e)},Zu=async e=>{let t=Ci.isFeatureEnabled("enable-monad"),r=Ci.isFeatureEnabled("enable-arbitrum");await e.invalidateQueries({queryKey:IE.chainAvailability({isMonadEnabled:t,isArbitrumEnabled:r})}),await Promise.all(RW.map(n=>n(e)))};l();d();l();d();var Ay=(i=>(i.Image="image",i.Emoji="emoji",i.ReadOnlyDefault="read-only-default",i.Default="default",i))(Ay||{}),J2e=R.object({type:R.nativeEnum(Ay),imageUrl:R.string().optional(),unicode:R.string().optional()}),kE=(t=>(t.Ledger="ledger",t))(kE||{}),TE=(t=>(t.BLE="ble",t))(TE||{}),X2e=R.object({version:R.literal(1),connectionType:R.nativeEnum(TE),deviceType:R.nativeEnum(kE),id:R.string().min(1),name:R.string().optional(),model:R.string().optional()}),Q2e=R.object({value:R.number(),timestamp:R.number()}),eSe=R.object({name:R.string(),icon:J2e.optional(),connectedDevices:X2e.array().optional(),balance:Q2e.optional()});var tSe=100,rSe={unicode:void 0,imageUrl:void 0,type:"default"},LB={version:1,isDeveloperMode:!1};var Ey=Ot.Solana.Devnet,Iy=Ot.Ethereum.Sepolia,VB=Ot.Sui.Testnet;function Sx(e){return{version:1,setting:{solana:Ey,eip155:Iy,...e?{sui:VB}:{}}}}function La(e){return e.map(t=>Vi[t].defaultDerivationPathType)}var nSe={bip44Root:"bip44RootEthereum",bip44Change:"bip44Ethereum",bip44:"bip44EthereumSecondary",deprecated:"bip44EthereumTertiary",bip44RootEthereum:null,bip44Ethereum:null,bip44EthereumSecondary:null,bip44EthereumTertiary:null,bitcoinTaproot:null,bitcoinNativeSegwit:null,bitcoinNestedSegwit:null,bitcoinLegacy:null,bip44Sui:null},Ju={bip44Root:-1,bip44RootEthereum:-1,bitcoinTaproot:0,bitcoinNativeSegwit:0,bitcoinNestedSegwit:0,bitcoinLegacy:0,bip44Change:0,bip44Ethereum:0,bip44:1,bip44EthereumSecondary:1,deprecated:2,bip44EthereumTertiary:2,bip44Sui:0},iSe="https://help.phantom.com/hc/en-us/articles/4406563212819";var oSe="https://help.phantom.com/hc/en-us/articles/21872962238355";l();d();var vx=(e,t=5)=>{let r=e.length,n=e.startsWith("0x")?t+2:t;return`${e.substring(0,n)}...${e.substring(r-t,r)}`};l();d();var sSe=e=>{let t=e.toString();return vx(t)};l();d();l();d();var aSe=e=>e.includes(".")||e.includes("@")?!1:pf.safeParse(e).success||cc.safeParse(e).success||ql.safeParse(e).success||yf.safeParse(e).success,KB=(e,t=5)=>aSe(e)?vx(e,t):e;var cSe=(e,t,r,n=4)=>{let i=t?t.name:r,o=KB(e,n);return i?`${i} (${o})`:o};l();d();var uSe=e=>`${e.substring(0,5)}...`;l();d();var ky=re(Fr()),LW=(0,ky.createContext)(null);function fSe({children:e,analytics:t}){return ky.default.createElement(LW.Provider,{value:t},e)}function Ei(){let e=(0,ky.useContext)(LW);if(!e)throw new Error("useAnalytics must be used within a AnalyticsProvider");return e}l();d();l();d();var Ty=re(Fr()),VW=(0,Ty.createContext)(null);function lSe({children:e,userRepository:t,claimUsernameSigner:r}){return Ty.default.createElement(VW.Provider,{value:{userRepository:t,claimUsernameSigner:r}},e)}function KW(){let e=(0,Ty.useContext)(VW);if(!e)throw new Error("useUserContext must be used within a UserProvider");return e}function ir(){return KW().userRepository}function FW(){return KW().claimUsernameSigner}l();d();l();d();l();d();var Py=(e,t)=>t?`/user/v1/users/${e}/wallet-accounts/${t}`:`/user/v1/users/${e}/wallet-accounts`,Ax=e=>`/user/v1/users/${e}/profile`,PE=e=>`/user/v1/profiles/${e}`,HW=()=>"/user/v1/profiles/creation-check",qW=e=>`/v1/actors-search?query=${encodeURIComponent(e)}`,jW=["seed","seedless","privateKey"];var FB=10,WW=500,Ex={seedless:1,seed:2,privateKey:3};l();d();l();d();var Ix="@phantom/users",kn={checkUsernameAvailability(e){return["user",`${Ix}:check-username-availability`,{username:e}]},userProfile(){return["user",`${Ix}:user-profile`]},userProfileAttributeEffect(e){return["user",`${Ix}:user-profile-attribute-effect`,{username:e}]},userSyncedAccounts(){return["user",`${Ix}:user-synced-accounts`]}};var HB=async e=>{await e.removeQueries({queryKey:kn.userProfile()})},qB=async e=>{await e.resetQueries({queryKey:kn.userProfile()})},Lh=async e=>{await e.invalidateQueries({queryKey:kn.userProfile()})},jB=async e=>{await e.removeQueries({queryKey:kn.userSyncedAccounts()})};var Va=async e=>{await e.invalidateQueries({queryKey:kn.userSyncedAccounts()})};l();d();l();d();var By=(i=>(i.PUBLIC="public",i.PRIVATE="private",i.INVISIBLE="invisible",i.HIDDEN="hidden",i))(By||{}),dSe=Object.values(By),$W=R.string().brand("ProfileId"),BE=R.object({id:$W,username:R.string(),icon:R.string().nullish(),addresses:R.record(R.string(),R.string()),privacyState:R.nativeEnum(By).optional().default("public"),biography:R.string().nullish(),phantomJoinDate:R.string().nullish()}),WB=R.string().url().brand("ActorId"),hSe=R.object({id:R.string().optional(),orderedItems:WB.array(),next:R.string().optional()}),zW=R.object({id:R.string().url(),current:hSe.optional(),totalItems:R.number().optional()}),GW=R.object({type:R.string(),value:R.string().optional(),name:R.string().optional()}),pSe=R.object({id:R.string().url().optional(),name:R.string().optional(),type:R.string()}),YW=R.object({id:WB,name:R.string(),preferredUsername:R.string(),manuallyApprovesFollowers:R.boolean(),followers:R.union([zW,R.string().url()]),following:R.union([zW,R.string().url()]),icon:pSe.nullish(),attachment:R.union([GW,R.array(GW)]).optional(),summary:R.string().nullish(),published:R.string().nullish()}).transform(e=>{let{attachment:t,...r}=e,n={},i=!1,o=!1,s=!1,a=!1,c=!1;if(t){let u=Array.isArray(t)?t:[t];for(let h of u)if(!(!h.name||!h.value)){if(h.name.endsWith(":address")){let f=Yu.safeParse(h.name.replace(":address",""));if(f.success){let m=f.data;n[m]=h.value}}h.name==="requesting"&&(i=h.value==="true"),h.name==="requestedBy"&&(o=h.value==="true"),h.name==="blocking"&&(s=h.value==="true"),h.name==="following"&&(a=h.value==="true"),h.name==="followedBy"&&(c=h.value==="true")}}return{...r,addresses:n,isSentFollowRequestPending:i,hasPendingFollowRequest:o,isBlocking:s,isFollowing:a,isFollowedBy:c}}),ZW=R.object({actors:YW.array()}),kx={Image:"image",Emoji:"emoji",ReadOnlyDefault:"read-only-default",Default:"default"},_at=R.object({type:R.nativeEnum(kx),imageUrl:R.string().optional(),unicode:R.string().optional()}),zB=R.object({error:R.object({message:R.string()})});var GB=async e=>{let t=await _n.api().get(PE(e)),r=BE.safeParse(t.data);return r.success?r.data:null};l();d();var _E=R.string().regex(/^https?:\/\/.+$/),CE=R.string(),NE=R.literal("privateKey"),ySe=R.object({networkId:zl,publicKey:Kd,address:gM,pathType:hb.or(NE)}),mSe=R.object({networkId:Wl,publicKey:Kd,address:cc,pathType:db.or(NE)}),gSe=R.object({networkId:Hl,publicKey:Kd,address:R.string(),pathType:lb.or(NE)}),bSe=R.object({networkId:Sy,publicKey:Kd,address:R.string(),pathType:hk.or(NE)}),xSe=R.union([ySe,mSe,gSe,bSe]),JW=R.object({accountHash:R.string(),accountOrigin:R.string().regex(/^(seed|privateKey|seedless):(.+)/).catch("readOnly"),name:R.string().nullish().default(null).catch(null),icon:R.union([_E,CE]).nullish().default(null).catch(null),derivationIndex:R.number().nullish().default(null).catch(null),addresses:R.array(xSe).min(1)}),wSe=JW.and(R.object({id:R.string()})),ME=R.object({walletAccounts:R.array(wSe)}),jat=R.record(R.string(),JW);l();d();var _y=e=>{for(let t of jW)if(e.accountOrigin?.split(":")[0]===t)return t;return null},$l=e=>e.accountOrigin?.replace("seed:","")?.replace("privateKey:","")?.replace("seedless:",""),XW=(e=[])=>e.sort((t,r)=>{let n=_y(t),i=_y(r);if(n===null&&i===null)return 0;if(n===null)return 1;if(i===null)return-1;if(Ex[n]-Ex[i]!==0)return Ex[n]-Ex[i];let o=$l(t),s=$l(r);if(o===null&&s===null)return 0;if(o===null)return 1;if(s===null)return-1;let a=o.localeCompare(s);return a!==0?a:t.derivationIndex===null&&r.derivationIndex===null?0:t.derivationIndex===null?1:r.derivationIndex===null?-1:t.derivationIndex-r.derivationIndex});var SSe=e=>({getUsernameAvailability:t=>vSe(t),getUserProfile:()=>ASe(e),getUserProfileByUsername:t=>GB(t),getUserProfileByUsernameOrUserProfileId:t=>GB(t),searchForActor:(t,r,n)=>MSe(t,r,n),setUserProfile:({username:t,addresses:r,icon:n,signedMessages:i,privacyState:o})=>ESe(e,{username:t,addresses:r,signedMessages:i,icon:n,privacyState:o}),patchUserProfile:t=>ISe(e,t),deleteUserProfile:()=>kSe(e),isEligibleToClaim:t=>TSe(t),getSyncedAccounts:()=>$B(e),downloadSyncedAccounts:()=>PSe(e),uploadSyncedAccounts:t=>BSe(e,t),uploadSyncedAccount:t=>_Se(e,t),deleteSyncedAccounts:()=>CSe(e),deleteSyncedAccount:t=>NSe(e,t)}),vSe=async e=>{switch((await _n.api().get(PE(e))).status){case 200:return!1;case 403:return!1;case 404:return!0;default:throw new Error("Failed to check for username availability.")}},ASe=async({authRepository:e})=>{let t=await e.getUser();if(!t)throw new Error("User is not logged in, unable to get user profile.");let{userID:r,accessToken:n}=t,i=await _n.api().bearer(n).get(Ax(r)),o=BE.safeParse(i.data);return o.success?o.data:null},ESe=async({authRepository:e},{username:t,addresses:r,icon:n,signedMessages:i,privacyState:o})=>{let s=await e.getUser();if(!s)throw new Error("User is not logged in, unable to claim username.");let{userID:a,accessToken:c}=s,u=await _n.api().bearer(c).post(Ax(a),{username:t,signedMessages:i,icon:n,addresses:r,privacyState:o});if(u.status===201)return;let h=zB.safeParse(u.data);throw h.success?new Error(h.data.error.message):new Error("Unknown error")},ISe=async({authRepository:e},{username:t,addresses:r,icon:n,privacyState:i,biography:o})=>{let s=await e.getUser();if(!s)throw new Error("User is not logged in, unable to claim username.");let{userID:a,accessToken:c}=s,u=await _n.api().bearer(c).patch(Ax(a),{username:t,addresses:r,icon:n,privacyState:i,biography:o});if(u.status===200)return;oe.captureMessage(`Failed to patch user profile: ${u.status} ${JSON.stringify(u.data)}`,"Auth");let h=zB.safeParse(u.data);throw h.success?new Error(h.data.error.message):new Error("Unknown error")},kSe=async({authRepository:e})=>{let t=await e.getUser();if(!t)throw new Error("User is not logged in, unable to sync down accounts.");let{userID:r,accessToken:n}=t,i=await _n.api().bearer(n).delete(Ax(r));return 200<=i.status&&i.status<300},TSe=async e=>{try{return(await _n.api().post(HW(),{addresses:e})).status===200}catch{return!1}},$B=async({authRepository:e})=>{let t=await e.getUser();if(!t)throw new Error("User is not logged in, unable to sync down accounts.");let{userID:r,accessToken:n}=t,i=await _n.api().bearer(n).get(Py(r)),o=ME.safeParse(i.data);if(!o.success)throw new Error("Unable to get synced accounts: unable to parse GET /wallet-accounts response.");return{walletAccounts:XW(o.data.walletAccounts)}},PSe=async e=>{let{walletAccounts:t}=await $B(e),r=t.reduce((n,i)=>(n[i.accountHash]=i,n),{});return await e.claimUsernameSigner.storeSyncedAccounts(r),!0},QW=(e,t,r)=>_n.api().bearer(e).post(Py(t),r),BSe=async(e,t)=>{let{authRepository:r,claimUsernameSigner:n,queryClient:i}=e,o=await r.getUser();if(!o)return oe.addBreadcrumb("Auth","User is not logged in, unable to sync up accounts.","info"),!1;try{let s=t;s||(oe.addBreadcrumb("Auth","Uploading all currently synced accounts...","info"),s=[...(await $B(e)).walletAccounts.reduce((b,w)=>(b.add(w.accountHash),b),new Set)]);let a=await n.getBatchAccountMetadata(s),{userID:c,accessToken:u}=o,h=W6(Object.values(a),FB);for(let f of h)await Promise.all(f.map(m=>QW(u,c,m))),await bM(WW);return await Va(i),oe.addBreadcrumb("Auth",`\u2705 Uploaded synced accounts: ${t?t?.join(" "):"all currently synced accounts"}`,"info"),!0}catch(s){throw oe.addBreadcrumb("Auth",`Unable to sync up accounts: ${t?t?.join(" "):"all currently synced accounts"}`,"info"),oe.captureError(s,"Auth"),s}},_Se=async({authRepository:e,claimUsernameSigner:t,queryClient:r},n)=>{let i=await e.getUser();if(!i)return oe.addBreadcrumb("Auth",`User is not logged in, unable to sync up account: ${n}`,"info"),!1;try{oe.addBreadcrumb("Auth",`Syncing account... : ${n}`,"info");let o=await t.getAccountMetadata(n),{userID:s,accessToken:a}=i;return await QW(a,s,o),await Va(r),oe.addBreadcrumb("Auth",`\u2705 Synced account: ${n}`,"info"),!0}catch(o){throw oe.addBreadcrumb("Auth",`Unable to sync up account: ${n}`,"info"),oe.captureError(o,"Auth"),o}},ez=(e,t,r)=>_n.api().bearer(e).delete(Py(t,r.id),r),CSe=async({authRepository:e})=>{let t=await e.getUser();if(!t)throw new Error("User is not logged in, unable to delete all synced accounts.");let{userID:r,accessToken:n}=t,i=await _n.api().bearer(n).get(Py(r)),o=ME.safeParse(i.data);if(!o.success)throw new Error("Unable to delete all synced accounts => unable to parse GET /wallet-accounts response.");let s=W6(o.data.walletAccounts,FB);for(let a of s)await Promise.all(a.map(c=>ez(n,r,c)));return!0},NSe=async({authRepository:e},t)=>{let r=await e.getUser();if(!r)throw new Error(`User is not logged in, unable to remove synced account: ${t}`);let{userID:n,accessToken:i}=r,o=await _n.api().bearer(i).get(Py(n)),s=ME.safeParse(o.data);if(!s.success)throw new Error(`Unable to delete synced account [${t}] => unable to parse GET /wallet-accounts response`);let a=s.data.walletAccounts.find(c=>c.accountHash===t);if(!a)return oe.addBreadcrumb("Auth",`Calling deleteSyncedAccount on account that is not synced to begin with: ${t}`,"info"),!1;try{await ez(i,n,a)}catch(c){throw oe.addBreadcrumb("Auth",`Unable to delete synced account: ${t}`,"info"),oe.captureError(c,"Auth"),c}return!0},MSe=async(e,t,r)=>{oe.addBreadcrumb("network","User is searching for actors.","info",{query:e});let n=await _n.api().bearer(t).get(qW(e)),i=ZW.safeParse(n.data);return i.success?{actors:i.data.actors}:{actors:[]}};l();d();var DSe=new Set([kn.userProfile()[1],kn.userSyncedAccounts()[1]]),OSe=e=>{let t=e.queryKey[1];return typeof t!="string"||!t?!1:DSe.has(t)};l();d();l();d();var Tx=N0(Ei,e=>new DE(e)),DE=class{#e;constructor(t){this.#e=t}onClaimFlowStart(){this.#e.capture("userUsernameClaimFlowStart")}onCheckAvailability(t,r){this.#e.capture("userUsernameCheckAvailability",{data:{username:t,isAvailable:r}})}onAvatarSaved(t){this.#e.capture("userUsernameClaimFlowAvatarSaved",{data:{avatarType:t}})}onAnonymousAuthSaved(t,r){this.#e.capture("userUsernameClaimFlowAnonymousAuthSaved",{data:{numAuthFactorsSaved:t,numAuthFactorsShown:r}})}onLinkWalletsSaved(t,r){this.#e.capture("userUsernameClaimFlowLinkWalletsSaved",{data:{numWalletsSaved:t,numWalletsShown:r}})}onPublicAddressesSaved(){this.#e.capture("userUsernameClaimFlowPublicAddressesSaved")}onClaimFlowComplete(t,r){this.#e.capture("userUsernameClaimComplete",{data:{username:t,authUserID:r}})}};function USe(){let e=Tx(),t=M0(),r=ir(),n=FW(),i=Ce(),o=async({username:s,addresses:a,icon:c,secretIdentifiers:u,accountIdentifiers:h})=>{if(oe.addBreadcrumb("Auth",`Claiming Username: ${s}.`,"info"),u.length===0)throw new Error("Unable to log in to claim a username. Select a secret identifier to use as an auth factor.");oe.addBreadcrumb("Auth","Logging in with first auth factor","info");let f=await t.logIn({type:"key",secretIdentifier:u[0]});for(let b of u.slice(1))oe.addBreadcrumb("Auth","Adding additional auth factor","info"),await t.addAuthFactor({secretIdentifier:b});oe.addBreadcrumb("Auth","Signing over messages","info");let m=await n.signMessages(s);oe.addBreadcrumb("Auth","Creating user profile to claim username","info"),await r.setUserProfile({username:s,addresses:a,icon:c,signedMessages:m,privacyState:"public"}),oe.addBreadcrumb("Auth","Uploading Synced Accounts","info"),await r.uploadSyncedAccounts(h),oe.addBreadcrumb("Auth","\u2705 Username Claimed!","info"),await HM(i),await qB(i),await d1(i),await Lh(i),await h1(i),e.onClaimFlowComplete(s,f.userID)};return Ne({mutationFn:async s=>{try{return await o(s)}catch(a){oe.addBreadcrumb("Auth","Could not claim username","error");let c;throw a instanceof Error?c=a:c=new Error("Unable to claim username"),oe.captureError(c,"Auth"),c}}})}l();d();function RSe(e){let t=Tx(),r=ir(),n=kn.checkUsernameAvailability(e);return Yt({enabled:!!e,queryKey:n,queryFn:async()=>{if(!e)return!1;let s=await r.getUsernameAvailability(e);return t.onCheckAvailability(e,s),s}})}l();d();l();d();var Px=class extends Error{constructor(t="No user profile."){super(t),this.name="NoUserProfileError"}};var LSe=C0({days:1}),VSe=C0({minutes:1});function Ka(){let e=ir(),t=D0(),r=kn.userProfile();return Yt({enabled:t,queryKey:r,queryFn:async()=>{let i=await e.getUserProfile();if(!i)throw new Px;return i},gcTime:LSe,staleTime:VSe})}l();d();var KSe=C0({days:1}),FSe=C0({minutes:1}),tz=e=>{let t=ir(),r=D0();return Yt({enabled:r,queryKey:kn.userSyncedAccounts(),queryFn:async()=>(await t.getSyncedAccounts()).walletAccounts,gcTime:KSe,staleTime:FSe,select:e})};l();d();var HSe=()=>{let e=Ce(),t=M0(),r=ir();return Ne({mutationFn:async()=>{await r.deleteSyncedAccounts(),await r.deleteUserProfile(),await t.deleteAllAuthFactors(),await t.logOut(),await jB(e),await HB(e),await FM(e),await Va(e),await Lh(e),await d1(e),await h1(e)}})};l();d();var YB=()=>{let e=Ce(),t=ir(),r=async n=>{await t.patchUserProfile(n),await Lh(e)};return Ne({mutationFn:async n=>{try{return await r(n)}catch(i){oe.addBreadcrumb("Auth",`Could not update user profile: ${JSON.stringify(n)}`,"error");let o;throw i instanceof Error?o=i:o=new Error("Could not update user profile!"),oe.captureError(o,"Auth"),o}},onMutate:async n=>{let i=kn.userProfile();await e.cancelQueries({queryKey:i});let o=e.getQueryData(i);return e.setQueryData(i,{...o,...n}),{previousData:o}},onError:(n,i,o)=>{o&&e.setQueryData(kn.userProfile(),o.previousData)}})};l();d();l();d();var qSe=()=>{let e=Ce(),t=ir(),r=async n=>{Array.isArray(n)?await t.uploadSyncedAccounts(n):await t.uploadSyncedAccount(n),await Va(e)};return Ne({mutationFn:async n=>{try{return await r(n)}catch(i){let o=Array.isArray(n)?n.join(" "):n;oe.addBreadcrumb("Auth",`Could not add synced account: ${o}`,"error");let s;throw i instanceof Error?s=i:s=new Error("Could not add synced account!"),oe.captureError(s,"Auth"),s}}})};l();d();var jSe=()=>{let e=Ce(),t=ir(),r=async n=>{Array.isArray(n)?await Promise.all(n.map(i=>t.deleteSyncedAccount(i))):await t.deleteSyncedAccount(n),await Va(e)};return Ne({mutationFn:async n=>{try{return await r(n)}catch(i){let o=Array.isArray(n)?n.join(" "):n;oe.addBreadcrumb("Auth",`Could not remove synced account: ${o}`,"error");let s;throw i instanceof Error?s=i:s=new Error("Could not remove synced account!"),oe.captureError(s,"Auth"),s}}})};l();d();var WSe=N0(Ei,e=>new OE(e)),OE=class{#e;constructor(t){this.#e=t}onAvatarUpdated(t){this.#e.capture("userManageProfileAvatarUpdated",{data:{avatarType:t}})}onAuthFactorsUpdated(t,r){this.#e.capture("userManageProfileAuthFactorsUpdated",{data:{numAuthFactorsSaved:t,numAuthFactorsShown:r}})}onLinkedWalletsUpdated(t,r){this.#e.capture("userManageProfileLinkedWalletsUpdated",{data:{numWalletsSaved:t,numWalletsShown:r}})}onPrivacyStateUpdated(t){this.#e.capture("userManageProfilePrivacyStateUpdated",{data:{privacyState:t}})}onBiographyUpdated(){this.#e.capture("userManageProfileBiographyUpdated")}onPublicAddressesUpdated(t){this.#e.capture("userManageProfilePublicAddressesUpdated",{data:{networkIdsSaved:t}})}};l();d();l();d();l();d();l();d();var UE=(e,t)=>{try{let r=Uc(e,t);switch(r){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return Vi.getDisplayName(r);default:return}}catch(r){oe.addBreadcrumb("account","Failed to get address badge","error",{...r instanceof Error&&{error:r.message},networkId:e,address:t});return}};var rz={badge:(e,t,r)=>t.filter(Fl).length<=1?"":UE(e,r)??"",showAddressTypeExplainer:e=>e.filter(Fl).length>1,addressTooltipNetworkName:(e,t,r)=>r.filter(Fl).length>=2?UE(e,t)??te.getChainName(e):te.getChainName(e)};l();d();var nz={badge:(e,t)=>{switch(e){case"eip155:41454":case"eip155:10143":return te.getNetworkDefinition(e).shortName;case"eip155:143":return}},networkNameOverride:()=>"Monad"};var zSe=new wx({solana:{},ethereum:{},polygon:{},base:{},arbitrum:{},monad:nz,bitcoin:rz,sui:{},hypercore:{}}),Bx=OB(zSe);l();d();var Vft=R.string().regex(/^(root-derivation-path-group|(recommended|secondary|tertiary)-group:index-[0-9]+)$/,{message:"Invalid derivation path group."});l();d();l();d();var _t=(s=>(s.Seed="seed",s.PrivateKey="privateKey",s.Ledger="ledger",s.SeedVault="seedVault",s.ReadOnly="readOnly",s.Seedless="seedless",s))(_t||{}),GSe=R.object({derivationIndex:R.number(),addresses:R.array(R.object({pathType:R.union([db,hb]),value:R.string()})),publicKeys:R.array(R.object({pathType:lb,value:R.string()}))}),Rc=class extends Error{message="No account exists in storage for identifier"},Vh=class extends Error{message="No account exists in storage for identifier"},Yl=class extends Error{message="Address type not found or incompatible with account"},_x=class extends Error{message="Hardware wallet account does not have known secr*ts"},Cx=class extends Error{message="Read only account does not have known secr*ts"},Nx=class extends Error{message="Invalid configuration for read only account"},Kh=class extends Error{message="Seed already exists in storage"},Xu=class extends Error{message="No seed exists in storage for identifier"},Mx=class extends Error{message="The derivation index is missing or invalid"},Dx=class extends Error{message="Private key already exists in storage"},Fh=class extends Error{message="No private key exists in storage for identifier"};var Lc=class extends Error{message;constructor(t,r){super(),this.message=`Account of type ${t} found in Vault, while trying to add ${r} account`}},RE=class extends Error{message="Vault already stores a seedless account"},$Se=R.union([R.literal("unonboarded"),R.literal("unable-to-load-accounts")]),YSe=R.union([R.literal("invalid-identifier"),R.literal("fetch-integrity-storage-error"),R.literal("fetch-entropy-storage-error"),R.literal("fetch-pk-storage-error"),R.literal("invalid-entropy"),R.literal("invalid-entropy-bip-39"),R.literal("invalid-checksum-bits"),R.literal("invalid-entropy-bits"),R.literal("invalid-checksum"),R.literal("invalid-entropy-length-less-than-twelve"),R.literal("invalid-entropy-length-more-than-twenty-four"),R.literal("invalid-entropy-length-wrong-word"),R.literal("invalid-pk-address-type"),R.literal("invalid-pk-identifier"),R.literal("invalid-pk"),R.literal("internal-error")]),ZSe=R.literal("safely-onboarded"),JSe=R.union([R.object({status:$Se,isOnboarded:R.literal(!1),reonboardingNeeded:R.literal(!1)}),R.object({status:YSe,isOnboarded:R.literal(!0),reonboardingNeeded:R.literal(!0)}),R.object({status:ZSe,isOnboarded:R.literal(!0),reonboardingNeeded:R.literal(!1)})]);var XSe=(e,t,r,n)=>{let i=[];for(let o of t){let s=te.getChainID(o);if(n.includes(s))for(let a of te[s].addressTypes){if(!r.includes(a))continue;let c=e.chains[a];if(c)switch(c.chainType){case"eip155":case"solana":{i.push({networkID:o,addressType:a,address:c.address});break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{i.push({networkID:o,addressType:a,publicKey:c.publicKey,address:c.addresses[o]});break}case"sui":{i.push({networkID:o,addressType:a,publicKey:c.publicKey,address:c.address});break}default:Ae(c)}}}return i},QSe=(e,t,r,n)=>{let i=[];for(let o of t){let s=te.getChainID(o);if(n.includes(s))for(let a of te[s].addressTypes){if(!r.includes(a))continue;let c=e.chains[a];if(c)switch(c.chainType){case"eip155":case"solana":{i.push({networkID:o,addressType:a,address:c.address});break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{i.push({networkID:o,addressType:a,publicKey:c.publicKey,address:c.addresses[o]});break}case"sui":{i.push({networkID:o,addressType:a,publicKey:c.publicKey,address:c.address});break}default:Ae(c)}}}return i},eve=(e,t,r,n)=>{let i=[];for(let o of t){let s=te.getChainID(o);if(n.includes(s))for(let a of te[s].addressTypes)r.includes(a)&&e.chainType===a&&i.push({networkID:o,addressType:a,address:e.address})}return i},tve=(e,t,r,n)=>{let i=[];for(let o of t){let s=te.getChainID(o);if(n.includes(s)){for(let a of te[s].addressTypes)if(r.includes(a)&&e.chainType===a)switch(e.chainType){case"eip155":case"solana":{i.push({networkID:o,addressType:a,address:e.address});break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{i.push({networkID:o,addressType:a,publicKey:e.publicKey,address:e.addresses[o]});break}case"sui":{i.push({networkID:o,addressType:a,publicKey:e.publicKey,address:e.address});break}default:Ae(e)}}}return i},rve=(e,t,r,n)=>{let i=[];for(let o of t){let s=te.getChainID(o);if(n.includes(s)){for(let a of te[s].addressTypes)if(r.includes(a))for(let[c,u]of Object.entries(e.addresses))c===a&&i.push({networkID:o,addressType:a,address:u})}}return i},Ox=(e,t,r,n,i,o)=>{let s;switch(o?s=Object.values(i.setting):s=t,s=s.sort((a,c)=>te.compareNetworkID(a,c)),e.type){case"seedless":case"seed":return XSe(e,s,r,n);case"ledger":return QSe(e,s,r,n);case"seedVault":return eve(e,s,r,n);case"privateKey":return tve(e,s,r,n);case"readOnly":return rve(e,s,r,n)}};l();d();var nve=({account:e,syncedAccounts:t,index:r,offsetIndex:n})=>{let i=t.find(s=>s.accountHash===e.identifier),o={name:i?.name??OM("onboardingImportAccountsAccountName",{walletIndex:n+r+1})};return i?.icon&&(o.icon=i.icon.startsWith("https://")?{type:"image",imageUrl:i.icon}:{type:"emoji",unicode:i.icon}),o};l();d();l();d();var Cy="Trying to find a selected account, but there no accounts in the vault.",Ux="Missing ChainAvailability.",iz=(e,t)=>`No account found! Num accounts: ${e} | Identifier used: ${t}`,ZB=new Error("The current account group has no valid bitcoin address"),JB=new Error("The current account group has no valid EIP-155 address"),XB=new Error("The current account group has no valid solana address"),QB=new Error("The current account group has no valid sui address"),oz=new Error("The current account group has no valid address or the the chain type was unsupported"),slt=new Error("[Legacy Mn*monic Fetch] no legacy mn*monic in storage"),alt=new Error("[Legacy Mn*monic Fetch] internal error fetching legacy mn*monic");l();d();var ive=[".phantom-labs.account.accountMetadata","developerMode","networkSetting",".phantom-labs.account.selectedAccount","termsHaveBeenAcknowledgedLastSeenVersion"];var llt=new Error("Failed to clear selected account index");async function e_(e){try{let t=await e.get(".phantom-labs.account.selectedAccount");return t?.version===2?t.identifier:null}catch{throw ove}}var ove=new Error("Failed to get selected account identifier");async function rs(e,t){try{let r={version:2,identifier:t};return await e.set(".phantom-labs.account.selectedAccount",r)}catch{throw sve}}var sve=new Error("Failed to set selected account identifier");var Qu=async(e,t)=>{if(e.length===0)throw new Error(Cy);let r=await e_(t),n=e.find(i=>i.identifier===r);return n||(await rs(t,e[0].identifier),e[0])};l();d();var t_=e=>{switch(e){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":case"bip44Change":case"bip44Ethereum":return!0;case"bip44":case"deprecated":case"bip44Root":case"bip44RootEthereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":case"bip44Sui":return!1}};l();d();var ave=({pathType:e,index:t})=>{switch(e){case"bip44RootEthereum":case"bip44Root":return"root-derivation-path-group";case"bip44Change":case"bip44Ethereum":case"bip44Sui":case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":return`recommended-group:index-${t}`;case"bip44EthereumSecondary":case"bip44":return`secondary-group:index-${t}`;case"bip44EthereumTertiary":case"deprecated":return`tertiary-group:index-${t}`}};l();d();l();d();var cve=e=>e==null?!1:["ledger","seedVault"].includes(e);l();d();function sz(e,t){let n=(e?.addresses??[]).find(({addressType:i})=>i===t);if(!e?.addresses||!n)switch(t){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":throw ZB;case"eip155":throw JB;case"solana":throw XB;case"sui":throw QB;default:throw oz}return n}function uve(e,t){return sz(e,t)?.address}var LE=e=>{switch(e.type){case"seedless":case"seed":case"privateKey":return!0;case"ledger":case"seedVault":case"readOnly":return!1;default:Ae(e)}};l();d();function fve(e){let t=e.endsWith(".sol"),r=e==="@",n=e.startsWith("@")&&e.length>1;return[t,r,n]}l();d();function lve(e){return[e.endsWith(".eth")]}l();d();var dve=async(e,t,r)=>{let i=(await e.fetchAllAccounts()).find(s=>{switch(s.type){case"seed":case"seedless":return s.seedIdentifier===r;case"privateKey":return s.privateKeyIdentifier===r;case"ledger":case"seedVault":case"readOnly":return!1;default:Ae(s)}});if(!i)throw new Error("Unable to find account to sign client JWT with.");let o=await e.sign(i.identifier,{isJWT:!0,data:t});if(o.status==="error")throw new Error("Error signing over clientJWT.");if(!("signedJWT"in o)||!o.signedJWT)throw new Error("No JWT from vault signing.");return o.signedJWT};l();d();var az=async e=>[...(await e.fetchAllAccounts()).reduce((i,o)=>{switch(o.type){case"seed":case"seedless":{i.add(o.seedIdentifier);break}case"privateKey":{i.add(o.privateKeyIdentifier);break}case"ledger":case"seedVault":case"readOnly":break;default:Ae(o);break}return i},new Set)];l();d();var A_=re(Ho());l();d();l();d();function Ii(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(E.NODE_ENV!=="production"){var i=wve[e],o=i?typeof i=="function"?i.apply(null,r):i:"unknown error nr: "+e;throw Error("[Immer] "+o)}throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Ny(e){return!!e&&!!e[ns]}function qh(e){return!!e&&(function(t){if(!t||typeof t!="object")return!1;var r=Object.getPrototypeOf(t);if(r===null)return!0;var n=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===Sve}(e)||Array.isArray(e)||!!e[yz]||!!e.constructor[yz]||l_(e)||d_(e))}function Lx(e,t,r){r===void 0&&(r=!1),Dy(e)===0?(r?Object.keys:g_)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,i){return t(i,n,e)})}function Dy(e){var t=e[ns];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:l_(e)?2:d_(e)?3:0}function s_(e,t){return Dy(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function hve(e,t){return Dy(e)===2?e.get(t):e[t]}function mz(e,t,r){var n=Dy(e);n===2?e.set(t,r):n===3?(e.delete(t),e.add(r)):e[t]=r}function pve(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function l_(e){return bve&&e instanceof Map}function d_(e){return xve&&e instanceof Set}function Hh(e){return e.o||e.t}function h_(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=vve(e);delete t[ns];for(var r=g_(t),n=0;n<r.length;n++){var i=r[n],o=t[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function p_(e,t){return t===void 0&&(t=!1),y_(e)||Ny(e)||!qh(e)||(Dy(e)>1&&(e.set=e.add=e.clear=e.delete=yve),Object.freeze(e),t&&Lx(e,function(r,n){return p_(n,!0)},!0)),e}function yve(){Ii(2)}function y_(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Vc(e){var t=Ave[e];return t||Ii(18,e),t}function cz(){return E.NODE_ENV==="production"||My||Ii(0),My}function r_(e,t){t&&(Vc("Patches"),e.u=[],e.s=[],e.v=t)}function VE(e){a_(e),e.p.forEach(mve),e.p=null}function a_(e){e===My&&(My=e.l)}function uz(e){return My={p:[],l:My,h:e,m:!0,_:0}}function mve(e){var t=e[ns];t.i===0||t.i===1?t.j():t.O=!0}function n_(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.g||Vc("ES5").S(t,e,n),n?(r[ns].P&&(VE(t),Ii(4)),qh(e)&&(e=KE(t,e),t.l||FE(t,e)),t.u&&Vc("Patches").M(r[ns].t,e,t.u,t.s)):e=KE(t,r,[]),VE(t),t.u&&t.v(t.u,t.s),e!==gz?e:void 0}function KE(e,t,r){if(y_(t))return t;var n=t[ns];if(!n)return Lx(t,function(o,s){return fz(e,n,t,o,s,r)},!0),t;if(n.A!==e)return t;if(!n.P)return FE(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=h_(n.k):n.o;Lx(n.i===3?new Set(i):i,function(o,s){return fz(e,n,i,o,s,r)}),FE(e,i,!1),r&&e.u&&Vc("Patches").R(n,r,e.u,e.s)}return n.o}function fz(e,t,r,n,i,o){if(E.NODE_ENV!=="production"&&i===r&&Ii(5),Ny(i)){var s=KE(e,i,o&&t&&t.i!==3&&!s_(t.D,n)?o.concat(n):void 0);if(mz(r,n,s),!Ny(s))return;e.m=!1}if(qh(i)&&!y_(i)){if(!e.h.F&&e._<1)return;KE(e,i),t&&t.A.l||FE(e,i)}}function FE(e,t,r){r===void 0&&(r=!1),e.h.F&&e.m&&p_(t,r)}function i_(e,t){var r=e[ns];return(r?Hh(r):e)[t]}function lz(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function c_(e){e.P||(e.P=!0,e.l&&c_(e.l))}function o_(e){e.o||(e.o=h_(e.t))}function u_(e,t,r){var n=l_(t)?Vc("MapSet").N(t,r):d_(t)?Vc("MapSet").T(t,r):e.g?function(i,o){var s=Array.isArray(i),a={i:s?1:0,A:o?o.A:cz(),P:!1,I:!1,D:{},l:o,t:i,k:null,o:null,j:null,C:!1},c=a,u=f_;s&&(c=[a],u=Rx);var h=Proxy.revocable(c,u),f=h.revoke,m=h.proxy;return a.k=m,a.j=f,m}(t,r):Vc("ES5").J(t,r);return(r?r.A:cz()).p.push(n),n}function gve(e){return Ny(e)||Ii(22,e),function t(r){if(!qh(r))return r;var n,i=r[ns],o=Dy(r);if(i){if(!i.P&&(i.i<4||!Vc("ES5").K(i)))return i.t;i.I=!0,n=dz(r,o),i.I=!1}else n=dz(r,o);return Lx(n,function(s,a){i&&hve(i.t,s)===a||mz(n,s,t(a))}),o===3?new Set(n):n}(e)}function dz(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return h_(e)}var hz,My,m_=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",bve=typeof Map<"u",xve=typeof Set<"u",pz=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",gz=m_?Symbol.for("immer-nothing"):((hz={})["immer-nothing"]=!0,hz),yz=m_?Symbol.for("immer-draftable"):"__$immer_draftable",ns=m_?Symbol.for("immer-state"):"__$immer_state";var wve={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},Sve=""+Object.prototype.constructor,g_=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,vve=Object.getOwnPropertyDescriptors||function(e){var t={};return g_(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},Ave={},f_={get:function(e,t){if(t===ns)return e;var r=Hh(e);if(!s_(r,t))return function(i,o,s){var a,c=lz(o,s);return c?"value"in c?c.value:(a=c.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,r,t);var n=r[t];return e.I||!qh(n)?n:n===i_(e.t,t)?(o_(e),e.o[t]=u_(e.A.h,n,e)):n},has:function(e,t){return t in Hh(e)},ownKeys:function(e){return Reflect.ownKeys(Hh(e))},set:function(e,t,r){var n=lz(Hh(e),t);if(n?.set)return n.set.call(e.k,r),!0;if(!e.P){var i=i_(Hh(e),t),o=i?.[ns];if(o&&o.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(pve(r,i)&&(r!==void 0||s_(e.t,t)))return!0;o_(e),c_(e)}return e.o[t]===r&&typeof r!="number"&&(r!==void 0||t in e.o)||(e.o[t]=r,e.D[t]=!0,!0)},deleteProperty:function(e,t){return i_(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,o_(e),c_(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=Hh(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){Ii(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ii(12)}},Rx={};Lx(f_,function(e,t){Rx[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Rx.deleteProperty=function(e,t){return E.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Ii(13),Rx.set.call(this,e,t,void 0)},Rx.set=function(e,t,r){return E.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Ii(14),f_.set.call(this,e[0],t,r,e[0])};var Eve=function(){function e(r){var n=this;this.g=pz,this.F=!0,this.produce=function(i,o,s){if(typeof i=="function"&&typeof o!="function"){var a=o;o=i;var c=n;return function(S){var P=this;S===void 0&&(S=a);for(var N=arguments.length,O=Array(N>1?N-1:0),C=1;C<N;C++)O[C-1]=arguments[C];return c.produce(S,function(L){var V;return(V=o).call.apply(V,[P,L].concat(O))})}}var u;if(typeof o!="function"&&Ii(6),s!==void 0&&typeof s!="function"&&Ii(7),qh(i)){var h=uz(n),f=u_(n,i,void 0),m=!0;try{u=o(f),m=!1}finally{m?VE(h):a_(h)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(S){return r_(h,s),n_(S,h)},function(S){throw VE(h),S}):(r_(h,s),n_(u,h))}if(!i||typeof i!="object"){if((u=o(i))===void 0&&(u=i),u===gz&&(u=void 0),n.F&&p_(u,!0),s){var b=[],w=[];Vc("Patches").M(i,u,b,w),s(b,w)}return u}Ii(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(u){for(var h=arguments.length,f=Array(h>1?h-1:0),m=1;m<h;m++)f[m-1]=arguments[m];return n.produceWithPatches(u,function(b){return i.apply(void 0,[b].concat(f))})};var s,a,c=n.produce(i,o,function(u,h){s=u,a=h});return typeof Promise<"u"&&c instanceof Promise?c.then(function(u){return[u,s,a]}):[c,s,a]},typeof r?.useProxies=="boolean"&&this.setUseProxies(r.useProxies),typeof r?.autoFreeze=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){qh(r)||Ii(8),Ny(r)&&(r=gve(r));var n=uz(this),i=u_(this,r,void 0);return i[ns].C=!0,a_(n),i},t.finishDraft=function(r,n){var i=r&&r[ns];E.NODE_ENV!=="production"&&(i&&i.C||Ii(9),i.I&&Ii(10));var o=i.A;return r_(o,n),n_(void 0,o)},t.setAutoFreeze=function(r){this.F=r},t.setUseProxies=function(r){r&&!pz&&Ii(20),this.g=r},t.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var o=n[i];if(o.path.length===0&&o.op==="replace"){r=o.value;break}}i>-1&&(n=n.slice(i+1));var s=Vc("Patches").$;return Ny(r)?s(r,n):this.produce(r,function(a){return s(a,n)})},e}(),is=new Eve,b_=is.produce,idt=is.produceWithPatches.bind(is),odt=is.setAutoFreeze.bind(is),sdt=is.setUseProxies.bind(is),adt=is.applyPatches.bind(is),cdt=is.createDraft.bind(is),udt=is.finishDraft.bind(is),fdt=b_;var x_=new Error("Failed to add user account metadata to storage"),Vx=new Error("Could not find account metadata in storage");async function w_(e,t,r){let n=await e.get(".phantom-labs.account.accountMetadata");if(!n)throw Vx;let i=n.accounts[t];i?i.name=r:(i={name:r},n.accounts[t]=i),await e.set(".phantom-labs.account.accountMetadata",n)}async function S_(e,t,r){let n=await e.get(".phantom-labs.account.accountMetadata");if(!n)throw Vx;let i=n.accounts[t];i?i.icon=r:(i={icon:r,name:mf.t("onboardingImportAccountsAccountName",{walletIndex:""})},n.accounts[t]=i),await e.set(".phantom-labs.account.accountMetadata",n)}async function v_(e,t,r){let n=await e.get(".phantom-labs.account.accountMetadata");if(!n)throw Vx;let i=n.accounts[t];i?i.balance=r:(i={balance:r,name:mf.t("onboardingImportAccountsAccountName",{walletIndex:""})},n.accounts[t]=i),await e.set(".phantom-labs.account.accountMetadata",n)}async function Jl(e,t,r){try{let n=await e.get(".phantom-labs.account.accountMetadata");n?n.accounts[t]=r:n={version:1,accounts:{[t]:r}},await e.set(".phantom-labs.account.accountMetadata",n)}catch{throw x_}}async function Kx(e,t){try{let r=await e.get(".phantom-labs.account.accountMetadata");r?r.accounts=b_(r.accounts,n=>{for(let[i,o]of Object.entries(t))n[i]||(n[i]={name:""}),n[i].name=o.name,n[i].icon=o.icon??n[i].icon,n[i].balance=o.balance??n[i].balance,n[i].connectedDevices=o.connectedDevices??n[i].connectedDevices}):r={version:1,accounts:{...t}},await e.set(".phantom-labs.account.accountMetadata",r)}catch{throw x_}}async function Fx(e,t){let r=await e.get(".phantom-labs.account.accountMetadata");r||(r={version:1,accounts:{}});let n=r.accounts[t];return n||(n={name:mf.t("onboardingImportAccountsAccountName",{walletIndex:""})}),n}async function Hx(e){let t=await e.get(".phantom-labs.account.accountMetadata");return t?t.accounts:{}}async function qx(e,t){let r=await e.get(".phantom-labs.account.accountMetadata");if(!r)throw Vx;delete r.accounts[t],await e.set(".phantom-labs.account.accountMetadata",r)}l();d();l();d();var Oy=async e=>{let t=await e.get("networkSetting"),r=await Ci.isFeatureEnabledAsync("enable-sui-testnet");if(!t)return Sx(r);let n=Ive(t,r);return kve(e,n)};function Ive(e,t){let r={...e,setting:{...e.setting}};return t&&!r.setting.sui?r.setting.sui=Sx(t).setting.sui:!t&&r.setting.sui&&delete r.setting.sui,r}var kve=async(e,t)=>{let r=!1;Tve(t)&&(r=!0);let n=t.setting.solana;n&&te.isMainnetNetworkID(n)&&(t.setting.solana=Ey,r=!0);let i=t.setting.eip155;return i&&te.isMainnetNetworkID(i)&&(t.setting.eip155=Iy,r=!0),r&&await e.set("networkSetting",t),t},Tve=e=>{let t=!1,r=e.setting.eip155;return r&&(r.toString()==="eip155:5"&&(e.setting.eip155=Ot.Ethereum.Sepolia,t=!0),r.toString()==="eip155:80001"&&(e.setting.eip155=Ot.Polygon.Amoy,t=!0)),t};var jh=async(e,t,r)=>{let n=await e.fetchAllAccounts();if(n.length===0)return[];let i=t.get("developerMode"),o=Oy(t),s=Hx(t),[a,c,u]=await Promise.all([i,o,s]);return n.map(h=>{let f=u[h.identifier];f||(f={name:mf.t("onboardingImportAccountsAccountName",{walletIndex:""})});let m={name:f.name,icon:f.icon,identifier:h.identifier,addresses:Ox(h,r.enabledMainnetOnlyNetworkIDs,r.enabledAddressTypes,r.enabledChainIDs,c,a?.isDeveloperMode??!1)};return h.type==="seed"?{...m,type:"seed",seedIdentifier:h.seedIdentifier,isReadOnly:!1}:h.type==="seedless"?{...m,type:"seedless",seedIdentifier:h.seedIdentifier,isReadOnly:!1}:h.type==="readOnly"?{...m,type:"readOnly",isReadOnly:!0}:h.type==="privateKey"?{...m,privateKeyIdentifier:h.privateKeyIdentifier,type:"privateKey",isReadOnly:!1}:{...m,type:h.type,isReadOnly:!1}})};var bz=(e,t)=>{let r=Math.floor(Date.now()/1e3);return`Signing this message to claim username ${e} | Public Key: ${t} | Time: ${r}`},xz=(e,t)=>{let r=e.addresses.map(n=>{let i;switch(t.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":i=`0x${Buffer.from(t.publicKey).toString("hex")}`;break;case"solana":i=`0x${Buffer.from(A_.default.decode(t.address)).toString("hex")}`;break;case"eip155":i=t.address;break;case"sui":i=f1(t.publicKey);break}return{networkId:n.networkID,pathType:"privateKey",publicKey:i,address:n.address}});return r.length===0?null:{accountHash:e.identifier,accountOrigin:`privateKey:${e.privateKeyIdentifier}`,derivationIndex:-1,name:e.name,icon:e.icon?.imageUrl??e.icon?.unicode??null,addresses:r}},wz=(e,t)=>{let r=[];for(let n of e.addresses){let i=t.chains[n.addressType];if(!i)continue;let o,s;switch(i.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{o=`0x${Buffer.from(i.publicKey).toString("hex")}`,s=i.addresses["bip122:000000000019d6689c085ae165831e93"];break}case"solana":o=`0x${Buffer.from(A_.default.decode(i.address)).toString("hex")}`,s=i.address;break;case"eip155":o=i.address,s=i.address;break;case"sui":o=`0x${Buffer.from(i.publicKey).toString("hex")}`,s=i.address;break}let a=null;switch(!0){case(gk(i.pathType)&&te.isSolanaNetworkID(n.networkID)):a={publicKey:o,address:s,pathType:i.pathType,networkId:n.networkID};break;case(mk(i.pathType)&&te.isEVMNetworkID(n.networkID)):a={publicKey:o,address:s,pathType:i.pathType,networkId:n.networkID};break;case(yk(i.pathType)&&te.isBitcoinNetworkID(n.networkID)):a={publicKey:o,address:s,pathType:i.pathType,networkId:n.networkID};break;case(bk(i.pathType)&&te.isSuiNetworkID(n.networkID)):a={publicKey:o,address:s,pathType:i.pathType,networkId:n.networkID};break}a&&r.push(a)}return{accountHash:e.identifier,accountOrigin:e.type==="seed"?`seed:${e.seedIdentifier}`:`seedless:${e.seedIdentifier}`,name:e.name,icon:e.icon?.imageUrl??e.icon?.unicode??null,derivationIndex:t.derivationIndex,addresses:r}},Pve=e=>{let t=_E.safeParse(e);if(t.success)return{type:"image",imageUrl:t.data};let r=CE.safeParse(e);return r.success?{type:"emoji",unicode:r.data}:{type:"default"}},Bve=async(e,t)=>{let r=Object.entries(t).reduce((n,[i,o])=>(n[i]={name:o.name??"",icon:Pve(o.icon)},n),{});await Kx(e,r)},_ve=(e,t)=>({signMessages:async r=>{let n=[],i=await Rh(t),o=await jh(e,t,i);for(let s of o){if(!(s.type==="seed"||s.type==="privateKey"||s.type==="seedless"))continue;let a=s.identifier,c=s.addresses.find(f=>f.addressType==="solana");if(!c||c.addressType!=="solana")continue;let u=bz(r,c.address),h=await e.sign(a,{signingType:"message",chainType:c.addressType,message:bz(r,c.address)});h.status!=="error"&&n.push({networkID:c.networkID,address:c.address,message:u,signature:h.signature})}return n},getBatchAccountMetadata:async r=>{let n=new Set(r),i=await Rh(t),o=await jh(e,t,i),s=(await e.fetchAllAccounts()).reduce((c,u)=>(c[u.identifier]=u,c),{}),a={};for(let c of o){if(!LE(c))continue;let u=s?.[c.identifier]??null,h=null;switch(c.type){case"seedless":case"seed":n.has(c.identifier)&&u.type===c.type&&(h=wz(c,u));break;case"privateKey":n.has(c.identifier)&&u.type===c.type&&(h=xz(c,u));break}h&&(a[c.identifier]=h)}return a},getAccountMetadata:async r=>{let n=await Rh(t),i=await jh(e,t,n),o=(await e.fetchAllAccounts()).reduce((u,h)=>(u[h.identifier]=h,u),{}),s=i.find(u=>u.identifier===r)??null;if(!s)throw new Error(`Unable to get account metadata for account: ${r}`);if(!LE(s))throw new Error(`Syncing is not supported for account type: ${s.type}`);let a=o?.[s.identifier]??null,c=null;switch(s.type){case"seedless":case"seed":a.type===s.type&&(c=wz(s,a));break;case"privateKey":a.type===s.type&&(c=xz(s,a));break}if(!c)throw new Error(`Unable to construct metadata to sync for account: ${s.identifier}`);return c},storeSyncedAccounts:async r=>(oe.addBreadcrumb("Auth",`Storing ${Object.entries(r).length} synced accounts`,"info"),await Bve(t,r),oe.addBreadcrumb("Auth","\u2705 Stored Synced Account metadata","info"),await e.syncAccounts(r),oe.addBreadcrumb("Auth","\u2705 Stored Sync Accounts in Vault","info"),!0)});l();d();var Cve=(e,t)=>e.filter(r=>{switch(r.type){case"seed":case"seedless":return r.seedIdentifier===t;case"privateKey":return r.privateKeyIdentifier===t;case"ledger":case"seedVault":case"readOnly":return!1;default:Ae(r);return}});l();d();function Nve(e){return Bx.get(e).networkNameOverride?.(e)??te.getNetworkName(e,!0)}l();d();function Mve(e){return{version:1,setting:{solana:Ey,eip155:Iy,...e?{sui:VB}:{}}}}l();d();l();d();function Uy(e,t){return typeof e=="string"?e===t:e.length===t.length&&e.every((r,n)=>r===t[n])}l();d();var jx=re(lG());function $Ee(e){return e=(0,jx.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{switch(t.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":case"sui":{Wh(t.publicKey)&&(t.publicKey=new Uint8Array(Buffer.from(t.publicKey)));break}default:Ae(t)}break}case"readOnly":break;case"ledger":case"seedless":case"seed":for(let r of Object.keys(t.chains)){let n=t.chains[r];if(n)switch(n.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":case"sui":{Wh(n.publicKey)&&(n.publicKey=new Uint8Array(Buffer.from(n.publicKey)));break}default:Ae(n)}}break;case"seedVault":break;default:Ae(t)}}),e}function YEe(e){return e=(0,jx.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{switch(t.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":case"sui":{t.publicKey instanceof Uint8Array&&(t.publicKey=Buffer.from(t.publicKey).toJSON());break}default:Ae(t)}break}case"readOnly":break;case"ledger":case"seedless":case"seed":for(let r of Object.keys(t.chains)){let n=t.chains[r];if(n)switch(n.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":case"sui":{n.publicKey instanceof Uint8Array&&(t.chains[r].publicKey=Buffer.from(n.publicKey).toJSON());break}default:Ae(n)}}break;case"seedVault":break;default:Ae(t)}}),e}function dG(e){return e=(0,jx.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{t.version===1&&Wh(t.publicKey)&&(t.publicKey=new Uint8Array(Buffer.from(t.publicKey)));break}case"readOnly":break;case"ledger":case"seed":case"seedless":for(let r of Object.keys(t.chains))if(t.version===1&&Wh(t.chains[r]?.publicKey)){let n=t.chains[r];n&&(n.publicKey=new Uint8Array(Buffer.from(n.publicKey)))}break;case"seedVault":break;default:Ae(t)}}),e}function hG(e){return e=(0,jx.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{t.version===1&&t.publicKey instanceof Uint8Array&&(t.publicKey=Buffer.from(t.publicKey).toJSON());break}case"readOnly":break;case"ledger":case"seed":case"seedless":for(let r of Object.keys(t.chains))t.version===1&&t.chains[r]?.publicKey instanceof Uint8Array&&(t.chains[r].publicKey=Buffer.from(t.chains[r]?.publicKey).toJSON());break;case"seedVault":break;default:Ae(t)}}),e}function Wh(e){return!!e&&typeof e=="object"&&z6("type",e)&&typeof e.type=="string"&&z6("data",e)&&Array.isArray(e.data)&&e.data.every(t=>!Number.isNaN(parseInt(t)))}l();d();var os=".phantom-labs.vault";var jE=`${os}.accounts`,Ry=`${os}.secrets`,WE=e=>`${os}.privateKey.${e}`,zE=e=>`${os}.seed.${e}`,GE=e=>`${os}.seedless.${e}`,qE=`${os}.integrityCheck`;async function Sr(e){return(await vG(e))?.accounts??[]}async function mG(e){let t=await ss(e),r=new Set(t.seedIdentifiers),n=await Sr(e);for(let o of n)o.type==="seed"&&r.add(o.seedIdentifier);let i=[];for(let o of r)i.push({identifier:o});return i}async function $E(e){let t=await ss(e),r=new Set(t.seedlessIdentifiers),n=await Sr(e);for(let o of n)o.type==="seedless"&&r.add(o.seedIdentifier);let i=[];for(let o of r)i.push({identifier:o});return i}async function ss(e){let t=await e.generalStorage.get(Ry);return{privateKeyIdentifiers:t?.privateKeyIdentifiers??[],seedIdentifiers:t?.seedIdentifiers??[],seedlessIdentifiers:t?.seedlessIdentifiers??[]}}async function gG(e,t){let r=zE(t),n=await e.secretsStorage.getSecureValue(r);if(n===null){let i=GE(t);n=await e.secretsStorage.getSecureValue(i)}if(n==null)throw new Xu;return Wh(n.entropy)?n.entropy=new Uint8Array(Buffer.from(n.entropy)):n.entropy=new Uint8Array(Object.values(n.entropy)),n}async function Xl(e,t){let r=WE(t),n=await e.secretsStorage.getSecureValue(r);if(n==null)throw new Fh;return Wh(n.privateKey)?n.privateKey=new Uint8Array(Buffer.from(n.privateKey)):n.privateKey=new Uint8Array(Object.values(n.privateKey)),n}async function zi(e,t,r=!0){let n=await vG(e);if(!n)n={version:1,accounts:[t]};else{let i=n.accounts,o=JEe(i,t);if(o.length>0){if(!r)throw new Lc(o[0].type,t.type);let s=yG(t.type);for(let c of o)if(yG(c.type)>=s)throw new Lc(c.type,t.type);let a=o.map(c=>c.identifier);return i=i.filter(c=>!a.includes(c.identifier)),i.push(t),await Fa(e,i),await I_(e)}else i.push(t);n.accounts=i}return Fa(e,n.accounts)}async function Fa(e,t){let r={version:1,accounts:t};return e.generalStorage.set(jE,hG(r))}async function bG(e,t){let r=WE(t.identifier);await e.secretsStorage.setSecureValue(r,t),await e3e(e,t.identifier)}async function xG(e,t){let r=zE(t.identifier);await e.secretsStorage.setSecureValue(r,t),await XEe(e,t.identifier)}async function wG(e,t){let r=GE(t.identifier);await e.secretsStorage.setSecureValue(r,t),await QEe(e,t.identifier)}async function I_(e){let t=await Sr(e),r=new Set,n=new Set;for(let a of t)switch(a.type){case"seed":case"seedless":r.add(a.seedIdentifier);break;case"privateKey":n.add(a.privateKeyIdentifier);break;case"ledger":case"readOnly":case"seedVault":break;default:Ae(a)}let i=await ss(e),o={seedIdentifiers:i.seedIdentifiers.filter(a=>r.has(a)),seedlessIdentifiers:i.seedlessIdentifiers.filter(a=>r.has(a)),privateKeyIdentifiers:i.privateKeyIdentifiers.filter(a=>n.has(a))},s={seedIdentifiers:i.seedIdentifiers.filter(a=>!r.has(a)),seedlessIdentifiers:i.seedlessIdentifiers.filter(a=>!r.has(a)),privateKeyIdentifiers:i.privateKeyIdentifiers.filter(a=>!n.has(a))};await e.generalStorage.set(Ry,{version:1,...o}),await e.secretsStorage.removeSecureValue([...s.seedIdentifiers.map(a=>zE(a)),...s.seedlessIdentifiers.map(a=>GE(a)),...s.privateKeyIdentifiers.map(a=>WE(a))])}async function k_(e,t){t?await e.secretsStorage.setSecureValue(qE,t):await e.secretsStorage.removeSecureValue(qE)}async function T_(e){return e.secretsStorage.getSecureValue(qE)}async function SG(e){await e.generalStorage.remove(jE);let t=await ss(e),r=t.privateKeyIdentifiers.map(o=>WE(o)),n=t.seedIdentifiers.map(o=>zE(o)),i=t.seedlessIdentifiers.map(o=>GE(o));await e.secretsStorage.removeSecureValue([...r,...i,...n]),await e.generalStorage.remove(Ry),await e.secretsStorage.removeSecureValue(qE),await e.secureCache.clear()}async function vG(e){let t=await e.generalStorage.get(jE);return t?(t=dG(t),t=await ZEe(e,t),t):null}async function ZEe(e,t){let r=!1;return t.accounts.forEach(n=>{switch(n.type){case"privateKey":{r=pG(n)||r;break}case"readOnly":break;case"ledger":case"seed":case"seedless":Object.values(n.chains).forEach(i=>{r=pG(i)||r});break;case"seedVault":break;default:Ae(n)}}),r&&await Fa(e,t.accounts),t}function pG(e){let t=!1;switch(e.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{Object.values(En).forEach(r=>{if(e.addresses&&e.addresses[r])return;let n=oi({publicKey:e.publicKey,addressType:e.chainType,networkID:r});e.addresses={...e.addresses,[r]:n},t=!0});break}default:}return t}function JEe(e,t){let r=[],n=[];switch(t.type){case"seed":case"seedless":case"ledger":{Object.values(t.chains).forEach(o=>{switch(o.chainType){case"eip155":case"solana":{n.push(o.publicKey);break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{r.push(o.publicKey);break}case"sui":{n.push(o.address);break}default:Ae(o)}});break}case"readOnly":{Object.values(t.addresses).forEach(o=>{n.push(o)});break}case"privateKey":{switch(t.chainType){case"eip155":case"solana":{n.push(t.publicKey);break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{r.push(t.publicKey);break}case"sui":{n.push(t.address);break}default:Ae(t)}break}case"seedVault":{n.push(t.publicKey);break}default:(o=>{throw new Error("unknown account type")})(t)}let i=[];for(let o of e){let s;switch(o.type){case"seed":case"seedless":case"ledger":{s=Object.values(o.chains).some(a=>{switch(a.chainType){case"eip155":case"solana":return!!n.find(c=>Uy(c,a.publicKey));case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":case"sui":return!!r.find(c=>Uy(c,a.publicKey));default:Ae(a)}});break}case"readOnly":{s=Object.values(o.addresses).some(a=>!!n.find(c=>Uy(c,a)));break}case"privateKey":{s=!!n.find(a=>Uy(a,o.publicKey));break}case"seedVault":{s=!!n.find(a=>Uy(a,o.publicKey));break}default:(a=>{throw new Error("unknown account type")})(o)}s&&i.push(o)}return i}async function XEe(e,t){let r=await ss(e);return r.seedIdentifiers=[...new Set([...r.seedIdentifiers,t])],e.generalStorage.set(Ry,{version:1,...r})}async function QEe(e,t){let r=await ss(e);return r.seedlessIdentifiers=[...new Set([...r.seedlessIdentifiers,t])],e.generalStorage.set(Ry,{version:1,...r})}async function e3e(e,t){let r=await ss(e);return r.privateKeyIdentifiers=[...new Set([...r.privateKeyIdentifiers,t])],e.generalStorage.set(Ry,{version:1,...r})}function yG(e){switch(e){case"readOnly":return 1;case"privateKey":return 2;case"seedless":case"seed":return 3;case"ledger":return 4;case"seedVault":return 5;default:return 0}}l();d();l();d();var bw=re(Bn()),Gc=re($9());l();d();l();d();var tke=R.array(R.object({address:R.string(),signingIndexes:R.array(R.number()),sigHash:R.number().optional(),isScriptSpend:R.boolean().optional()})),rke=R.object({chainType:Jf,signingType:R.literal("transaction"),message:R.string().min(1),inputsToSign:tke.optional(),finalize:R.boolean()}),nke=R.object({chainType:Jf,signingType:R.literal("message"),message:R.instanceof(Uint8Array)}),ike=rke.or(nke),oke=R.object({chainType:R.literal("sui"),signingType:R.literal("transaction"),transaction:R.instanceof(Uint8Array)}),ske=R.object({chainType:R.literal("sui"),signingType:R.literal("personalMessage"),message:R.instanceof(Uint8Array)}),ake=oke.or(ske),cke=R.object({chainType:R.literal("solana"),signingType:R.literal("transaction"),message:R.union([R.string().min(1),R.instanceof(Uint8Array)])}),uke=R.object({chainType:R.literal("solana"),signingType:R.literal("message"),message:R.string().min(1)}),RJ=cke.or(uke),fke=R.object({chainType:R.literal("eip155"),signingType:R.literal("transaction"),message:R.string().min(1)}),LJ=R.object({chainType:R.literal("eip155"),signingType:R.literal("message"),message:R.string().min(1)}),VJ=R.object({chainType:R.literal("eip155"),signingType:R.literal("typedData"),version:R.literal(1),data:pM}),KJ=R.object({chainType:R.literal("eip155"),signingType:R.literal("typedData"),version:R.literal(3),data:yM}),FJ=R.object({chainType:R.literal("eip155"),signingType:R.literal("typedData"),version:R.literal(4),data:mM}),lke=fke.or(LJ).or(VJ).or(KJ).or(FJ),dke=R.object({isJWT:R.literal(!0),data:VM}),hke=R.object({isCash:R.literal(!0),data:RJ}),pke=LJ.extend({isAgentWallet:R.literal(!0)}),yke=VJ.extend({isAgentWallet:R.literal(!0)}),mke=KJ.extend({isAgentWallet:R.literal(!0)}),gke=FJ.extend({isAgentWallet:R.literal(!0)}),bke=R.union([pke,yke,mke,gke]),xke=R.object({status:R.literal("success"),signature:R.string()}),HJ=R.object({status:R.literal("success"),signature:R.string()}),wke=R.object({status:R.literal("success"),signature:R.string(),message:R.instanceof(Uint8Array).optional()}),Ske=R.object({status:R.literal("success"),signature:R.string()}),vke=R.object({status:R.literal("success"),signature:R.string(),signedJWT:LM.optional()}),Ake=HJ;var Y9=RJ.or(lke).or(ike).or(ake).or(dke).or(bke).or(hke),Ys=(S=>(S.InvalidInput="invalidInput",S.InvalidAccountId="invalidAccountId",S.InvalidAddressType="invalidAddressType",S.InvalidMessageEncoding="invalidMessageEncoding",S.InvalidDerivationPath="invalidDerivationPath",S.LedgerAppNotOpen="ledgerAppNotOpen",S.LedgerNotConnected="ledgerNotConnected",S.LedgerNeedPermission="ledgerNeedPermission",S.LedgerRejectAction="ledgerRejectAction",S.LedgerUnknownSignError="ledgerUnknownSignError",S.UnsupportedOperation="unsupportedOperation",S.InternalError="internalError",S.ExpiredTokenError="expiredToken",S.BeforeIATError="beforeTimeOfIssuance",S.InvalidClaimError="invalidClaim",S))(Ys||{}),Eke=R.object({status:R.literal("error"),type:R.nativeEnum(Ys),message:R.string()}),Ike=R.union([vke,Ake,wke,xke,HJ,Ske,Eke]);var kke={invalidInput:{message:"Invalid input"},invalidAccountId:{message:"Invalid account identifier."},invalidAddressType:{message:"Invalid chain type."},invalidMessageEncoding:{message:"Invalid message encoding."},invalidDerivationPath:{message:"Invalid derivation path."},ledgerAppNotOpen:{message:"Ledger App not open."},ledgerNotConnected:{message:"Ledger not connected."},ledgerNeedPermission:{message:"Need permission to connect to Ledger."},ledgerRejectAction:{message:"Ledger user rejected action."},ledgerUnknownSignError:{message:"Ledger unknown sign error."},unsupportedOperation:{message:"Unsupported operation."},internalError:{message:"Internal error."},expiredToken:{message:"Token is expired"},beforeTimeOfIssuance:{message:"Received token before issuance time"},invalidClaim:{message:"Claim is invalid"}},cr=(e,t)=>({status:"error",type:e,message:t??kke[e].message});var qJ=()=>({type:"keyPair",sign:(e,t)=>{try{switch(t.signingType){case"typedData":{switch(t.version){case 1:{let r=bw.Buffer.from(e.privateKey.slice()),n=Gc.SignTypedDataVersion.V1,{data:i}=t,o=(0,Gc.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:o})}case 3:{let r=bw.Buffer.from(e.privateKey.slice()),n=Gc.SignTypedDataVersion.V3,i=t.data,o=(0,Gc.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:o})}case 4:{let r=bw.Buffer.from(e.privateKey.slice()),n=Gc.SignTypedDataVersion.V4,i=t.data,o=(0,Gc.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:o})}}break}case"message":{let r=t.message,n=bw.Buffer.from(e.privateKey);try{let i=(0,Gc.personalSign)({privateKey:n,data:r});return Promise.resolve({status:"success",signature:i})}finally{n.fill(0)}}}}catch(r){return console.error(r),Promise.resolve(cr("invalidMessageEncoding"))}}});l();d();var Ro=re(Bn());l();d();l();d();var xw={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var gm=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ya=(e,t)=>e<<32-t|e>>>t,Tke=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Tke)throw new Error("Non little-endian hardware is not supported");var ubt=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Pke(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function cd(e){if(typeof e=="string"&&(e=Pke(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}var mm=class{clone(){return this._cloneInto()}},Bke=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function jJ(e,t){if(t!==void 0&&(typeof t!="object"||!Bke(t)))throw new TypeError("Options should be object or undefined");return Object.assign(e,t)}function Z9(e){let t=n=>e().update(cd(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function ww(e=32){if(xw.web)return xw.web.getRandomValues(new Uint8Array(e));if(xw.node)return new Uint8Array(xw.node.randomBytes(e).buffer);throw new Error("The environment doesn't have randomBytes function")}l();d();l();d();l();d();var e7={};j6(e7,{bitGet:()=>Uke,bitLen:()=>Oke,bitMask:()=>Sw,bitSet:()=>Rke,bytesToHex:()=>l0,bytesToNumberBE:()=>Pi,bytesToNumberLE:()=>G3,concatBytes:()=>ef,createHmacDrbg:()=>Q9,ensureBytes:()=>Fn,equalBytes:()=>Mke,hexToBytes:()=>d0,hexToNumber:()=>X9,numberToBytesBE:()=>Za,numberToBytesLE:()=>$3,numberToHexUnpadded:()=>GJ,numberToVarBytesBE:()=>Nke,utf8ToBytes:()=>Dke,validateObject:()=>ud});l();d();var zJ=BigInt(0),W3=BigInt(1),_ke=BigInt(2),z3=e=>e instanceof Uint8Array,Cke=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function l0(e){if(!z3(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=Cke[e[r]];return t}function GJ(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function X9(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function d0(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let n=0;n<r.length;n++){let i=n*2,o=e.slice(i,i+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[n]=s}return r}function Pi(e){return X9(l0(e))}function G3(e){if(!z3(e))throw new Error("Uint8Array expected");return X9(l0(Uint8Array.from(e).reverse()))}function Za(e,t){return d0(e.toString(16).padStart(t*2,"0"))}function $3(e,t){return Za(e,t).reverse()}function Nke(e){return d0(GJ(e))}function Fn(e,t,r){let n;if(typeof t=="string")try{n=d0(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else if(z3(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function ef(...e){let t=new Uint8Array(e.reduce((n,i)=>n+i.length,0)),r=0;return e.forEach(n=>{if(!z3(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}function Mke(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Dke(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Oke(e){let t;for(t=0;e>zJ;e>>=W3,t+=1);return t}function Uke(e,t){return e>>BigInt(t)&W3}var Rke=(e,t,r)=>e|(r?W3:zJ)<<BigInt(t),Sw=e=>(_ke<<BigInt(e-1))-W3,J9=e=>new Uint8Array(e),WJ=e=>Uint8Array.from(e);function Q9(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=J9(e),i=J9(e),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...f)=>r(i,n,...f),c=(f=J9())=>{i=a(WJ([0]),f),n=a(),f.length!==0&&(i=a(WJ([1]),f),n=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let f=0,m=[];for(;f<t;){n=a();let b=n.slice();m.push(b),f+=n.length}return ef(...m)};return(f,m)=>{s(),c(f);let b;for(;!(b=m(u()));)c();return s(),b}}var Lke={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function ud(e,t,r={}){let n=(i,o,s)=>{let a=Lke[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);let c=e[i];if(!(s&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${o}`)};for(let[i,o]of Object.entries(t))n(i,o,!1);for(let[i,o]of Object.entries(r))n(i,o,!0);return e}var qn=BigInt(0),fn=BigInt(1),h0=BigInt(2),Vke=BigInt(3),t7=BigInt(4),$J=BigInt(5),YJ=BigInt(8),Kke=BigInt(9),Fke=BigInt(16);function Hn(e,t){let r=e%t;return r>=qn?r:t+r}function Hke(e,t,r){if(r<=qn||t<qn)throw new Error("Expected power/modulo > 0");if(r===fn)return qn;let n=fn;for(;t>qn;)t&fn&&(n=n*e%r),e=e*e%r,t>>=fn;return n}function us(e,t,r){let n=e;for(;t-- >qn;)n*=n,n%=r;return n}function Y3(e,t){if(e===qn||t<=qn)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Hn(e,t),n=t,i=qn,o=fn,s=fn,a=qn;for(;r!==qn;){let u=n/r,h=n%r,f=i-s*u,m=o-a*u;n=r,r=h,i=s,o=a,s=f,a=m}if(n!==fn)throw new Error("invert: does not exist");return Hn(i,t)}function qke(e){let t=(e-fn)/h0,r,n,i;for(r=e-fn,n=0;r%h0===qn;r/=h0,n++);for(i=h0;i<e&&Hke(i,t,e)!==e-fn;i++);if(n===1){let s=(e+fn)/t7;return function(c,u){let h=c.pow(u,s);if(!c.eql(c.sqr(h),u))throw new Error("Cannot find square root");return h}}let o=(r+fn)/h0;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,h=a.pow(a.mul(a.ONE,i),r),f=a.pow(c,o),m=a.pow(c,r);for(;!a.eql(m,a.ONE);){if(a.eql(m,a.ZERO))return a.ZERO;let b=1;for(let S=a.sqr(m);b<u&&!a.eql(S,a.ONE);b++)S=a.sqr(S);let w=a.pow(h,fn<<BigInt(u-b-1));h=a.sqr(w),f=a.mul(f,w),m=a.mul(m,h),u=b}return f}}function jke(e){if(e%t7===Vke){let t=(e+fn)/t7;return function(n,i){let o=n.pow(i,t);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(e%YJ===$J){let t=(e-$J)/YJ;return function(n,i){let o=n.mul(i,h0),s=n.pow(o,t),a=n.mul(i,s),c=n.mul(n.mul(a,h0),s),u=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return e%Fke,qke(e)}var Wke=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function r7(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Wke.reduce((n,i)=>(n[i]="function",n),t);return ud(e,r)}function zke(e,t,r){if(r<qn)throw new Error("Expected power > 0");if(r===qn)return e.ONE;if(r===fn)return t;let n=e.ONE,i=t;for(;r>qn;)r&fn&&(n=e.mul(n,i)),i=e.sqr(i),r>>=fn;return n}function Gke(e,t){let r=new Array(t.length),n=t.reduce((o,s,a)=>e.is0(s)?o:(r[a]=o,e.mul(o,s)),e.ONE),i=e.inv(n);return t.reduceRight((o,s,a)=>e.is0(s)?o:(r[a]=e.mul(o,r[a]),e.mul(o,s)),i),r}function n7(e,t){let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function ZJ(e,t,r=!1,n={}){if(e<=qn)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:i,nByteLength:o}=n7(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=jke(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:Sw(i),ZERO:qn,ONE:fn,create:c=>Hn(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return qn<=c&&c<e},is0:c=>c===qn,isOdd:c=>(c&fn)===fn,neg:c=>Hn(-c,e),eql:(c,u)=>c===u,sqr:c=>Hn(c*c,e),add:(c,u)=>Hn(c+u,e),sub:(c,u)=>Hn(c-u,e),mul:(c,u)=>Hn(c*u,e),pow:(c,u)=>zke(a,c,u),div:(c,u)=>Hn(c*Y3(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Y3(c,e),sqrt:n.sqrt||(c=>s(a,c)),invertBatch:c=>Gke(a,c),cmov:(c,u,h)=>h?u:c,toBytes:c=>r?$3(c,o):Za(c,o),fromBytes:c=>{if(c.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${c.length}`);return r?G3(c):Pi(c)}});return Object.freeze(a)}function JJ(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function i7(e){let t=JJ(e);return t+Math.ceil(t/2)}function XJ(e,t,r=!1){let n=e.length,i=JJ(t),o=i7(t);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);let s=r?Pi(e):G3(e),a=Hn(s,t-fn)+fn;return r?$3(a,i):Za(a,i)}l();d();l();d();var Yke=BigInt(0),o7=BigInt(1);function QJ(e,t){let r=(i,o)=>{let s=o.negate();return i?s:o},n=i=>{let o=Math.ceil(t/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:r,unsafeLadder(i,o){let s=e.ZERO,a=i;for(;o>Yke;)o&o7&&(s=s.add(a)),a=a.double(),o>>=o7;return s},precomputeWindow(i,o){let{windows:s,windowSize:a}=n(o),c=[],u=i,h=u;for(let f=0;f<s;f++){h=u,c.push(h);for(let m=1;m<a;m++)h=h.add(u),c.push(h);u=h.double()}return c},wNAF(i,o,s){let{windows:a,windowSize:c}=n(i),u=e.ZERO,h=e.BASE,f=BigInt(2**i-1),m=2**i,b=BigInt(i);for(let w=0;w<a;w++){let S=w*c,P=Number(s&f);s>>=b,P>c&&(P-=m,s+=o7);let N=S,O=S+Math.abs(P)-1,C=w%2!==0,L=P<0;P===0?h=h.add(r(C,o[N])):u=u.add(r(L,o[O]))}return{p:u,f:h}},wNAFCached(i,o,s,a){let c=i._WINDOW_SIZE||1,u=o.get(i);return u||(u=this.precomputeWindow(i,c),c!==1&&o.set(i,a(u))),this.wNAF(c,u,s)}}}function s7(e){return r7(e.Fp),ud(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...n7(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function Zke(e){let t=s7(e);ud(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}var{bytesToNumberBE:Jke,hexToBytes:Xke}=e7,p0={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=p0;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Jke(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=p0,r=typeof e=="string"?Xke(e):e;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:i,l:o}=p0._parseInt(r.subarray(2)),{d:s,l:a}=p0._parseInt(o);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(e){let t=u=>Number.parseInt(u[0],16)&8?"00"+u:u,r=u=>{let h=u.toString(16);return h.length&1?`0${h}`:h},n=t(r(e.s)),i=t(r(e.r)),o=n.length/2,s=i.length/2,a=r(o),c=r(s);return`30${r(s+o+4)}02${c}${i}02${a}${n}`}},tf=BigInt(0),Zs=BigInt(1),kbt=BigInt(2),eX=BigInt(3),Tbt=BigInt(4);function Qke(e){let t=Zke(e),{Fp:r}=t,n=t.toBytes||((w,S,P)=>{let N=S.toAffine();return ef(Uint8Array.from([4]),r.toBytes(N.x),r.toBytes(N.y))}),i=t.fromBytes||(w=>{let S=w.subarray(1),P=r.fromBytes(S.subarray(0,r.BYTES)),N=r.fromBytes(S.subarray(r.BYTES,2*r.BYTES));return{x:P,y:N}});function o(w){let{a:S,b:P}=t,N=r.sqr(w),O=r.mul(N,w);return r.add(r.add(O,r.mul(w,S)),P)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(w){return typeof w=="bigint"&&tf<w&&w<t.n}function a(w){if(!s(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(w){let{allowedPrivateKeyLengths:S,nByteLength:P,wrapPrivateKey:N,n:O}=t;if(S&&typeof w!="bigint"){if(w instanceof Uint8Array&&(w=l0(w)),typeof w!="string"||!S.includes(w.length))throw new Error("Invalid key");w=w.padStart(P*2,"0")}let C;try{C=typeof w=="bigint"?w:Pi(Fn("private key",w,P))}catch{throw new Error(`private key must be ${P} bytes, hex or bigint, not ${typeof w}`)}return N&&(C=Hn(C,O)),a(C),C}let u=new Map;function h(w){if(!(w instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(S,P,N){if(this.px=S,this.py=P,this.pz=N,S==null||!r.isValid(S))throw new Error("x required");if(P==null||!r.isValid(P))throw new Error("y required");if(N==null||!r.isValid(N))throw new Error("z required")}static fromAffine(S){let{x:P,y:N}=S||{};if(!S||!r.isValid(P)||!r.isValid(N))throw new Error("invalid affine point");if(S instanceof f)throw new Error("projective point not allowed");let O=C=>r.eql(C,r.ZERO);return O(P)&&O(N)?f.ZERO:new f(P,N,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){let P=r.invertBatch(S.map(N=>N.pz));return S.map((N,O)=>N.toAffine(P[O])).map(f.fromAffine)}static fromHex(S){let P=f.fromAffine(i(Fn("pointHex",S)));return P.assertValidity(),P}static fromPrivateKey(S){return f.BASE.multiply(c(S))}_setWindowSize(S){this._WINDOW_SIZE=S,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:S,y:P}=this.toAffine();if(!r.isValid(S)||!r.isValid(P))throw new Error("bad point: x or y not FE");let N=r.sqr(P),O=o(S);if(!r.eql(N,O))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:S}=this.toAffine();if(r.isOdd)return!r.isOdd(S);throw new Error("Field doesn't support isOdd")}equals(S){h(S);let{px:P,py:N,pz:O}=this,{px:C,py:L,pz:V}=S,j=r.eql(r.mul(P,V),r.mul(C,O)),$=r.eql(r.mul(N,V),r.mul(L,O));return j&&$}negate(){return new f(this.px,r.neg(this.py),this.pz)}double(){let{a:S,b:P}=t,N=r.mul(P,eX),{px:O,py:C,pz:L}=this,V=r.ZERO,j=r.ZERO,$=r.ZERO,H=r.mul(O,O),Y=r.mul(C,C),B=r.mul(L,L),p=r.mul(O,C);return p=r.add(p,p),$=r.mul(O,L),$=r.add($,$),V=r.mul(S,$),j=r.mul(N,B),j=r.add(V,j),V=r.sub(Y,j),j=r.add(Y,j),j=r.mul(V,j),V=r.mul(p,V),$=r.mul(N,$),B=r.mul(S,B),p=r.sub(H,B),p=r.mul(S,p),p=r.add(p,$),$=r.add(H,H),H=r.add($,H),H=r.add(H,B),H=r.mul(H,p),j=r.add(j,H),B=r.mul(C,L),B=r.add(B,B),H=r.mul(B,p),V=r.sub(V,H),$=r.mul(B,Y),$=r.add($,$),$=r.add($,$),new f(V,j,$)}add(S){h(S);let{px:P,py:N,pz:O}=this,{px:C,py:L,pz:V}=S,j=r.ZERO,$=r.ZERO,H=r.ZERO,Y=t.a,B=r.mul(t.b,eX),p=r.mul(P,C),g=r.mul(N,L),x=r.mul(O,V),A=r.add(P,N),v=r.add(C,L);A=r.mul(A,v),v=r.add(p,g),A=r.sub(A,v),v=r.add(P,O);let _=r.add(C,V);return v=r.mul(v,_),_=r.add(p,x),v=r.sub(v,_),_=r.add(N,O),j=r.add(L,V),_=r.mul(_,j),j=r.add(g,x),_=r.sub(_,j),H=r.mul(Y,v),j=r.mul(B,x),H=r.add(j,H),j=r.sub(g,H),H=r.add(g,H),$=r.mul(j,H),g=r.add(p,p),g=r.add(g,p),x=r.mul(Y,x),v=r.mul(B,v),g=r.add(g,x),x=r.sub(p,x),x=r.mul(Y,x),v=r.add(v,x),p=r.mul(g,v),$=r.add($,p),p=r.mul(_,v),j=r.mul(A,j),j=r.sub(j,p),p=r.mul(A,g),H=r.mul(_,H),H=r.add(H,p),new f(j,$,H)}subtract(S){return this.add(S.negate())}is0(){return this.equals(f.ZERO)}wNAF(S){return b.wNAFCached(this,u,S,P=>{let N=r.invertBatch(P.map(O=>O.pz));return P.map((O,C)=>O.toAffine(N[C])).map(f.fromAffine)})}multiplyUnsafe(S){let P=f.ZERO;if(S===tf)return P;if(a(S),S===Zs)return this;let{endo:N}=t;if(!N)return b.unsafeLadder(this,S);let{k1neg:O,k1:C,k2neg:L,k2:V}=N.splitScalar(S),j=P,$=P,H=this;for(;C>tf||V>tf;)C&Zs&&(j=j.add(H)),V&Zs&&($=$.add(H)),H=H.double(),C>>=Zs,V>>=Zs;return O&&(j=j.negate()),L&&($=$.negate()),$=new f(r.mul($.px,N.beta),$.py,$.pz),j.add($)}multiply(S){a(S);let P=S,N,O,{endo:C}=t;if(C){let{k1neg:L,k1:V,k2neg:j,k2:$}=C.splitScalar(P),{p:H,f:Y}=this.wNAF(V),{p:B,f:p}=this.wNAF($);H=b.constTimeNegate(L,H),B=b.constTimeNegate(j,B),B=new f(r.mul(B.px,C.beta),B.py,B.pz),N=H.add(B),O=Y.add(p)}else{let{p:L,f:V}=this.wNAF(P);N=L,O=V}return f.normalizeZ([N,O])[0]}multiplyAndAddUnsafe(S,P,N){let O=f.BASE,C=(V,j)=>j===tf||j===Zs||!V.equals(O)?V.multiplyUnsafe(j):V.multiply(j),L=C(this,P).add(C(S,N));return L.is0()?void 0:L}toAffine(S){let{px:P,py:N,pz:O}=this,C=this.is0();S==null&&(S=C?r.ONE:r.inv(O));let L=r.mul(P,S),V=r.mul(N,S),j=r.mul(O,S);if(C)return{x:r.ZERO,y:r.ZERO};if(!r.eql(j,r.ONE))throw new Error("invZ was invalid");return{x:L,y:V}}isTorsionFree(){let{h:S,isTorsionFree:P}=t;if(S===Zs)return!0;if(P)return P(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:S,clearCofactor:P}=t;return S===Zs?this:P?P(f,this):this.multiplyUnsafe(t.h)}toRawBytes(S=!0){return this.assertValidity(),n(f,this,S)}toHex(S=!0){return l0(this.toRawBytes(S))}}f.BASE=new f(t.Gx,t.Gy,r.ONE),f.ZERO=new f(r.ZERO,r.ONE,r.ZERO);let m=t.nBitLength,b=QJ(f,t.endo?Math.ceil(m/2):m);return{CURVE:t,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}function eTe(e){let t=s7(e);return ud(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function tX(e){let t=eTe(e),{Fp:r,n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function s(v){return tf<v&&v<r.ORDER}function a(v){return Hn(v,n)}function c(v){return Y3(v,n)}let{ProjectivePoint:u,normPrivateKeyToScalar:h,weierstrassEquation:f,isWithinCurveOrder:m}=Qke({...t,toBytes(v,_,D){let T=_.toAffine(),y=r.toBytes(T.x),I=ef;return D?I(Uint8Array.from([_.hasEvenY()?2:3]),y):I(Uint8Array.from([4]),y,r.toBytes(T.y))},fromBytes(v){let _=v.length,D=v[0],T=v.subarray(1);if(_===i&&(D===2||D===3)){let y=Pi(T);if(!s(y))throw new Error("Point is not on curve");let I=f(y),q=r.sqrt(I),K=(q&Zs)===Zs;return(D&1)===1!==K&&(q=r.neg(q)),{x:y,y:q}}else if(_===o&&D===4){let y=r.fromBytes(T.subarray(0,r.BYTES)),I=r.fromBytes(T.subarray(r.BYTES,2*r.BYTES));return{x:y,y:I}}else throw new Error(`Point of length ${_} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),b=v=>l0(Za(v,t.nByteLength));function w(v){let _=n>>Zs;return v>_}function S(v){return w(v)?a(-v):v}let P=(v,_,D)=>Pi(v.slice(_,D));class N{constructor(_,D,T){this.r=_,this.s=D,this.recovery=T,this.assertValidity()}static fromCompact(_){let D=t.nByteLength;return _=Fn("compactSignature",_,D*2),new N(P(_,0,D),P(_,D,2*D))}static fromDER(_){let{r:D,s:T}=p0.toSig(Fn("DER",_));return new N(D,T)}assertValidity(){if(!m(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!m(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(_){return new N(this.r,this.s,_)}recoverPublicKey(_){let{r:D,s:T,recovery:y}=this,I=$(Fn("msgHash",_));if(y==null||![0,1,2,3].includes(y))throw new Error("recovery id invalid");let q=y===2||y===3?D+t.n:D;if(q>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let K=y&1?"03":"02",F=u.fromHex(K+b(q)),J=c(q),ae=a(-I*J),ce=a(T*J),ye=u.BASE.multiplyAndAddUnsafe(F,ae,ce);if(!ye)throw new Error("point at infinify");return ye.assertValidity(),ye}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new N(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return d0(this.toDERHex())}toDERHex(){return p0.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return d0(this.toCompactHex())}toCompactHex(){return b(this.r)+b(this.s)}}let O={isValidPrivateKey(v){try{return h(v),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{let v=i7(t.n);return XJ(t.randomBytes(v),t.n)},precompute(v=8,_=u.BASE){return _._setWindowSize(v),_.multiply(BigInt(3)),_}};function C(v,_=!0){return u.fromPrivateKey(v).toRawBytes(_)}function L(v){let _=v instanceof Uint8Array,D=typeof v=="string",T=(_||D)&&v.length;return _?T===i||T===o:D?T===2*i||T===2*o:v instanceof u}function V(v,_,D=!0){if(L(v))throw new Error("first arg must be private key");if(!L(_))throw new Error("second arg must be public key");return u.fromHex(_).multiply(h(v)).toRawBytes(D)}let j=t.bits2int||function(v){let _=Pi(v),D=v.length*8-t.nBitLength;return D>0?_>>BigInt(D):_},$=t.bits2int_modN||function(v){return a(j(v))},H=Sw(t.nBitLength);function Y(v){if(typeof v!="bigint")throw new Error("bigint expected");if(!(tf<=v&&v<H))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Za(v,t.nByteLength)}function B(v,_,D=p){if(["recovered","canonical"].some(U=>U in D))throw new Error("sign() legacy options not supported");let{hash:T,randomBytes:y}=t,{lowS:I,prehash:q,extraEntropy:K}=D;I==null&&(I=!0),v=Fn("msgHash",v),q&&(v=Fn("prehashed msgHash",T(v)));let F=$(v),J=h(_),ae=[Y(J),Y(F)];if(K!=null){let U=K===!0?y(r.BYTES):K;ae.push(Fn("extraEntropy",U))}let ce=ef(...ae),ye=F;function he(U){let G=j(U);if(!m(G))return;let Z=c(G),ee=u.BASE.multiply(G).toAffine(),fe=a(ee.x);if(fe===tf)return;let Q=a(Z*a(ye+fe*J));if(Q===tf)return;let se=(ee.x===fe?0:2)|Number(ee.y&Zs),gt=Q;return I&&w(Q)&&(gt=S(Q),se^=1),new N(fe,gt,se)}return{seed:ce,k2sig:he}}let p={lowS:t.lowS,prehash:!1},g={lowS:t.lowS,prehash:!1};function x(v,_,D=p){let{seed:T,k2sig:y}=B(v,_,D),I=t;return Q9(I.hash.outputLen,I.nByteLength,I.hmac)(T,y)}u.BASE._setWindowSize(8);function A(v,_,D,T=g){let y=v;if(_=Fn("msgHash",_),D=Fn("publicKey",D),"strict"in T)throw new Error("options.strict was renamed to lowS");let{lowS:I,prehash:q}=T,K,F;try{if(typeof y=="string"||y instanceof Uint8Array)try{K=N.fromDER(y)}catch(ee){if(!(ee instanceof p0.Err))throw ee;K=N.fromCompact(y)}else if(typeof y=="object"&&typeof y.r=="bigint"&&typeof y.s=="bigint"){let{r:ee,s:fe}=y;K=new N(ee,fe)}else throw new Error("PARSE");F=u.fromHex(D)}catch(ee){if(ee.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(I&&K.hasHighS())return!1;q&&(_=t.hash(_));let{r:J,s:ae}=K,ce=$(_),ye=c(ae),he=a(ce*ye),U=a(J*ye),G=u.BASE.multiplyAndAddUnsafe(F,he,U)?.toAffine();return G?a(G.x)===J:!1}return{CURVE:t,getPublicKey:C,getSharedSecret:V,sign:x,verify:A,ProjectivePoint:u,Signature:N,utils:O}}l();d();function tTe(e){return{hash:e,hmac:(t,...r)=>kM(e,t,EM(...r)),randomBytes:s1}}function rX(e,t){let r=n=>tX({...e,...tTe(n)});return Object.freeze({...r(t),create:r})}var Q3=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Z3=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),oX=BigInt(1),J3=BigInt(2),nX=(e,t)=>(e+t/J3)/t;function sX(e){let t=Q3,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,h=u*u*e%t,f=us(h,r,t)*h%t,m=us(f,r,t)*h%t,b=us(m,J3,t)*u%t,w=us(b,i,t)*b%t,S=us(w,o,t)*w%t,P=us(S,a,t)*S%t,N=us(P,c,t)*P%t,O=us(N,a,t)*S%t,C=us(O,r,t)*h%t,L=us(C,s,t)*w%t,V=us(L,n,t)*u%t,j=us(V,J3,t);if(!c7.eql(c7.sqr(j),e))throw new Error("Cannot find square root");return j}var c7=ZJ(Q3,void 0,void 0,{sqrt:sX}),bm=rX({a:BigInt(0),b:BigInt(7),Fp:c7,n:Z3,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=Z3,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-oX*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=nX(o*e,t),c=nX(-n*e,t),u=Hn(e-a*r-c*i,t),h=Hn(-a*n-c*o,t),f=u>s,m=h>s;if(f&&(u=t-u),m&&(h=t-h),u>s||h>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:f,k1:u,k2neg:m,k2:h}}}},_i),e8=BigInt(0),aX=e=>typeof e=="bigint"&&e8<e&&e<Q3,rTe=e=>typeof e=="bigint"&&e8<e&&e<Z3,iX={};function X3(e,...t){let r=iX[e];if(r===void 0){let n=_i(Uint8Array.from(e,i=>i.charCodeAt(0)));r=ef(n,n),iX[e]=r}return _i(ef(r,...t))}var l7=e=>e.toRawBytes(!0).slice(1),u7=e=>Za(e,32),a7=e=>Hn(e,Q3),vw=e=>Hn(e,Z3),d7=bm.ProjectivePoint,nTe=(e,t,r)=>d7.BASE.multiplyAndAddUnsafe(e,t,r);function f7(e){let t=bm.utils.normPrivateKeyToScalar(e),r=d7.fromPrivateKey(t);return{scalar:r.hasEvenY()?t:vw(-t),bytes:l7(r)}}function cX(e){if(!aX(e))throw new Error("bad x: need 0 < x < p");let t=a7(e*e),r=a7(t*e+BigInt(7)),n=sX(r);n%J3!==e8&&(n=a7(-n));let i=new d7(e,n,oX);return i.assertValidity(),i}function uX(...e){return vw(Pi(X3("BIP0340/challenge",...e)))}function iTe(e){return f7(e).bytes}function oTe(e,t,r=s1(32)){let n=Fn("message",e),{bytes:i,scalar:o}=f7(t),s=Fn("auxRand",r,32),a=u7(o^Pi(X3("BIP0340/aux",s))),c=X3("BIP0340/nonce",a,i,n),u=vw(Pi(c));if(u===e8)throw new Error("sign failed: k is zero");let{bytes:h,scalar:f}=f7(u),m=uX(h,i,n),b=new Uint8Array(64);if(b.set(h,0),b.set(u7(vw(f+m*o)),32),!fX(b,n,i))throw new Error("sign: Invalid signature produced");return b}function fX(e,t,r){let n=Fn("signature",e,64),i=Fn("message",t),o=Fn("publicKey",r,32);try{let s=cX(Pi(o)),a=Pi(n.subarray(0,32));if(!aX(a))return!1;let c=Pi(n.subarray(32,64));if(!rTe(c))return!1;let u=uX(u7(a),l7(s),i),h=nTe(s,c,vw(-u));return!(!h||!h.hasEvenY()||h.toAffine().x!==a)}catch{return!1}}var fs={getPublicKey:iTe,sign:oTe,verify:fX,utils:{randomPrivateKey:bm.utils.randomPrivateKey,lift_x:cX,pointToBytes:l7,numberToBytesBE:Za,bytesToNumberBE:Pi,taggedHash:X3,mod:Hn}};l();d();var sTe=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),dX=Uint8Array.from({length:16},(e,t)=>t),aTe=dX.map(e=>(9*e+5)%16),p7=[dX],y7=[aTe];for(let e=0;e<4;e++)for(let t of[p7,y7])t.push(t[e].map(r=>sTe[r]));var hX=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),cTe=p7.map((e,t)=>e.map(r=>hX[t][r])),uTe=y7.map((e,t)=>e.map(r=>hX[t][r])),fTe=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),lTe=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),t8=(e,t)=>e<<t|e>>>32-t;function lX(e,t,r,n){return e===0?t^r^n:e===1?t&r|~t&n:e===2?(t|~r)^n:e===3?t&n|r&~n:t^(r|~n)}var r8=new Uint32Array(16),h7=class extends TM{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:t,h1:r,h2:n,h3:i,h4:o}=this;return[t,r,n,i,o]}set(t,r,n,i,o){this.h0=t|0,this.h1=r|0,this.h2=n|0,this.h3=i|0,this.h4=o|0}process(t,r){for(let b=0;b<16;b++,r+=4)r8[b]=t.getUint32(r,!0);let n=this.h0|0,i=n,o=this.h1|0,s=o,a=this.h2|0,c=a,u=this.h3|0,h=u,f=this.h4|0,m=f;for(let b=0;b<5;b++){let w=4-b,S=fTe[b],P=lTe[b],N=p7[b],O=y7[b],C=cTe[b],L=uTe[b];for(let V=0;V<16;V++){let j=t8(n+lX(b,o,a,u)+r8[N[V]]+S,C[V])+f|0;n=f,f=u,u=t8(a,10)|0,a=o,o=j}for(let V=0;V<16;V++){let j=t8(i+lX(w,s,c,h)+r8[O[V]]+P,L[V])+m|0;i=m,m=h,h=t8(c,10)|0,c=s,s=j}}this.set(this.h1+a+h|0,this.h2+u+m|0,this.h3+f+i|0,this.h4+n+s|0,this.h0+o+c|0)}roundClean(){r8.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}},pX=IM(()=>new h7);l();d();function xm(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function i8(...e){let t=(i,o)=>s=>i(o(s)),r=Array.from(e).reverse().reduce((i,o)=>i?t(i,o.encode):o.encode,void 0),n=e.reduce((i,o)=>i?t(i,o.decode):o.decode,void 0);return{encode:r,decode:n}}function b7(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(r=>{if(r<0||r>=e.length)throw new Error(`Digit index outside alphabet: ${r} (alphabet: ${e.length})`);return e[r]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(r=>{if(typeof r!="string")throw new Error(`alphabet.decode: not string element=${r}`);let n=e.indexOf(r);if(n===-1)throw new Error(`Unknown letter: "${r}". Allowed: ${e}`);return n})}}}function x7(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let r of t)if(typeof r!="string")throw new Error(`join.encode: non-string input=${r}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function dTe(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function yX(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let n=0,i=[],o=Array.from(e);for(o.forEach(s=>{if(s<0||s>=t)throw new Error(`Wrong integer: ${s}`)});;){let s=0,a=!0;for(let c=n;c<o.length;c++){let u=o[c],h=t*s+u;if(!Number.isSafeInteger(h)||t*s/t!==s||h-u!==t*s)throw new Error("convertRadix: carry overflow");s=h%r;let f=Math.floor(h/r);if(o[c]=f,!Number.isSafeInteger(f)||f*r+s!==h)throw new Error("convertRadix: carry overflow");if(a)f?a=!1:n=c;else continue}if(i.push(s),a)break}for(let s=0;s<e.length-1&&e[s]===0;s++)i.push(0);return i.reverse()}var xX=(e,t)=>t?xX(t,e%t):e,n8=(e,t)=>e+(t-xX(e,t));function m7(e,t,r,n){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(n8(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${n8(t,r)}`);let i=0,o=0,s=2**r-1,a=[];for(let c of e){if(c>=2**t)throw new Error(`convertRadix2: invalid data word=${c} from=${t}`);if(i=i<<t|c,o+t>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=r;o-=r)a.push((i>>o-r&s)>>>0);i&=2**o-1}if(i=i<<r-o&s,!n&&o>=t)throw new Error("Excess padding");if(!n&&i)throw new Error(`Non-zero padding: ${i}`);return n&&o>0&&a.push(i>>>0),a}function hTe(e){return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return yX(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(yX(t,e,2**8))}}}function wX(e,t=!1){if(e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(n8(8,e)>32||n8(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return m7(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(m7(r,e,8,t))}}}function mX(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}function pTe(e,t){if(typeof t!="function")throw new Error("checksum fn should be function");return{encode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");let n=t(r).slice(0,e),i=new Uint8Array(r.length+e);return i.set(r),i.set(n,r.length),i},decode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");let n=r.slice(0,-e),i=t(n).slice(0,e),o=r.slice(-e);for(let s=0;s<e;s++)if(i[s]!==o[s])throw new Error("Invalid checksum");return n}}}var yTe=e=>i8(hTe(58),b7(e),x7("")),mTe=yTe("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var SX=e=>i8(pTe(4,t=>e(e(t))),mTe),g7=i8(b7("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),x7("")),gX=[996825010,642813549,513874426,1027748829,705979059];function Aw(e){let t=e>>25,r=(e&33554431)<<5;for(let n=0;n<gX.length;n++)(t>>n&1)===1&&(r^=gX[n]);return r}function bX(e,t,r=1){let n=e.length,i=1;for(let o=0;o<n;o++){let s=e.charCodeAt(o);if(s<33||s>126)throw new Error(`Invalid prefix (${e})`);i=Aw(i)^s>>5}i=Aw(i);for(let o=0;o<n;o++)i=Aw(i)^e.charCodeAt(o)&31;for(let o of t)i=Aw(i)^o;for(let o=0;o<6;o++)i=Aw(i);return i^=r,g7.encode(m7([i%2**30],30,5,!1))}function vX(e){let t=e==="bech32"?1:734539939,r=wX(5),n=r.decode,i=r.encode,o=mX(n);function s(h,f,m=90){if(typeof h!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof h}`);if(!Array.isArray(f)||f.length&&typeof f[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof f}`);let b=h.length+7+f.length;if(m!==!1&&b>m)throw new TypeError(`Length ${b} exceeds limit ${m}`);let w=h.toLowerCase(),S=bX(w,f,t);return`${w}1${g7.encode(f)}${S}`}function a(h,f=90){if(typeof h!="string")throw new Error(`bech32.decode input should be string, not ${typeof h}`);if(h.length<8||f!==!1&&h.length>f)throw new TypeError(`Wrong string length: ${h.length} (${h}). Expected (8..${f})`);let m=h.toLowerCase();if(h!==m&&h!==h.toUpperCase())throw new Error("String must be lowercase or uppercase");h=m;let b=h.lastIndexOf("1");if(b===0||b===-1)throw new Error('Letter "1" must be present between prefix and data only');let w=h.slice(0,b),S=h.slice(b+1);if(S.length<6)throw new Error("Data must be at least 6 characters long");let P=g7.decode(S).slice(0,-6),N=bX(w,P,t);if(!S.endsWith(N))throw new Error(`Invalid checksum in ${h}: expected "${N}"`);return{prefix:w,words:P}}let c=mX(a);function u(h){let{prefix:f,words:m}=a(h,!1);return{prefix:f,words:m,bytes:n(m)}}return{encode:s,decode:a,decodeToBytes:u,decodeUnsafe:c,fromWords:n,fromWordsUnsafe:o,toWords:i}}var o8=vX("bech32"),w7=vX("bech32m"),S7={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},on=i8(wX(4),b7("0123456789abcdef"),x7(""),dTe(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));l();d();var sn=new Uint8Array,l8=new Uint8Array([0]);function Rr(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function s8(...e){if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var ls=e=>e instanceof Uint8Array,a8=class{constructor(t,r=[],n=[]){this.data=t,this.path=r,this.fieldPath=n,this.pos=0,this.hasPtr=!1,this.bitBuf=0,this.bitPos=0}err(t){return new Error(`Reader(${this.fieldPath.join("/")}): ${t}`)}absBytes(t){if(t>this.data.length)throw new Error("absBytes: Unexpected end of buffer");return this.data.subarray(t)}bytes(t,r=!1){if(this.bitPos)throw this.err("readBytes: bitPos not empty");if(!Number.isFinite(t))throw this.err(`readBytes: wrong length=${t}`);if(this.pos+t>this.data.length)throw this.err("readBytes: Unexpected end of buffer");let n=this.data.subarray(this.pos,this.pos+t);return r||(this.pos+=t),n}byte(t=!1){if(this.bitPos)throw this.err("readByte: bitPos not empty");return this.data[t?this.pos:this.pos++]}get leftBytes(){return this.data.length-this.pos}isEnd(){return this.pos>=this.data.length&&!this.bitPos}length(t){let r;if(fd(t)?r=Number(t.decodeStream(this)):typeof t=="number"?r=t:typeof t=="string"&&(r=f8(this.path,t.split("/"))),typeof r=="bigint"&&(r=Number(r)),typeof r!="number")throw this.err(`Wrong length: ${r}`);return r}bits(t){if(t>32)throw this.err("BitReader: cannot read more than 32 bits in single call");let r=0;for(;t;){this.bitPos||(this.bitBuf=this.data[this.pos++],this.bitPos=8);let n=Math.min(t,this.bitPos);this.bitPos-=n,r=r<<n|this.bitBuf>>this.bitPos&2**n-1,this.bitBuf&=2**this.bitPos-1,t-=n}return r>>>0}find(t,r=this.pos){if(!ls(t))throw this.err(`find: needle is not bytes! ${t}`);if(this.bitPos)throw this.err("findByte: bitPos not empty");if(!t.length)throw this.err("find: needle is empty");for(let n=r;(n=this.data.indexOf(t[0],n))!==-1;n++){if(n===-1||this.data.length-n<t.length)return;if(Rr(t,this.data.subarray(n,n+t.length)))return n}}finish(){if(!(this.isEnd()||this.hasPtr))throw this.err(`${this.leftBytes} bytes ${this.bitPos} bits left after unpack: ${on.encode(this.data.slice(this.pos))}`)}fieldPathPush(t){this.fieldPath.push(t)}fieldPathPop(){this.fieldPath.pop()}},c8=class{constructor(t=[],r=[]){this.path=t,this.fieldPath=r,this.buffers=[],this.pos=0,this.ptrs=[],this.bitBuf=0,this.bitPos=0}err(t){return new Error(`Writer(${this.fieldPath.join("/")}): ${t}`)}bytes(t){if(this.bitPos)throw this.err("writeBytes: ends with non-empty bit buffer");this.buffers.push(t),this.pos+=t.length}byte(t){if(this.bitPos)throw this.err("writeByte: ends with non-empty bit buffer");this.buffers.push(new Uint8Array([t])),this.pos++}get buffer(){if(this.bitPos)throw this.err("buffer: ends with non-empty bit buffer");let t=s8(...this.buffers);for(let r of this.ptrs){let n=t.length;t=s8(t,r.buffer);let i=r.ptr.encode(n);for(let o=0;o<i.length;o++)t[r.pos+o]=i[o]}return t}length(t,r){if(t===null)return;if(fd(t))return t.encodeStream(this,r);let n;if(typeof t=="number"?n=t:typeof t=="string"&&(n=f8(this.path,t.split("/"))),typeof n=="bigint"&&(n=Number(n)),n===void 0||n!==r)throw this.err(`Wrong length: ${n} len=${t} exp=${r}`)}bits(t,r){if(r>32)throw this.err("writeBits: cannot write more than 32 bits in single call");if(t>=2**r)throw this.err(`writeBits: value (${t}) >= 2**bits (${r})`);for(;r;){let n=Math.min(r,8-this.bitPos);this.bitBuf=this.bitBuf<<n|t>>r-n,this.bitPos+=n,r-=n,t&=2**r-1,this.bitPos===8&&(this.bitPos=0,this.buffers.push(new Uint8Array([this.bitBuf])),this.pos++)}}fieldPathPush(t){this.fieldPath.push(t)}fieldPathPop(){this.fieldPath.pop()}},u8=e=>Uint8Array.from(e).reverse();function AX(e,t,r,n){if(n){let i=2n**(r-1n);if(t<-i||t>=i)throw e.err("sInt: value out of bounds")}else if(0n>t||t>=2n**r)throw e.err("uInt: value out of bounds")}function jn(e){return{...e,encode:t=>{let r=new c8;return e.encodeStream(r,t),r.buffer},decode:t=>{let r=new a8(t),n=e.decodeStream(r);return r.finish(),n}}}function f8(e,t){e=Array.from(e);let r=0;for(;r<t.length&&t[r]==="..";r++)e.pop();let n=e.pop();for(;r<t.length;r++){if(!n||n[t[r]]===void 0)return;n=n[t[r]]}return n}function fd(e){return typeof e.encode=="function"&&typeof e.encodeStream=="function"&&typeof e.decode=="function"&&typeof e.decodeStream=="function"}function bTe(){return{encode:e=>{let t={};for(let[r,n]of e){if(t[r]!==void 0)throw new Error(`coders.dict: same key(${r}) appears twice in struct`);t[r]=n}return t},decode:e=>Object.entries(e)}}var xTe={encode:e=>{if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error(`coders.number: element bigger than MAX_SAFE_INTEGER=${e}`);return Number(e)},decode:e=>BigInt(e)};function wTe(e){return{encode:t=>e[t],decode:t=>e[t]}}function STe(e){let t=10n**BigInt(e);return{encode:r=>{let n=(r<0n?-r:r).toString(10),i=n.length-e;i<0&&(n=n.padStart(n.length-i,"0"),i=0);let o=n.length-1;for(;o>=i&&n[o]==="0";o--);let[s,a]=[n.slice(0,i),n.slice(i,o+1)];return s||(s="0"),r<0n&&(s="-"+s),a?`${s}.${a}`:s},decode:r=>{let n=!1;r.startsWith("-")&&(n=!0,r=r.slice(1));let i=r.indexOf(".");i=i===-1?r.length:i;let[o,s]=[r.slice(0,i),r.slice(i+1)],a=BigInt(o)*t,c=Math.min(s.length,e),u=BigInt(s.slice(0,c))*10n**BigInt(e-c),h=a+u;return n?-h:h}}}function vTe(e){return{encode:t=>{for(let r of e){let n=r.encode(t);if(n!==void 0)return n}throw new Error(`match/encode: cannot find match in ${t}`)},decode:t=>{for(let r of e){let n=r.decode(t);if(n!==void 0)return n}throw new Error(`match/decode: cannot find match in ${t}`)}}}var wm={dict:bTe,number:xTe,tsEnum:wTe,decimal:STe,match:vTe};var ds=(e,t=!1,r=!1)=>jn({size:e,encodeStream:(n,i)=>{if(typeof i!="number"&&typeof i!="bigint")throw n.err(`bigint: invalid value: ${i}`);let o=BigInt(i),s=BigInt(e);AX(n,o,8n*s,!!r);let a=2n**(8n*s-1n);r&&o<0&&(o=o|a);let c=[];for(let h=0;h<e;h++)c.push(Number(o&255n)),o>>=8n;let u=new Uint8Array(c).reverse();n.bytes(t?u.reverse():u)},decodeStream:n=>{let i=BigInt(e),o=n.bytes(e);t&&(o=u8(o));let s=u8(o),a=2n**(8n*i-1n),c=0n;for(let u=0;u<s.length;u++)c|=BigInt(s[u])<<8n*BigInt(u);return r&&c&a&&(c=(c^a)-a),AX(n,c,8n*i,!!r),c}}),txt=ds(32,!0),EX=ds(32,!1),rxt=ds(32,!0,!0),nxt=ds(32,!1,!0),ixt=ds(16,!0),oxt=ds(16,!1),sxt=ds(16,!0,!0),axt=ds(16,!1,!0),Ew=ds(8,!0),cxt=ds(8,!1),IX=ds(8,!0,!0),uxt=ds(8,!1,!0),$c=(e,t=!1,r=!1)=>{if(e>6)throw new Error("int supports size up to 6 bytes (48 bits), for other use bigint");return kw(ds(e,t,r),wm.number)},Ar=$c(4,!0),kX=$c(4,!1),Sm=$c(4,!0,!0),fxt=$c(4,!1,!0),v7=$c(2,!0),lxt=$c(2,!1),dxt=$c(2,!0,!0),hxt=$c(2,!1,!0),rf=$c(1,!1),pxt=$c(1,!1,!0),yxt=jn({size:1,encodeStream:(e,t)=>e.byte(t?1:0),decodeStream:e=>{let t=e.byte();if(t!==0&&t!==1)throw e.err(`bool: invalid value ${t}`);return t===1}}),Yr=(e,t=!1)=>jn({size:typeof e=="number"?e:void 0,encodeStream:(r,n)=>{if(!ls(n))throw r.err(`bytes: invalid value ${n}`);ls(e)||r.length(e,n.length),r.bytes(t?u8(n):n),ls(e)&&r.bytes(e)},decodeStream:r=>{let n;if(ls(e)){let i=r.find(e);if(!i)throw r.err("bytes: cannot find terminator");n=r.bytes(i-r.pos),r.bytes(e.length)}else n=r.bytes(e===null?r.leftBytes:r.length(e));return t?u8(n):n}}),Iw=(e,t=!1)=>{let r=Yr(e,t);return jn({size:r.size,encodeStream:(n,i)=>r.encodeStream(n,S7.decode(i)),decodeStream:n=>S7.encode(r.decodeStream(n))})},mxt=Iw(l8),TX=(e,t=!1,r=!1)=>{let n=Yr(e,t);return jn({size:n.size,encodeStream:(i,o)=>{if(r&&!o.startsWith("0x"))throw new Error("hex(withZero=true).encode input should start with 0x");let s=on.decode(r?o.slice(2):o);return n.encodeStream(i,s)},decodeStream:i=>(r?"0x":"")+on.encode(n.decodeStream(i))})};function kw(e,t){if(!fd(e))throw new Error(`apply: invalid inner value ${e}`);return jn({size:e.size,encodeStream:(r,n)=>{let i;try{i=t.decode(n)}catch(o){throw r.err(""+o)}return e.encodeStream(r,i)},decodeStream:r=>{let n=e.decodeStream(r);try{return t.encode(n)}catch(i){throw r.err(""+i)}}})}function Js(e,t){if(!fd(e))throw new Error(`validate: invalid inner value ${e}`);return jn({size:e.size,encodeStream:(r,n)=>e.encodeStream(r,t(n)),decodeStream:r=>t(e.decodeStream(r))})}var PX=(e,t=!1)=>jn({size:e.length,encodeStream:(r,n)=>{!!n!==t&&r.bytes(e)},decodeStream:r=>{let n=r.leftBytes>=e.length;return n&&(n=Rr(r.bytes(e.length,!0),e),n&&r.bytes(e.length)),n!==t}});function BX(e,t,r){if(!fd(t))throw new Error(`flagged: invalid inner value ${t}`);return jn({encodeStream:(n,i)=>{typeof e=="string"?f8(n.path,e.split("/"))?t.encodeStream(n,i):r&&t.encodeStream(n,r):(e.encodeStream(n,!!i),i?t.encodeStream(n,i):r&&t.encodeStream(n,r))},decodeStream:n=>{let i=!1;if(typeof e=="string"?i=f8(n.path,e.split("/")):i=e.decodeStream(n),i)return t.decodeStream(n);r&&t.decodeStream(n)}})}function Tw(e,t,r=!0){if(!fd(e))throw new Error(`flagged: invalid inner value ${e}`);return jn({size:e.size,encodeStream:(n,i)=>e.encodeStream(n,t),decodeStream:n=>{let i=e.decodeStream(n);if(r&&typeof i!="object"&&i!==t||ls(t)&&!Rr(t,i))throw n.err(`magic: invalid value: ${i} !== ${t}`)}})}function _X(e){let t=0;for(let r of e){if(!r.size)return;t+=r.size}return t}function Gi(e){if(Array.isArray(e))throw new Error("Packed.Struct: got array instead of object");return jn({size:_X(Object.values(e)),encodeStream:(t,r)=>{if(typeof r!="object"||r===null)throw t.err(`struct: invalid value ${r}`);t.path.push(r);for(let n in e)t.fieldPathPush(n),e[n].encodeStream(t,r[n]),t.fieldPathPop();t.path.pop()},decodeStream:t=>{let r={};t.path.push(r);for(let n in e)t.fieldPathPush(n),r[n]=e[n].decodeStream(t),t.fieldPathPop();return t.path.pop(),r}})}function CX(e){if(!Array.isArray(e))throw new Error(`Packed.Tuple: got ${typeof e} instead of array`);return jn({size:_X(e),encodeStream:(t,r)=>{if(!Array.isArray(r))throw t.err(`tuple: invalid value ${r}`);t.path.push(r);for(let n=0;n<e.length;n++)t.fieldPathPush(""+n),e[n].encodeStream(t,r[n]),t.fieldPathPop();t.path.pop()},decodeStream:t=>{let r=[];t.path.push(r);for(let n=0;n<e.length;n++)t.fieldPathPush(""+n),r.push(e[n].decodeStream(t)),t.fieldPathPop();return t.path.pop(),r}})}function NX(e,t){if(!fd(t))throw new Error(`prefix: invalid inner value ${t}`);if(ls(e))throw new Error("prefix: len cannot be Uint8Array");let r=Yr(e);return jn({size:typeof e=="number"?e:void 0,encodeStream:(n,i)=>{let o=new c8(n.path,n.fieldPath);t.encodeStream(o,i),r.encodeStream(n,o.buffer)},decodeStream:n=>{let i=r.decodeStream(n);return t.decodeStream(new a8(i,n.path,n.fieldPath))}})}function go(e,t){if(!fd(t))throw new Error(`array: invalid inner value ${t}`);return jn({size:typeof e=="number"&&t.size?e*t.size:void 0,encodeStream:(r,n)=>{if(!Array.isArray(n))throw r.err(`array: invalid value ${n}`);ls(e)||r.length(e,n.length),r.path.push(n);for(let i=0;i<n.length;i++){r.fieldPathPush(""+i);let o=n[i],s=r.pos;if(t.encodeStream(r,o),ls(e)){if(e.length>r.pos-s)continue;let a=r.buffer.subarray(s,r.pos);if(Rr(a.subarray(0,e.length),e))throw r.err(`array: inner element encoding same as separator. elm=${o} data=${a}`)}r.fieldPathPop()}r.path.pop(),ls(e)&&r.bytes(e)},decodeStream:r=>{let n=[];if(e===null){let i=0;for(r.path.push(n);!r.isEnd()&&(r.fieldPathPush(""+i++),n.push(t.decodeStream(r)),r.fieldPathPop(),!(t.size&&r.leftBytes<t.size)););r.path.pop()}else if(ls(e)){let i=0;for(r.path.push(n);;){if(Rr(r.bytes(e.length,!0),e)){r.bytes(e.length);break}r.fieldPathPush(""+i++),n.push(t.decodeStream(r)),r.fieldPathPop()}r.path.pop()}else{r.fieldPathPush("arrayLen");let i=r.length(e);r.fieldPathPop(),r.path.push(n);for(let o=0;o<i;o++)r.fieldPathPush(""+o),n.push(t.decodeStream(r)),r.fieldPathPop();r.path.pop()}return n}})}var gxt=Tw(Yr(0),sn);var{ProjectivePoint:w8,sign:MX,getPublicKey:ETe}=bm,y8=bm.CURVE.n,Bw=(e,t)=>e===void 0?t:e,Jr=ls,S8=e=>pX(_i(e)),ld=(...e)=>_i(_i(dd(...e))),dd=s8,GX=SX(_i);function m8(e){if(Array.isArray(e))return e.map(t=>m8(t));if(e instanceof Uint8Array)return Uint8Array.from(e);if(["number","bigint","boolean","string","undefined"].includes(typeof e))return e;if(e===null)return e;if(typeof e=="object")return Object.fromEntries(Object.entries(e).map(([t,r])=>[t,m8(r)]));throw new Error(`cloneDeep: unknown type=${e} (${typeof e})`)}var $i;(function(e){e[e.ecdsa=0]="ecdsa",e[e.schnorr=1]="schnorr"})($i||($i={}));function Im(e,t){let r=e.length;if(t===$i.ecdsa){if(r===32)throw new Error("Expected non-Schnorr key");return w8.fromHex(e),e}else if(t===$i.schnorr){if(r!==32)throw new Error("Expected 32-byte Schnorr key");return fs.utils.lift_x(fs.utils.bytesToNumberBE(e)),e}else throw new Error("Unknown key type")}function m0(e,t){try{return Im(e,t),!0}catch{return!1}}var DX=e=>e.r<y8/2n;function ITe(e,t,r=!1){let n=MX(e,t);if(r&&!DX(n)){let i=new Uint8Array(32);for(let o=0;o<Number.MAX_SAFE_INTEGER&&(i.set(Ar.encode(o)),n=MX(e,t,{extraEntropy:i}),!DX(n));o++);}return n.toDERRawBytes()}function $X(e,t){let r=fs.utils,n=r.taggedHash("TapTweak",e,t),i=r.bytesToNumberBE(n);if(i>=y8)throw new Error("tweak higher than curve order");return i}function kTe(e,t=new Uint8Array){let r=fs.utils,n=r.bytesToNumberBE(e),i=w8.fromPrivateKey(n),o=i.hasEvenY()?n:r.mod(-n,y8),s=r.pointToBytes(i),a=$X(s,t);return r.numberToBytesBE(r.mod(o+a,y8),32)}function YX(e,t){let r=fs.utils,n=$X(e,t),o=r.lift_x(r.bytesToNumberBE(e)).add(w8.fromPrivateKey(n)),s=o.hasEvenY()?0:1;return[r.pointToBytes(o),s]}var T7=Js(Yr(null),e=>Im(e,$i.ecdsa)),g8=Js(Yr(32),e=>Im(e,$i.schnorr)),OX=Js(Yr(null),e=>{if(e.length!==64&&e.length!==65)throw new Error("Schnorr signature should be 64 or 65 bytes long");return e});var hd={bech32:"bc",pubKeyHash:0,scriptHash:5,wif:128};var TTe=8,PTe=2,y0=0,ZX=4294967295,d8=new Uint8Array(32),Ext=wm.decimal(TTe);function P7(e,t){if(!Jr(e)||!Jr(t))throw new Error(`cmp: wrong type a=${typeof e} b=${typeof t}`);let r=Math.min(e.length,t.length);for(let n=0;n<r;n++)if(e[n]!=t[n])return Math.sign(e[n]-t[n]);return Math.sign(e.length-t.length)}var Wn;(function(e){e[e.OP_0=0]="OP_0",e[e.PUSHDATA1=76]="PUSHDATA1",e[e.PUSHDATA2=77]="PUSHDATA2",e[e.PUSHDATA4=78]="PUSHDATA4",e[e["1NEGATE"]=79]="1NEGATE",e[e.RESERVED=80]="RESERVED",e[e.OP_1=81]="OP_1",e[e.OP_2=82]="OP_2",e[e.OP_3=83]="OP_3",e[e.OP_4=84]="OP_4",e[e.OP_5=85]="OP_5",e[e.OP_6=86]="OP_6",e[e.OP_7=87]="OP_7",e[e.OP_8=88]="OP_8",e[e.OP_9=89]="OP_9",e[e.OP_10=90]="OP_10",e[e.OP_11=91]="OP_11",e[e.OP_12=92]="OP_12",e[e.OP_13=93]="OP_13",e[e.OP_14=94]="OP_14",e[e.OP_15=95]="OP_15",e[e.OP_16=96]="OP_16",e[e.NOP=97]="NOP",e[e.VER=98]="VER",e[e.IF=99]="IF",e[e.NOTIF=100]="NOTIF",e[e.VERIF=101]="VERIF",e[e.VERNOTIF=102]="VERNOTIF",e[e.ELSE=103]="ELSE",e[e.ENDIF=104]="ENDIF",e[e.VERIFY=105]="VERIFY",e[e.RETURN=106]="RETURN",e[e.TOALTSTACK=107]="TOALTSTACK",e[e.FROMALTSTACK=108]="FROMALTSTACK",e[e["2DROP"]=109]="2DROP",e[e["2DUP"]=110]="2DUP",e[e["3DUP"]=111]="3DUP",e[e["2OVER"]=112]="2OVER",e[e["2ROT"]=113]="2ROT",e[e["2SWAP"]=114]="2SWAP",e[e.IFDUP=115]="IFDUP",e[e.DEPTH=116]="DEPTH",e[e.DROP=117]="DROP",e[e.DUP=118]="DUP",e[e.NIP=119]="NIP",e[e.OVER=120]="OVER",e[e.PICK=121]="PICK",e[e.ROLL=122]="ROLL",e[e.ROT=123]="ROT",e[e.SWAP=124]="SWAP",e[e.TUCK=125]="TUCK",e[e.CAT=126]="CAT",e[e.SUBSTR=127]="SUBSTR",e[e.LEFT=128]="LEFT",e[e.RIGHT=129]="RIGHT",e[e.SIZE=130]="SIZE",e[e.INVERT=131]="INVERT",e[e.AND=132]="AND",e[e.OR=133]="OR",e[e.XOR=134]="XOR",e[e.EQUAL=135]="EQUAL",e[e.EQUALVERIFY=136]="EQUALVERIFY",e[e.RESERVED1=137]="RESERVED1",e[e.RESERVED2=138]="RESERVED2",e[e["1ADD"]=139]="1ADD",e[e["1SUB"]=140]="1SUB",e[e["2MUL"]=141]="2MUL",e[e["2DIV"]=142]="2DIV",e[e.NEGATE=143]="NEGATE",e[e.ABS=144]="ABS",e[e.NOT=145]="NOT",e[e["0NOTEQUAL"]=146]="0NOTEQUAL",e[e.ADD=147]="ADD",e[e.SUB=148]="SUB",e[e.MUL=149]="MUL",e[e.DIV=150]="DIV",e[e.MOD=151]="MOD",e[e.LSHIFT=152]="LSHIFT",e[e.RSHIFT=153]="RSHIFT",e[e.BOOLAND=154]="BOOLAND",e[e.BOOLOR=155]="BOOLOR",e[e.NUMEQUAL=156]="NUMEQUAL",e[e.NUMEQUALVERIFY=157]="NUMEQUALVERIFY",e[e.NUMNOTEQUAL=158]="NUMNOTEQUAL",e[e.LESSTHAN=159]="LESSTHAN",e[e.GREATERTHAN=160]="GREATERTHAN",e[e.LESSTHANOREQUAL=161]="LESSTHANOREQUAL",e[e.GREATERTHANOREQUAL=162]="GREATERTHANOREQUAL",e[e.MIN=163]="MIN",e[e.MAX=164]="MAX",e[e.WITHIN=165]="WITHIN",e[e.RIPEMD160=166]="RIPEMD160",e[e.SHA1=167]="SHA1",e[e.SHA256=168]="SHA256",e[e.HASH160=169]="HASH160",e[e.HASH256=170]="HASH256",e[e.CODESEPARATOR=171]="CODESEPARATOR",e[e.CHECKSIG=172]="CHECKSIG",e[e.CHECKSIGVERIFY=173]="CHECKSIGVERIFY",e[e.CHECKMULTISIG=174]="CHECKMULTISIG",e[e.CHECKMULTISIGVERIFY=175]="CHECKMULTISIGVERIFY",e[e.NOP1=176]="NOP1",e[e.CHECKLOCKTIMEVERIFY=177]="CHECKLOCKTIMEVERIFY",e[e.CHECKSEQUENCEVERIFY=178]="CHECKSEQUENCEVERIFY",e[e.NOP4=179]="NOP4",e[e.NOP5=180]="NOP5",e[e.NOP6=181]="NOP6",e[e.NOP7=182]="NOP7",e[e.NOP8=183]="NOP8",e[e.NOP9=184]="NOP9",e[e.NOP10=185]="NOP10",e[e.CHECKSIGADD=186]="CHECKSIGADD",e[e.INVALID=255]="INVALID"})(Wn||(Wn={}));var zn=jn({encodeStream:(e,t)=>{for(let r of t){if(typeof r=="string"){if(Wn[r]===void 0)throw new Error(`Unknown opcode=${r}`);e.byte(Wn[r]);continue}else if(typeof r=="number"){if(r===0){e.byte(0);continue}else if(1<=r&&r<=16){e.byte(Wn.OP_1-1+r);continue}}if(typeof r=="number"&&(r=JX().encode(BigInt(r))),!Jr(r))throw new Error(`Wrong Script OP=${r} (${typeof r})`);let n=r.length;n<Wn.PUSHDATA1?e.byte(n):n<=255?(e.byte(Wn.PUSHDATA1),e.byte(n)):n<=65535?(e.byte(Wn.PUSHDATA2),e.bytes(v7.encode(n))):(e.byte(Wn.PUSHDATA4),e.bytes(Ar.encode(n))),e.bytes(r)}},decodeStream:e=>{let t=[];for(;!e.isEnd();){let r=e.byte();if(Wn.OP_0<r&&r<=Wn.PUSHDATA4){let n;if(r<Wn.PUSHDATA1)n=r;else if(r===Wn.PUSHDATA1)n=rf.decodeStream(e);else if(r===Wn.PUSHDATA2)n=v7.decodeStream(e);else if(r===Wn.PUSHDATA4)n=Ar.decodeStream(e);else throw new Error("Should be not possible");t.push(e.bytes(n))}else if(r===0)t.push(0);else if(Wn.OP_1<=r&&r<=Wn.OP_16)t.push(r-(Wn.OP_1-1));else{let n=Wn[r];if(n===void 0)throw new Error(`Unknown opcode=${r.toString(16)}`);t.push(n)}}return t}});function JX(e=6,t=!1){return jn({encodeStream:(r,n)=>{if(n===0n)return;let i=n<0,o=BigInt(n),s=[];for(let a=i?-o:o;a;a>>=8n)s.push(Number(a&0xffn));s[s.length-1]>=128?s.push(i?128:0):i&&(s[s.length-1]|=128),r.bytes(new Uint8Array(s))},decodeStream:r=>{let n=r.leftBytes;if(n>e)throw new Error(`ScriptNum: number (${n}) bigger than limit=${e}`);if(n===0)return 0n;if(t&&!(r.data[n-1]&127)&&(n<=1||!(r.data[n-2]&128)))throw new Error("Non-minimally encoded ScriptNum");let i=0,o=0n;for(let s=0;s<n;++s)i=r.byte(),o|=BigInt(i)<<8n*BigInt(s);return i>=128&&(o&=2n**BigInt(n*8)-1n>>1n,o=-o),o}})}function BTe(e,t=4,r=!0){if(typeof e=="number")return e;if(Jr(e))try{let n=JX(t,r).decode(e);return n>Number.MAX_SAFE_INTEGER?void 0:Number(n)}catch{return}}var UX={253:[253,2,253n,65535n],254:[254,4,65536n,4294967295n],255:[255,8,4294967296n,18446744073709551615n]},v8=jn({encodeStream:(e,t)=>{if(typeof t=="number"&&(t=BigInt(t)),0n<=t&&t<=252n)return e.byte(Number(t));for(let[r,n,i,o]of Object.values(UX))if(!(i>t||t>o)){e.byte(r);for(let s=0;s<n;s++)e.byte(Number(t>>8n*BigInt(s)&0xffn));return}throw e.err(`VarInt too big: ${t}`)},decodeStream:e=>{let t=e.byte();if(t<=252)return BigInt(t);let[r,n,i]=UX[t],o=0n;for(let s=0;s<n;s++)o|=BigInt(e.byte())<<8n*BigInt(s);if(o<i)throw e.err(`Wrong CompactSize(${8*n})`);return o}}),Xa=kw(v8,wm.number),RX=e=>go(v8,e),Ja=Yr(v8),_Te=Gi({txid:Yr(32,!0),index:Ar,finalScriptSig:Ja,sequence:Ar}),Am=Gi({amount:Ew,script:Ja}),CTe={amount:0xffffffffffffffffn,script:sn},U7=go(Xa,Ja),NTe=Gi({version:Sm,segwitFlag:PX(new Uint8Array([0,1])),inputs:RX(_Te),outputs:RX(Am),witnesses:BX("segwitFlag",go("inputs/length",U7)),lockTime:Ar});function MTe(e){if(e.segwitFlag&&e.witnesses&&!e.witnesses.length)throw new Error("Segwit flag with empty witnesses array");return e}var Yc=Js(NTe,MTe);function B7(e){let[t,r,n,i,o,s]=e;return{type:t,kc:r,vc:n,reqInc:i,allowInc:o,silentIgnore:s}}var A8=Gi({fingerprint:kX,path:go(null,Ar)}),DTe=Gi({version:rf,internalKey:Yr(32),merklePath:go(null,Yr(32))}),Em=Js(DTe,e=>{if(e.merklePath.length>128)throw new Error("TaprootControlBlock: merklePath should be of length 0..128 (inclusive)");return e}),XX=Gi({hashes:go(Xa,Yr(32)),der:A8}),OTe=Yr(78),UTe=Gi({pubKey:g8,leafHash:Yr(32)}),RTe=go(null,Gi({depth:rf,version:rf,script:Ja})),Gn=Yr(null),LX=Yr(20),Pw=Yr(32),R7={unsignedTx:[0,!1,Yc,[0],[0],!1],xpub:[1,OTe,A8,[],[0,2],!1],txVersion:[2,!1,Ar,[2],[2],!1],fallbackLocktime:[3,!1,Ar,[],[2],!1],inputCount:[4,!1,Xa,[2],[2],!1],outputCount:[5,!1,Xa,[2],[2],!1],txModifiable:[6,!1,rf,[],[2],!1],version:[251,!1,Ar,[],[0,2],!1],proprietary:[252,Gn,Gn,[],[0,2],!1]},b8={nonWitnessUtxo:[0,!1,Yc,[],[0,2],!1],witnessUtxo:[1,!1,Am,[],[0,2],!1],partialSig:[2,T7,Gn,[],[0,2],!1],sighashType:[3,!1,Ar,[],[0,2],!1],redeemScript:[4,!1,Gn,[],[0,2],!1],witnessScript:[5,!1,Gn,[],[0,2],!1],bip32Derivation:[6,T7,A8,[],[0,2],!1],finalScriptSig:[7,!1,Gn,[],[0,2],!1],finalScriptWitness:[8,!1,U7,[],[0,2],!1],porCommitment:[9,!1,Gn,[],[0,2],!1],ripemd160:[10,LX,Gn,[],[0,2],!1],sha256:[11,Pw,Gn,[],[0,2],!1],hash160:[12,LX,Gn,[],[0,2],!1],hash256:[13,Pw,Gn,[],[0,2],!1],txid:[14,!1,Pw,[2],[2],!0],index:[15,!1,Ar,[2],[2],!0],sequence:[16,!1,Ar,[],[2],!0],requiredTimeLocktime:[17,!1,Ar,[],[2],!1],requiredHeightLocktime:[18,!1,Ar,[],[2],!1],tapKeySig:[19,!1,OX,[],[0,2],!1],tapScriptSig:[20,UTe,OX,[],[0,2],!1],tapLeafScript:[21,Em,Gn,[],[0,2],!1],tapBip32Derivation:[22,Pw,XX,[],[0,2],!1],tapInternalKey:[23,!1,g8,[],[0,2],!1],tapMerkleRoot:[24,!1,Pw,[],[0,2],!1],proprietary:[252,Gn,Gn,[],[0,2],!1]},LTe=["txid","sequence","index","witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknown"],VTe=["partialSig","finalScriptSig","finalScriptWitness","tapKeySig","tapScriptSig"],x8={redeemScript:[0,!1,Gn,[],[0,2],!1],witnessScript:[1,!1,Gn,[],[0,2],!1],bip32Derivation:[2,T7,A8,[],[0,2],!1],amount:[3,!1,IX,[2],[2],!0],script:[4,!1,Gn,[2],[2],!0],tapInternalKey:[5,!1,g8,[],[0,2],!1],tapTree:[6,!1,RTe,[],[0,2],!1],tapBip32Derivation:[7,g8,XX,[],[0,2],!1],proprietary:[252,Gn,Gn,[],[0,2],!1]},KTe=[],VX=go(l8,Gi({key:NX(Xa,Gi({type:Xa,key:Yr(null)})),value:Yr(Xa)})),Ixt=Gi({type:Xa,key:Yr(null)});function L7(e){let t={};for(let r in e){let[n,i,o]=e[r];t[n]=[r,i,o]}return jn({encodeStream:(r,n)=>{let i=[];for(let o in e){let s=n[o];if(s===void 0)continue;let[a,c,u]=e[o];if(!c)i.push({key:{type:a,key:sn},value:u.encode(s)});else{let h=s.map(([f,m])=>[c.encode(f),u.encode(m)]);h.sort((f,m)=>P7(f[0],m[0]));for(let[f,m]of h)i.push({key:{key:f,type:a},value:m})}}if(n.unknown){n.unknown.sort((o,s)=>P7(o[0].key,s[0].key));for(let[o,s]of n.unknown)i.push({key:o,value:s})}VX.encodeStream(r,i)},decodeStream:r=>{let n=VX.decodeStream(r),i={},o={};for(let s of n){let a="unknown",c=s.key.key,u=s.value;if(t[s.key.type]){let[h,f,m]=t[s.key.type];if(a=h,!f&&c.length)throw new Error(`PSBT: Non-empty key for ${a} (key=${on.encode(c)} value=${on.encode(u)}`);if(c=f?f.decode(c):void 0,u=m.decode(u),!f){if(i[a])throw new Error(`PSBT: Same keys: ${a} (key=${c} value=${u})`);i[a]=u,o[a]=!0;continue}}else c={type:s.key.type,key:s.key.key};if(o[a])throw new Error(`PSBT: Key type with empty key and no key=${a} val=${u}`);i[a]||(i[a]=[]),i[a].push([c,u])}return i}})}function KX(e,t){if(!Rr(e.hash,_i(t)))throw new Error("checkScript: wsh wrong witnessScript hash");let r=$n.decode(t);if(r.type==="tr"||r.type==="tr_ns"||r.type==="tr_ms")throw new Error(`checkScript: P2${r.type} cannot be wrapped in P2SH`);if(r.type==="wpkh"||r.type==="sh")throw new Error(`checkScript: P2${r.type} cannot be wrapped in P2WSH`)}function _7(e,t,r){if(e){let n=$n.decode(e);if(n.type==="tr_ns"||n.type==="tr_ms"||n.type==="ms"||n.type=="pk")throw new Error(`checkScript: non-wrapped ${n.type}`);if(n.type==="sh"&&t){if(!Rr(n.hash,S8(t)))throw new Error("checkScript: sh wrong redeemScript hash");let i=$n.decode(t);if(i.type==="tr"||i.type==="tr_ns"||i.type==="tr_ms")throw new Error(`checkScript: P2${i.type} cannot be wrapped in P2SH`);if(i.type==="sh")throw new Error("checkScript: P2SH cannot be wrapped in P2SH")}n.type==="wsh"&&r&&KX(n,r)}if(t){let n=$n.decode(t);n.type==="wsh"&&r&&KX(n,r)}}var V7=Js(L7(b8),e=>{if(e.finalScriptWitness&&!e.finalScriptWitness.length)throw new Error("validateInput: wmpty finalScriptWitness");if(e.partialSig&&!e.partialSig.length)throw new Error("Empty partialSig");if(e.partialSig)for(let[t]of e.partialSig)Im(t,$i.ecdsa);if(e.bip32Derivation)for(let[t]of e.bip32Derivation)Im(t,$i.ecdsa);if(e.requiredTimeLocktime!==void 0&&e.requiredTimeLocktime<5e8)throw new Error(`validateInput: wrong timeLocktime=${e.requiredTimeLocktime}`);if(e.requiredHeightLocktime!==void 0&&(e.requiredHeightLocktime<=0||e.requiredHeightLocktime>=5e8))throw new Error(`validateInput: wrong heighLocktime=${e.requiredHeightLocktime}`);if(e.nonWitnessUtxo&&e.index!==void 0){let t=e.nonWitnessUtxo.outputs.length-1;if(e.index>t)throw new Error(`validateInput: index(${e.index}) not in nonWitnessUtxo`);let r=e.nonWitnessUtxo.outputs[e.index];if(e.witnessUtxo&&(!Rr(e.witnessUtxo.script,r.script)||e.witnessUtxo.amount!==r.amount))throw new Error("validateInput: witnessUtxo different from nonWitnessUtxo")}if(e.tapLeafScript)for(let[t,r]of e.tapLeafScript){if((t.version&254)!==r[r.length-1])throw new Error("validateInput: tapLeafScript version mimatch");if(r[r.length-1]&1)throw new Error("validateInput: tapLeafScript version has parity bit!")}if(e.nonWitnessUtxo&&e.index&&e.txid){if(e.nonWitnessUtxo.outputs.length-1<e.index)throw new Error("nonWitnessUtxo: incorect output index");let r=g0.fromRaw(Yc.encode(e.nonWitnessUtxo)),n=on.encode(e.txid);if(r.id!==n)throw new Error(`nonWitnessUtxo: wrong txid, exp=${n} got=${r.id}`)}return e}),K7=Js(L7(x8),e=>{if(e.bip32Derivation)for(let[t]of e.bip32Derivation)Im(t,$i.ecdsa);return e}),QX=Js(L7(R7),e=>{if((e.version||0)===0){if(!e.unsignedTx)throw new Error("PSBTv0: missing unsignedTx");if(e.unsignedTx.segwitFlag||e.unsignedTx.witnesses)throw new Error("PSBTv0: witness in unsingedTx");for(let r of e.unsignedTx.inputs)if(r.finalScriptSig&&r.finalScriptSig.length)throw new Error("PSBTv0: input scriptSig found in unsignedTx")}return e}),FTe=Gi({magic:Tw(Iw(new Uint8Array([255])),"psbt"),global:QX,inputs:go("global/unsignedTx/inputs/length",V7),outputs:go(null,K7)}),HTe=Gi({magic:Tw(Iw(new Uint8Array([255])),"psbt"),global:QX,inputs:go("global/inputCount",V7),outputs:go("global/outputCount",K7)}),kxt=Gi({magic:Tw(Iw(new Uint8Array([255])),"psbt"),items:go(null,kw(go(l8,CX([TX(Xa),Yr(v8)])),wm.dict()))});function A7(e,t,r){for(let n in r){if(n==="unknown"||!t[n])continue;let{allowInc:i}=B7(t[n]);if(!i.includes(e))throw new Error(`PSBTv${e}: field ${n} is not allowed`)}for(let n in t){let{reqInc:i}=B7(t[n]);if(i.includes(e)&&r[n]===void 0)throw new Error(`PSBTv${e}: missing required field ${n}`)}}function FX(e,t,r){let n={};for(let i in r){let o=i;if(o!=="unknown"){if(!t[o])continue;let{allowInc:s,silentIgnore:a}=B7(t[o]);if(!s.includes(e)){if(a)continue;throw new Error(`Failed to serialize in PSBTv${e}: ${o} but versions allows inclusion=${s}`)}}n[o]=r[o]}return n}function eQ(e){let t=e&&e.global&&e.global.version||0;A7(t,R7,e.global);for(let s of e.inputs)A7(t,b8,s);for(let s of e.outputs)A7(t,x8,s);let r=t?e.global.inputCount:e.global.unsignedTx.inputs.length;if(e.inputs.length<r)throw new Error("Not enough inputs");let n=e.inputs.slice(r);if(n.length>1||n.length&&Object.keys(n[0]).length)throw new Error(`Unexpected inputs left in tx=${n}`);let i=t?e.global.outputCount:e.global.unsignedTx.outputs.length;if(e.outputs.length<i)throw new Error("Not outputs inputs");let o=e.outputs.slice(i);if(o.length>1||o.length&&Object.keys(o[0]).length)throw new Error(`Unexpected outputs left in tx=${o}`);return e}function E7(e,t,r,n){let i={...r,...t};for(let o in e){let s=o,[a,c,u]=e[s],h=n&&!n.includes(o);if(t[o]===void 0&&o in t){if(h)throw new Error(`Cannot remove signed field=${o}`);delete i[o]}else if(c){let f=r&&r[o]?r[o]:[],m=t[s];if(m){if(!Array.isArray(m))throw new Error(`keyMap(${o}): KV pairs should be [k, v][]`);m=m.map(S=>{if(S.length!==2)throw new Error(`keyMap(${o}): KV pairs should be [k, v][]`);return[typeof S[0]=="string"?c.decode(on.decode(S[0])):S[0],typeof S[1]=="string"?u.decode(on.decode(S[1])):S[1]]});let b={},w=(S,P,N)=>{if(b[S]===void 0){b[S]=[P,N];return}let O=on.encode(u.encode(b[S][1])),C=on.encode(u.encode(N));if(O!==C)throw new Error(`keyMap(${s}): same key=${S} oldVal=${O} newVal=${C}`)};for(let[S,P]of f){let N=on.encode(c.encode(S));w(N,S,P)}for(let[S,P]of m){let N=on.encode(c.encode(S));if(P===void 0){if(h)throw new Error(`Cannot remove signed field=${s}/${S}`);delete b[N]}else w(N,S,P)}i[s]=Object.values(b)}}else if(typeof i[o]=="string")i[o]=u.decode(on.decode(i[o]));else if(h&&o in t&&r&&r[o]!==void 0&&!Rr(u.encode(t[o]),u.encode(r[o])))throw new Error(`Cannot change signed field=${o}`)}for(let o in i)e[o]||delete i[o];return i}var HX=Js(FTe,eQ),qX=Js(HTe,eQ),I7=Gi({txid:Yr(32,!0),index:Ar}),qTe={encode(e){if(!(e.length!==2||!Jr(e[0])||!m0(e[0],$i.ecdsa)||e[1]!=="CHECKSIG"))return{type:"pk",pubkey:e[0]}},decode:e=>e.type==="pk"?[e.pubkey,"CHECKSIG"]:void 0};var jTe={encode(e){if(!(e.length!==5||e[0]!=="DUP"||e[1]!=="HASH160"||!Jr(e[2]))&&!(e[3]!=="EQUALVERIFY"||e[4]!=="CHECKSIG"))return{type:"pkh",hash:e[2]}},decode:e=>e.type==="pkh"?["DUP","HASH160",e.hash,"EQUALVERIFY","CHECKSIG"]:void 0};var WTe={encode(e){if(!(e.length!==3||e[0]!=="HASH160"||!Jr(e[1])||e[2]!=="EQUAL"))return{type:"sh",hash:e[1]}},decode:e=>e.type==="sh"?["HASH160",e.hash,"EQUAL"]:void 0},tQ=(e,t=hd)=>{let r=e.script;if(!Jr(r))throw new Error(`Wrong script: ${typeof e.script}, expected Uint8Array`);let n=S8(r),i=$n.encode({type:"sh",hash:n});_7(i,r,e.witnessScript);let o={type:"sh",redeemScript:r,script:$n.encode({type:"sh",hash:n}),address:E8(t).encode({type:"sh",hash:n})};return e.witnessScript&&(o.witnessScript=e.witnessScript),o},zTe={encode(e){if(!(e.length!==2||e[0]!==0||!Jr(e[1]))&&e[1].length===32)return{type:"wsh",hash:e[1]}},decode:e=>e.type==="wsh"?[0,e.hash]:void 0};var GTe={encode(e){if(!(e.length!==2||e[0]!==0||!Jr(e[1]))&&e[1].length===20)return{type:"wpkh",hash:e[1]}},decode:e=>e.type==="wpkh"?[0,e.hash]:void 0},F7=(e,t=hd)=>{if(!m0(e,$i.ecdsa))throw new Error("P2WPKH: invalid publicKey");if(e.length===65)throw new Error("P2WPKH: uncompressed public key");let r=S8(e);return{type:"wpkh",script:$n.encode({type:"wpkh",hash:r}),address:E8(t).encode({type:"wpkh",hash:r})}},$Te={encode(e){let t=e.length-1;if(e[t]!=="CHECKMULTISIG")return;let r=e[0],n=e[t-1];if(typeof r!="number"||typeof n!="number")return;let i=e.slice(1,-2);if(n===i.length){for(let o of i)if(!Jr(o))return;return{type:"ms",m:r,pubkeys:i}}},decode:e=>e.type==="ms"?[e.m,...e.pubkeys,e.pubkeys.length,"CHECKMULTISIG"]:void 0};var YTe={encode(e){if(!(e.length!==2||e[0]!==1||!Jr(e[1])))return{type:"tr",pubkey:e[1]}},decode:e=>e.type==="tr"?[1,e.pubkey]:void 0};function ZTe(e){let t=Array.from(e);for(;t.length>=2;){t.sort((s,a)=>(a.weight||1)-(s.weight||1));let n=t.pop(),i=t.pop(),o=(i?.weight||1)+(n?.weight||1);t.push({weight:o,childs:[i?.childs||i,n?.childs||n]})}let r=t[0];return r?.childs||r}function JTe(e,t,r=!1){let n=$n.decode(e);if(n.type==="unknown"&&r)return;if(!["tr_ns","tr_ms"].includes(n.type))throw new Error(`P2TR: invalid leaf script=${n.type}`);let i=n;if(!r&&i.pubkeys)for(let o of i.pubkeys){if(Rr(o,rQ))throw new Error("Unspendable taproot key in leaf script");if(Rr(o,t))throw new Error("Using P2TR with leaf script with same key as internal key is not supported")}}function C7(e,t,r=!1){if(!e)throw new Error("taprootHashTree: empty tree");if(Array.isArray(e)&&e.length===1&&(e=e[0]),!Array.isArray(e)){let{leafVersion:a,script:c}=e;if(e.tapLeafScript||e.tapMerkleRoot&&!Rr(e.tapMerkleRoot,sn))throw new Error("P2TR: tapRoot leafScript cannot have tree");let u=typeof c=="string"?on.decode(c):c;if(!Jr(u))throw new Error(`checkScript: wrong script type=${u}`);return JTe(u,t,r),{type:"leaf",version:a,script:u,hash:p8(u,a)}}if(e.length!==2&&(e=ZTe(e)),e.length!==2)throw new Error("hashTree: non binary tree!");let n=C7(e[0],t,r),i=C7(e[1],t,r),[o,s]=[n.hash,i.hash];return P7(s,o)===-1&&([o,s]=[s,o]),{type:"branch",left:n,right:i,hash:fs.utils.taggedHash("TapBranch",o,s)}}function N7(e,t=[]){if(!e)throw new Error("taprootAddPath: empty tree");if(e.type==="leaf")return{...e,path:t};if(e.type!=="branch")throw new Error(`taprootAddPath: wrong type=${e}`);return{...e,path:t,left:N7(e.left,[e.right.hash,...t]),right:N7(e.right,[e.left.hash,...t])}}function M7(e){if(!e)throw new Error("taprootAddPath: empty tree");if(e.type==="leaf")return[e];if(e.type!=="branch")throw new Error(`taprootWalkTree: wrong type=${e}`);return[...M7(e.left),...M7(e.right)]}var rQ=_i(w8.BASE.toRawBytes(!1));function nQ(e,t,r=hd,n=!1){if(!e&&!t)throw new Error("p2tr: should have pubKey or scriptTree (or both)");let i=typeof e=="string"?on.decode(e):e||rQ;if(!m0(i,$i.schnorr))throw new Error("p2tr: non-schnorr pubkey");let o=t?N7(C7(t,i,n)):void 0,s=o?o.hash:void 0,[a,c]=YX(i,s||sn),u;o&&(u=M7(o).map(m=>({...m,controlBlock:Em.encode({version:(m.version||O7)+c,internalKey:i,merklePath:m.path})})));let h;u&&(h=u.map(m=>[Em.decode(m.controlBlock),dd(m.script,new Uint8Array([m.version||O7]))]));let f={type:"tr",script:$n.encode({type:"tr",pubkey:a}),address:E8(r).encode({type:"tr",pubkey:a}),tweakedPubkey:a,tapInternalKey:i};return u&&(f.leaves=u),h&&(f.tapLeafScript=h),s&&(f.tapMerkleRoot=s),f}var XTe={encode(e){let t=e.length-1;if(e[t]!=="CHECKSIG")return;let r=[];for(let n=0;n<t;n++){let i=e[n];if(n&1){if(i!=="CHECKSIGVERIFY"||n===t-1)return;continue}if(!Jr(i))return;r.push(i)}return{type:"tr_ns",pubkeys:r}},decode:e=>{if(e.type!=="tr_ns")return;let t=[];for(let r=0;r<e.pubkeys.length-1;r++)t.push(e.pubkeys[r],"CHECKSIGVERIFY");return t.push(e.pubkeys[e.pubkeys.length-1],"CHECKSIG"),t}};var QTe={encode(e){let t=e.length-1;if(e[t]!=="NUMEQUAL"||e[1]!=="CHECKSIG")return;let r=[],n=BTe(e[t-1]);if(typeof n=="number"){for(let i=0;i<t-1;i++){let o=e[i];if(i&1){if(o!==(i===1?"CHECKSIG":"CHECKSIGADD"))throw new Error("OutScript.encode/tr_ms: wrong element");continue}if(!Jr(o))throw new Error("OutScript.encode/tr_ms: wrong key element");r.push(o)}return{type:"tr_ms",pubkeys:r,m:n}}},decode:e=>{if(e.type!=="tr_ms")return;let t=[e.pubkeys[0],"CHECKSIG"];for(let r=1;r<e.pubkeys.length;r++)t.push(e.pubkeys[r],"CHECKSIGADD");return t.push(e.m,"NUMEQUAL"),t}};var e5e={encode(e){return{type:"unknown",script:zn.encode(e)}},decode:e=>e.type==="unknown"?zn.decode(e.script):void 0},t5e=[qTe,jTe,WTe,zTe,GTe,$Te,YTe,XTe,QTe,e5e],r5e=kw(zn,wm.match(t5e)),$n=Js(r5e,e=>{if(e.type==="pk"&&!m0(e.pubkey,$i.ecdsa))throw new Error("OutScript/pk: wrong key");if((e.type==="pkh"||e.type==="sh"||e.type==="wpkh")&&(!Jr(e.hash)||e.hash.length!==20))throw new Error(`OutScript/${e.type}: wrong hash`);if(e.type==="wsh"&&(!Jr(e.hash)||e.hash.length!==32))throw new Error("OutScript/wsh: wrong hash");if(e.type==="tr"&&(!Jr(e.pubkey)||!m0(e.pubkey,$i.schnorr)))throw new Error("OutScript/tr: wrong taproot public key");if((e.type==="ms"||e.type==="tr_ns"||e.type==="tr_ms")&&!Array.isArray(e.pubkeys))throw new Error("OutScript/multisig: wrong pubkeys array");if(e.type==="ms"){let t=e.pubkeys.length;for(let r of e.pubkeys)if(!m0(r,$i.ecdsa))throw new Error("OutScript/multisig: wrong pubkey");if(e.m<=0||t>16||e.m>t)throw new Error("OutScript/multisig: invalid params")}if(e.type==="tr_ns"||e.type==="tr_ms"){for(let t of e.pubkeys)if(!m0(t,$i.schnorr))throw new Error(`OutScript/${e.type}: wrong pubkey`)}if(e.type==="tr_ms"){let t=e.pubkeys.length;if(e.m<=0||t>999||e.m>t)throw new Error("OutScript/tr_ms: invalid params")}return e});function iQ(e,t){if(t.length<2||t.length>40)throw new Error("Witness: invalid length");if(e>16)throw new Error("Witness: invalid version");if(e===0&&!(t.length===20||t.length===32))throw new Error("Witness: invalid length for version")}function k7(e,t,r=hd){iQ(e,t);let n=e===0?o8:w7;return n.encode(r.bech32,[e].concat(n.toWords(t)))}function jX(e,t){return GX.encode(dd(Uint8Array.from(t),e))}function E8(e=hd){return{encode(t){let{type:r}=t;if(r==="wpkh")return k7(0,t.hash,e);if(r==="wsh")return k7(0,t.hash,e);if(r==="tr")return k7(1,t.pubkey,e);if(r==="pkh")return jX(t.hash,[e.pubKeyHash]);if(r==="sh")return jX(t.hash,[e.scriptHash]);throw new Error(`Unknown address type=${r}`)},decode(t){if(t.length<14||t.length>74)throw new Error("Invalid address length");if(e.bech32&&t.toLowerCase().startsWith(e.bech32)){let n;try{if(n=o8.decode(t),n.words[0]!==0)throw new Error(`bech32: wrong version=${n.words[0]}`)}catch{if(n=w7.decode(t),n.words[0]===0)throw new Error(`bech32m: wrong version=${n.words[0]}`)}if(n.prefix!==e.bech32)throw new Error(`wrong bech32 prefix=${n.prefix}`);let[i,...o]=n.words,s=o8.fromWords(o);if(iQ(i,s),i===0&&s.length===32)return{type:"wsh",hash:s};if(i===0&&s.length===20)return{type:"wpkh",hash:s};if(i===1&&s.length===32)return{type:"tr",pubkey:s};throw new Error("Unknown witness program")}let r=GX.decode(t);if(r.length!==21)throw new Error("Invalid base58 address");if(r[0]===e.pubKeyHash)return{type:"pkh",hash:r.slice(1)};if(r[0]===e.scriptHash)return{type:"sh",hash:r.slice(1)};throw new Error(`Invalid address prefix=${r[0]}`)}}}var Zr;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.ANYONECANPAY=128]="ANYONECANPAY"})(Zr||(Zr={}));var D7;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.DEFAULT_ANYONECANPAY=128]="DEFAULT_ANYONECANPAY",e[e.ALL_ANYONECANPAY=129]="ALL_ANYONECANPAY",e[e.NONE_ANYONECANPAY=130]="NONE_ANYONECANPAY",e[e.SINGLE_ANYONECANPAY=131]="SINGLE_ANYONECANPAY"})(D7||(D7={}));function n5e(e){if(typeof e!="number"||typeof D7[e]!="string")throw new Error(`Invalid SigHash=${e}`);return e}function WX(e){let t=e&31;return{isAny:!!(e&Zr.ANYONECANPAY),isNone:t===Zr.NONE,isSingle:t===Zr.SINGLE}}function h8(e){if(e.txid===void 0||e.index===void 0)throw new Error("Transaction/input: txid and index required");return{txid:e.txid,index:e.index,sequence:Bw(e.sequence,ZX),finalScriptSig:Bw(e.finalScriptSig,sn)}}function zX(e){for(let t in e){let r=t;LTe.includes(r)||delete e[r]}}function vm(e){if(e.script===void 0||e.amount===void 0)throw new Error("Transaction/output: script and amount required");return{script:e.script,amount:e.amount}}var O7=192,p8=(e,t=O7)=>fs.utils.taggedHash("TapLeaf",new Uint8Array([t]),Ja.encode(e));function i5e(e,t,r,n=sn){return Rr(r,t)&&(e=kTe(e,n),t=fs.getPublicKey(e)),{privKey:e,pubKey:t}}var o5e={}.toString;function s5e(e){if(e!==void 0&&o5e.call(e)!=="[object Object]")throw new Error(`Wrong object type for transaction options: ${e}`);let t={...e,version:Bw(e.version,PTe),lockTime:Bw(e.lockTime,0),PSBTVersion:Bw(e.PSBTVersion,0)};if(typeof t.allowUnknowInput<"u"&&(e.allowUnknownInputs=t.allowUnknowInput),typeof t.allowUnknowOutput<"u"&&(e.allowUnknownOutputs=t.allowUnknowOutput),![-1,0,1,2].includes(t.version))throw new Error(`Unknown version: ${t.version}`);if(typeof t.lockTime!="number")throw new Error("Transaction lock time should be number");if(Ar.encode(t.lockTime),t.PSBTVersion!==0&&t.PSBTVersion!==2)throw new Error(`Unknown PSBT version ${t.PSBTVersion}`);for(let r of["allowUnknownOutputs","allowUnknownInputs","disableScriptCheck","bip174jsCompat","allowLegacyWitnessUtxo","lowR"]){let n=t[r];if(n!==void 0&&typeof n!="boolean")throw new Error(`Transation options wrong type: ${r}=${n} (${typeof n})`)}return Object.freeze(t)}var g0=class e{constructor(t={}){this.global={},this.inputs=[],this.outputs=[];let r=this.opts=s5e(t);r.lockTime!==y0&&(this.global.fallbackLocktime=r.lockTime),this.global.txVersion=r.version}static fromRaw(t,r={}){let n=Yc.decode(t),i=new e({...r,version:n.version,lockTime:n.lockTime});for(let o of n.outputs)i.addOutput(o);if(i.outputs=n.outputs,i.inputs=n.inputs,n.witnesses)for(let o=0;o<n.witnesses.length;o++)i.inputs[o].finalScriptWitness=n.witnesses[o];return i}static fromPSBT(t,r={}){let n;try{n=HX.decode(t)}catch(f){try{n=qX.decode(t)}catch{throw f}}let i=n.global.version||0;if(i!==0&&i!==2)throw new Error(`Wrong PSBT version=${i}`);let o=n.global.unsignedTx,s=i===0?o?.version:n.global.txVersion,a=i===0?o?.lockTime:n.global.fallbackLocktime,c=new e({...r,version:s,lockTime:a,PSBTVersion:i}),u=i===0?o?.inputs.length:n.global.inputCount;c.inputs=n.inputs.slice(0,u).map((f,m)=>({finalScriptSig:sn,...n.global.unsignedTx?.inputs[m],...f}));let h=i===0?o?.outputs.length:n.global.outputCount;return c.outputs=n.outputs.slice(0,h).map((f,m)=>({...f,...n.global.unsignedTx?.outputs[m]})),c.global={...n.global,txVersion:s},a!==y0&&(c.global.fallbackLocktime=a),c}toPSBT(t=this.opts.PSBTVersion){if(t!==0&&t!==2)throw new Error(`Wrong PSBT version=${t}`);let r=this.inputs.map(o=>FX(t,b8,o));for(let o of r)o.partialSig&&!o.partialSig.length&&delete o.partialSig,o.finalScriptSig&&!o.finalScriptSig.length&&delete o.finalScriptSig,o.finalScriptWitness&&!o.finalScriptWitness.length&&delete o.finalScriptWitness;let n=this.outputs.map(o=>FX(t,x8,o)),i={...this.global};return t===0?(i.unsignedTx=Yc.decode(this.unsignedTx),delete i.fallbackLocktime,delete i.txVersion):(i.version=t,i.txVersion=this.version,i.inputCount=this.inputs.length,i.outputCount=this.outputs.length,i.fallbackLocktime&&i.fallbackLocktime===y0&&delete i.fallbackLocktime),this.opts.bip174jsCompat&&(r.length||r.push({}),n.length||n.push({})),(t===0?HX:qX).encode({global:i,inputs:r,outputs:n})}get lockTime(){let t=y0,r=0,n=y0,i=0;for(let o of this.inputs)o.requiredHeightLocktime&&(t=Math.max(t,o.requiredHeightLocktime),r++),o.requiredTimeLocktime&&(n=Math.max(n,o.requiredTimeLocktime),i++);return r&&r>=i?t:n!==y0?n:this.global.fallbackLocktime||y0}get version(){if(this.global.txVersion===void 0)throw new Error("No global.txVersion");return this.global.txVersion}inputStatus(t){this.checkInputIdx(t);let r=this.inputs[t];return r.finalScriptSig&&r.finalScriptSig.length||r.finalScriptWitness&&r.finalScriptWitness.length?"finalized":r.tapKeySig||r.tapScriptSig&&r.tapScriptSig.length||r.partialSig&&r.partialSig.length?"signed":"unsigned"}inputSighash(t){this.checkInputIdx(t);let r=this.inputType(this.inputs[t]).sighash,n=r===Zr.DEFAULT?Zr.ALL:r&3;return{sigInputs:r&Zr.ANYONECANPAY,sigOutputs:n}}signStatus(){let t=!0,r=!0,n=[],i=[];for(let o=0;o<this.inputs.length;o++){if(this.inputStatus(o)==="unsigned")continue;let{sigInputs:a,sigOutputs:c}=this.inputSighash(o);if(a===Zr.ANYONECANPAY?n.push(o):t=!1,c===Zr.ALL)r=!1;else if(c===Zr.SINGLE)i.push(o);else if(c!==Zr.NONE)throw new Error(`Wrong signature hash output type: ${c}`)}return{addInput:t,addOutput:r,inputs:n,outputs:i}}get isFinal(){for(let t=0;t<this.inputs.length;t++)if(this.inputStatus(t)!=="finalized")return!1;return!0}get hasWitnesses(){let t=!1;for(let r of this.inputs)r.finalScriptWitness&&r.finalScriptWitness.length&&(t=!0);return t}get weight(){if(!this.isFinal)throw new Error("Transaction is not finalized");let t=32,r=this.outputs.map(vm);this.hasWitnesses&&(t+=2),t+=4*Xa.encode(this.inputs.length).length,t+=4*Xa.encode(this.outputs.length).length;for(let n of this.inputs)t+=160+4*Ja.encode(n.finalScriptSig||sn).length;for(let n of r)t+=32+4*Ja.encode(n.script).length;if(this.hasWitnesses)for(let n of this.inputs)n.finalScriptWitness&&(t+=U7.encode(n.finalScriptWitness).length);return t}get vsize(){return Math.ceil(this.weight/4)}toBytes(t=!1,r=!1){return Yc.encode({version:this.version,lockTime:this.lockTime,inputs:this.inputs.map(h8).map(n=>({...n,finalScriptSig:t&&n.finalScriptSig||sn})),outputs:this.outputs.map(vm),witnesses:this.inputs.map(n=>n.finalScriptWitness||[]),segwitFlag:r&&this.hasWitnesses})}get unsignedTx(){return this.toBytes(!1,!1)}get hex(){return on.encode(this.toBytes(!0,this.hasWitnesses))}get hash(){if(!this.isFinal)throw new Error("Transaction is not finalized");return on.encode(ld(this.toBytes(!0)))}get id(){if(!this.isFinal)throw new Error("Transaction is not finalized");return on.encode(ld(this.toBytes(!0)).reverse())}checkInputIdx(t){if(!Number.isSafeInteger(t)||0>t||t>=this.inputs.length)throw new Error(`Wrong input index=${t}`)}getInput(t){return this.checkInputIdx(t),m8(this.inputs[t])}get inputsLength(){return this.inputs.length}normalizeInput(t,r,n){let{nonWitnessUtxo:i,txid:o}=t;typeof i=="string"&&(i=on.decode(i)),Jr(i)&&(i=Yc.decode(i)),i===void 0&&(i=r?.nonWitnessUtxo),typeof o=="string"&&(o=on.decode(o)),o===void 0&&(o=r?.txid);let s={...r,...t,nonWitnessUtxo:i,txid:o};s.nonWitnessUtxo===void 0&&delete s.nonWitnessUtxo,s.sequence===void 0&&(s.sequence=ZX),s.tapMerkleRoot===null&&delete s.tapMerkleRoot,s=E7(b8,s,r,n),V7.encode(s);let a;return s.nonWitnessUtxo&&s.index!==void 0?a=s.nonWitnessUtxo.outputs[s.index]:s.witnessUtxo&&(a=s.witnessUtxo),a&&!this.opts.disableScriptCheck&&_7(a&&a.script,s.redeemScript,s.witnessScript),s}addInput(t,r=!1){if(!r&&!this.signStatus().addInput)throw new Error("Tx has signed inputs, cannot add new one");return this.inputs.push(this.normalizeInput(t)),this.inputs.length-1}updateInput(t,r,n=!1){this.checkInputIdx(t);let i;if(!n){let o=this.signStatus();(!o.addInput||o.inputs.includes(t))&&(i=VTe)}this.inputs[t]=this.normalizeInput(r,this.inputs[t],i)}checkOutputIdx(t){if(!Number.isSafeInteger(t)||0>t||t>=this.outputs.length)throw new Error(`Wrong output index=${t}`)}getOutput(t){return this.checkOutputIdx(t),m8(this.outputs[t])}get outputsLength(){return this.outputs.length}normalizeOutput(t,r,n){let{amount:i,script:o}=t;if(i===void 0&&(i=r?.amount),typeof i!="bigint")throw new Error("amount must be bigint sats");typeof o=="string"&&(o=on.decode(o)),o===void 0&&(o=r?.script);let s={...r,...t,amount:i,script:o};if(s.amount===void 0&&delete s.amount,s=E7(x8,s,r,n),K7.encode(s),s.script&&!this.opts.allowUnknownOutputs&&$n.decode(s.script).type==="unknown")throw new Error("Transaction/output: unknown output script type, there is a chance that input is unspendable. Pass allowUnknownScript=true, if you sure");return this.opts.disableScriptCheck||_7(s.script,s.redeemScript,s.witnessScript),s}addOutput(t,r=!1){if(!r&&!this.signStatus().addOutput)throw new Error("Tx has signed outputs, cannot add new one");return this.outputs.push(this.normalizeOutput(t)),this.outputs.length-1}updateOutput(t,r,n=!1){this.checkOutputIdx(t);let i;if(!n){let o=this.signStatus();(!o.addOutput||o.outputs.includes(t))&&(i=KTe)}this.outputs[t]=this.normalizeOutput(r,this.outputs[t],i)}addOutputAddress(t,r,n=hd){return this.addOutput({script:$n.encode(E8(n).decode(t)),amount:r})}get fee(){let t=0n;for(let n of this.inputs){let i=this.prevOut(n);if(!i)throw new Error("Empty input amount");t+=i.amount}let r=this.outputs.map(vm);for(let n of r)t-=n.amount;return t}preimageLegacy(t,r,n){let{isAny:i,isNone:o,isSingle:s}=WX(n);if(t<0||!Number.isSafeInteger(t))throw new Error(`Invalid input idx=${t}`);if(s&&t>=this.outputs.length||t>=this.inputs.length)return EX.encode(1n);r=zn.encode(zn.decode(r).filter(h=>h!=="CODESEPARATOR"));let a=this.inputs.map(h8).map((h,f)=>({...h,finalScriptSig:f===t?r:sn}));i?a=[a[t]]:(o||s)&&(a=a.map((h,f)=>({...h,sequence:f===t?h.sequence:0})));let c=this.outputs.map(vm);o?c=[]:s&&(c=c.slice(0,t).fill(CTe).concat([c[t]]));let u=Yc.encode({lockTime:this.lockTime,version:this.version,segwitFlag:!1,inputs:a,outputs:c});return ld(u,Sm.encode(n))}preimageWitnessV0(t,r,n,i){let{isAny:o,isNone:s,isSingle:a}=WX(n),c=d8,u=d8,h=d8,f=this.inputs.map(h8),m=this.outputs.map(vm);o||(c=ld(...f.map(I7.encode))),!o&&!a&&!s&&(u=ld(...f.map(w=>Ar.encode(w.sequence)))),!a&&!s?h=ld(...m.map(Am.encode)):a&&t<m.length&&(h=ld(Am.encode(m[t])));let b=f[t];return ld(Sm.encode(this.version),c,u,Yr(32,!0).encode(b.txid),Ar.encode(b.index),Ja.encode(r),Ew.encode(i),Ar.encode(b.sequence),h,Ar.encode(this.lockTime),Ar.encode(n))}preimageWitnessV1(t,r,n,i,o=-1,s,a=192,c){if(!Array.isArray(i)||this.inputs.length!==i.length)throw new Error(`Invalid amounts array=${i}`);if(!Array.isArray(r)||this.inputs.length!==r.length)throw new Error(`Invalid prevOutScript array=${r}`);let u=[rf.encode(0),rf.encode(n),Sm.encode(this.version),Ar.encode(this.lockTime)],h=n===Zr.DEFAULT?Zr.ALL:n&3,f=n&Zr.ANYONECANPAY,m=this.inputs.map(h8),b=this.outputs.map(vm);f!==Zr.ANYONECANPAY&&u.push(...[m.map(I7.encode),i.map(Ew.encode),r.map(Ja.encode),m.map(S=>Ar.encode(S.sequence))].map(S=>_i(dd(...S)))),h===Zr.ALL&&u.push(_i(dd(...b.map(Am.encode))));let w=(c?1:0)|(s?2:0);if(u.push(new Uint8Array([w])),f===Zr.ANYONECANPAY){let S=m[t];u.push(I7.encode(S),Ew.encode(i[t]),Ja.encode(r[t]),Ar.encode(S.sequence))}else u.push(Ar.encode(t));return w&1&&u.push(_i(Ja.encode(c||sn))),h===Zr.SINGLE&&u.push(t<b.length?_i(Am.encode(b[t])):d8),s&&u.push(p8(s,a),rf.encode(0),Sm.encode(o)),fs.utils.taggedHash("TapSighash",...u)}prevOut(t){if(t.nonWitnessUtxo){if(t.index===void 0)throw new Error("Unknown input index");return t.nonWitnessUtxo.outputs[t.index]}else{if(t.witnessUtxo)return t.witnessUtxo;throw new Error("Cannot find previous output info")}}inputType(t){let r="legacy",n=Zr.ALL,i=this.prevOut(t),o=$n.decode(i.script),s=o.type,a=o,c=[o];if(o.type==="tr")return n=Zr.DEFAULT,{txType:"taproot",type:"tr",last:o,lastScript:i.script,defaultSighash:n,sighash:t.sighashType||n};{if((o.type==="wpkh"||o.type==="wsh")&&(r="segwit"),o.type==="sh"){if(!t.redeemScript)throw new Error("inputType: sh without redeemScript");let m=$n.decode(t.redeemScript);(m.type==="wpkh"||m.type==="wsh")&&(r="segwit"),c.push(m),a=m,s+=`-${m.type}`}if(a.type==="wsh"){if(!t.witnessScript)throw new Error("inputType: wsh without witnessScript");let m=$n.decode(t.witnessScript);m.type==="wsh"&&(r="segwit"),c.push(m),a=m,s+=`-${m.type}`}let u=c[c.length-1];if(u.type==="sh"||u.type==="wsh")throw new Error("inputType: sh/wsh cannot be terminal type");let h=$n.encode(u),f={type:s,txType:r,last:u,lastScript:h,defaultSighash:n,sighash:t.sighashType||n};if(r==="legacy"&&!this.opts.allowLegacyWitnessUtxo&&!t.nonWitnessUtxo)throw new Error("Transaction/sign: legacy input without nonWitnessUtxo, can result in attack that forces paying higher fees. Pass allowLegacyWitnessUtxo=true, if you sure");return f}}signIdx(t,r,n,i){this.checkInputIdx(r);let o=this.inputs[r],s=this.inputType(o);if(!Jr(t)){if(!o.bip32Derivation||!o.bip32Derivation.length)throw new Error("bip32Derivation: empty");let h=o.bip32Derivation.filter(m=>m[1].fingerprint==t.fingerprint).map(([m,{path:b}])=>{let w=t;for(let S of b)w=w.deriveChild(S);if(!Rr(w.publicKey,m))throw new Error("bip32Derivation: wrong pubKey");if(!w.privateKey)throw new Error("bip32Derivation: no privateKey");return w});if(!h.length)throw new Error(`bip32Derivation: no items with fingerprint=${t.fingerprint}`);let f=!1;for(let m of h)this.signIdx(m.privateKey,r)&&(f=!0);return f}n?n.forEach(n5e):n=[s.defaultSighash];let a=s.sighash;if(!n.includes(a))throw new Error(`Input with not allowed sigHash=${a}. Allowed: ${n.join(", ")}`);let{sigOutputs:c}=this.inputSighash(r);if(c===Zr.SINGLE&&r>=this.outputs.length)throw new Error(`Input with sighash SINGLE, but there is no output with corresponding index=${r}`);let u=this.prevOut(o);if(s.txType==="taproot"){if(o.tapBip32Derivation)throw new Error("tapBip32Derivation unsupported");let h=this.inputs.map(this.prevOut),f=h.map(P=>P.script),m=h.map(P=>P.amount),b=!1,w=fs.getPublicKey(t),S=o.tapMerkleRoot||sn;if(o.tapInternalKey){let{pubKey:P,privKey:N}=i5e(t,w,o.tapInternalKey,S),[O,C]=YX(o.tapInternalKey,S);if(Rr(O,P)){let L=this.preimageWitnessV1(r,f,a,m),V=dd(fs.sign(L,N,i),a!==Zr.DEFAULT?new Uint8Array([a]):sn);this.updateInput(r,{tapKeySig:V},!0),b=!0}}if(o.tapLeafScript){o.tapScriptSig=o.tapScriptSig||[];for(let[P,N]of o.tapLeafScript){let O=N.subarray(0,-1),C=zn.decode(O),L=N[N.length-1],V=p8(O,L);if(C.findIndex(Y=>Jr(Y)&&Rr(Y,w))===-1)continue;let $=this.preimageWitnessV1(r,f,a,m,void 0,O,L),H=dd(fs.sign($,t,i),a!==Zr.DEFAULT?new Uint8Array([a]):sn);this.updateInput(r,{tapScriptSig:[[{pubKey:w,leafHash:V},H]]},!0),b=!0}}if(!b)throw new Error("No taproot scripts signed");return!0}else{let h=ETe(t),f=!1,m=S8(h);for(let S of zn.decode(s.lastScript))Jr(S)&&(Rr(S,h)||Rr(S,m))&&(f=!0);if(!f)throw new Error(`Input script doesn't have pubKey: ${s.lastScript}`);let b;if(s.txType==="legacy")b=this.preimageLegacy(r,s.lastScript,a);else if(s.txType==="segwit"){let S=s.lastScript;s.last.type==="wpkh"&&(S=$n.encode({type:"pkh",hash:s.last.hash})),b=this.preimageWitnessV0(r,S,a,u.amount)}else throw new Error(`Transaction/sign: unknown tx type: ${s.txType}`);let w=ITe(b,t,this.opts.lowR);this.updateInput(r,{partialSig:[[h,dd(w,new Uint8Array([a]))]]},!0)}return!0}sign(t,r,n){let i=0;for(let o=0;o<this.inputs.length;o++)try{this.signIdx(t,o,r,n)&&i++}catch{}if(!i)throw new Error("No inputs signed");return i}finalizeIdx(t){if(this.checkInputIdx(t),this.fee<0n)throw new Error("Outputs spends more than inputs amount");let r=this.inputs[t],n=this.inputType(r);if(n.txType==="taproot"){if(r.tapKeySig)r.finalScriptWitness=[r.tapKeySig];else if(r.tapLeafScript&&r.tapScriptSig){let c=r.tapLeafScript.sort((u,h)=>Em.encode(u[0]).length-Em.encode(h[0]).length);for(let[u,h]of c){let f=h.slice(0,-1),m=h[h.length-1],b=$n.decode(f),w=p8(f,m),S=r.tapScriptSig.filter(N=>Rr(N[0].leafHash,w)),P=[];if(b.type==="tr_ms"){let N=b.m,O=b.pubkeys,C=0;for(let L of O){let V=S.findIndex(j=>Rr(j[0].pubKey,L));if(C===N||V===-1){P.push(sn);continue}P.push(S[V][1]),C++}if(C!==N)continue}else if(b.type==="tr_ns"){for(let N of b.pubkeys){let O=S.findIndex(C=>Rr(C[0].pubKey,N));O!==-1&&P.push(S[O][1])}if(P.length!==b.pubkeys.length)continue}else if(b.type==="unknown"&&this.opts.allowUnknownInputs){let N=zn.decode(f);if(P=S.map(([{pubKey:O},C])=>{let L=N.findIndex(V=>Jr(V)&&Rr(V,O));if(L===-1)throw new Error("finalize/taproot: cannot find position of pubkey in script");return{signature:C,pos:L}}).sort((O,C)=>O.pos-C.pos).map(O=>O.signature),!P.length)continue}else throw new Error("Finalize: Unknown tapLeafScript");r.finalScriptWitness=P.reverse().concat([f,Em.encode(u)]);break}if(!r.finalScriptWitness)throw new Error("finalize/taproot: empty witness")}else throw new Error("finalize/taproot: unknown input");r.finalScriptSig=sn,zX(r);return}if(!r.partialSig||!r.partialSig.length)throw new Error("Not enough partial sign");let i=sn,o=[];if(n.last.type==="ms"){let c=n.last.m,u=n.last.pubkeys,h=[];for(let f of u){let m=r.partialSig.find(b=>Rr(f,b[0]));m&&h.push(m[1])}if(h=h.slice(0,c),h.length!==c)throw new Error(`Multisig: wrong signatures count, m=${c} n=${u.length} signatures=${h.length}`);i=zn.encode([0,...h])}else if(n.last.type==="pk")i=zn.encode([r.partialSig[0][1]]);else if(n.last.type==="pkh")i=zn.encode([r.partialSig[0][1],r.partialSig[0][0]]);else if(n.last.type==="wpkh")i=sn,o=[r.partialSig[0][1],r.partialSig[0][0]];else if(n.last.type==="unknown"&&!this.opts.allowUnknownInputs)throw new Error("Unknown inputs not allowed");let s,a;if(n.type.includes("wsh-")&&(i.length&&n.lastScript.length&&(o=zn.decode(i).map(c=>{if(c===0)return sn;if(Jr(c))return c;throw new Error(`Wrong witness op=${c}`)})),o=o.concat(n.lastScript)),n.txType==="segwit"&&(a=o),n.type.startsWith("sh-wsh-")?s=zn.encode([zn.encode([0,_i(n.lastScript)])]):n.type.startsWith("sh-")?s=zn.encode([...zn.decode(i),n.lastScript]):n.type.startsWith("wsh-")||n.txType!=="segwit"&&(s=i),!s&&!a)throw new Error("Unknown error finalizing input");s&&(r.finalScriptSig=s),a&&(r.finalScriptWitness=a),zX(r)}finalize(){for(let t=0;t<this.inputs.length;t++)this.finalizeIdx(t)}extract(){if(!this.isFinal)throw new Error("Transaction has unfinalized inputs");if(!this.outputs.length)throw new Error("Transaction has no outputs");if(this.fee<0n)throw new Error("Outputs spends more than inputs amount");return this.toBytes(!0,!0)}combine(t){for(let i of["PSBTVersion","version","lockTime"])if(this.opts[i]!==t.opts[i])throw new Error(`Transaction/combine: different ${i} this=${this.opts[i]} other=${t.opts[i]}`);for(let i of["inputs","outputs"])if(this[i].length!==t[i].length)throw new Error(`Transaction/combine: different ${i} length this=${this[i].length} other=${t[i].length}`);let r=this.global.unsignedTx?Yc.encode(this.global.unsignedTx):sn,n=t.global.unsignedTx?Yc.encode(t.global.unsignedTx):sn;if(!Rr(r,n))throw new Error("Transaction/combine: different unsigned tx");this.global=E7(R7,this.global,t.global);for(let i=0;i<this.inputs.length;i++)this.updateInput(i,t.inputs[i],!0);for(let i=0;i<this.outputs.length;i++)this.updateOutput(i,t.outputs[i],!0);return this}clone(){return e.fromPSBT(this.toPSBT(2),this.opts)}};var oQ=re(hx()),H7=re(kP());var q7=e=>e.length===32?e:e.slice(1,33);function c5e(e){return Ro.Buffer.concat([(0,H7.encode)(e.byteLength),e])}function u5e(e){let{sha256:t}=oQ.crypto,n=t(Ro.Buffer.from("BIP0322-signed-message"));return t(Ro.Buffer.concat([n,n,Ro.Buffer.from(e)])).toString("hex")}var f5e=(e,t)=>{switch(e){case"bip122_p2tr":return RR.getPublicKey(t);case"bip122_p2sh":return Tu(t,!0);case"bip122_p2wpkh":return Tu(t,!0);default:throw new Error("Unsupported Address Type")}},l5e=(e,t)=>{let r=hd;switch(e){case"bip122_p2tr":return nQ(t,void 0,r);case"bip122_p2wpkh":return F7(t,r);case"bip122_p2sh":{let n=F7(t,r);return tQ(n,r)}default:throw new Error("Unsupported Address Type")}};function d5e(e,t,r,n){let i=g0.fromPSBT(r,{allowUnknownInputs:!0});try{t.forEach(o=>{let s=Uc("bip122:000000000019d6689c085ae165831e93",o.address),a=e[s];if(!a)throw new Error("missing private key for ("+s+")");let{publicKey:c,privateKey:u}=a;o.signingIndexes.forEach(h=>{let f=i.getInput(h),m=f.witnessUtxo?.script&&$n.decode(f.witnessUtxo.script);if(!o.isScriptSpend&&!f.tapInternalKey&&m?.type==="tr"&&i.updateInput(h,{tapInternalKey:q7(Ro.Buffer.from(c))}),o.sigHash)try{i.signIdx(u,h,[o.sigHash],ww(32))}catch{i.signIdx(u,h,void 0,ww(32))}else i.signIdx(u,h,void 0,ww(32));if(n)try{i.finalizeIdx(h)}catch{}})})}catch(o){throw console.error(o),new Error(`Error signing PSBT ${o.toString()}`)}return Promise.resolve(i.toPSBT(0))}var sQ=()=>({type:"keyPair",sign:async(e,t)=>{try{switch(t.signingType){case"message":{let r=t.chainType,n=Ro.Buffer.from(t.message).toString("utf8"),i=e[t.chainType]?.privateKey;if(!i)throw new Error("missing private key for ("+t.chainType+")");let o=Ro.Buffer.from(i).toString("hex"),s=f5e(r,o),a=l5e(r,s),c=Ro.Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),u=0,h=4294967295,f=0,m=zn.encode(["OP_0",Ro.Buffer.from(u5e(n),"hex")]),b=new g0({allowUnknownOutputs:!0,version:u});b.addOutput({amount:BigInt(0),script:a.script}),b.addInput({txid:c,index:h,sequence:f,finalScriptSig:m});let w=new g0({allowUnknownOutputs:!0,version:u});w.addInput({txid:b.id,index:0,sequence:f,tapInternalKey:r==="bip122_p2tr"?s:void 0,witnessUtxo:{script:a.script,amount:BigInt(0)},redeemScript:a.redeemScript}),w.addOutput({script:zn.encode(["RETURN"]),amount:BigInt(0)}),w.sign(Ro.Buffer.from(o,"hex"),void 0,ww(32)),w.finalize();let S=null,P=w.getInput(0);if(P.finalScriptWitness?.length){let N=(0,H7.encode)(P.finalScriptWitness?.length);S=Ro.Buffer.concat([N,...P.finalScriptWitness.map(O=>c5e(O))])}else throw new Error("couldnt produce a signature");return{status:"success",signature:S.toString("hex"),message:w.toBytes()}}case"transaction":{let r=await d5e(e,t.inputsToSign??[],Ro.Buffer.from(t.message??"","hex"),t.finalize??!1);return{status:"success",signature:Ro.Buffer.from(r).toString("hex")}}}}catch{return cr("internalError")}}});l();d();var j7=re(Ho()),aQ=re(bs());var cQ=()=>({type:"keyPair",sign:(e,t)=>{let r=t.data;if(r.chainType!=="solana")return Promise.resolve(cr("invalidAddressType"));let n;try{typeof r.message=="string"?r.signingType==="transaction"?n=j7.default.decode(r.message):n=Buffer.from(r.message,"utf8"):n=r.message}catch{return Promise.resolve(cr("invalidMessageEncoding"))}let i=j7.default.encode(aQ.default.sign.detached(n,e.privateKey));return Promise.resolve({status:"success",signature:i})}});l();d();var km=re(Bn()),uQ=re(Jn());var Zc=re($9()),fQ=re(B0());var lQ=()=>({type:"keyPair",sign:(e,t)=>{try{switch(t.signingType){case"typedData":{switch(t.version){case 1:{let r=km.Buffer.from(e.privateKey.slice()),n=Zc.SignTypedDataVersion.V1,{data:i}=t,o=(0,Zc.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:o})}case 3:{let r=km.Buffer.from(e.privateKey.slice()),n=Zc.SignTypedDataVersion.V3,i=t.data,o=(0,Zc.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:o})}case 4:{let r=km.Buffer.from(e.privateKey.slice()),n=Zc.SignTypedDataVersion.V4,i=t.data,o=(0,Zc.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:o})}}break}case"message":{let r=t.message,n=(0,Zc.personalSign)({privateKey:km.Buffer.from(e.privateKey),data:r});return Promise.resolve({status:"success",signature:n})}case"transaction":{let r=km.Buffer.from(t.message.replace("0x",""),"hex"),n=new Ns(e.privateKey),i=`0x${(0,fQ.keccak256)(r)}`,o=(0,uQ.joinSignature)(n.signDigest(i));return Promise.resolve({status:"success",signature:o})}}}catch(r){return console.error(r),Promise.resolve(cr("invalidMessageEncoding"))}}});l();d();var v0=re(Bn());l();d();l();d();l();d();l();d();function dQ(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function h5e(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function W7(e,...t){if(!h5e(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function hQ(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");dQ(e.outputLen),dQ(e.blockLen)}function Tm(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function pQ(e,t){W7(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}l();d();l();d();var I8=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function yQ(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}var k8=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Qa=(e,t)=>e<<32-t|e>>>t,p5e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!p5e)throw new Error("Non little-endian hardware is not supported");function y5e(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function _w(e){if(typeof e=="string"&&(e=y5e(e)),!yQ(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function mQ(...e){let t=0;for(let n=0;n<e.length;n++){let i=e[n];if(!yQ(i))throw new Error("Uint8Array expected");t+=i.length}let r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var Pm=class{clone(){return this._cloneInto()}},rwt={}.toString;function gQ(e){let t=n=>e().update(_w(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function bQ(e=32){if(I8&&typeof I8.getRandomValues=="function")return I8.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}var T8=class extends Pm{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,hQ(t);let n=_w(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return Tm(this),this.iHash.update(t),this}digestInto(t){Tm(this),W7(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},z7=(e,t,r)=>new T8(e,t).update(r).digest();z7.create=(e,t)=>new T8(e,t);l();d();l();d();var Z7={};j6(Z7,{bitGet:()=>v5e,bitLen:()=>S5e,bitMask:()=>Cw,bitSet:()=>A5e,bytesToHex:()=>b0,bytesToNumberBE:()=>of,bytesToNumberLE:()=>B8,concatBytes:()=>Bm,createHmacDrbg:()=>Y7,ensureBytes:()=>hs,equalBytes:()=>x5e,hexToBytes:()=>x0,hexToNumber:()=>$7,isBytes:()=>ec,numberToBytesBE:()=>pd,numberToBytesLE:()=>_8,numberToHexUnpadded:()=>vQ,numberToVarBytesBE:()=>b5e,utf8ToBytes:()=>w5e,validateObject:()=>yd});l();d();var SQ=BigInt(0),P8=BigInt(1),m5e=BigInt(2);function ec(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}var g5e=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function b0(e){if(!ec(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=g5e[e[r]];return t}function vQ(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function $7(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}var nf={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function xQ(e){if(e>=nf._0&&e<=nf._9)return e-nf._0;if(e>=nf._A&&e<=nf._F)return e-(nf._A-10);if(e>=nf._a&&e<=nf._f)return e-(nf._a-10)}function x0(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let s=xQ(e.charCodeAt(o)),a=xQ(e.charCodeAt(o+1));if(s===void 0||a===void 0){let c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}n[i]=s*16+a}return n}function of(e){return $7(b0(e))}function B8(e){if(!ec(e))throw new Error("Uint8Array expected");return $7(b0(Uint8Array.from(e).reverse()))}function pd(e,t){return x0(e.toString(16).padStart(t*2,"0"))}function _8(e,t){return pd(e,t).reverse()}function b5e(e){return x0(vQ(e))}function hs(e,t,r){let n;if(typeof t=="string")try{n=x0(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else if(ec(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function Bm(...e){let t=0;for(let i=0;i<e.length;i++){let o=e[i];if(!ec(o))throw new Error("Uint8Array expected");t+=o.length}let r=new Uint8Array(t),n=0;for(let i=0;i<e.length;i++){let o=e[i];r.set(o,n),n+=o.length}return r}function x5e(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}function w5e(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function S5e(e){let t;for(t=0;e>SQ;e>>=P8,t+=1);return t}function v5e(e,t){return e>>BigInt(t)&P8}var A5e=(e,t,r)=>e|(r?P8:SQ)<<BigInt(t),Cw=e=>(m5e<<BigInt(e-1))-P8,G7=e=>new Uint8Array(e),wQ=e=>Uint8Array.from(e);function Y7(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=G7(e),i=G7(e),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...f)=>r(i,n,...f),c=(f=G7())=>{i=a(wQ([0]),f),n=a(),f.length!==0&&(i=a(wQ([1]),f),n=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let f=0,m=[];for(;f<t;){n=a();let b=n.slice();m.push(b),f+=n.length}return Bm(...m)};return(f,m)=>{s(),c(f);let b;for(;!(b=m(u()));)c();return s(),b}}var E5e={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||ec(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function yd(e,t,r={}){let n=(i,o,s)=>{let a=E5e[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);let c=e[i];if(!(s&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${o}`)};for(let[i,o]of Object.entries(t))n(i,o,!1);for(let[i,o]of Object.entries(r))n(i,o,!0);return e}var Yn=BigInt(0),ln=BigInt(1),w0=BigInt(2),I5e=BigInt(3),J7=BigInt(4),AQ=BigInt(5),EQ=BigInt(8),k5e=BigInt(9),T5e=BigInt(16);function Yi(e,t){let r=e%t;return r>=Yn?r:t+r}function P5e(e,t,r){if(r<=Yn||t<Yn)throw new Error("Expected power/modulo > 0");if(r===ln)return Yn;let n=ln;for(;t>Yn;)t&ln&&(n=n*e%r),e=e*e%r,t>>=ln;return n}function ps(e,t,r){let n=e;for(;t-- >Yn;)n*=n,n%=r;return n}function C8(e,t){if(e===Yn||t<=Yn)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Yi(e,t),n=t,i=Yn,o=ln,s=ln,a=Yn;for(;r!==Yn;){let u=n/r,h=n%r,f=i-s*u,m=o-a*u;n=r,r=h,i=s,o=a,s=f,a=m}if(n!==ln)throw new Error("invert: does not exist");return Yi(i,t)}function B5e(e){let t=(e-ln)/w0,r,n,i;for(r=e-ln,n=0;r%w0===Yn;r/=w0,n++);for(i=w0;i<e&&P5e(i,t,e)!==e-ln;i++);if(n===1){let s=(e+ln)/J7;return function(c,u){let h=c.pow(u,s);if(!c.eql(c.sqr(h),u))throw new Error("Cannot find square root");return h}}let o=(r+ln)/w0;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,h=a.pow(a.mul(a.ONE,i),r),f=a.pow(c,o),m=a.pow(c,r);for(;!a.eql(m,a.ONE);){if(a.eql(m,a.ZERO))return a.ZERO;let b=1;for(let S=a.sqr(m);b<u&&!a.eql(S,a.ONE);b++)S=a.sqr(S);let w=a.pow(h,ln<<BigInt(u-b-1));h=a.sqr(w),f=a.mul(f,w),m=a.mul(m,h),u=b}return f}}function _5e(e){if(e%J7===I5e){let t=(e+ln)/J7;return function(n,i){let o=n.pow(i,t);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(e%EQ===AQ){let t=(e-AQ)/EQ;return function(n,i){let o=n.mul(i,w0),s=n.pow(o,t),a=n.mul(i,s),c=n.mul(n.mul(a,w0),s),u=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return e%T5e,B5e(e)}var C5e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function X7(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=C5e.reduce((n,i)=>(n[i]="function",n),t);return yd(e,r)}function N5e(e,t,r){if(r<Yn)throw new Error("Expected power > 0");if(r===Yn)return e.ONE;if(r===ln)return t;let n=e.ONE,i=t;for(;r>Yn;)r&ln&&(n=e.mul(n,i)),i=e.sqr(i),r>>=ln;return n}function M5e(e,t){let r=new Array(t.length),n=t.reduce((o,s,a)=>e.is0(s)?o:(r[a]=o,e.mul(o,s)),e.ONE),i=e.inv(n);return t.reduceRight((o,s,a)=>e.is0(s)?o:(r[a]=e.mul(o,r[a]),e.mul(o,s)),i),r}function Q7(e,t){let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function N8(e,t,r=!1,n={}){if(e<=Yn)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:i,nByteLength:o}=Q7(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=_5e(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:Cw(i),ZERO:Yn,ONE:ln,create:c=>Yi(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Yn<=c&&c<e},is0:c=>c===Yn,isOdd:c=>(c&ln)===ln,neg:c=>Yi(-c,e),eql:(c,u)=>c===u,sqr:c=>Yi(c*c,e),add:(c,u)=>Yi(c+u,e),sub:(c,u)=>Yi(c-u,e),mul:(c,u)=>Yi(c*u,e),pow:(c,u)=>N5e(a,c,u),div:(c,u)=>Yi(c*C8(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>C8(c,e),sqrt:n.sqrt||(c=>s(a,c)),invertBatch:c=>M5e(a,c),cmov:(c,u,h)=>h?u:c,toBytes:c=>r?_8(c,o):pd(c,o),fromBytes:c=>{if(c.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${c.length}`);return r?B8(c):of(c)}});return Object.freeze(a)}function IQ(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function eC(e){let t=IQ(e);return t+Math.ceil(t/2)}function M8(e,t,r=!1){let n=e.length,i=IQ(t),o=eC(t);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);let s=r?of(e):B8(e),a=Yi(s,t-ln)+ln;return r?_8(a,i):pd(a,i)}l();d();var D5e=BigInt(0),tC=BigInt(1);function TQ(e,t){let r=(i,o)=>{let s=o.negate();return i?s:o},n=i=>{let o=Math.ceil(t/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:r,unsafeLadder(i,o){let s=e.ZERO,a=i;for(;o>D5e;)o&tC&&(s=s.add(a)),a=a.double(),o>>=tC;return s},precomputeWindow(i,o){let{windows:s,windowSize:a}=n(o),c=[],u=i,h=u;for(let f=0;f<s;f++){h=u,c.push(h);for(let m=1;m<a;m++)h=h.add(u),c.push(h);u=h.double()}return c},wNAF(i,o,s){let{windows:a,windowSize:c}=n(i),u=e.ZERO,h=e.BASE,f=BigInt(2**i-1),m=2**i,b=BigInt(i);for(let w=0;w<a;w++){let S=w*c,P=Number(s&f);s>>=b,P>c&&(P-=m,s+=tC);let N=S,O=S+Math.abs(P)-1,C=w%2!==0,L=P<0;P===0?h=h.add(r(C,o[N])):u=u.add(r(L,o[O]))}return{p:u,f:h}},wNAFCached(i,o,s,a){let c=i._WINDOW_SIZE||1,u=o.get(i);return u||(u=this.precomputeWindow(i,c),c!==1&&o.set(i,a(u))),this.wNAF(c,u,s)}}}function rC(e){return X7(e.Fp),yd(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Q7(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function O5e(e){let t=rC(e);yd(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}var{bytesToNumberBE:U5e,hexToBytes:R5e}=Z7,S0={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=S0;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:U5e(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=S0,r=typeof e=="string"?R5e(e):e;if(!ec(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:i,l:o}=S0._parseInt(r.subarray(2)),{d:s,l:a}=S0._parseInt(o);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(e){let t=u=>Number.parseInt(u[0],16)&8?"00"+u:u,r=u=>{let h=u.toString(16);return h.length&1?`0${h}`:h},n=t(r(e.s)),i=t(r(e.r)),o=n.length/2,s=i.length/2,a=r(o),c=r(s);return`30${r(s+o+4)}02${c}${i}02${a}${n}`}},sf=BigInt(0),Xs=BigInt(1),Ewt=BigInt(2),PQ=BigInt(3),Iwt=BigInt(4);function L5e(e){let t=O5e(e),{Fp:r}=t,n=t.toBytes||((w,S,P)=>{let N=S.toAffine();return Bm(Uint8Array.from([4]),r.toBytes(N.x),r.toBytes(N.y))}),i=t.fromBytes||(w=>{let S=w.subarray(1),P=r.fromBytes(S.subarray(0,r.BYTES)),N=r.fromBytes(S.subarray(r.BYTES,2*r.BYTES));return{x:P,y:N}});function o(w){let{a:S,b:P}=t,N=r.sqr(w),O=r.mul(N,w);return r.add(r.add(O,r.mul(w,S)),P)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(w){return typeof w=="bigint"&&sf<w&&w<t.n}function a(w){if(!s(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(w){let{allowedPrivateKeyLengths:S,nByteLength:P,wrapPrivateKey:N,n:O}=t;if(S&&typeof w!="bigint"){if(ec(w)&&(w=b0(w)),typeof w!="string"||!S.includes(w.length))throw new Error("Invalid key");w=w.padStart(P*2,"0")}let C;try{C=typeof w=="bigint"?w:of(hs("private key",w,P))}catch{throw new Error(`private key must be ${P} bytes, hex or bigint, not ${typeof w}`)}return N&&(C=Yi(C,O)),a(C),C}let u=new Map;function h(w){if(!(w instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(S,P,N){if(this.px=S,this.py=P,this.pz=N,S==null||!r.isValid(S))throw new Error("x required");if(P==null||!r.isValid(P))throw new Error("y required");if(N==null||!r.isValid(N))throw new Error("z required")}static fromAffine(S){let{x:P,y:N}=S||{};if(!S||!r.isValid(P)||!r.isValid(N))throw new Error("invalid affine point");if(S instanceof f)throw new Error("projective point not allowed");let O=C=>r.eql(C,r.ZERO);return O(P)&&O(N)?f.ZERO:new f(P,N,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){let P=r.invertBatch(S.map(N=>N.pz));return S.map((N,O)=>N.toAffine(P[O])).map(f.fromAffine)}static fromHex(S){let P=f.fromAffine(i(hs("pointHex",S)));return P.assertValidity(),P}static fromPrivateKey(S){return f.BASE.multiply(c(S))}_setWindowSize(S){this._WINDOW_SIZE=S,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:S,y:P}=this.toAffine();if(!r.isValid(S)||!r.isValid(P))throw new Error("bad point: x or y not FE");let N=r.sqr(P),O=o(S);if(!r.eql(N,O))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:S}=this.toAffine();if(r.isOdd)return!r.isOdd(S);throw new Error("Field doesn't support isOdd")}equals(S){h(S);let{px:P,py:N,pz:O}=this,{px:C,py:L,pz:V}=S,j=r.eql(r.mul(P,V),r.mul(C,O)),$=r.eql(r.mul(N,V),r.mul(L,O));return j&&$}negate(){return new f(this.px,r.neg(this.py),this.pz)}double(){let{a:S,b:P}=t,N=r.mul(P,PQ),{px:O,py:C,pz:L}=this,V=r.ZERO,j=r.ZERO,$=r.ZERO,H=r.mul(O,O),Y=r.mul(C,C),B=r.mul(L,L),p=r.mul(O,C);return p=r.add(p,p),$=r.mul(O,L),$=r.add($,$),V=r.mul(S,$),j=r.mul(N,B),j=r.add(V,j),V=r.sub(Y,j),j=r.add(Y,j),j=r.mul(V,j),V=r.mul(p,V),$=r.mul(N,$),B=r.mul(S,B),p=r.sub(H,B),p=r.mul(S,p),p=r.add(p,$),$=r.add(H,H),H=r.add($,H),H=r.add(H,B),H=r.mul(H,p),j=r.add(j,H),B=r.mul(C,L),B=r.add(B,B),H=r.mul(B,p),V=r.sub(V,H),$=r.mul(B,Y),$=r.add($,$),$=r.add($,$),new f(V,j,$)}add(S){h(S);let{px:P,py:N,pz:O}=this,{px:C,py:L,pz:V}=S,j=r.ZERO,$=r.ZERO,H=r.ZERO,Y=t.a,B=r.mul(t.b,PQ),p=r.mul(P,C),g=r.mul(N,L),x=r.mul(O,V),A=r.add(P,N),v=r.add(C,L);A=r.mul(A,v),v=r.add(p,g),A=r.sub(A,v),v=r.add(P,O);let _=r.add(C,V);return v=r.mul(v,_),_=r.add(p,x),v=r.sub(v,_),_=r.add(N,O),j=r.add(L,V),_=r.mul(_,j),j=r.add(g,x),_=r.sub(_,j),H=r.mul(Y,v),j=r.mul(B,x),H=r.add(j,H),j=r.sub(g,H),H=r.add(g,H),$=r.mul(j,H),g=r.add(p,p),g=r.add(g,p),x=r.mul(Y,x),v=r.mul(B,v),g=r.add(g,x),x=r.sub(p,x),x=r.mul(Y,x),v=r.add(v,x),p=r.mul(g,v),$=r.add($,p),p=r.mul(_,v),j=r.mul(A,j),j=r.sub(j,p),p=r.mul(A,g),H=r.mul(_,H),H=r.add(H,p),new f(j,$,H)}subtract(S){return this.add(S.negate())}is0(){return this.equals(f.ZERO)}wNAF(S){return b.wNAFCached(this,u,S,P=>{let N=r.invertBatch(P.map(O=>O.pz));return P.map((O,C)=>O.toAffine(N[C])).map(f.fromAffine)})}multiplyUnsafe(S){let P=f.ZERO;if(S===sf)return P;if(a(S),S===Xs)return this;let{endo:N}=t;if(!N)return b.unsafeLadder(this,S);let{k1neg:O,k1:C,k2neg:L,k2:V}=N.splitScalar(S),j=P,$=P,H=this;for(;C>sf||V>sf;)C&Xs&&(j=j.add(H)),V&Xs&&($=$.add(H)),H=H.double(),C>>=Xs,V>>=Xs;return O&&(j=j.negate()),L&&($=$.negate()),$=new f(r.mul($.px,N.beta),$.py,$.pz),j.add($)}multiply(S){a(S);let P=S,N,O,{endo:C}=t;if(C){let{k1neg:L,k1:V,k2neg:j,k2:$}=C.splitScalar(P),{p:H,f:Y}=this.wNAF(V),{p:B,f:p}=this.wNAF($);H=b.constTimeNegate(L,H),B=b.constTimeNegate(j,B),B=new f(r.mul(B.px,C.beta),B.py,B.pz),N=H.add(B),O=Y.add(p)}else{let{p:L,f:V}=this.wNAF(P);N=L,O=V}return f.normalizeZ([N,O])[0]}multiplyAndAddUnsafe(S,P,N){let O=f.BASE,C=(V,j)=>j===sf||j===Xs||!V.equals(O)?V.multiplyUnsafe(j):V.multiply(j),L=C(this,P).add(C(S,N));return L.is0()?void 0:L}toAffine(S){let{px:P,py:N,pz:O}=this,C=this.is0();S==null&&(S=C?r.ONE:r.inv(O));let L=r.mul(P,S),V=r.mul(N,S),j=r.mul(O,S);if(C)return{x:r.ZERO,y:r.ZERO};if(!r.eql(j,r.ONE))throw new Error("invZ was invalid");return{x:L,y:V}}isTorsionFree(){let{h:S,isTorsionFree:P}=t;if(S===Xs)return!0;if(P)return P(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:S,clearCofactor:P}=t;return S===Xs?this:P?P(f,this):this.multiplyUnsafe(t.h)}toRawBytes(S=!0){return this.assertValidity(),n(f,this,S)}toHex(S=!0){return b0(this.toRawBytes(S))}}f.BASE=new f(t.Gx,t.Gy,r.ONE),f.ZERO=new f(r.ZERO,r.ONE,r.ZERO);let m=t.nBitLength,b=TQ(f,t.endo?Math.ceil(m/2):m);return{CURVE:t,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}function V5e(e){let t=rC(e);return yd(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function BQ(e){let t=V5e(e),{Fp:r,n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function s(v){return sf<v&&v<r.ORDER}function a(v){return Yi(v,n)}function c(v){return C8(v,n)}let{ProjectivePoint:u,normPrivateKeyToScalar:h,weierstrassEquation:f,isWithinCurveOrder:m}=L5e({...t,toBytes(v,_,D){let T=_.toAffine(),y=r.toBytes(T.x),I=Bm;return D?I(Uint8Array.from([_.hasEvenY()?2:3]),y):I(Uint8Array.from([4]),y,r.toBytes(T.y))},fromBytes(v){let _=v.length,D=v[0],T=v.subarray(1);if(_===i&&(D===2||D===3)){let y=of(T);if(!s(y))throw new Error("Point is not on curve");let I=f(y),q=r.sqrt(I),K=(q&Xs)===Xs;return(D&1)===1!==K&&(q=r.neg(q)),{x:y,y:q}}else if(_===o&&D===4){let y=r.fromBytes(T.subarray(0,r.BYTES)),I=r.fromBytes(T.subarray(r.BYTES,2*r.BYTES));return{x:y,y:I}}else throw new Error(`Point of length ${_} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),b=v=>b0(pd(v,t.nByteLength));function w(v){let _=n>>Xs;return v>_}function S(v){return w(v)?a(-v):v}let P=(v,_,D)=>of(v.slice(_,D));class N{constructor(_,D,T){this.r=_,this.s=D,this.recovery=T,this.assertValidity()}static fromCompact(_){let D=t.nByteLength;return _=hs("compactSignature",_,D*2),new N(P(_,0,D),P(_,D,2*D))}static fromDER(_){let{r:D,s:T}=S0.toSig(hs("DER",_));return new N(D,T)}assertValidity(){if(!m(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!m(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(_){return new N(this.r,this.s,_)}recoverPublicKey(_){let{r:D,s:T,recovery:y}=this,I=$(hs("msgHash",_));if(y==null||![0,1,2,3].includes(y))throw new Error("recovery id invalid");let q=y===2||y===3?D+t.n:D;if(q>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let K=y&1?"03":"02",F=u.fromHex(K+b(q)),J=c(q),ae=a(-I*J),ce=a(T*J),ye=u.BASE.multiplyAndAddUnsafe(F,ae,ce);if(!ye)throw new Error("point at infinify");return ye.assertValidity(),ye}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new N(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return x0(this.toDERHex())}toDERHex(){return S0.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return x0(this.toCompactHex())}toCompactHex(){return b(this.r)+b(this.s)}}let O={isValidPrivateKey(v){try{return h(v),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{let v=eC(t.n);return M8(t.randomBytes(v),t.n)},precompute(v=8,_=u.BASE){return _._setWindowSize(v),_.multiply(BigInt(3)),_}};function C(v,_=!0){return u.fromPrivateKey(v).toRawBytes(_)}function L(v){let _=ec(v),D=typeof v=="string",T=(_||D)&&v.length;return _?T===i||T===o:D?T===2*i||T===2*o:v instanceof u}function V(v,_,D=!0){if(L(v))throw new Error("first arg must be private key");if(!L(_))throw new Error("second arg must be public key");return u.fromHex(_).multiply(h(v)).toRawBytes(D)}let j=t.bits2int||function(v){let _=of(v),D=v.length*8-t.nBitLength;return D>0?_>>BigInt(D):_},$=t.bits2int_modN||function(v){return a(j(v))},H=Cw(t.nBitLength);function Y(v){if(typeof v!="bigint")throw new Error("bigint expected");if(!(sf<=v&&v<H))throw new Error(`bigint expected < 2^${t.nBitLength}`);return pd(v,t.nByteLength)}function B(v,_,D=p){if(["recovered","canonical"].some(U=>U in D))throw new Error("sign() legacy options not supported");let{hash:T,randomBytes:y}=t,{lowS:I,prehash:q,extraEntropy:K}=D;I==null&&(I=!0),v=hs("msgHash",v),q&&(v=hs("prehashed msgHash",T(v)));let F=$(v),J=h(_),ae=[Y(J),Y(F)];if(K!=null){let U=K===!0?y(r.BYTES):K;ae.push(hs("extraEntropy",U))}let ce=Bm(...ae),ye=F;function he(U){let G=j(U);if(!m(G))return;let Z=c(G),ee=u.BASE.multiply(G).toAffine(),fe=a(ee.x);if(fe===sf)return;let Q=a(Z*a(ye+fe*J));if(Q===sf)return;let se=(ee.x===fe?0:2)|Number(ee.y&Xs),gt=Q;return I&&w(Q)&&(gt=S(Q),se^=1),new N(fe,gt,se)}return{seed:ce,k2sig:he}}let p={lowS:t.lowS,prehash:!1},g={lowS:t.lowS,prehash:!1};function x(v,_,D=p){let{seed:T,k2sig:y}=B(v,_,D),I=t;return Y7(I.hash.outputLen,I.nByteLength,I.hmac)(T,y)}u.BASE._setWindowSize(8);function A(v,_,D,T=g){let y=v;if(_=hs("msgHash",_),D=hs("publicKey",D),"strict"in T)throw new Error("options.strict was renamed to lowS");let{lowS:I,prehash:q}=T,K,F;try{if(typeof y=="string"||ec(y))try{K=N.fromDER(y)}catch(ee){if(!(ee instanceof S0.Err))throw ee;K=N.fromCompact(y)}else if(typeof y=="object"&&typeof y.r=="bigint"&&typeof y.s=="bigint"){let{r:ee,s:fe}=y;K=new N(ee,fe)}else throw new Error("PARSE");F=u.fromHex(D)}catch(ee){if(ee.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(I&&K.hasHighS())return!1;q&&(_=t.hash(_));let{r:J,s:ae}=K,ce=$(_),ye=c(ae),he=a(ce*ye),U=a(J*ye),G=u.BASE.multiplyAndAddUnsafe(F,he,U)?.toAffine();return G?a(G.x)===J:!1}return{CURVE:t,getPublicKey:C,getSharedSecret:V,sign:x,verify:A,ProjectivePoint:u,Signature:N,utils:O}}function K5e(e){return{hash:e,hmac:(t,...r)=>z7(e,t,mQ(...r)),randomBytes:bQ}}function D8(e,t){let r=n=>BQ({...e,...K5e(n)});return Object.freeze({...r(t),create:r})}l();d();l();d();function F5e(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var O8=class extends Pm{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=k8(this.buffer)}update(t){Tm(this);let{view:r,buffer:n,blockLen:i}=this;t=_w(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=k8(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Tm(this),pQ(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let f=s;f<i;f++)r[f]=0;F5e(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=k8(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,h[f],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};var H5e=(e,t,r)=>e&t^~e&r,q5e=(e,t,r)=>e&t^e&r^t&r,j5e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),md=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),gd=new Uint32Array(64),nC=class extends O8{constructor(){super(64,32,8,!1),this.A=md[0]|0,this.B=md[1]|0,this.C=md[2]|0,this.D=md[3]|0,this.E=md[4]|0,this.F=md[5]|0,this.G=md[6]|0,this.H=md[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let f=0;f<16;f++,r+=4)gd[f]=t.getUint32(r,!1);for(let f=16;f<64;f++){let m=gd[f-15],b=gd[f-2],w=Qa(m,7)^Qa(m,18)^m>>>3,S=Qa(b,17)^Qa(b,19)^b>>>10;gd[f]=S+gd[f-7]+w+gd[f-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:h}=this;for(let f=0;f<64;f++){let m=Qa(a,6)^Qa(a,11)^Qa(a,25),b=h+m+H5e(a,c,u)+j5e[f]+gd[f]|0,S=(Qa(n,2)^Qa(n,13)^Qa(n,22))+q5e(n,i,o)|0;h=u,u=c,c=a,a=s+b|0,s=o,o=i,i=n,n=b+S|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,o,s,a,c,u,h)}roundClean(){gd.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var U8=gQ(()=>new nC);var _Q=N8(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),W5e=_Q.create(BigInt("-3")),z5e=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Nw=D8({a:W5e,b:z5e,Fp:_Q,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},U8);var CQ=()=>({type:"keyPair",sign:(e,t)=>{if(!t.isJWT)return Promise.resolve(cr("invalidAddressType"));if(t.data.payload.iss!==UM)return Promise.resolve(cr("invalidClaim"));if(t.data.payload.aud!==RM)return Promise.resolve(cr("invalidClaim"));let r={...t.data.header,kid:xa(v0.Buffer.from(e.publicKey))},n={...t.data.payload,sub:xa(v0.Buffer.from(e.publicKey))},i=xa(v0.Buffer.from(JSON.stringify(r)))+"."+xa(v0.Buffer.from(JSON.stringify(n))),s=Nw.sign(v0.Buffer.from(i).toString("hex"),e.privateKey,{prehash:!0}).toCompactRawBytes(),a=xa(v0.Buffer.from(s)),c={header:r,payload:n,signature:a};return Promise.resolve({status:"success",signature:a,signedJWT:c})}});l();d();var NQ=re(Bn());var iC=re(Ho()),MQ=re(bs());var DQ=()=>({type:"keyPair",sign:(e,t)=>{if(t.chainType!=="solana")return Promise.resolve(cr("invalidAddressType"));let r;try{typeof t.message=="string"?t.signingType==="transaction"?r=iC.default.decode(t.message):r=NQ.Buffer.from(t.message,"utf8"):r=t.message}catch{return Promise.resolve(cr("invalidMessageEncoding"))}let n=iC.default.encode(MQ.default.sign.detached(r,e.privateKey));return Promise.resolve({status:"success",signature:n})}});l();d();l();d();l();d();var I0=re(bs(),1);l();d();l();d();l();d();l();d();function _m(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function G5e(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Cm(e,...t){if(!G5e(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function OQ(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");_m(e.outputLen),_m(e.blockLen)}function af(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function R8(e,t){Cm(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}l();d();var Nm=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),L8=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);var xd=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,RQ=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,tc=xd?e=>e:e=>RQ(e);function A0(e){for(let t=0;t<e.length;t++)e[t]=RQ(e[t])}var $5e=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function V8(e){Cm(e);let t="";for(let r=0;r<e.length;r++)t+=$5e[e[r]];return t}var cf={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function UQ(e){if(e>=cf._0&&e<=cf._9)return e-cf._0;if(e>=cf._A&&e<=cf._F)return e-(cf._A-10);if(e>=cf._a&&e<=cf._f)return e-(cf._a-10)}function LQ(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let s=UQ(e.charCodeAt(o)),a=UQ(e.charCodeAt(o+1));if(s===void 0||a===void 0){let c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}n[i]=s*16+a}return n}function Y5e(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Qs(e){return typeof e=="string"&&(e=Y5e(e)),Cm(e),e}var bd=class{clone(){return this._cloneInto()}},p1t={}.toString;function VQ(e){let t=n=>e().update(Qs(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function KQ(e){let t=(n,i)=>e(i).update(Qs(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}var FQ=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]),K8=class extends bd{constructor(t,r,n={},i,o,s){if(super(),this.blockLen=t,this.outputLen=r,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,_m(t),_m(r),_m(i),r<0||r>i)throw new Error("outputLen bigger than keyLen");if(n.key!==void 0&&(n.key.length<1||n.key.length>i))throw new Error(`key must be up 1..${i} byte long or undefined`);if(n.salt!==void 0&&n.salt.length!==o)throw new Error(`salt must be ${o} byte long or undefined`);if(n.personalization!==void 0&&n.personalization.length!==s)throw new Error(`personalization must be ${s} byte long or undefined`);this.buffer32=Nm(this.buffer=new Uint8Array(t))}update(t){af(this);let{blockLen:r,buffer:n,buffer32:i}=this;t=Qs(t);let o=t.length,s=t.byteOffset,a=t.buffer;for(let c=0;c<o;){this.pos===r&&(xd||A0(i),this.compress(i,0,!1),xd||A0(i),this.pos=0);let u=Math.min(r-this.pos,o-c),h=s+c;if(u===r&&!(h%4)&&c+u<o){let f=new Uint32Array(a,h,Math.floor((o-c)/4));xd||A0(f);for(let m=0;c+r<o;m+=i.length,c+=r)this.length+=r,this.compress(f,m,!1);xd||A0(f);continue}n.set(t.subarray(c,c+u),this.pos),this.pos+=u,this.length+=u,c+=u}return this}digestInto(t){af(this),R8(t,this);let{pos:r,buffer32:n}=this;this.finished=!0,this.buffer.subarray(r).fill(0),xd||A0(n),this.compress(n,0,!0),xd||A0(n);let i=Nm(t);this.get().forEach((o,s)=>i[s]=tc(o))}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){let{buffer:r,length:n,finished:i,destroyed:o,outputLen:s,pos:a}=this;return t||(t=new this.constructor({dkLen:s})),t.set(...this.get()),t.length=n,t.finished=i,t.destroyed=o,t.outputLen=s,t.buffer.set(r),t.pos=a,t}};l();d();var F8=BigInt(4294967295),oC=BigInt(32);function HQ(e,t=!1){return t?{h:Number(e&F8),l:Number(e>>oC&F8)}:{h:Number(e>>oC&F8)|0,l:Number(e&F8)|0}}function Z5e(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:o,l:s}=HQ(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}var J5e=(e,t)=>BigInt(e>>>0)<<oC|BigInt(t>>>0),X5e=(e,t,r)=>e>>>r,Q5e=(e,t,r)=>e<<32-r|t>>>r,ePe=(e,t,r)=>e>>>r|t<<32-r,tPe=(e,t,r)=>e<<32-r|t>>>r,rPe=(e,t,r)=>e<<64-r|t>>>r-32,nPe=(e,t,r)=>e>>>r-32|t<<64-r,iPe=(e,t)=>t,oPe=(e,t)=>e,sPe=(e,t,r)=>e<<r|t>>>32-r,aPe=(e,t,r)=>t<<r|e>>>32-r,cPe=(e,t,r)=>t<<r-32|e>>>64-r,uPe=(e,t,r)=>e<<r-32|t>>>64-r;function fPe(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}var lPe=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),dPe=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,hPe=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),pPe=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,yPe=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),mPe=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0;var gPe={fromBig:HQ,split:Z5e,toBig:J5e,shrSH:X5e,shrSL:Q5e,rotrSH:ePe,rotrSL:tPe,rotrBH:rPe,rotrBL:nPe,rotr32H:iPe,rotr32L:oPe,rotlSH:sPe,rotlSL:aPe,rotlBH:cPe,rotlBL:uPe,add:fPe,add3L:lPe,add3H:dPe,add4L:hPe,add4H:pPe,add5H:mPe,add5L:yPe},ke=gPe;var Zn=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),be=new Uint32Array(32);function wd(e,t,r,n,i,o){let s=i[o],a=i[o+1],c=be[2*e],u=be[2*e+1],h=be[2*t],f=be[2*t+1],m=be[2*r],b=be[2*r+1],w=be[2*n],S=be[2*n+1],P=ke.add3L(c,h,s);u=ke.add3H(P,u,f,a),c=P|0,{Dh:S,Dl:w}={Dh:S^u,Dl:w^c},{Dh:S,Dl:w}={Dh:ke.rotr32H(S,w),Dl:ke.rotr32L(S,w)},{h:b,l:m}=ke.add(b,m,S,w),{Bh:f,Bl:h}={Bh:f^b,Bl:h^m},{Bh:f,Bl:h}={Bh:ke.rotrSH(f,h,24),Bl:ke.rotrSL(f,h,24)},be[2*e]=c,be[2*e+1]=u,be[2*t]=h,be[2*t+1]=f,be[2*r]=m,be[2*r+1]=b,be[2*n]=w,be[2*n+1]=S}function Sd(e,t,r,n,i,o){let s=i[o],a=i[o+1],c=be[2*e],u=be[2*e+1],h=be[2*t],f=be[2*t+1],m=be[2*r],b=be[2*r+1],w=be[2*n],S=be[2*n+1],P=ke.add3L(c,h,s);u=ke.add3H(P,u,f,a),c=P|0,{Dh:S,Dl:w}={Dh:S^u,Dl:w^c},{Dh:S,Dl:w}={Dh:ke.rotrSH(S,w,16),Dl:ke.rotrSL(S,w,16)},{h:b,l:m}=ke.add(b,m,S,w),{Bh:f,Bl:h}={Bh:f^b,Bl:h^m},{Bh:f,Bl:h}={Bh:ke.rotrBH(f,h,63),Bl:ke.rotrBL(f,h,63)},be[2*e]=c,be[2*e+1]=u,be[2*t]=h,be[2*t+1]=f,be[2*r]=m,be[2*r+1]=b,be[2*n]=w,be[2*n+1]=S}var sC=class extends K8{constructor(t={}){super(128,t.dkLen===void 0?64:t.dkLen,t,64,16,16),this.v0l=Zn[0]|0,this.v0h=Zn[1]|0,this.v1l=Zn[2]|0,this.v1h=Zn[3]|0,this.v2l=Zn[4]|0,this.v2h=Zn[5]|0,this.v3l=Zn[6]|0,this.v3h=Zn[7]|0,this.v4l=Zn[8]|0,this.v4h=Zn[9]|0,this.v5l=Zn[10]|0,this.v5h=Zn[11]|0,this.v6l=Zn[12]|0,this.v6h=Zn[13]|0,this.v7l=Zn[14]|0,this.v7h=Zn[15]|0;let r=t.key?t.key.length:0;if(this.v0l^=this.outputLen|r<<8|65536|1<<24,t.salt){let n=Nm(Qs(t.salt));this.v4l^=tc(n[0]),this.v4h^=tc(n[1]),this.v5l^=tc(n[2]),this.v5h^=tc(n[3])}if(t.personalization){let n=Nm(Qs(t.personalization));this.v6l^=tc(n[0]),this.v6h^=tc(n[1]),this.v7l^=tc(n[2]),this.v7h^=tc(n[3])}if(t.key){let n=new Uint8Array(this.blockLen);n.set(Qs(t.key)),this.update(n)}}get(){let{v0l:t,v0h:r,v1l:n,v1h:i,v2l:o,v2h:s,v3l:a,v3h:c,v4l:u,v4h:h,v5l:f,v5h:m,v6l:b,v6h:w,v7l:S,v7h:P}=this;return[t,r,n,i,o,s,a,c,u,h,f,m,b,w,S,P]}set(t,r,n,i,o,s,a,c,u,h,f,m,b,w,S,P){this.v0l=t|0,this.v0h=r|0,this.v1l=n|0,this.v1h=i|0,this.v2l=o|0,this.v2h=s|0,this.v3l=a|0,this.v3h=c|0,this.v4l=u|0,this.v4h=h|0,this.v5l=f|0,this.v5h=m|0,this.v6l=b|0,this.v6h=w|0,this.v7l=S|0,this.v7h=P|0}compress(t,r,n){this.get().forEach((c,u)=>be[u]=c),be.set(Zn,16);let{h:i,l:o}=ke.fromBig(BigInt(this.length));be[24]=Zn[8]^o,be[25]=Zn[9]^i,n&&(be[28]=~be[28],be[29]=~be[29]);let s=0,a=FQ;for(let c=0;c<12;c++)wd(0,4,8,12,t,r+2*a[s++]),Sd(0,4,8,12,t,r+2*a[s++]),wd(1,5,9,13,t,r+2*a[s++]),Sd(1,5,9,13,t,r+2*a[s++]),wd(2,6,10,14,t,r+2*a[s++]),Sd(2,6,10,14,t,r+2*a[s++]),wd(3,7,11,15,t,r+2*a[s++]),Sd(3,7,11,15,t,r+2*a[s++]),wd(0,5,10,15,t,r+2*a[s++]),Sd(0,5,10,15,t,r+2*a[s++]),wd(1,6,11,12,t,r+2*a[s++]),Sd(1,6,11,12,t,r+2*a[s++]),wd(2,7,8,13,t,r+2*a[s++]),Sd(2,7,8,13,t,r+2*a[s++]),wd(3,4,9,14,t,r+2*a[s++]),Sd(3,4,9,14,t,r+2*a[s++]);this.v0l^=be[0]^be[16],this.v0h^=be[1]^be[17],this.v1l^=be[2]^be[18],this.v1h^=be[3]^be[19],this.v2l^=be[4]^be[20],this.v2h^=be[5]^be[21],this.v3l^=be[6]^be[22],this.v3h^=be[7]^be[23],this.v4l^=be[8]^be[24],this.v4h^=be[9]^be[25],this.v5l^=be[10]^be[26],this.v5h^=be[11]^be[27],this.v6l^=be[12]^be[28],this.v6h^=be[13]^be[29],this.v7l^=be[14]^be[30],this.v7h^=be[15]^be[31],be.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},E0=KQ(e=>new sC(e));var Uw=re(hh(),1);l();d();l();d();l();d();l();d();var vd=32;function qQ(e){return bPe(e)&&xPe(e)===vd}function Jc(e,t=!1){let r=e.toLowerCase();return!t&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(vd*2,"0")}`}function bPe(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}function xPe(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}l();d();var wPe=/^vector<(.+)>$/,SPe=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/,Mw=class e{static parseFromStr(t,r=!1){if(t==="address")return{address:null};if(t==="bool")return{bool:null};if(t==="u8")return{u8:null};if(t==="u16")return{u16:null};if(t==="u32")return{u32:null};if(t==="u64")return{u64:null};if(t==="u128")return{u128:null};if(t==="u256")return{u256:null};if(t==="signer")return{signer:null};let n=t.match(wPe);if(n)return{vector:e.parseFromStr(n[1],r)};let i=t.match(SPe);if(i)return{struct:{address:r?Jc(i[1]):i[1],module:i[2],name:i[3],typeParams:i[5]===void 0?[]:e.parseStructTypeArgs(i[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,r=!1){return kb(t).map(n=>e.parseFromStr(n,r))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${e.tagToString(t.vector)}>`;if("struct"in t){let r=t.struct,n=r.typeParams.map(e.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}};function vPe(e){return M.u64({name:"unsafe_u64",...e}).transform({input:t=>t,output:t=>Number(t)})}function APe(e){return M.enum("Option",{None:null,Some:e})}var Lr=M.bytes(vd).transform({validate:e=>{let t=typeof e=="string"?e:Mn(e);if(!t||!qQ(Jc(t)))throw new Error(`Invalid Sui address ${t}`)},input:e=>typeof e=="string"?Ms(Jc(e)):e,output:e=>Jc(Mn(e))}),ys=M.vector(M.u8()).transform({name:"ObjectDigest",input:e=>Ic(e),output:e=>Nu(new Uint8Array(e)),validate:e=>{if(Ic(e).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),Lo=M.struct("SuiObjectRef",{objectId:Lr,version:M.u64(),digest:ys}),aC=M.struct("SharedObjectRef",{objectId:Lr,initialSharedVersion:M.u64(),mutable:M.bool()}),cC=M.enum("ObjectArg",{ImmOrOwnedObject:Lo,SharedObject:aC,Receiving:Lo}),uC=M.enum("CallArg",{Pure:M.struct("Pure",{bytes:M.vector(M.u8()).transform({input:e=>typeof e=="string"?rr(e):e,output:e=>xt(new Uint8Array(e))})}),Object:cC}),fC=M.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:M.lazy(()=>fC),struct:M.lazy(()=>mC),u16:null,u32:null,u256:null}),H8=fC.transform({input:e=>typeof e=="string"?Mw.parseFromStr(e,!0):e,output:e=>Mw.tagToString(e)}),rc=M.enum("Argument",{GasCoin:null,Input:M.u16(),Result:M.u16(),NestedResult:M.tuple([M.u16(),M.u16()])}),lC=M.struct("ProgrammableMoveCall",{package:Lr,module:M.string(),function:M.string(),typeArguments:M.vector(H8),arguments:M.vector(rc)}),dC=M.enum("Command",{MoveCall:lC,TransferObjects:M.struct("TransferObjects",{objects:M.vector(rc),address:rc}),SplitCoins:M.struct("SplitCoins",{coin:rc,amounts:M.vector(rc)}),MergeCoins:M.struct("MergeCoins",{destination:rc,sources:M.vector(rc)}),Publish:M.struct("Publish",{modules:M.vector(M.vector(M.u8()).transform({input:e=>typeof e=="string"?rr(e):e,output:e=>xt(new Uint8Array(e))})),dependencies:M.vector(Lr)}),MakeMoveVec:M.struct("MakeMoveVec",{type:APe(H8).transform({input:e=>e===null?{None:!0}:{Some:e},output:e=>e.Some??null}),elements:M.vector(rc)}),Upgrade:M.struct("Upgrade",{modules:M.vector(M.vector(M.u8()).transform({input:e=>typeof e=="string"?rr(e):e,output:e=>xt(new Uint8Array(e))})),dependencies:M.vector(Lr),package:Lr,ticket:rc})}),hC=M.struct("ProgrammableTransaction",{inputs:M.vector(uC),commands:M.vector(dC)}),pC=M.enum("TransactionKind",{ProgrammableTransaction:hC,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),yC=M.enum("TransactionExpiration",{None:null,Epoch:vPe()}),mC=M.struct("StructTag",{address:Lr,module:M.string(),name:M.string(),typeParams:M.vector(fC)}),gC=M.struct("GasData",{payment:M.vector(Lo),owner:Lr,price:M.u64(),budget:M.u64()}),bC=M.struct("TransactionDataV1",{kind:pC,sender:Lr,gasData:gC,expiration:yC}),xC=M.enum("TransactionData",{V1:bC}),wC=M.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),SC=M.enum("IntentVersion",{V0:null}),vC=M.enum("AppId",{Sui:null}),AC=M.struct("Intent",{scope:wC,version:SC,appId:vC});function EC(e){return M.struct(`IntentMessage<${e.name}>`,{intent:AC,value:e})}var IC=M.enum("CompressedSignature",{ED25519:M.fixedArray(64,M.u8()),Secp256k1:M.fixedArray(64,M.u8()),Secp256r1:M.fixedArray(64,M.u8()),ZkLogin:M.vector(M.u8())}),kC=M.enum("PublicKey",{ED25519:M.fixedArray(32,M.u8()),Secp256k1:M.fixedArray(33,M.u8()),Secp256r1:M.fixedArray(33,M.u8()),ZkLogin:M.vector(M.u8())}),TC=M.struct("MultiSigPkMap",{pubKey:kC,weight:M.u8()}),PC=M.struct("MultiSigPublicKey",{pk_map:M.vector(TC),threshold:M.u16()}),jQ=M.struct("MultiSig",{sigs:M.vector(IC),bitmap:M.u16(),multisig_pk:PC}),EPe=M.vector(M.u8()).transform({input:e=>typeof e=="string"?rr(e):e,output:e=>xt(new Uint8Array(e))}),BC=M.struct("SenderSignedTransaction",{intentMessage:EC(xC),txSignatures:M.vector(EPe)}),WQ=M.vector(BC,{name:"SenderSignedData"});l();d();var IPe=M.enum("PackageUpgradeError",{UnableToFetchPackage:M.struct("UnableToFetchPackage",{packageId:Lr}),NotAPackage:M.struct("NotAPackage",{objectId:Lr}),IncompatibleUpgrade:null,DigestDoesNotMatch:M.struct("DigestDoesNotMatch",{digest:M.vector(M.u8())}),UnknownUpgradePolicy:M.struct("UnknownUpgradePolicy",{policy:M.u8()}),PackageIDDoesNotMatch:M.struct("PackageIDDoesNotMatch",{packageId:Lr,ticketId:Lr})}),kPe=M.struct("ModuleId",{address:Lr,name:M.string()}),zQ=M.struct("MoveLocation",{module:kPe,function:M.u16(),instruction:M.u16(),functionName:M.option(M.string())}),TPe=M.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:M.struct("IndexOutOfBounds",{idx:M.u16()}),SecondaryIndexOutOfBounds:M.struct("SecondaryIndexOutOfBounds",{resultIdx:M.u16(),secondaryIdx:M.u16()}),InvalidResultArity:M.struct("InvalidResultArity",{resultIdx:M.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),PPe=M.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),BPe=M.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:M.struct("MoveObjectTooBig",{objectSize:M.u64(),maxObjectSize:M.u64()}),MovePackageTooBig:M.struct("MovePackageTooBig",{objectSize:M.u64(),maxObjectSize:M.u64()}),CircularObjectOwnership:M.struct("CircularObjectOwnership",{object:Lr}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:M.option(zQ),MoveAbort:M.tuple([zQ,M.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:M.struct("CommandArgumentError",{argIdx:M.u16(),kind:TPe}),TypeArgumentError:M.struct("TypeArgumentError",{argumentIdx:M.u16(),kind:PPe}),UnusedValueWithoutDrop:M.struct("UnusedValueWithoutDrop",{resultIdx:M.u16(),secondaryIdx:M.u16()}),InvalidPublicFunctionReturnType:M.struct("InvalidPublicFunctionReturnType",{idx:M.u16()}),InvalidTransferObject:null,EffectsTooLarge:M.struct("EffectsTooLarge",{currentSize:M.u64(),maxSize:M.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:M.struct("PackageUpgradeError",{upgradeError:IPe}),WrittenObjectsTooLarge:M.struct("WrittenObjectsTooLarge",{currentSize:M.u64(),maxSize:M.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:M.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:M.vector(Lr)}),AddressDeniedForCoin:M.struct("AddressDeniedForCoin",{address:Lr,coinType:M.string()}),CoinTypeGlobalPause:M.struct("CoinTypeGlobalPause",{coinType:M.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),GQ=M.enum("ExecutionStatus",{Success:null,Failed:M.struct("ExecutionFailed",{error:BPe,command:M.option(M.u64())})}),$Q=M.struct("GasCostSummary",{computationCost:M.u64(),storageCost:M.u64(),storageRebate:M.u64(),nonRefundableStorageFee:M.u64()}),Mm=M.enum("Owner",{AddressOwner:Lr,ObjectOwner:Lr,Shared:M.struct("Shared",{initialSharedVersion:M.u64()}),Immutable:null}),_Pe=M.struct("TransactionEffectsV1",{status:GQ,executedEpoch:M.u64(),gasUsed:$Q,modifiedAtVersions:M.vector(M.tuple([Lr,M.u64()])),sharedObjects:M.vector(Lo),transactionDigest:ys,created:M.vector(M.tuple([Lo,Mm])),mutated:M.vector(M.tuple([Lo,Mm])),unwrapped:M.vector(M.tuple([Lo,Mm])),deleted:M.vector(Lo),unwrappedThenDeleted:M.vector(Lo),wrapped:M.vector(Lo),gasObject:M.tuple([Lo,Mm]),eventsDigest:M.option(ys),dependencies:M.vector(ys)}),_C=M.tuple([M.u64(),ys]),CPe=M.enum("ObjectIn",{NotExist:null,Exist:M.tuple([_C,Mm])}),NPe=M.enum("ObjectOut",{NotExist:null,ObjectWrite:M.tuple([ys,Mm]),PackageWrite:_C}),MPe=M.enum("IDOperation",{None:null,Created:null,Deleted:null}),DPe=M.struct("EffectsObjectChange",{inputState:CPe,outputState:NPe,idOperation:MPe}),OPe=M.enum("UnchangedSharedKind",{ReadOnlyRoot:_C,MutateDeleted:M.u64(),ReadDeleted:M.u64(),Cancelled:M.u64(),PerEpochConfig:null}),UPe=M.struct("TransactionEffectsV2",{status:GQ,executedEpoch:M.u64(),gasUsed:$Q,transactionDigest:ys,gasObjectIndex:M.option(M.u32()),eventsDigest:M.option(ys),dependencies:M.vector(ys),lamportVersion:M.u64(),changedObjects:M.vector(M.tuple([Lr,DPe])),unchangedSharedObjects:M.vector(M.tuple([Lr,OPe])),auxDataDigest:M.option(ys)}),YQ=M.enum("TransactionEffects",{V1:_Pe,V2:UPe});var uf={...M,U8:M.u8(),U16:M.u16(),U32:M.u32(),U64:M.u64(),U128:M.u128(),U256:M.u256(),ULEB128:M.uleb128(),Bool:M.bool(),String:M.string(),Address:Lr,AppId:vC,Argument:rc,CallArg:uC,CompressedSignature:IC,GasData:gC,Intent:AC,IntentMessage:EC,IntentScope:wC,IntentVersion:SC,MultiSig:jQ,MultiSigPkMap:TC,MultiSigPublicKey:PC,ObjectArg:cC,ObjectDigest:ys,ProgrammableMoveCall:lC,ProgrammableTransaction:hC,PublicKey:kC,SenderSignedData:WQ,SenderSignedTransaction:BC,SharedObjectRef:aC,StructTag:mC,SuiObjectRef:Lo,Command:dC,TransactionData:xC,TransactionDataV1:bC,TransactionExpiration:yC,TransactionKind:pC,TypeTag:H8,TransactionEffects:YQ};function q8(e,t){return uf.IntentMessage(uf.fixedArray(t.length,uf.u8())).serialize({intent:{scope:{[e]:!0},version:{V0:!0},appId:{Sui:!0}},value:t}).toBytes()}l();d();var ff={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5},ZQ={ED25519:32,Secp256k1:33,Secp256r1:33},j8={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin"};l();d();l();d();l();d();function CC(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var Dm=class{equals(t){return CC(this.toRawBytes(),t.toRawBytes())}toBase64(){return xt(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){let t=this.toSuiBytes();return xt(t)}verifyWithIntent(t,r,n){let i=q8(n,t),o=E0(i,{dkLen:32});return this.verify(o,r)}verifyPersonalMessage(t,r){return this.verifyWithIntent(uf.vector(uf.u8()).serialize(t).toBytes(),r,"PersonalMessage")}verifyTransaction(t,r){return this.verifyWithIntent(t,r,"TransactionData")}toSuiBytes(){let t=this.toRawBytes(),r=new Uint8Array(t.length+1);return r.set([this.flag()]),r.set(t,1),r}toSuiAddress(){return Jc(V8(E0(this.toSuiBytes(),{dkLen:32})).slice(0,vd*2))}};l();d();var JQ=e=>{throw TypeError(e)},XQ=(e,t,r)=>t.has(e)||JQ("Cannot "+r),W8=(e,t,r)=>(XQ(e,t,"read from private field"),r?r.call(e):t.get(e)),z8=(e,t,r)=>t.has(e)?JQ("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),G8=(e,t,r,n)=>(XQ(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),$8,Y8,Z8,J8,NC=class extends Error{},X8=class{constructor({url:t,fetch:r=fetch,headers:n={},queries:i={}}){z8(this,$8),z8(this,Y8),z8(this,Z8),z8(this,J8),G8(this,$8,t),G8(this,Y8,i),G8(this,Z8,n),G8(this,J8,(...o)=>r(...o))}async query(t){let r=await W8(this,J8).call(this,W8(this,$8),{method:"POST",headers:{"Content-Type":"application/json",...W8(this,Z8)},body:JSON.stringify({query:typeof t.query=="string"?String(t.query):Hp(t.query),variables:t.variables,extensions:t.extensions,operationName:t.operationName})});if(!r.ok)throw new NC(`GraphQL request failed: ${r.statusText} (${r.status})`);return await r.json()}async execute(t,r){return this.query({...r,query:W8(this,Y8)[t]})}};$8=new WeakMap;Y8=new WeakMap;Z8=new WeakMap;J8=new WeakMap;l();d();var QQ=Nb();l();d();function RPe(e){if(e.length!==1)throw new Error("Invalid base64Url character: "+e);let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(e);if(r===-1)throw new Error("Invalid base64Url character: "+e);let n=r.toString(2).padStart(6,"0");return Array.from(n).map(Number)}function LPe(e){let t=[];for(let r=0;r<e.length;r++){let n=e.charAt(r),i=RPe(n);t=t.concat(i)}return t}function VPe(e,t){if(e.length<2)throw new Error(`Input (s = ${e}) is not tightly packed because s.length < 2`);let r=LPe(e),n=t%4;if(n!==0)if(n===1)r=r.slice(2);else if(n===2)r=r.slice(4);else throw new Error(`Input (s = ${e}) is not tightly packed because i%4 = 3 (i = ${t}))`);let i=(t+e.length-1)%4;if(i!==3)if(i===2)r=r.slice(0,r.length-2);else if(i===1)r=r.slice(0,r.length-4);else throw new Error(`Input (s = ${e}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${t}))`);if(r.length%8!==0)throw new Error("We should never reach here...");let o=new Uint8Array(Math.floor(r.length/8)),s=0;for(let a=0;a<r.length;a+=8){let c=r.slice(a,a+8),u=parseInt(c.join(""),2);o[s++]=u}return new TextDecoder().decode(o)}function KPe(e){if(!(e.slice(-1)==="}"||e.slice(-1)===","))throw new Error("Invalid claim");let t=JSON.parse("{"+e.slice(0,-1)+"}");if(Object.keys(t).length!==1)throw new Error("Invalid claim");let r=Object.keys(t)[0];return[r,t[r]]}function eee(e,t){let r=VPe(e.value,e.indexMod4),[n,i]=KPe(r);if(n!==t)throw new Error(`Invalid field name: found ${n} expected ${t}`);return i}l();d();l();d();var tee=M.struct("ZkLoginSignature",{inputs:M.struct("ZkLoginSignatureInputs",{proofPoints:M.struct("ZkLoginSignatureInputsProofPoints",{a:M.vector(M.string()),b:M.vector(M.vector(M.string())),c:M.vector(M.string())}),issBase64Details:M.struct("ZkLoginSignatureInputsClaim",{value:M.string(),indexMod4:M.u8()}),headerBase64:M.string(),addressSeed:M.string()}),maxEpoch:M.u64(),userSignature:M.vector(M.u8())});function ree(e){return tee.parse(typeof e=="string"?rr(e):e)}l();d();function FPe(e){for(let t=0;t<e.length;t++)if(e[t]!==0)return t;return-1}function Q8(e,t){let r=e.toString(16);return LQ(r.padStart(t*2,"0").slice(-t*2))}function MC(e,t){let r=Q8(e,t),n=FPe(r);return n===-1?new Uint8Array([0]):r.slice(n)}var oee=e=>{throw TypeError(e)},see=(e,t,r)=>t.has(e)||oee("Cannot "+r),lf=(e,t,r)=>(see(e,t,"read from private field"),r?r.call(e):t.get(e)),DC=(e,t,r)=>t.has(e)?oee("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Om=(e,t,r,n)=>(see(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),nc,Dw,Ow,HPe=class OC extends Dm{constructor(t,{client:r}={}){super(),DC(this,nc),DC(this,Dw),DC(this,Ow),Om(this,Dw,r),typeof t=="string"?Om(this,nc,rr(t)):t instanceof Uint8Array?Om(this,nc,t):Om(this,nc,Uint8Array.from(t)),Om(this,Ow,lf(this,nc).length!==lf(this,nc)[0]+1+32),lf(this,Ow)&&Om(this,nc,nee(lf(this,nc)))}equals(t){return super.equals(t)}toSuiAddress(){if(lf(this,Ow)){let t=nee(lf(this,nc),!0),r=new Uint8Array(t.length+1);return r[0]=this.flag(),r.set(t,1),Jc(V8(E0(r,{dkLen:32})).slice(0,vd*2))}return super.toSuiAddress()}toRawBytes(){return lf(this,nc)}flag(){return ff.ZkLogin}async verify(t,r){throw Error("does not support")}verifyPersonalMessage(t,r){let n=e6(r),i=new OC(n.publicKey).toSuiAddress();return iee({address:i,bytes:xt(t),signature:n.serializedSignature,intentScope:"PERSONAL_MESSAGE",client:lf(this,Dw)})}verifyTransaction(t,r){let n=e6(r),i=new OC(n.publicKey).toSuiAddress();return iee({address:i,bytes:xt(t),signature:n.serializedSignature,intentScope:"TRANSACTION_DATA",client:lf(this,Dw)})}};nc=new WeakMap;Dw=new WeakMap;Ow=new WeakMap;var qPe=HPe;function jPe(e,t,r){let n=r?.legacyAddress?MC(e,32):Q8(e,32),i=new TextEncoder().encode(t),o=new Uint8Array(1+i.length+n.length);return o.set([i.length],0),o.set(i,1),o.set(n,1+i.length),new qPe(o,r)}var WPe=QQ(`
	query Zklogin(
		$bytes: Base64!
		$signature: Base64!
		$intentScope: ZkLoginIntentScope!
		$author: SuiAddress!
	) {
		verifyZkloginSignature(
			bytes: $bytes
			signature: $signature
			intentScope: $intentScope
			author: $author
		) {
			success
			errors
		}
	}
`);function nee(e,t=!1){let r=e[0]+1,n=BigInt(`0x${Mn(e.slice(r))}`),i=t?MC(n,32):Q8(n,32),o=new Uint8Array(r+i.length);return o.set(e.slice(0,r),0),o.set(i,r),o}async function iee({address:e,bytes:t,signature:r,intentScope:n,client:i=new X8({url:"https://sui-mainnet.mystenlabs.com/graphql"})}){let o=await i.query({query:WPe,variables:{bytes:t,signature:r,intentScope:n,author:e}});return o.data?.verifyZkloginSignature.success===!0&&o.data?.verifyZkloginSignature.errors.length===0}function e6(e){let t=typeof e=="string"?rr(e):e;if(t[0]!==ff.ZkLogin)throw new Error("Invalid signature scheme");let r=t.slice(1),{inputs:n,maxEpoch:i,userSignature:o}=ree(r),{issBase64Details:s,addressSeed:a}=n,c=eee(s,"iss"),u=jPe(BigInt(a),c);return{serializedSignature:xt(t),signatureScheme:"ZkLogin",zkLogin:{inputs:n,maxEpoch:i,userSignature:o,iss:c,addressSeed:BigInt(a)},signature:t,publicKey:u.toRawBytes()}}function aee({signature:e,signatureScheme:t,publicKey:r}){if(!r)throw new Error("`publicKey` is required");let n=r.toRawBytes(),i=new Uint8Array(1+e.length+n.length);return i.set([ff[t]]),i.set(e,1),i.set(n,1+e.length),xt(i)}function cee(e){let t=rr(e),r=j8[t[0]];switch(r){case"MultiSig":let n=uf.MultiSig.parse(t.slice(1));return{serializedSignature:e,signatureScheme:r,multisig:n,bytes:t};case"ZkLogin":return e6(e);case"ED25519":case"Secp256k1":case"Secp256r1":let i=ZQ[r],o=t.slice(1,t.length-i),s=t.slice(1+o.length);return{serializedSignature:e,signatureScheme:r,signature:o,publicKey:s,bytes:t};default:throw new Error("Unsupported signature scheme")}}var Rw=32;var uee="suiprivkey",UC=class{async signWithIntent(t,r){let n=q8(r,t),i=E0(n,{dkLen:32});return{signature:aee({signature:await this.sign(i),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:xt(t)}}async signTransaction(t){return this.signWithIntent(t,"TransactionData")}async signPersonalMessage(t){let{signature:r}=await this.signWithIntent(M.vector(M.u8()).serialize(t).toBytes(),"PersonalMessage");return{bytes:xt(t),signature:r}}toSuiAddress(){return this.getPublicKey().toSuiAddress()}},t6=class extends UC{};function fee(e){let{prefix:t,words:r}=Uw.bech32.decode(e);if(t!==uee)throw new Error("invalid private key prefix");let n=new Uint8Array(Uw.bech32.fromWords(r)),i=n.slice(1);return{schema:j8[n[0]],secretKey:i}}function lee(e,t){if(e.length!==Rw)throw new Error("Invalid bytes length");let r=ff[t],n=new Uint8Array(e.length+1);return n.set([r]),n.set(e,1),Uw.bech32.encode(uee,Uw.bech32.toWords(n))}l();d();function RC(e){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(e)}function zPe(e){return Dv(e,"")}function dee(e){return Mn(zPe(e))}l();d();l();d();var r6=class extends bd{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,OQ(t);let n=Qs(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return af(this),this.iHash.update(t),this}digestInto(t){af(this),Cm(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},n6=(e,t,r)=>new r6(e,t).update(r).digest();n6.create=(e,t)=>new r6(e,t);l();d();l();d();function GPe(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var i6=class extends bd{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=L8(this.buffer)}update(t){af(this);let{view:r,buffer:n,blockLen:i}=this;t=Qs(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=L8(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){af(this),R8(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let f=s;f<i;f++)r[f]=0;GPe(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=L8(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,h[f],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};var[$Pe,YPe]=ke.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Ad=new Uint32Array(80),Ed=new Uint32Array(80),LC=class extends i6{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:u,El:h,Fh:f,Fl:m,Gh:b,Gl:w,Hh:S,Hl:P}=this;return[t,r,n,i,o,s,a,c,u,h,f,m,b,w,S,P]}set(t,r,n,i,o,s,a,c,u,h,f,m,b,w,S,P){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=h|0,this.Fh=f|0,this.Fl=m|0,this.Gh=b|0,this.Gl=w|0,this.Hh=S|0,this.Hl=P|0}process(t,r){for(let C=0;C<16;C++,r+=4)Ad[C]=t.getUint32(r),Ed[C]=t.getUint32(r+=4);for(let C=16;C<80;C++){let L=Ad[C-15]|0,V=Ed[C-15]|0,j=ke.rotrSH(L,V,1)^ke.rotrSH(L,V,8)^ke.shrSH(L,V,7),$=ke.rotrSL(L,V,1)^ke.rotrSL(L,V,8)^ke.shrSL(L,V,7),H=Ad[C-2]|0,Y=Ed[C-2]|0,B=ke.rotrSH(H,Y,19)^ke.rotrBH(H,Y,61)^ke.shrSH(H,Y,6),p=ke.rotrSL(H,Y,19)^ke.rotrBL(H,Y,61)^ke.shrSL(H,Y,6),g=ke.add4L($,p,Ed[C-7],Ed[C-16]),x=ke.add4H(g,j,B,Ad[C-7],Ad[C-16]);Ad[C]=x|0,Ed[C]=g|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:u,Dl:h,Eh:f,El:m,Fh:b,Fl:w,Gh:S,Gl:P,Hh:N,Hl:O}=this;for(let C=0;C<80;C++){let L=ke.rotrSH(f,m,14)^ke.rotrSH(f,m,18)^ke.rotrBH(f,m,41),V=ke.rotrSL(f,m,14)^ke.rotrSL(f,m,18)^ke.rotrBL(f,m,41),j=f&b^~f&S,$=m&w^~m&P,H=ke.add5L(O,V,$,YPe[C],Ed[C]),Y=ke.add5H(H,N,L,j,$Pe[C],Ad[C]),B=H|0,p=ke.rotrSH(n,i,28)^ke.rotrBH(n,i,34)^ke.rotrBH(n,i,39),g=ke.rotrSL(n,i,28)^ke.rotrBL(n,i,34)^ke.rotrBL(n,i,39),x=n&o^n&a^o&a,A=i&s^i&c^s&c;N=S|0,O=P|0,S=b|0,P=w|0,b=f|0,w=m|0,{h:f,l:m}=ke.add(u|0,h|0,Y|0,B|0),u=a|0,h=c|0,a=o|0,c=s|0,o=n|0,s=i|0;let v=ke.add3L(B,g,A);n=ke.add3H(v,Y,p,x),i=v|0}({h:n,l:i}=ke.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=ke.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:c}=ke.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:h}=ke.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:f,l:m}=ke.add(this.Eh|0,this.El|0,f|0,m|0),{h:b,l:w}=ke.add(this.Fh|0,this.Fl|0,b|0,w|0),{h:S,l:P}=ke.add(this.Gh|0,this.Gl|0,S|0,P|0),{h:N,l:O}=ke.add(this.Hh|0,this.Hl|0,N|0,O|0),this.set(n,i,o,s,a,c,u,h,f,m,b,w,S,P,N,O)}roundClean(){Ad.fill(0),Ed.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var VC=VQ(()=>new LC);var ZPe=re(bs(),1),JPe="ed25519 seed",XPe=2147483648,QPe=new RegExp("^m(\\/[0-9]+')+$"),hee=e=>e.replace("'",""),eBe=e=>{let r=n6.create(VC,JPe).update(Ms(e)).digest(),n=r.slice(0,32),i=r.slice(32);return{key:n,chainCode:i}},tBe=({key:e,chainCode:t},r)=>{let n=new ArrayBuffer(4);new DataView(n).setUint32(0,r);let o=new Uint8Array(1+e.length+n.byteLength);o.set(new Uint8Array(1).fill(0)),o.set(e,1),o.set(new Uint8Array(n,0,n.byteLength),e.length+1);let s=n6.create(VC,t).update(o).digest(),a=s.slice(0,32),c=s.slice(32);return{key:a,chainCode:c}};var rBe=e=>QPe.test(e)?!e.split("/").slice(1).map(hee).some(isNaN):!1,KC=(e,t,r=XPe)=>{if(!rBe(e))throw new Error("Invalid derivation path");let{key:n,chainCode:i}=eBe(t);return e.split("/").slice(1).map(hee).map(s=>parseInt(s,10)).reduce((s,a)=>tBe(s,a+r),{key:n,chainCode:i})};l();d();var pee=re(bs(),1);var FC=32,Lw=class extends Dm{constructor(t){if(super(),typeof t=="string"?this.data=rr(t):t instanceof Uint8Array?this.data=t:this.data=Uint8Array.from(t),this.data.length!==FC)throw new Error(`Invalid public key input. Expected ${FC} bytes, got ${this.data.length}`)}equals(t){return super.equals(t)}toRawBytes(){return this.data}flag(){return ff.ED25519}async verify(t,r){let n;if(typeof r=="string"){let i=cee(r);if(i.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!CC(this.toRawBytes(),i.publicKey))throw new Error("Signature does not match public key");n=i.signature}else n=r;return pee.default.sign.detached.verify(t,n,this.toRawBytes())}};Lw.SIZE=FC;var HC="m/44'/784'/0'/0'/0'",Vw=class e extends t6{constructor(t){super(),t?this.keypair=t:this.keypair=I0.default.sign.keyPair()}getKeyScheme(){return"ED25519"}static generate(){return new e(I0.default.sign.keyPair())}static fromSecretKey(t,r){if(typeof t=="string"){let o=fee(t);if(o.schema!=="ED25519")throw new Error(`Expected a ED25519 keypair, got ${o.schema}`);return this.fromSecretKey(o.secretKey,r)}let n=t.length;if(n!==Rw)throw new Error(`Wrong secretKey size. Expected ${Rw} bytes, got ${n}.`);let i=I0.default.sign.keyPair.fromSeed(t);if(!r||!r.skipValidation){let s=new TextEncoder().encode("sui validation"),a=I0.default.sign.detached(s,i.secretKey);if(!I0.default.sign.detached.verify(s,a,i.publicKey))throw new Error("provided secretKey is invalid")}return new e(i)}getPublicKey(){return new Lw(this.keypair.publicKey)}getSecretKey(){return lee(this.keypair.secretKey.slice(0,Rw),this.getKeyScheme())}async sign(t){return I0.default.sign.detached(t,this.keypair.secretKey)}static deriveKeypair(t,r){if(r==null&&(r=HC),!RC(r))throw new Error("Invalid derivation path");let{key:n}=KC(r,dee(t));return e.fromSecretKey(n)}static deriveKeypairFromSeed(t,r){if(r==null&&(r=HC),!RC(r))throw new Error("Invalid derivation path");let{key:n}=KC(r,t);return e.fromSecretKey(n)}};var yee=()=>({type:"keyPair",sign:async(e,t)=>{let r=Vw.fromSecretKey(e.privateKey);try{let n;switch(t.signingType){case"personalMessage":{n=await r.signPersonalMessage(t.message);break}case"transaction":{n=await r.signTransaction(t.transaction);break}}return Promise.resolve({status:"success",signature:n.signature})}catch(n){return console.error(n),Promise.resolve(cr("invalidMessageEncoding"))}}});l();d();var o6=class{#e;constructor(t){this.#e=t}async signWithKeypair(t,r){if("isJWT"in r)return this.#e.keyPair.JWT.sign(t,r);if("isAgentWallet"in r)return this.#e.keyPair.Agent.sign(t,r);if("isCash"in r)return this.#e.keyPair.Cash.sign(t,r);let n=r.chainType;switch(n){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return this.#e.keyPair[n].sign(t,r);case"eip155":return this.#e.keyPair[n].sign(t,r);case"solana":return this.#e.keyPair[n].sign(t,r);case"sui":return this.#e.keyPair[n].sign(t,r)}}async signWithHardware(t,r,n){return this.#e.ledger.sign(t,r,n)}async signWithSolanaSeedVault(t,r,n){return this.#e.seedVault.sign(t,r,n)}};l();d();var mee=e=>Y9.safeParse(e).success;l();d();var nBe=e=>({getSeed:t=>iBe(e,t),setSeed:(t,r)=>oBe(e,t,r),getClientJWTSigner:(t,r)=>sBe(e,t,r),setClientJWTSigner:(t,r,n)=>aBe(e,t,r,n),removeSeeds:t=>gee(e,t),removeClientJWTKeypairs:t=>bee(e,t),clear:async()=>{await gee(e,"all"),await bee(e,"all")}}),Id=`${os}.cache.secrets`,qC=e=>`${os}.cache.seed.${e}`,jC=e=>`${os}.cache.client-jwt.${e}`,iBe=async({isEnabled:e,secretsStorage:t},r)=>{if(!e())return null;let n=qC(r),i=null;try{i=await t.getSecureValue(n)}catch{}if(!i)return null;let{bytes:o,encoding:s}=i.seed;return new Uint8Array(Buffer.from(o,s))},oBe=async({isEnabled:e,generalStorage:t,secretsStorage:r},n,i)=>{if(!e())return;let o=qC(n);await r.setSecureValue(o,{version:1,identifier:n,seed:{bytes:Buffer.from(i).toString("base64"),encoding:"base64"}});let s=await t.get(Id);if(!s)s={version:1,seedIdentifiers:[n],clientJWTKeypairIdentifiers:[]};else{let a=new Set(s.seedIdentifiers);a.add(n),s.seedIdentifiers=Array.from(a)}await t.set(Id,s)},gee=async({generalStorage:e,secretsStorage:t},r)=>{let n=await e.get(Id);if(!n)return;let i=r==="all"?n.seedIdentifiers:r,o=new Set(i),s=n.seedIdentifiers.filter(a=>o.has(a));await t.removeSecureValue(s.map(qC)),await e.set(Id,{version:1,seedIdentifiers:n.seedIdentifiers.filter(a=>!o.has(a)),clientJWTKeypairIdentifiers:n.clientJWTKeypairIdentifiers??[]})},sBe=async({isEnabled:e,secretsStorage:t},r,n)=>{if(!e())return null;let i=jC(r),o=null;try{o=await t.getSecureValue(i)}catch{}if(!o||!o.keyPairs[n])return null;let s=o.keyPairs[n],a=new Uint8Array(Buffer.from(s.p256pubkey.bytes,s.p256pubkey.encoding)),c=new Uint8Array(Buffer.from(s.p256privkey.bytes,s.p256privkey.encoding));return{p256pubkey:a,p256privkey:c}},aBe=async({isEnabled:e,generalStorage:t,secretsStorage:r},n,i,o)=>{if(!e())return;let s=jC(n),a=await r.getSecureValue(s)??{version:1,identifier:n,keyPairs:{}};a.keyPairs[i]={p256pubkey:{bytes:xa(Buffer.from(o.p256pubkey)),encoding:"base64"},p256privkey:{bytes:xa(Buffer.from(o.p256privkey)),encoding:"base64"}},await r.setSecureValue(s,a);let c=await t.get(Id);if(!c)c={version:1,seedIdentifiers:[],clientJWTKeypairIdentifiers:[n]};else{let u=new Set(c.clientJWTKeypairIdentifiers??[]);u.add(n),c.clientJWTKeypairIdentifiers=Array.from(u)}await t.set(Id,c)},bee=async({generalStorage:e,secretsStorage:t},r)=>{let n=await e.get(Id);if(!n||!n.clientJWTKeypairIdentifiers||n.clientJWTKeypairIdentifiers.length===0)return;let i=r==="all"?n.clientJWTKeypairIdentifiers:r,o=new Set(i);await t.removeSecureValue(i.map(jC)),await e.set(Id,{version:1,seedIdentifiers:n.seedIdentifiers,clientJWTKeypairIdentifiers:n.clientJWTKeypairIdentifiers.filter(s=>!o.has(s))})};l();d();l();d();l();d();l();d();l();d();async function WC(e){let t=new Uint8Array(Array.from("mnemonic"+(e.passphrase??"")).map(r=>r.charCodeAt(0)));return e.pbkdf2(e.mnemonic,t,2048,64,"sha512")}l();d();var Aee=re(Bn());l();d();l();d();function zC(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function cBe(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function xee(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function uBe(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");zC(e.outputLen),zC(e.blockLen)}function fBe(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function lBe(e,t){xee(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var dBe={number:zC,bool:cBe,bytes:xee,hash:uBe,exists:fBe,output:lBe},Vo=dBe;l();d();l();d();l();d();var hBe={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var Rm=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),ic=(e,t)=>e<<32-t|e>>>t,pBe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!pBe)throw new Error("Non little-endian hardware is not supported");var Qvt=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function yBe(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function kd(e){if(typeof e=="string"&&(e=yBe(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}var Um=class{clone(){return this._cloneInto()}},mBe=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function wee(e,t){if(t!==void 0&&(typeof t!="object"||!mBe(t)))throw new TypeError("Options should be object or undefined");return Object.assign(e,t)}function Td(e){let t=n=>e().update(kd(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}var s6=class extends Um{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,Vo.hash(t);let n=kd(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return Vo.exists(this),this.iHash.update(t),this}digestInto(t){Vo.exists(this),Vo.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},a6=(e,t,r)=>new s6(e,t).update(r).digest();a6.create=(e,t)=>new s6(e,t);function gBe(e,t,r,n){Vo.hash(e);let i=wee({dkLen:32,asyncTick:10},n),{c:o,dkLen:s,asyncTick:a}=i;if(Vo.number(o),Vo.number(s),Vo.number(a),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");let c=kd(t),u=kd(r),h=new Uint8Array(s),f=a6.create(e,c),m=f._cloneInto().update(u);return{c:o,dkLen:s,asyncTick:a,DK:h,PRF:f,PRFSalt:m}}function bBe(e,t,r,n,i){return e.destroy(),t.destroy(),n&&n.destroy(),i.fill(0),r}function See(e,t,r,n){let{c:i,dkLen:o,DK:s,PRF:a,PRFSalt:c}=gBe(e,t,r,n),u,h=new Uint8Array(4),f=Rm(h),m=new Uint8Array(a.outputLen);for(let b=1,w=0;w<o;b++,w+=a.outputLen){let S=s.subarray(w,w+a.outputLen);f.setInt32(0,b,!1),(u=c._cloneInto(u)).update(h).digestInto(m),S.set(m.subarray(0,S.length));for(let P=1;P<i;P++){a._cloneInto(u).update(m).digestInto(m);for(let N=0;N<S.length;N++)S[N]^=m[N]}}return bBe(a,c,s,u,m)}l();d();l();d();function xBe(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var Lm=class extends Um{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Rm(this.buffer)}update(t){Vo.exists(this);let{view:r,buffer:n,blockLen:i}=this;t=kd(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=Rm(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Vo.exists(this),Vo.output(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let f=s;f<i;f++)r[f]=0;xBe(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=Rm(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,h[f],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};var wBe=(e,t,r)=>e&t^~e&r,SBe=(e,t,r)=>e&t^e&r^t&r,vBe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Pd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Bd=new Uint32Array(64),c6=class extends Lm{constructor(){super(64,32,8,!1),this.A=Pd[0]|0,this.B=Pd[1]|0,this.C=Pd[2]|0,this.D=Pd[3]|0,this.E=Pd[4]|0,this.F=Pd[5]|0,this.G=Pd[6]|0,this.H=Pd[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let f=0;f<16;f++,r+=4)Bd[f]=t.getUint32(r,!1);for(let f=16;f<64;f++){let m=Bd[f-15],b=Bd[f-2],w=ic(m,7)^ic(m,18)^m>>>3,S=ic(b,17)^ic(b,19)^b>>>10;Bd[f]=S+Bd[f-7]+w+Bd[f-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:h}=this;for(let f=0;f<64;f++){let m=ic(a,6)^ic(a,11)^ic(a,25),b=h+m+wBe(a,c,u)+vBe[f]+Bd[f]|0,S=(ic(n,2)^ic(n,13)^ic(n,22))+SBe(n,i,o)|0;h=u,u=c,c=a,a=s+b|0,s=o,o=i,i=n,n=b+S|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,o,s,a,c,u,h)}roundClean(){Bd.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},GC=class extends c6{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}},$C=Td(()=>new c6),vAt=Td(()=>new GC);l();d();l();d();var u6=BigInt(4294967295),YC=BigInt(32);function vee(e,t=!1){return t?{h:Number(e&u6),l:Number(e>>YC&u6)}:{h:Number(e>>YC&u6)|0,l:Number(e&u6)|0}}function ABe(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:o,l:s}=vee(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}var EBe=(e,t)=>BigInt(e>>>0)<<YC|BigInt(t>>>0),IBe=(e,t,r)=>e>>>r,kBe=(e,t,r)=>e<<32-r|t>>>r,TBe=(e,t,r)=>e>>>r|t<<32-r,PBe=(e,t,r)=>e<<32-r|t>>>r,BBe=(e,t,r)=>e<<64-r|t>>>r-32,_Be=(e,t,r)=>e>>>r-32|t<<64-r,CBe=(e,t)=>t,NBe=(e,t)=>e,MBe=(e,t,r)=>e<<r|t>>>32-r,DBe=(e,t,r)=>t<<r|e>>>32-r,OBe=(e,t,r)=>t<<r-32|e>>>64-r,UBe=(e,t,r)=>e<<r-32|t>>>64-r;function RBe(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}var LBe=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),VBe=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,KBe=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),FBe=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,HBe=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),qBe=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0,jBe={fromBig:vee,split:ABe,toBig:EBe,shrSH:IBe,shrSL:kBe,rotrSH:TBe,rotrSL:PBe,rotrBH:BBe,rotrBL:_Be,rotr32H:CBe,rotr32L:NBe,rotlSH:MBe,rotlSL:DBe,rotlBH:OBe,rotlBL:UBe,add:RBe,add3L:LBe,add3H:VBe,add4L:KBe,add4H:FBe,add5H:qBe,add5L:HBe},vt=jBe;var[WBe,zBe]=vt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),_d=new Uint32Array(80),Cd=new Uint32Array(80),Vm=class extends Lm{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:u,El:h,Fh:f,Fl:m,Gh:b,Gl:w,Hh:S,Hl:P}=this;return[t,r,n,i,o,s,a,c,u,h,f,m,b,w,S,P]}set(t,r,n,i,o,s,a,c,u,h,f,m,b,w,S,P){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=h|0,this.Fh=f|0,this.Fl=m|0,this.Gh=b|0,this.Gl=w|0,this.Hh=S|0,this.Hl=P|0}process(t,r){for(let C=0;C<16;C++,r+=4)_d[C]=t.getUint32(r),Cd[C]=t.getUint32(r+=4);for(let C=16;C<80;C++){let L=_d[C-15]|0,V=Cd[C-15]|0,j=vt.rotrSH(L,V,1)^vt.rotrSH(L,V,8)^vt.shrSH(L,V,7),$=vt.rotrSL(L,V,1)^vt.rotrSL(L,V,8)^vt.shrSL(L,V,7),H=_d[C-2]|0,Y=Cd[C-2]|0,B=vt.rotrSH(H,Y,19)^vt.rotrBH(H,Y,61)^vt.shrSH(H,Y,6),p=vt.rotrSL(H,Y,19)^vt.rotrBL(H,Y,61)^vt.shrSL(H,Y,6),g=vt.add4L($,p,Cd[C-7],Cd[C-16]),x=vt.add4H(g,j,B,_d[C-7],_d[C-16]);_d[C]=x|0,Cd[C]=g|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:u,Dl:h,Eh:f,El:m,Fh:b,Fl:w,Gh:S,Gl:P,Hh:N,Hl:O}=this;for(let C=0;C<80;C++){let L=vt.rotrSH(f,m,14)^vt.rotrSH(f,m,18)^vt.rotrBH(f,m,41),V=vt.rotrSL(f,m,14)^vt.rotrSL(f,m,18)^vt.rotrBL(f,m,41),j=f&b^~f&S,$=m&w^~m&P,H=vt.add5L(O,V,$,zBe[C],Cd[C]),Y=vt.add5H(H,N,L,j,WBe[C],_d[C]),B=H|0,p=vt.rotrSH(n,i,28)^vt.rotrBH(n,i,34)^vt.rotrBH(n,i,39),g=vt.rotrSL(n,i,28)^vt.rotrBL(n,i,34)^vt.rotrBL(n,i,39),x=n&o^n&a^o&a,A=i&s^i&c^s&c;N=S|0,O=P|0,S=b|0,P=w|0,b=f|0,w=m|0,{h:f,l:m}=vt.add(u|0,h|0,Y|0,B|0),u=a|0,h=c|0,a=o|0,c=s|0,o=n|0,s=i|0;let v=vt.add3L(B,g,A);n=vt.add3H(v,Y,p,x),i=v|0}({h:n,l:i}=vt.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=vt.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:c}=vt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:h}=vt.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:f,l:m}=vt.add(this.Eh|0,this.El|0,f|0,m|0),{h:b,l:w}=vt.add(this.Fh|0,this.Fl|0,b|0,w|0),{h:S,l:P}=vt.add(this.Gh|0,this.Gl|0,S|0,P|0),{h:N,l:O}=vt.add(this.Hh|0,this.Hl|0,N|0,O|0),this.set(n,i,o,s,a,c,u,h,f,m,b,w,S,P,N,O)}roundClean(){_d.fill(0),Cd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},ZC=class extends Vm{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},JC=class extends Vm{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},XC=class extends Vm{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}},QC=Td(()=>new Vm),NAt=Td(()=>new ZC),MAt=Td(()=>new JC),DAt=Td(()=>new XC);var $Be=re(bs());l();d();var eN=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"],LAt=new Set(eN);var YBe=(e,t,r,n,i)=>{let o;switch(i){case"rmd160":case"md5":case"sha":throw new Error(`${i} is unsupported by noble`);case"ripemd160":case"sha1":case"sha224":case"sha384":throw new Error(`${i} is supported by noble, but we don't need it for bip39`);case"sha256":o=$C;break;case"sha512":o=QC;break}return See(o,e,t,{c:r,dkLen:n})},ZBe=(e,t,r)=>{for(;e.length<r;)e=t+e;return e},Eee=e=>e.map(t=>ZBe(t.toString(2),"0",8)).join(""),JBe=e=>parseInt(e,2),XBe=e=>{let r=e.length*8/32,n=$C(e);return Eee(Array.from(n)).slice(0,r)};var tN=async e=>{let t=eN;if(e.length<16)throw new Error("LessThanTwelve");if(e.length>32)throw new Error("MoreThanTwentyFour");if(e.length%4!==0)throw new Error("WrongWord");let r,n;try{r=Eee(Array.from(e))}catch{throw new Error("InvalidEntropyBits")}try{n=XBe(e)}catch{throw new Error("InvalidChecksumBits")}let o=(r+n).match(/(.{1,11})/g);if(!o)throw new Error("InvalidChecksum");let s=o.map(u=>{let h=JBe(u);return t[h]}),a=Aee.Buffer.from(s.join(" "));return{seed:await WC({mnemonic:a,pbkdf2:YBe}),mnemonic:a}};l();d();var QBe=re(bs()),XAt=new RegExp("^m(\\/[0-9]+')+$");l();d();async function Nd(e,t){let r=await gG(e,t);if(!r)throw new Xu;let n=Xi.from(r.entropy);return r.entropy.fill(0),n}async function Tn(e,t){let r,n=await e.secureCache.getSeed(t);if(n)r=n;else{let o=await Nd(e,t),{seed:s}=await o.foldAsync(tN);r=s,await e.secureCache.setSeed(t,r)}let i=Xi.from(r);return r.fill(0),i}l();d();var rN=re(B0());function k0(e){return e.fold(rN.keccak256)}function Md(e,t,r){let n=Ju[r];return rN.keccak256(`${e}:${t}:${n}`)}function Xc(e,t,r,n){let i={};for(let o of n){let{publicKey:s}=e.keypairGenerator.generateKeypairFromSeed(t,r,o),a=Vi.getAddressType(o);switch(o){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":{i[a]={chainType:a,pathType:o,publicKey:s,addresses:Object.values(En).reduce((c,u)=>({...c,[u]:oi({publicKey:s,addressType:a,networkID:u})}),{})};break}case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":case"bip44Root":case"bip44Change":case"bip44":case"deprecated":{i[a]={chainType:a,pathType:o,publicKey:oi({publicKey:s,addressType:a})};break}case"bip44Sui":{i[a]={chainType:a,pathType:o,publicKey:s,address:oi({publicKey:s,addressType:a})};break}default:Ae(o)}}return i}async function Iee(e,t){let r=new Set,n=await Sr(e);for(let o of n)o.type==="seed"&&o.seedIdentifier===t&&Ju[Object.values(o.chains)[0].pathType]===0&&r.add(o.derivationIndex);let i=0;for(let o=0;o<=r.size;o++)if(!r.has(o)){i=o;break}return kee(e,t,i)}async function kee(e,t,r){try{return await e_e(e,t,r)}catch(n){if(n instanceof Lc)return await kee(e,t,r+1);throw n}}async function e_e(e,t,r){let n=await Tn(e,t),i=(await e.fetchChainAvailability()).enabledAddressTypes,o=La(i),s=await Md(t,r,o[0]),a={version:1,type:"seed",identifier:s,seedIdentifier:t,derivationIndex:r,chains:Xc(e,n,r,o)};return await zi(e,a,!1),a}l();d();var Mee=re(nA());var Dee=re(hx()),Oee=re(Nee()),Uee=re(B0());function s_e(e,t,r){let n=Ju[r];return Uee.keccak256(`${e}:${t}:${n}`)}async function Ree(e,t,r){let n=[];for(let i of r){if(i.addresses.length===0&&i.publicKeys.length===0)throw new Error("Must have at least 1 address or public key in account to add Ledger account.");let o=i.addresses[0]?.pathType||i.publicKeys[0]?.pathType,s=s_e(t,i.derivationIndex,o);Dee.initEccLib(Mee);let a=(0,Oee.ECPairFactory)(Mee),c={...i.addresses.reduce((h,f)=>{let m=Vi.getAddressType(f.pathType);switch(m){case"eip155":case"solana":{h[m]={chainType:m,pathType:f.pathType,publicKey:f.value};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":throw new Error("Bitcoin accounts should be using public key not computed addresses");case"sui":throw new wy("add ledger account");default:Ae(m)}return h},{}),...i.publicKeys.reduce((h,f)=>{let m=Vi.getAddressType(f.pathType);switch(m){case"eip155":case"solana":throw new Error("EVM or Solana accounts should be using addreses directly, not public keys");case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let b=a.fromPublicKey(Buffer.from(f.value,"hex")),w=new Uint8Array(b.publicKey);h[m]={chainType:m,pathType:f.pathType,publicKey:w,addresses:Object.values(En).reduce((S,P)=>({...S,[P]:oi({publicKey:w,addressType:m,networkID:P})}),{})};break}case"sui":throw new wy("add ledger account");default:Ae(m)}return h},{})},u={version:1,type:"ledger",identifier:s,ledgerGroupIdentifier:t,derivationIndex:i.derivationIndex,chains:c};n.push(u),await zi(e,u)}return n}l();d();var Lee=re(B0());function a_e(e){return Lee.keccak256(e)}async function Vee(e,t,r,n){let i=await e.keypairGenerator.generateKeypairFromPrivateKey(r,t),o=await ss(e),s=a_e(i.publicKey);if((o?.privateKeyIdentifiers??[]).includes(s))throw new Dx;let u={version:1,identifier:s,name:n,chainType:t,privateKey:Buffer.from(i.privateKey)},h=s,f;switch(t){case"eip155":case"solana":{f={version:1,type:"privateKey",identifier:h,privateKeyIdentifier:s,publicKey:oi({publicKey:i.publicKey,addressType:t}),chainType:t};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{f={version:1,type:"privateKey",identifier:h,privateKeyIdentifier:s,publicKey:i.publicKey,addresses:Object.values(En).reduce((m,b)=>({...m,[b]:oi({publicKey:i.publicKey,addressType:t,networkID:b})}),{}),chainType:t};break}case"sui":{f={version:1,type:"privateKey",identifier:h,privateKeyIdentifier:s,publicKey:i.publicKey,address:oi({publicKey:i.publicKey,addressType:t}),chainType:t};break}default:Ae(t)}if(!f)throw new Error("unable to create a private key account based on the address type");return await zi(e,f),await bG(e,u),f}l();d();var Kee=re(B0());function c_e(e){return Kee.keccak256(e)}async function Fee(e,t){let r=Object.values(t).find(Boolean);if(!r)throw new Nx;let n=c_e(r),i={version:1,type:"readOnly",identifier:n,addresses:t};return await zi(e,i),i}l();d();async function Hee(e,t){let r=new Set,n=await Sr(e);for(let o of n)o.type==="seedless"&&o.seedIdentifier===t&&Ju[Object.values(o.chains)[0].pathType]===0&&r.add(o.derivationIndex);let i=0;for(let o=0;o<=r.size;o++)if(!r.has(o)){i=o;break}return qee(e,t,i)}async function qee(e,t,r){try{return await u_e(e,t,r)}catch(n){if(n instanceof Lc)return await qee(e,t,r+1);throw n}}async function u_e(e,t,r){let n=await Tn(e,t),i=(await e.fetchChainAvailability()).enabledAddressTypes,o=La(i),s=await Md(t,r,o[0]),a={version:1,type:"seedless",identifier:s,seedIdentifier:t,derivationIndex:r,chains:Xc(e,n,r,o)};return await zi(e,a,!1),a}l();d();l();d();l();d();async function Hm(e,t){let r=await ss(e),n=k0(t),i=r?.seedIdentifiers??[],o=r?.seedlessIdentifiers??[];return i.concat(o).includes(n)}async function l6(e,t,r,n){if((await $E(e)).length>0)throw new RE;if(n.length===0)throw new Mx;if(await Hm(e,t))throw new Kh;let s=k0(t),a=t.fold(h=>({version:1,identifier:s,name:r,entropy:new Uint8Array(h)}));await wG(e,a);let c=[],u=await Tn(e,s);for(let h of n){let f=Md(s,h.derivationIndex,h.derivationPathTypes[0]),m=Xc(e,u,h.derivationIndex,h.derivationPathTypes),b={version:1,type:"seedless",identifier:f,seedIdentifier:s,derivationIndex:h.derivationIndex,chains:m};await zi(e,b),c.push(b)}return c}async function jee(e,t,r){let n=(await e.fetchChainAvailability()).enabledAddressTypes,i=0,o=La(n);return(await l6(e,t,r,[{name:r,derivationIndex:i,derivationPathTypes:o}]))[0]}l();d();l();d();async function d6(e,t,r,n,i=!1){let o=await Hm(e,t);if(!i&&o)throw new Kh;let s=k0(t),a=t.fold(h=>({version:1,identifier:s,name:r,entropy:new Uint8Array(h)}));await xG(e,a);let c=[],u=await Tn(e,s);for(let h of n){let f=await Md(s,h.derivationIndex,h.derivationPathTypes[0]),m=Xc(e,u,h.derivationIndex,h.derivationPathTypes),b={version:1,type:"seed",identifier:f,seedIdentifier:s,derivationIndex:h.derivationIndex,chains:m};await zi(e,b),c.push(b)}return c}async function Wee(e,t,r){let n=(await e.fetchChainAvailability()).enabledAddressTypes,i=0,o=La(n);return(await d6(e,t,r,[{name:r,derivationIndex:i,derivationPathTypes:o}]))[0]}l();d();var zee=re(B0());function f_e(e){return zee.keccak256(e)}async function Gee(e,t){let r=[];for(let{publicKey:n,derivationPath:i,authToken:o}of t){let s=f_e(n),a={version:1,type:"seedVault",identifier:s,derivationPath:i,authToken:o,publicKey:n,chainType:"solana"};r.push(a),await zi(e,a)}return r}l();d();l();d();async function h6(e,t,r){let i=(await Sr(e)).find(o=>o.identifier===t);if(!i)throw new Rc;switch(i.type){case"seed":case"seedless":{let o=i.chains[r]?.pathType;if(!o)throw new Yl;let s=await Tn(e,i.seedIdentifier),a=e.keypairGenerator.generateKeypairFromSeed(s,i.derivationIndex,o);return Xi.from(a.privateKey)}case"privateKey":{let o=await Xl(e,i.privateKeyIdentifier);if(o.chainType!==r)throw new Yl;let s=e.keypairGenerator.generateKeypairFromPrivateKey(Xi.from(o.privateKey),r);return Xi.from(s.privateKey)}case"ledger":case"seedVault":throw new _x;case"readOnly":throw new Cx;default:(o=>{throw new Error("invalid account type")})(i)}}l();d();l();d();l();d();function sN(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function l_e(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function $ee(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function d_e(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");sN(e.outputLen),sN(e.blockLen)}function h_e(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function p_e(e,t){$ee(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var y_e={number:sN,bool:l_e,bytes:$ee,hash:d_e,exists:h_e,output:p_e},Ko=y_e;l();d();var p6=class extends mm{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,Ko.hash(t);let n=cd(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return Ko.exists(this),this.iHash.update(t),this}digestInto(t){Ko.exists(this),Ko.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},aN=(e,t,r)=>new p6(e,t).update(r).digest();aN.create=(e,t)=>new p6(e,t);function m_e(e,t,r,n){Ko.hash(e);let i=jJ({dkLen:32,asyncTick:10},n),{c:o,dkLen:s,asyncTick:a}=i;if(Ko.number(o),Ko.number(s),Ko.number(a),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");let c=cd(t),u=cd(r),h=new Uint8Array(s),f=aN.create(e,c),m=f._cloneInto().update(u);return{c:o,dkLen:s,asyncTick:a,DK:h,PRF:f,PRFSalt:m}}function g_e(e,t,r,n,i){return e.destroy(),t.destroy(),n&&n.destroy(),i.fill(0),r}function Yee(e,t,r,n){let{c:i,dkLen:o,DK:s,PRF:a,PRFSalt:c}=m_e(e,t,r,n),u,h=new Uint8Array(4),f=gm(h),m=new Uint8Array(a.outputLen);for(let b=1,w=0;w<o;b++,w+=a.outputLen){let S=s.subarray(w,w+a.outputLen);f.setInt32(0,b,!1),(u=c._cloneInto(u)).update(h).digestInto(m),S.set(m.subarray(0,S.length));for(let P=1;P<i;P++){a._cloneInto(u).update(m).digestInto(m);for(let N=0;N<S.length;N++)S[N]^=m[N]}}return g_e(a,c,s,u,m)}l();d();l();d();function b_e(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var y6=class extends mm{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=gm(this.buffer)}update(t){Ko.exists(this);let{view:r,buffer:n,blockLen:i}=this;t=cd(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=gm(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ko.exists(this),Ko.output(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let f=s;f<i;f++)r[f]=0;b_e(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=gm(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,h[f],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};var x_e=(e,t,r)=>e&t^~e&r,w_e=(e,t,r)=>e&t^e&r^t&r,S_e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Od=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ud=new Uint32Array(64),m6=class extends y6{constructor(){super(64,32,8,!1),this.A=Od[0]|0,this.B=Od[1]|0,this.C=Od[2]|0,this.D=Od[3]|0,this.E=Od[4]|0,this.F=Od[5]|0,this.G=Od[6]|0,this.H=Od[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let f=0;f<16;f++,r+=4)Ud[f]=t.getUint32(r,!1);for(let f=16;f<64;f++){let m=Ud[f-15],b=Ud[f-2],w=Ya(m,7)^Ya(m,18)^m>>>3,S=Ya(b,17)^Ya(b,19)^b>>>10;Ud[f]=S+Ud[f-7]+w+Ud[f-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:h}=this;for(let f=0;f<64;f++){let m=Ya(a,6)^Ya(a,11)^Ya(a,25),b=h+m+x_e(a,c,u)+S_e[f]+Ud[f]|0,S=(Ya(n,2)^Ya(n,13)^Ya(n,22))+w_e(n,i,o)|0;h=u,u=c,c=a,a=s+b|0,s=o,o=i,i=n,n=b+S|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,o,s,a,c,u,h)}roundClean(){Ud.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},cN=class extends m6{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}},uN=Z9(()=>new m6),e6t=Z9(()=>new cN);l();d();l();d();var Fw=new Error("Unknown error"),g6=new Error("Invalid entropy length"),Kw=new Error("Invalid mn*monic sentence length"),dN=new Error("Invalid checksum"),Zee=new RangeError("Invalid mn*monic word"),lN=new RangeError("Invalid wordlist"),hN=new RangeError("Invalid wordlist index"),ea=(e,t)=>{if(!e)throw t};function Rd(e){ea(e>=128,g6),ea(e<=256,g6),ea(e%32===0,g6)}function Hw(e){ea(e>=12,Kw),ea(e<=24,Kw),ea(e%3===0,Kw)}function qm(e){ea(e.length===2048,lN),ea(e.every(t=>typeof t=="string"),lN)}function pN(e,t){return Hw(e),t(e*4/3)}async function b6(e,t){let r=e.length*8;Rd(r);let n=r/32,i=await t(e),[o]=i,s=8-n,a=o>>>s<<s>>>0,c=new Uint8Array(e.length+1);return c.set(e,0),c[c.length-1]=a,c}function x6(e){let t=(e.length-1)*8;Rd(t);let r=t/32,n=(t+r)/11,i=new ArrayBuffer(n*4),o=new DataView(i),s=0,a=0,c=0;for(let u of e)if(c+=8,a|=u<<32-c,a>>>=0,c>=11){let h=a>>>21;ea(h>=0&&h<=2047,hN),o.setUint32(s*4,h,!0),s++,a<<=11,a>>>=0,c-=11}return ea(s===n,Kw),new Uint32Array(i)}function Jee(e){let t=e.length;Hw(t);let r=11,n=e.length*r,i=new ArrayBuffer(Math.ceil(n/8)),o=new DataView(i),s=new DataView(e.buffer),a=e.length,c=0,u=0,h=0,f=8;for(let m=0;m<a;m++){let b=s.getUint32(m*4,!0);ea(b<2048,hN);let w=r;for(;w>0;){let S=32-w,P=w>=f?f:w;c|=b>>32-S-P&(1<<P)-1,u+=P,c<<=f-P,c>>>=0,w-=P,f-=P,f<=0&&(f=8),u%8===0&&(o.setUint8(h,c),h++,c=0)}}return a%8!==0&&o.setUint8(h,c),new Uint8Array(i)}function yN(e){Hw(e.length);let t=Jee(e),r=t.slice(0,t.length-1);return t.fill(0),r}async function jm(e,t){let r=e.length*8;Rd(r);let n=await b6(e,t),i=x6(n);return n.fill(0),i}function mN(e,t){qm(t);let r=new Set(t),n=new Uint32Array(24),i=0,o="";for(let a=0;a<e.length;a++){let c=e[a],u=c===32,h=a===e.length-1;if(h&&(o+=String.fromCharCode(c)),u||h){ea(r.has(o),Zee);let f=0;for(let m of t){if(o===m)break;f++}n[i++]=f,o=""}else o+=String.fromCharCode(c)}Hw(i);let s=n.slice(0,i);return n.fill(0),s}async function Wm(e,t,r){let n=await jm(e,r),i=new Uint8Array(n.reduce((s,a)=>s+t[a].length+1,-1)),o=0;for(let s of n){o>0&&(i[o++]=32);let a=t[s];for(let c of a)i[o++]=c.charCodeAt(0)}return n.fill(0),i}var fN=Uint8Array.of(109,110,101,109,111,110,105,99);async function T0(e,t,r,n,i){let o=await Wm(e,r,n),s=new Uint8Array(fN.length+t.length);s.set(fN,0),s.set(t,fN.length);let a=await i(o,s,2048,64,"sha512");return s.fill(0),o.fill(0),a}l();d();var zm=re(Xm());l();d();var qw=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"];async function gN(e){switch(e){case"english":return qw}}function bN(e){return t=>new e(t)}function xN(e,t){return async r=>{let n=null,i=null,o=null,s=null,a=null;try{i=yN(r),o=await b6(i,t),s=x6(o);let c=r[r.length-1],u=s[s.length-1];if(c!==u)throw dN;a=e.fromEntropy(i)}catch(c){c instanceof Error?n=c:(console.error(c),n=Fw)}finally{if(i?.fill(0),o?.fill(0),s?.fill(0),n)throw n;return a}}}function wN(e,t){return async r=>{let n=null,i=null,o=null;try{i=mN(r,t),o=await e.fromIndexes(i)}catch(s){s instanceof Error?n=s:(console.error(s),n=Fw)}finally{if(i?.fill(0),n)throw n;return o}}}function SN(e,t){return r=>{let n=null,i=null,o=null;try{i=pN(r,t),o=e.fromEntropy(i)}catch(s){s instanceof Error?n=s:(console.error(s),n=Fw)}finally{if(i?.fill(0),n)throw n;return o}}}var vN=class{static async webCrypto(t){let r=typeof t=="string"?await gN(t):t;qm(r);let n=s=>self.crypto.getRandomValues(new Uint8Array(s)),i=async s=>new Uint8Array(await self.crypto.subtle.digest("SHA-256",s)),o=async(s,a,c,u,h)=>{let f="SHA-"+h.substring(3),m=await self.crypto.subtle.importKey("raw",s,"PBKDF2",!1,["deriveBits"]),b=await self.crypto.subtle.deriveBits({name:"PBKDF2",salt:a,iterations:c,hash:f},m,u*8);return new Uint8Array(b)};return class jw{static fromEntropy=bN(jw);static fromIndexes=xN(jw,i);static fromMnemonic=wN(jw,r);static fromSentenceLength=SN(jw,n);static wordlist=r;#e;constructor(a){Rd(a.length*8),this.#e=a.slice()}deriveSeed=(a=new Uint8Array)=>T0(this.#e,a,r,i,o);getEntropy=()=>this.#e.slice();getIndexes=()=>jm(this.#e,i);getMnemonic=()=>Wm(this.#e,r,i);getSentenceLength=()=>{let a=this.#e.length*8,c=a/32;return(a+c)/11}}}static async nodeCrypto(t){let r=typeof t=="string"?await gN(t):t;qm(r);let n=s=>new Uint8Array((0,zm.randomBytes)(s).buffer),i=s=>new Uint8Array((0,zm.createHash)("sha256").update(s).digest().buffer),o=(...s)=>new Promise((a,c)=>{(0,zm.pbkdf2)(...s,(u,h)=>{if(u)return c(u);a(new Uint8Array(h.buffer))})});return class Ww{static fromEntropy=bN(Ww);static fromIndexes=xN(Ww,i);static fromMnemonic=wN(Ww,r);static fromSentenceLength=SN(Ww,n);static wordlist=r;#e;constructor(a){Rd(a.length*8),this.#e=a.slice()}deriveSeed=(a=new Uint8Array)=>T0(this.#e,a,r,i,o);getEntropy=()=>this.#e.slice();getIndexes=()=>jm(this.#e,i);getMnemonic=()=>Wm(this.#e,r,i);getSentenceLength=()=>{let a=this.#e.length*8,c=a/32;return(a+c)/11}}}static async customCrypto(t,r){let n=typeof t=="string"?await gN(t):t;qm(n);let{random:i,sha256:o,pbkdf2:s}=r;return class zw{static fromEntropy=bN(zw);static fromIndexes=xN(zw,o);static fromMnemonic=wN(zw,n);static fromSentenceLength=SN(zw,i);static wordlist=n;#e;constructor(c){Rd(c.length*8),this.#e=c.slice()}deriveSeed=(c=new Uint8Array)=>T0(this.#e,c,n,o,s);getEntropy=()=>this.#e.slice();getIndexes=()=>jm(this.#e,o);getMnemonic=()=>Wm(this.#e,n,o);getSentenceLength=()=>{let c=this.#e.length*8,u=c/32;return(c+u)/11}}}};async function Xee(e,t){let r,n=await e.secureCache.getSeed(t);if(n)r=n;else{let o=await Nd(e,t);try{r=await o.foldAsync(async a=>T0(a,new Uint8Array,qw,uN,(c,u,h,f)=>Yee(uN,c,u,{c:h,dkLen:f})))}catch{throw new Error("InvalidEntropyBip39")}await e.secureCache.setSeed(t,r)}let i=Xi.from(r);return r.fill(0),i}var v_e=new Xu,A_e=new Yl,E_e=new Fh,wr={unableToLoadAccounts:{status:"unable-to-load-accounts",isOnboarded:!1,reonboardingNeeded:!1},unonboarded:{status:"unonboarded",isOnboarded:!1,reonboardingNeeded:!1},invalidIdentifier:{status:"invalid-identifier",isOnboarded:!0,reonboardingNeeded:!0},fetchIntegrityStorageError:{status:"fetch-integrity-storage-error",isOnboarded:!0,reonboardingNeeded:!0},fetchEntropyStorageError:{status:"fetch-entropy-storage-error",isOnboarded:!0,reonboardingNeeded:!0},fetchPkStorageError:{status:"fetch-pk-storage-error",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropy:{status:"invalid-entropy",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyBip39:{status:"invalid-entropy-bip-39",isOnboarded:!0,reonboardingNeeded:!0},invalidChecksumBits:{status:"invalid-checksum-bits",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyBits:{status:"invalid-entropy-bits",isOnboarded:!0,reonboardingNeeded:!0},invalidChecksum:{status:"invalid-checksum",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthLessThanTwelve:{status:"invalid-entropy-length-less-than-twelve",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthMoreThanTwentyFour:{status:"invalid-entropy-length-more-than-twenty-four",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthWrongWord:{status:"invalid-entropy-length-wrong-word",isOnboarded:!0,reonboardingNeeded:!0},invalidPkAddressType:{status:"invalid-pk-address-type",isOnboarded:!0,reonboardingNeeded:!0},invalidPkIdentifier:{status:"invalid-pk-identifier",isOnboarded:!0,reonboardingNeeded:!0},invalidPk:{status:"invalid-pk",isOnboarded:!0,reonboardingNeeded:!0},internalError:{status:"internal-error",isOnboarded:!0,reonboardingNeeded:!0},safelyOnboarded:{status:"safely-onboarded",isOnboarded:!0,reonboardingNeeded:!1}};async function tte(e,t=!1,r=!1){let n;try{if(n=await Sr(e),n.length===0)return wr.unonboarded}catch{return wr.unableToLoadAccounts}return t?I_e(e,n,r):rte(e,n)}var I_e=async(e,t,r)=>{let n=await rte(e,t);if(n.status!=="safely-onboarded")return n;try{let a=await T_(e);if(a?.version===3&&a?.isSafelyOnboarded)return wr.safelyOnboarded}catch{return wr.fetchIntegrityStorageError}let i=await ete(e,t,"seed",r),o=await ete(e,t,"seedless",r),s=await T_e(e,t);return i.status!=="safely-onboarded"?i:o.status!=="safely-onboarded"?o:s.status!=="safely-onboarded"?s:(await k_(e,{version:3,isSafelyOnboarded:!0,lastCheckedTimestamp:Date.now()}),wr.safelyOnboarded)},rte=async(e,t)=>{try{if((await T_(e))?.isSafelyOnboarded)return wr.safelyOnboarded}catch{return wr.fetchIntegrityStorageError}let r=await Qee(e,t,"seed"),n=await Qee(e,t,"seedless");return r.status!=="safely-onboarded"?r:n.status!=="safely-onboarded"?n:(await k_(e,{version:1,isSafelyOnboarded:!0,lastCheckedTimestamp:Date.now()}),wr.safelyOnboarded)},Qee=async(e,t,r)=>{let n=new Set;for(let i of t)i.type===r&&n.add(i.seedIdentifier);for(let i of n)try{await Nd(e,i)}catch(o){if(o instanceof Error){if(o.message===v_e.message)return wr.invalidIdentifier;if(o.message.match(/ExpoSecureStorage/))return wr.fetchEntropyStorageError}return wr.internalError}return wr.safelyOnboarded},k_e=e=>{if(!(e instanceof Error))return wr.invalidEntropy;let t=[[/ExpoSecureStorage/,wr.fetchEntropyStorageError],[/InvalidEntropyBip39/,wr.invalidEntropyBip39],[/LessThanTwelve/,wr.invalidEntropyLengthLessThanTwelve],[/MoreThanTwentyFour/,wr.invalidEntropyLengthMoreThanTwentyFour],[/WrongWord/,wr.invalidEntropyLengthWrongWord],[/InvalidChecksumBits/,wr.invalidChecksumBits],[/InvalidEntropyBits/,wr.invalidEntropyBits],[/InvalidChecksum/,wr.invalidChecksum]];for(let[r,n]of t)if(e.message.match(r))return n;return wr.invalidEntropy},ete=async(e,t,r,n)=>{let i=new Set;for(let o of t)o.type===r&&i.add(o.seedIdentifier);for(let o of i)try{n?await Xee(e,o):await Tn(e,o)}catch(s){return k_e(s)}return wr.safelyOnboarded},T_e=async(e,t)=>{for(let r of t)if(r.type==="privateKey")try{await h6(e,r.identifier,r.chainType)}catch(n){if(n instanceof Error){if(n.message===A_e.message)return wr.invalidPkAddressType;if(n.message===E_e.message)return wr.invalidPkIdentifier;if(n.message.match(/ExpoSecureStorage/))return wr.fetchPkStorageError}return wr.invalidPk}return wr.safelyOnboarded};l();d();async function nte(e){let t=(await e.fetchChainAvailability()).enabledAddressTypes,r=!1,n=await Sr(e);if(n.length===0)return r;let i=new Map;for(let o of n){if(o.type!=="seed"&&o.type!=="seedless")continue;let s=i.get(o.seedIdentifier);s?s.push(o):i.set(o.seedIdentifier,[o])}for(let[o,s]of i){let a;for(let c of s)if(!(c.chains&&!t_(Object.values(c.chains)[0].pathType)))for(let u of t){if(c.chains[u])continue;a||(a=await Tn(e,o));let f=La([u]),m=Xc(e,a,c.derivationIndex,f);c.chains={...c.chains,...m},r=!0}}return r&&await Fa(e,n),r}l();d();l();d();l();d();l();d();var ste=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ite=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),P_e=BigInt(1),AN=BigInt(2),ote=(e,t)=>(e+t/AN)/t;function B_e(e){let t=ste,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,h=u*u*e%t,f=ps(h,r,t)*h%t,m=ps(f,r,t)*h%t,b=ps(m,AN,t)*u%t,w=ps(b,i,t)*b%t,S=ps(w,o,t)*w%t,P=ps(S,a,t)*S%t,N=ps(P,c,t)*P%t,O=ps(N,a,t)*S%t,C=ps(O,r,t)*h%t,L=ps(C,s,t)*w%t,V=ps(L,n,t)*u%t,j=ps(V,AN,t);if(!EN.eql(EN.sqr(j),e))throw new Error("Cannot find square root");return j}var EN=N8(ste,void 0,void 0,{sqrt:B_e}),w6=D8({a:BigInt(0),b:BigInt(7),Fp:EN,n:ite,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=ite,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-P_e*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=ote(o*e,t),c=ote(-n*e,t),u=Yi(e-a*r-c*i,t),h=Yi(-a*n-c*o,t),f=u>s,m=h>s;if(f&&(u=t-u),m&&(h=t-h),u>s||h>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:f,k1:u,k2neg:m,k2:h}}}},U8),Z6t=BigInt(0);var J6t=w6.ProjectivePoint;async function ate(){let e=w6.utils.randomPrivateKey();return{publicKey:w6.getPublicKey(e),privateKey:e}}var cte=e=>`${os}.perps.agent.keypair.${e}`,S6=async(e,t,r=!1)=>{let n=await __e(e,t);if(n&&!r)return n;let i=await ate();return await C_e(e,i,t),i},__e=async(e,t)=>{let r=cte(t),n=null;try{n=await e.secretsStorage.getSecureValue(r)}catch{}if(!n)return null;let i=n.keyPair,o=new Uint8Array(Buffer.from(i.publicKey.bytes,i.publicKey.encoding)),s=new Uint8Array(Buffer.from(i.privateKey.bytes,i.privateKey.encoding));return{publicKey:o,privateKey:s}},C_e=async(e,t,r)=>{let n=cte(r),i={publicKey:{bytes:Buffer.from(t.publicKey).toString("base64"),encoding:"base64"},privateKey:{bytes:Buffer.from(t.privateKey).toString("base64"),encoding:"base64"}},o={version:1,identifier:r,keyPair:i};await e.secretsStorage.setSecureValue(n,o)};var ute=async(e,t,r=!1)=>{let{publicKey:n}=await S6(e,t,r);return oi({publicKey:n,addressType:"eip155"})};l();d();l();d();var IN="m/23001'/0'";async function v6(e,t){let r;switch(t.type){case"seedless":case"seed":r=t.seedIdentifier;break;case"privateKey":r=t.privateKeyIdentifier;break}let n=await e.secureCache.getClientJWTSigner(r,IN);if(n)return{publicKey:n.p256pubkey,privateKey:n.p256privkey};let i;switch(t.type){case"seedless":case"seed":{i=(await Tn(e,t.seedIdentifier)).fold(s=>new Li(s));break}case"privateKey":{let o=await Xl(e,t.privateKeyIdentifier);i=new Li(o.privateKey);break}}try{let o=i.derivePath({ellipticCurve:"ed25519",derivationPath:IN,bytesInPrivateKey:64}),s=M8(o.secretKey,Nw.CURVE.n),a=Nw.getPublicKey(s);return await e.secureCache.setClientJWTSigner(r,IN,{p256pubkey:a,p256privkey:s}),{publicKey:a,privateKey:s}}finally{i.cleanup()}}var N_e=e=>e.type==="seed"||e.type==="seedless"||e.type==="privateKey",fte=async(e,t)=>{let r=await Sr(e);if(r.length===0)throw new Error("No accounts, unable to get authentication public key.");let i=r.filter(N_e).find(a=>a.type==="privateKey"?a.privateKeyIdentifier===t:a.seedIdentifier===t);if(!i)throw new Error("Unable to derive authentication public key for given secret identifier.");let o=await v6(e,i);return xa(Buffer.from(o.publicKey))};l();d();var lte=re(Ho());l();d();var M_e="m/24001'/0'",A6=async e=>{let t=await Sr(e);if(t.length===0)throw new Error("No accounts, unable to derive cash key.");let r=t[0],n;switch(r.type){case"seed":case"seedless":{n=(await Tn(e,r.seedIdentifier)).fold(o=>new Li(o));break}case"privateKey":{let i=await Xl(e,r.privateKeyIdentifier);n=new Li(i.privateKey);break}default:throw new Error(`Account type ${r.type} is not supported, unable to derive cash key.`)}try{let i=n.derivePath({ellipticCurve:"ed25519",derivationPath:M_e,bytesInPrivateKey:64});return{publicKey:i.publicKey,privateKey:i.secretKey}}finally{n.cleanup()}};var dte=async e=>{let{publicKey:t}=await A6(e);return lte.default.encode(t)};l();d();async function hte(e,t){let r=await Sr(e);if(r.length===0)throw new Rc;let n=r.filter(i=>i.identifier!==t);await Fa(e,n),await I_(e)}l();d();async function pte(e,t,r){let n=await Sr(e);if(r<0||r>=n.length)throw new Rc;let i=n.map(s=>s.identifier).indexOf(t);if(i<0)throw new Rc;if(i===r)return;let o=n[i];n.splice(i,1),n.splice(r,0,o),await Fa(e,n)}l();d();async function E6(e,t,r){let n=t.chains[r]?.pathType;if(!n)return cr("invalidAddressType",`Seed Account does not contain a chain address for the chain type ${r}.`);let i=await Tn(e,t.seedIdentifier);return e.keypairGenerator.generateKeypairFromSeed(i,t.derivationIndex,n)}async function yte(e,t,r){let n=await Sr(e),i=n.find(o=>o.identifier===t);if(!i)return cr("invalidAccountId",`Vault (${n.length} account(s) found) does not contain an account for the given identifier: ${t}`);if("isAgentWallet"in r)switch(i.type){case"seedless":case"seed":case"privateKey":{let o=await S6(e,i.identifier);return e.vaultSigner.signWithKeypair(o,r)}default:return cr("unsupportedOperation","Invalid signingAccount type provided for paramType")}if("isJWT"in r)switch(i.type){case"seedless":case"seed":case"privateKey":{let o=await v6(e,i);return e.vaultSigner.signWithKeypair(o,r)}default:return cr("unsupportedOperation","Invalid signingAccount type provided for paramType")}if("isCash"in r)switch(i.type){case"seedless":case"seed":case"privateKey":{let o=await A6(e);return e.vaultSigner.signWithKeypair(o,r)}default:return cr("unsupportedOperation","Invalid signingAccount type provided for paramType")}switch(i.type){case"seedless":case"seed":{switch(r.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{enabledAddressTypes:o}=await e.fetchChainAvailability(),s={},a=Object.keys(i.chains).filter(c=>Jf.safeParse(c).success).filter(c=>o.includes(c));for(let c of a){let u=await E6(e,i,c);if("status"in u&&u.status==="error")return u;s[c]=u}return e.vaultSigner.signWithKeypair(s,r)}case"eip155":{let o=await E6(e,i,r.chainType);return"status"in o&&o.status==="error"?o:e.vaultSigner.signWithKeypair(o,r)}case"solana":{let o=await E6(e,i,r.chainType);return"status"in o&&o.status==="error"?o:e.vaultSigner.signWithKeypair(o,r)}case"sui":{let o=await E6(e,i,r.chainType);return"status"in o&&o.status==="error"?o:e.vaultSigner.signWithKeypair(o,r)}}break}case"privateKey":{let o=await Xl(e,i.privateKeyIdentifier);if(o.chainType!==r.chainType)return cr("invalidAddressType",`Private Key account from accountID is a different chain type from params. Expected ${o.chainType}, got ${r.chainType}`);let s=e.keypairGenerator.generateKeypairFromPrivateKey(Xi.from(o.privateKey),r.chainType);switch(r.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return e.vaultSigner.signWithKeypair({[r.chainType]:s},r);case"eip155":return e.vaultSigner.signWithKeypair(s,r);case"solana":return e.vaultSigner.signWithKeypair(s,r);case"sui":return e.vaultSigner.signWithKeypair(s,r)}break}case"ledger":{let o=i.chains[r.chainType];if(!o)return cr("invalidAddressType",`Ledger Account does not contain a chain address for the chain type ${r.chainType}.`);let s=xS.safeParse({pathType:o.pathType,index:i.derivationIndex});if(!s.success)return cr("invalidDerivationPath","Unsupported Derivation Path. Ledger account derivation path type is incompatible with ChainType in signing params.");let a=pk(s.data);return e.vaultSigner.signWithHardware(t,a,r)}case"seedVault":{let{authToken:o,derivationPath:s,chainType:a}=i;return a!==r.chainType?cr("invalidAddressType",`Solana Seed Vault account from accountID is a different chain type from params. Expected ${a}, got ${r.chainType}`):e.vaultSigner.signWithSolanaSeedVault(o,s,r)}case"readOnly":return cr("unsupportedOperation","Read Only Accounts cannot sign transactions.");default:(o=>{throw new Error("invalid account type")})(i)}}l();d();function kN(e){switch(e.type){case"seed":return Gw(e);case"seedless":return $w(e);case"privateKey":return PN(e);case"ledger":return TN(e);case"seedVault":return BN(e);case"readOnly":return e}}function TN(e){let{chains:t,version:r,...n}=e,i={};for(let o of Object.keys(t)){let s=t[o];if(!s)continue;let a;switch(s.chainType){case"solana":case"eip155":{let{publicKey:c,...u}=s;a={...u,address:c};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:c,...u}=s,h=Object.values(En).reduce((f,m)=>{let b=c?c[m]:void 0;if(!b)throw new Vh;return{...f,[m]:b}},{});a={...u,addresses:h};break}case"sui":{a=s;break}}i[o]=a}return{...n,chains:i}}function PN(e){switch(e.chainType){case"solana":case"eip155":{let{publicKey:t,version:r,...n}=e;return{...n,address:t}}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:t,version:r,...n}=e,i=Object.values(En).reduce((o,s)=>{let a=t?t[s]:void 0;if(!a)throw new Vh;return{...o,[s]:a}},{});return{...n,addresses:i}}case"sui":return e}}function BN(e){let{publicKey:t,version:r,...n}=e;return{...n,address:t}}function Gw(e){let{chains:t,version:r,...n}=e,i={};for(let o of Object.keys(t)){let s=t[o];if(!s)continue;let a;switch(s.chainType){case"solana":case"eip155":{let{publicKey:c,...u}=s;a={...u,address:c};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:c,...u}=s,h=Object.values(En).reduce((f,m)=>{let b=c?c[m]:void 0;if(!b)throw new Vh;return{...f,[m]:b}},{});a={...u,addresses:h};break}case"sui":{a=s;break}}i[o]=a}return{...n,chains:i}}function $w(e){let{chains:t,version:r,...n}=e,i={};for(let o of Object.keys(t)){let s=t[o];if(!s)continue;let a;switch(s.chainType){case"solana":case"eip155":{let{publicKey:c,...u}=s;a={...u,address:c};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:c,...u}=s,h=Object.values(En).reduce((f,m)=>{let b=c?c[m]:void 0;if(!b)throw new Vh;return{...f,[m]:b}},{});a={...u,addresses:h};break}case"sui":a=s}i[o]=a}return{...n,chains:i}}l();d();var NN=re(Ho());var D_e=new Set(Object.values(_t)),mte=e=>e!==null&&D_e.has(e),CN=e=>{},_N=(e,t)=>{let r=t==="seed"?"se*d":"se*dless";if(e.derivationIndex===null||e.derivationIndex<0)return oe.addBreadcrumb("Auth",`Invalid derivation index for ${r} account: ${e.derivationIndex}`,"error"),null;let n=e.addresses.reduce((o,s)=>{if(s.pathType==="privateKey")return oe.addBreadcrumb("Auth",`Invalid path type when converting synced account to ${r} account: ${s.pathType}`,"error"),o;let a=mB(s.pathType);switch(s.pathType){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":Fl(a)?o[a]={chainType:a,publicKey:Buffer.from(s.publicKey.replace("0x",""),"hex"),addresses:{"bip122:000000000019d6689c085ae165831e93":s.address},pathType:s.pathType}:oe.addBreadcrumb("Auth",`Invalid address type used when converting synced account to ${r} account.`,"error",{addressType:a,pathType:s.pathType});break;case"bip44Root":case"bip44":case"bip44Change":case"deprecated":a==="solana"?o[a]={chainType:a,publicKey:NN.default.encode(Buffer.from(s.publicKey.replace("0x",""),"hex")),pathType:s.pathType}:oe.addBreadcrumb("Auth",`Invalid address type used when converting synced account to ${r} account.`,"error",{addressType:a,pathType:s.pathType});break;case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":a==="eip155"?o[a]={chainType:a,publicKey:s.address,pathType:s.pathType}:oe.addBreadcrumb("Auth",`Invalid address type used when converting synced account to ${r} account.`,"error",{addressType:a,pathType:s.pathType});break;case"bip44Sui":a==="sui"?o[a]={chainType:a,publicKey:Q6(s.publicKey),address:s.address,pathType:s.pathType}:oe.addBreadcrumb("Auth",`Invalid address type used when converting synced account to ${r} account.`,"error",{addressType:a,pathType:s.pathType});break;default:CN(s.pathType)}return o},{});if(Object.entries(n).length===0)return oe.captureError(new Error(`Unable to convert synced account to ${r} account. No addresses found.`),"Auth"),null;let i=$l(e);return i?{version:1,type:t,identifier:e.accountHash,seedIdentifier:i,derivationIndex:e.derivationIndex,chains:n}:(oe.captureError(new Error(`Unable to convert synced account to ${r} account. Missing account origin.`),"Auth"),null)},gte=e=>{let t=$l(e);if(!t)return oe.captureError(new Error("Unable to convert synced account to pk account. Missing account origin."),"Auth"),null;let r=e.addresses[0];if(!r)return oe.captureError(new Error("Unable to convert synced account to pk account. No address."),"Auth"),null;let n;try{n=Uc(r.networkId,r.address)}catch{return oe.captureError(new Error("Unable to convert synced account to pk account. Unable to determine address type."),"Auth"),null}return Fl(n)?{version:1,type:"privateKey",identifier:e.accountHash,privateKeyIdentifier:t,publicKey:Buffer.from(r.publicKey.replace("0x",""),"hex"),addresses:{"bip122:000000000019d6689c085ae165831e93":r.address},chainType:n}:n==="solana"?{version:1,type:"privateKey",identifier:e.accountHash,privateKeyIdentifier:t,publicKey:NN.default.encode(Buffer.from(r.publicKey.replace("0x",""),"hex")),chainType:n}:n==="eip155"?{version:1,type:"privateKey",identifier:e.accountHash,privateKeyIdentifier:t,publicKey:r.address,chainType:n}:n==="sui"?{version:1,type:"privateKey",identifier:e.accountHash,privateKeyIdentifier:t,publicKey:Q6(r.publicKey),address:r.address,chainType:n}:(Ae(n),null)},bte=async(e,t)=>{let r=await Sr(e),n=await ss(e),i=new Set(n.seedIdentifiers),o=new Set(n.seedlessIdentifiers),s=new Set(n.privateKeyIdentifiers);for(let c=0;c<r.length;++c){let u=r[c],h=t[u.identifier];if(delete t[u.identifier],!h||u.type!=="readOnly")continue;let f=_y(h),m=$l(h);if(!mte(f)||!m)continue;let b=null;switch(f){case"seed":case"seedless":try{(i.has(m)||o.has(m))&&(b=_N(h,f))}catch{}break;case"privateKey":try{s.has(m)&&(b=gte(h))}catch{}break;default:CN(f)}b&&(r[c]=b)}let a=[...r];for(let c of Object.values(t)){if(c.addresses.length===0)continue;let u=_y(c),h=$l(c);if(!(!mte(u)||!h))switch(u){case"seed":if(i.has(h)){let f=_N(c,u);f&&a.push(f)}break;case"seedless":if(o.has(h)){let f=_N(c,u);f&&a.push(f)}break;case"privateKey":if(s.has(h)){let f=gte(c);f&&a.push(f)}break;default:CN(u)}}return await Fa(e,a),!1};function O_e(e){return{addSeedWithDefaultAccount:(t,r)=>Wee(e,t,r).then(Gw),addAccountForExistingSeed:t=>Iee(e,t).then(Gw),addSeedWithMultipleAccounts:(t,r,n,i)=>d6(e,t,r,n,i).then(o=>o.map(Gw)),addPrivateKeyAccount:(t,r,n)=>Vee(e,t,r,n).then(PN),addLedgerAccounts:(t,r)=>Ree(e,t,r).then(n=>n.map(TN)),addSolanaSeedVaultAccounts:t=>Gee(e,t).then(r=>r.map(BN)),addReadonlyAccount:t=>Fee(e,t),deriveAddresses:()=>nte(e),removeAccount:t=>hte(e,t),reorderAccount:(t,r)=>pte(e,t,r),exportEntropy:t=>Nd(e,t),exportPrivateKey:(t,r)=>h6(e,t,r),fetchAllAccounts:()=>Sr(e).then(t=>t.map(kN)),fetchAllSeedMetas:()=>mG(e),fetchAllSeedlessMetas:()=>$E(e),sign:(t,r)=>yte(e,t,r),isExistingSeed:t=>Hm(e,t),checkVaultIntegrity:t=>tte(e,t),clearVault:()=>SG(e),addSeedlessWithMultipleAccounts:(t,r,n)=>l6(e,t,r,n).then(i=>i.map($w)),addSeedlessWithDefaultAccount:(t,r)=>jee(e,t,r).then($w),addAccountForExistingSeedless:t=>Hee(e,t).then($w),getAuthenticationPublicKey:t=>fte(e,t),getCashAddress:()=>dte(e),getAgentAddress:(t,r)=>ute(e,t,r),syncAccounts:t=>bte(e,t)}}l();d();l();d();var xte=()=>N0(Ei,e=>new I6(e))(),I6=class{#e;constructor(t){this.#e=t}identifyAccount=async(t,r,n)=>{let i=!!r.addresses.find(m=>te.isSolanaNetworkID(m.networkID)),o=!!r.addresses.find(m=>te.isEthereumNetworkID(m.networkID)),s=!!r.addresses.find(m=>te.isBitcoinNetworkID(m.networkID)),a=!!r.addresses.find(m=>te.isSuiNetworkID(m.networkID)),c={hasSolanaAddress:i,hasEthereumAddress:o,hasBitcoinAddress:s,hasSuiAddress:a},u=n.enabledChainIDs.map(m=>te[m].name).join(", "),h=new Set,f=new Set;for(let m of t)switch(m.type){case"seed":case"seedless":h.add(m.seedIdentifier);break;case"readOnly":break;case"privateKey":case"ledger":case"seedVault":f.add(m.identifier);break;default:Ae(m);break}switch(r.type){case"seed":case"seedless":this.#e.identify(r.identifier,{...c,accountType:r.type,rootID:r.seedIdentifier,rootIds:Array.from(h),accountIds:Array.from(f),isReadOnly:!1,enabledChains:u});break;case"readOnly":this.#e.identify(r.identifier,{...c,accountType:r.type,isReadOnly:!0,enabledChains:u});break;case"privateKey":case"ledger":case"seedVault":this.#e.identify(r.identifier,{...c,accountType:r.type,rootIds:Array.from(h),accountIds:Array.from(f),isReadOnly:!1,enabledChains:u});break;default:Ae(r)}};onAppSessionStart=t=>{let r=new Map;for(let n of t){if(n.type==="readOnly")continue;let{addresses:i,identifier:o}=n;for(let s of i){let a=te.getChainName(s.networkID),c={type:n.type,accountId:o,id:s.address};if(!r.get(a))r.set(a,[c]);else{let u=r.get(a)??[];r.set(a,[...u,c])}}}this.#e.capture("appSessionStart",{data:{ids:Object.fromEntries(r)}})}};l();d();l();d();l();d();l();d();l();d();var P6=re(Fr());l();d();l();d();l();d();l();d();var wte=["emojiSkinTone","isAnalyticsOptedOut","selectedCurrency","reportedFeedTokens","dAppBrowserBookmarks","userRecentAddresses","userSavedAddresses","accountIdToHiddenMints","accountIdToCollectibleVisibilitySettings","enabledChainsOverrideSettings","disabledChains","disabledAddressTypes","interstitials","userExplorerPreferenceV2"],k6=e=>wte.some(t=>t===e||e.includes(`.${t}`)),T6=(e,t)=>`/user/v1/users/${e}/wallet-storage${t?`/${encodeURIComponent(t)}`:""}`;l();d();var Ste=async({data:e,key:t},r)=>{let n=!1;return t&&e&&(k6(t)?await r.set(t,e).then(()=>{n=!0,oe.addBreadcrumb("storage",`\u2705 Synced data to disk: ${t} => ${e}`,"debug")}).catch(i=>{oe.addBreadcrumb("storage",`\u274C Failed to sync data to disk: ${t} => ${e} => Error: ${i}`,"debug")}):oe.addBreadcrumb("storage",`\u2623\uFE0F Incompatible Synced data found: ${t} => ${e}`,"debug")),!t&&e&&typeof e=="object"&&!Array.isArray(e)&&await Promise.all(Object.entries(e).map(([i,o])=>{if(k6(i)&&o)return r.set(i,o).then(()=>{n=!0,oe.addBreadcrumb("storage",`\u2705 Synced data to disk: ${i} => ${JSON.stringify(o)}`,"debug")}).catch(s=>{oe.addBreadcrumb("storage",`\u274C Failed to sync data to disk: ${i} => ${JSON.stringify(o)} => Error: ${s}`,"debug")});oe.addBreadcrumb("storage",`\u2623\uFE0F Incompatible Synced data found: ${i} => ${JSON.stringify(o)}`,"debug")})),n};var MN=2,DN=500,Yw=class e{static#e;#t;#r=null;#n=!1;constructor(t){this.#t=t}static getInstance(t){return this.#e||(this.#e=new e(t)),this.#e}setUserId(t){this.#r=t,(!t||t===null)&&(this.#n=!1)}clear(){this.#r=null,this.#n=!1}async initialize({userID:t,processor:r,queryClient:n}){if(this.#n&&this.#r&&this.#r===t||!t)return;this.#r=t,this.#n=!0,await this.syncFromCloud({processor:r})&&await n.invalidateQueries({refetchType:"active"}),oe.addBreadcrumb("storage","\u2705 Initialized SyncedStorage","debug")}async syncFromCloud({key:t,processor:r=Ste}){if(!this.#n||!this.#r)return!1;try{let n=T6(this.#r,t),i=await _n.api().bearer(!0).retry(MN,DN).get(n);if(a1(i))return await r({key:t,data:i.data},this.#t);oe.addBreadcrumb("storage",`\u274C Failed to sync from cloud: ${JSON.stringify(i)}`,"debug")}catch(n){oe.addBreadcrumb("storage",`\u274C Failed to sync from cloud: ${JSON.stringify(n)}`,"debug")}return!1}async syncToCloud(t,r){if(!this.#n||!this.#r)return!1;try{let n=T6(this.#r,t),i=await _n.api().bearer(!0).retry(MN,DN).put(n,{value:r});if(a1(i))return oe.addBreadcrumb("storage",`\u2705 Synced to cloud: ${t} => ${JSON.stringify(r)}`,"debug"),!0;oe.addBreadcrumb("storage",`\u274C Failed to sync to cloud: ${t} => ${JSON.stringify(r)} => Error: ${JSON.stringify(i)}`,"debug")}catch(n){oe.addBreadcrumb("storage",`\u274C Failed to sync to cloud: ${JSON.stringify(n)}`,"debug")}return!1}async get(t){return this.#t.get(t)}async getAll(t){return this.#t.getAll(t)}async remove(t){if(Array.isArray(t))throw new Error(`[SyncedStorage.remove] Error removing keys (${t}): Batch removal not implemented`);if(await this.#t.remove(t),!(!this.#n||!this.#r))try{let r=T6(this.#r,t),n=await _n.api().bearer(!0).retry(MN,DN).delete(r);a1(n)?oe.addBreadcrumb("storage",`\u2705 Removed from cloud: ${t}`,"debug"):oe.addBreadcrumb("storage",`\u274C Failed to remove from cloud: ${t} => Error: ${JSON.stringify(n)}`,"debug")}catch(r){oe.addBreadcrumb("storage",`\u274C Failed to remove from cloud: ${JSON.stringify(r)}`,"debug")}}async set(t,r){await this.#t.set(t,r),await this.syncToCloud(t,r)}async setAll(t){throw new Error(`[SyncedStorage.setAll] Error setting keys(s) (${Object.keys(t)}): Method not implemented`)}subscribe(t){return this.#t.subscribe(t)}async update(t,r){await this.#t.update(t,r);let n=await this.get(t);await this.syncToCloud(t,n)}};l();d();var vte=CM(null);function xo(){let e=Z6(vte),t=Z6(X6);if(!t)throw new Error("useSyncedStorage must be used within a ContextProvider with StorageContext set");return e||t}l();d();var Ate=new WeakMap,Ete=()=>{let e=DM(),t=xo();if(t instanceof Yw){let r=Ate.get(t);return r===void 0&&(r=new MM(t),Ate.set(t,r)),r}return e},U_e=J6(e=>Ete().get(e)),R_e=J6(e=>NM(async t=>Ete().set(e,t)));var oc=()=>{let e=xo(),{data:[t,r],isLoading:n}=uc(["enable-monad","enable-arbitrum"]);return Yt({enabled:!n,queryKey:IE.chainAvailability({isMonadEnabled:t,isArbitrumEnabled:r}),queryFn:()=>Rh(e,t,r)})};l();d();var ON=()=>{let e=Ce(),t=xo();return Ne({mutationFn:async({addressTypes:n})=>{for(let i of n)await OW(i,t);Zu(e)}})};l();d();var L_e=()=>{let e=xo(),t=Ce();return Ne({mutationFn:async({chainIDs:n})=>{for(let i of n)await CW(i,e);Zu(t)}})};l();d();l();d();l();d();var Gm=re(Fr()),Ite=(0,Gm.createContext)(null);function V_e({children:e,vault:t}){return Gm.default.createElement(Ite.Provider,{value:t},e)}function Ir(){let e=(0,Gm.useContext)(Ite);if(!e)throw new Error("useVaultProxy must be used within a VaultProxyProvider");return e}var UN=()=>{let e=Ce(),t=xo(),r=Ir();return Ne({mutationFn:async({addressTypes:i})=>{for(let o of i)await DW(o,t);await r.deriveAddresses(),await Zu(e)}})};l();d();var K_e=()=>{let e=xo(),t=Ce(),r=Ir();return Ne({mutationFn:async({chainIDs:i})=>{for(let o of i)await UB(o,e);await r.deriveAddresses(),await Zu(t)}})};l();d();var F_e=()=>{let e=xo(),{mutateAsync:t}=ON(),{mutateAsync:r}=UN();return Ne({mutationFn:async({addressTypes:i})=>{if(await NW(e))await r({addressTypes:i});else{let s=new Set(te.bitcoin.addressTypes);for(let a of i)s.delete(a);if(s.size===te.bitcoin.addressTypes.length&&s.delete("bip122_p2wpkh"),s.size>0){let a=Array.from(s);await t({addressTypes:a})}}}})};var RN=te.getAllChainIDs().filter(e=>te.isChainDefaultEnabled(e,!1)),kte=RN.map(e=>te.getMainnetNetworkID(e)),H_e=kte.flatMap(e=>te.getAddressTypes(e)),Tte=()=>oc().data?.enabledAddressTypes??H_e,$m=()=>oc().data?.enabledChainIDs??RN,kPt=()=>oc().data?.supportedChainIDs??RN,TPt=e=>{let t=oc().data;return t?e?t.enabledNetworkIDs:t.enabledMainnetOnlyNetworkIDs:kte},PPt=()=>$m().length===1,BPt=()=>{let e=$m();return(0,P6.useMemo)(()=>te.getChainIDs("eip155").some(t=>e.includes(t)),[e])},_Pt=()=>{let e=$m();return(0,P6.useMemo)(()=>e.length===1&&e.includes("solana"),[e])},CPt=e=>{let t=$m();return(0,P6.useMemo)(()=>e.map(r=>t.includes(r)),[t,e])};l();d();l();d();l();d();var Pte=async(e,t)=>(await Fx(e,t))?.balance,Bte=async e=>await Hx(e);l();d();var Zi="@phantom/accounts",LN=`${Zi}:account-identifier`,VN=`${Zi}:selected-account`,B6=`${Zi}:all-accounts`,KN=`${Zi}:all-seeds`,q_e=`${Zi}:all-secrets`,qPt=`${Zi}:account-balance`,yt={accountBalance(e){return[`${Zi}:account-balance`,{identifier:e}]},allAccountBalances(){return[`${Zi}:all-account-balances`]},allAccounts(e){let t=e?{chainAvailability:{enabledChainIDs:e.enabledChainIDs,enabledAddressTypes:e.enabledAddressTypes}}:{};return[B6,{chainAvailabilityQueryObject:t}]},allSeeds(e){return[KN,e]},allSecretIdentifiers(){return[q_e]},developerMode(){return[`${Zi}:developer-mode`]},accountIdentifier(e){return[LN,{identifier:e}]},selectedAccount(e){let t=e?{chainAvailability:{enabledChainIDs:e.enabledChainIDs,enabledAddressTypes:e.enabledAddressTypes}}:{};return[VN,t]},selectedAccountIdentifier(){return[`${Zi}:selected-account-identifier`]},selectedNetworkSetting(e){return[`${Zi}:selected-network-setting`,{isSuiTestnetEnabled:e}]},trustedApps(){return[`${Zi}:trusted-apps`]},migratedWithInvalidChecksum(){return[`${Zi}:migrated-with-invalid-checksum`]},syncUserAccounts(){return[`${Zi}:sync-user-accounts`]},accountsEligibleToClaim(e,t,r){return[`${Zi}:are-accounts-eligible-to-claim`,{username:e,selectedAccountIdentifier:t,solanaAddresses:r}]},patchProfileAddresses(e){return[`${Zi}:patch-profile-addresses`,e]}};var j_e=(e,t=!0)=>{let r=ht(),n=t&&!!e,i=yt.accountBalance(e||"");return Yt({queryKey:i,queryFn:async()=>{try{return e&&await Pte(r,e)||null}catch(s){throw s instanceof Error&&oe.captureError(s,"account"),s}},enabled:n})},W_e=(e=!0)=>{let t=ht(),r=yt.allAccountBalances();return Yt({queryKey:r,queryFn:async()=>{try{return await Bte(t)}catch(i){throw i instanceof Error&&oe.captureError(i,"account"),i}},enabled:e})};l();d();function P0(e){let{isSuccess:t,data:r}=oc(),n=Ir(),i=yt.allAccounts(r),o=ht();return Yt({enabled:t,queryKey:i,queryFn:async()=>{if(!r)throw new Error(Ux);let a=await jh(n,o,r);return oe.addBreadcrumb("account",`Finished fetching all accounts. Num accounts: ${a.length}`,"info"),a},select:e})}var _6=()=>{let{isSuccess:e,isFetching:t,data:r=[]}=P0(),n=e&&!t&&!!r.length;return n?{enabled:n,accounts:r}:{enabled:n}};l();d();var lr=async e=>{await e.invalidateQueries({queryKey:[KN]}),await e.invalidateQueries({queryKey:[B6],predicate:t=>t.queryKey[0]===B6}),await e.invalidateQueries({queryKey:[LN]}),await C6(e)},C6=async e=>{await e.invalidateQueries({predicate:t=>typeof t.queryKey[0]=="string"&&t.queryKey[0]===VN}),await e.invalidateQueries({queryKey:yt.selectedAccountIdentifier()})};RB(lr);l();d();l();d();l();d();var Bi=[];for(let e=0;e<256;++e)Bi.push((e+256).toString(16).slice(1));function _te(e,t=0){return(Bi[e[t+0]]+Bi[e[t+1]]+Bi[e[t+2]]+Bi[e[t+3]]+"-"+Bi[e[t+4]]+Bi[e[t+5]]+"-"+Bi[e[t+6]]+Bi[e[t+7]]+"-"+Bi[e[t+8]]+Bi[e[t+9]]+"-"+Bi[e[t+10]]+Bi[e[t+11]]+Bi[e[t+12]]+Bi[e[t+13]]+Bi[e[t+14]]+Bi[e[t+15]]).toLowerCase()}l();d();var FN,z_e=new Uint8Array(16);function HN(){if(!FN){if(typeof self.crypto>"u"||!self.crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");FN=self.crypto.getRandomValues.bind(self.crypto)}return FN(z_e)}l();d();l();d();var G_e=typeof self.crypto<"u"&&self.crypto.randomUUID&&self.crypto.randomUUID.bind(self.crypto),qN={randomUUID:G_e};function $_e(e,t,r){if(qN.randomUUID&&!t&&!e)return qN.randomUUID();e=e||{};let n=e.random??e.rng?.()??HN();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){if(r=r||0,r<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)t[r+i]=n[i];return t}return _te(n)}var jN=$_e;l();d();function N6(){let e=ht(),t=Ce();return Ne({mutationFn:async({metadataBatch:o})=>{oe.addBreadcrumb("account",`Adding Account Metadata Batch: ${Object.entries(o).length} entries`,"info"),await Kx(e,o)},onSuccess:async()=>{await lr(t)},onError:o=>{oe.captureError(o,"account")}})}function Y_e(){let{mutateAsync:e}=N6(),t=ht(),r=Ce(),n=Ir(),{t:i}=hu();return Ne({mutationFn:async({accounts:c,pairedBLEDevice:u})=>{let h=jN(),f=await n.connectLedgerAccounts(h,c),m=f.reduce((w,S,P)=>{let{name:N,accountIndex:O}=c[P],C;!N||N.length===0?C=i("onboardingImportAccountsLedgerAccountName",{walletIndex:1+O}):C=N;let L;u&&(L=[{...u,version:1,connectionType:"ble",deviceType:"ledger"}]);let V={name:C,icon:void 0,connectedDevices:L};return w[S.identifier]=V,w},{});await e({metadataBatch:m});let b=f[0]?.identifier;return b||(b=(await n.fetchAllAccounts())[0].identifier),await rs(t,b),r.setQueryData(yt.selectedAccountIdentifier(),b),f},onSettled:async()=>{await lr(r)},onError:c=>oe.captureError(c,"account")})}l();d();var Cte=re(Fr());var Z_e=e=>{if(e){switch(e.type){case"seed":case"seedless":return e.seedIdentifier;case"privateKey":case"ledger":case"seedVault":case"readOnly":return}Ae(e)}};function ta({select:e,updateESPUserProperties:t}={}){let r=(0,Cte.useMemo)(()=>Ci.isFeatureEnabled("frontend-enable-esp-user-properties-update"),[]),{isSuccess:n,data:i}=oc(),o=_6(),s=o.enabled&&n,a=l1(),c=ht(),u=xte(),h=yt.selectedAccount(i);return Yt({queryKey:h,queryFn:async()=>{try{if(!i)throw new Error(Ux);if(!o.enabled)throw new Error(Cy);let m=await Qu(o.accounts,c);if(oe.addBreadcrumb("account",`Finished fetching selected account: ${m.identifier}`,"info"),r&&t){let b=m.addresses.map(w=>w.address)??[];Promise.all(b.map(w=>t(w,mf.language)))}return Ci.setSubjectAttributes({rootID:Z_e(m)}),a(),u.identifyAccount(o.accounts,m,i),m}catch(m){throw m instanceof Error&&oe.captureError(m,"account"),m}},enabled:s,select:e})}l();d();function J_e(){let e=ht(),t=Ce();return Ne({mutationFn:async({identifier:i,balance:o})=>(await v_(e,i,o),{identifier:i,balance:o}),onSuccess:({identifier:i,balance:o})=>{i&&t.invalidateQueries({queryKey:yt.accountBalance(i)}),o&&t.invalidateQueries({queryKey:yt.allAccountBalances()})}})}l();d();var Nte=re(Fr());var Zw=()=>{let{data:e}=ta();return(0,Nte.useMemo)(()=>{let t=e?.addresses??[];return[...new Set(t.map(r=>r.networkID))]},[e])};l();d();l();d();function WN(){let e=ht();return Yt(Mte(e))}function Mte(e){return{queryKey:yt.developerMode(),queryFn:async()=>await e.get("developerMode")||LB}}var X_e=()=>{let{data:e}=WN();return!!e?.isDeveloperMode},Q_e=()=>Zw().some(t=>te.isLocalNetworkID(t));l();d();var Dte=re(Fr());var e9e=e=>{let t=(0,Dte.useMemo)(()=>{if(e){if(t9e(e))return n=>n.address===e.address&&n.networkID===e.networkID;if(te.isNetworkID(e))return n=>n.networkID===e;if(v5(e))return n=>n.addressType===e;throw new Error(`Unrecognized filter type: ${e}`)}else return()=>!1},[e]);return ta({select:n=>{let i=n.addresses.filter(t);if(i.length>1)throw new Error(`Multiple addresses match filter: ${e}`);return i[0]}})};function t9e(e){return typeof e=="object"&&"address"in e&&(typeof e.address=="string"||e.address===void 0)&&"networkID"in e}l();d();var Ote=re(Fr()),r9e=({accountBalance:e,accountId:t,enabled:r,value:n,setAccountBalance:i})=>{(0,Ote.useEffect)(()=>{if(r&&t&&n!==void 0&&n!==e){let o=Date.now();i({identifier:t,balance:{timestamp:o,value:n}})}},[e,t,r,n,i])};l();d();l();d();function n9e(e){let t=_6(),r=t.enabled&&e.length>0,n=yt.accountIdentifier(e);return Yt({enabled:r,queryKey:n,queryFn:async()=>{try{if(oe.addBreadcrumb("account",`Fetching Account: ${e}`,"info"),!t.enabled)throw new Error(Cy);let{accounts:o}=t,s=o.find(a=>a.identifier===e);if(!s)throw new Error(iz(o.length,e));return s}catch(o){throw o instanceof Error&&oe.captureError(o,"account"),o}}})}l();d();l();d();function i9e(){let e=ht(),t=Ce(),r=Ir();return Ne({mutationFn:async({name:a,addresses:c,icon:u})=>{let h=await r.addReadonlyAccount(c),f={name:a,icon:u};return await Jl(e,h.identifier,f),await rs(e,h.identifier),h},onSettled:async()=>{await lr(t)},onSuccess:a=>{t.setQueryData(yt.selectedAccountIdentifier(),a.identifier)},onError:a=>oe.captureError(a,"account")})}l();d();function o9e(){let{t:e}=hu(),t=ht(),r=Ce(),n=ir(),{fetchAllAccounts:i,addAccountForSeed:o,addAccountForSeedless:s,fetchAllSeedlessMetas:a}=Ir();return Ne({mutationFn:async({name:m,icon:b,seedIdentifier:w})=>{oe.addBreadcrumb("account",`Adding new account for s**d: ${w}`,"info");let P=(await a()).find(O=>O.identifier===w),N=P?await s(w):await o(w);return await Jl(t,N.identifier,{name:m||e("onboardingImportAccountsAccountName",{walletIndex:(await i()).length}),icon:b}),await rs(t,N.identifier),P&&n.uploadSyncedAccount(N.identifier),N},onSettled:async()=>{await lr(r)},onSuccess:m=>{r.setQueryData(yt.selectedAccountIdentifier(),m.identifier)},onError:m=>oe.captureError(m,"account")})}l();d();l();d();function Jw(e){let t=Ir(),r=yt.allSeeds(e);return Yt({queryKey:r,queryFn:async()=>{try{let i;switch(e){case"all":{let o=await t.fetchAllSeedMetas();i=[...await t.fetchAllSeedlessMetas(),...o];break}case"local-only":{i=[...await t.fetchAllSeedMetas()];break}case"recoverable-only":{i=[...await t.fetchAllSeedlessMetas()];break}}return i}catch(i){throw i instanceof Error&&oe.captureError(i,"account"),i}}})}l();d();l();d();function s9e(){let e=ht(),t=Ce(),r=Ir();return Ne({mutationFn:async({chainType:s,privateKey:a,name:c,icon:u})=>{oe.addBreadcrumb("account","Importing Private Key Account... \u23F3","info");let h=await r.importPrivateKeyAccount(s,a),f={name:c,icon:u};return await Jl(e,h.identifier,f),await rs(e,h.identifier),oe.addBreadcrumb("account",`Imported Private Key Account \u2705: ${h.identifier}`,"info"),h},onSettled:async()=>{await lr(t)},onSuccess:s=>{t.setQueryData(yt.selectedAccountIdentifier(),s.identifier)}})}l();d();l();d();function a9e(){let{data:[e]}=uc(["enable-sui-testnet"]),t=yt.selectedNetworkSetting(e),r=ht();return Yt({queryKey:t,queryFn:()=>Oy(r)})}l();d();function c9e(){let e=ht(),t=Ei(),r=Ir(),n=Ce(),i=ir();return Ne({mutationFn:async({identifier:a})=>{oe.addBreadcrumb("account",`Removing Account... \u23F3: ${a}`,"info"),await Promise.all([r.removeAccount(a),qx(e,a)]),await Qu(await r.fetchAllAccounts(),e),t.capture("removeAccount"),i.deleteSyncedAccount(a),oe.addBreadcrumb("account",`Removed Account \u2705: ${a}`,"info")},onSuccess:async()=>{await lr(n)}})}l();d();function u9e(){let e=ht(),t=Ei(),r=Ce(),n=Ir();return Ne({mutationFn:async({seedIdentifier:a})=>{let c=await n.fetchAllAccounts(),u=[];for(let h of c)switch(h.type){case"privateKey":case"ledger":case"seedVault":case"readOnly":continue;case"seed":case"seedless":h.seedIdentifier===a&&u.push(h.identifier);break;default:Ae(h)}for(let h of u)await Promise.all([n.removeAccount(h),qx(e,h)]);t.capture("removeSeed",{data:{numOfAccounts:u.length}})},onSuccess:()=>{lr(r)},onError:a=>{oe.captureError(a,"account")}})}l();d();function f9e(){let e=ht(),t=Ce(),r=ir();return Ne({mutationFn:async({identifier:s,name:a})=>{oe.addBreadcrumb("account","Renaming Multichain Account","info"),await w_(e,s,a),r.uploadSyncedAccounts()},onSuccess:async()=>{await lr(t)},onError:s=>oe.captureError(s,"account")})}l();d();function l9e(){let e=Ce(),t=Ir();return Ne({mutationFn:async({identifier:i,toIndex:o})=>{await t.reorderAccount(i,o)},onSuccess:()=>{lr(e)}})}l();d();function d9e(){let e=yt.selectedAccountIdentifier(),t=ht(),r=Ir();return Yt({queryKey:e,queryFn:async()=>{try{let i=await r.fetchAllAccounts(),s=(await Qu(i,t)).identifier;if(!s)throw new Error("Unable to resolve selected account identifier => no available accounts or identifier!");return s}catch(i){throw i instanceof Error&&oe.captureError(i,"account"),i}}})}l();d();function h9e(){let e=ht(),t=Ce();return Ne({mutationFn:async({developerMode:i})=>{t.setQueryData(yt.developerMode(),i),await e.set("developerMode",i)},onSuccess:()=>{lr(t)}})}l();d();function p9e(){let e=ht(),t=Ce(),r=ir();return Ne({mutationFn:async({identifier:o,icon:s})=>{oe.addBreadcrumb("account","Setting Multichain Account Icon","info"),await S_(e,o,s),r.uploadSyncedAccounts()},onSuccess:async()=>{await lr(t)}})}l();d();function y9e(){let e=ht(),t=Ce(),{data:[r]}=uc(["enable-sui-testnet"]);return Ne({mutationFn:async({networkSetting:o})=>{t.setQueryData(yt.selectedNetworkSetting(r),o),await e.set("networkSetting",o)},onSuccess:()=>{lr(t)}})}l();d();function m9e(){let e=ht(),t=Ei(),r=Ce();return Ne({mutationFn:async({identifier:s})=>(await rs(e,s),t.capture("changeAccount",{data:{identifier:s}}),s),onSuccess:s=>{C6(r),r.setQueryData(yt.selectedAccountIdentifier(),s)},onError:s=>oe.captureError(s,"account")})}l();d();var g9e=()=>{let e=Ce(),t=ir(),r=D0(),n=yt.syncUserAccounts();return Yt({enabled:r,queryKey:n,queryFn:async()=>{let o=!1;try{o=await t.downloadSyncedAccounts()}catch{return!1}return o&&await lr(e),o},gcTime:1/0,staleTime:1/0})};l();d();var Ute=re(Fr());var b9e=()=>{let{data:e,isFetching:t}=P0(),{data:r,isFetching:n}=ta(),i=Zw();return(0,Ute.useMemo)(()=>({data:{"All Accounts":e,"Selected Account":r??null,"Selected Networks":i.map(o=>te.getNetworkName(o))},isFetching:t||n}),[e,t,n,r,i])};l();d();var Rte=re(Fr()),x9e=(e=[])=>{let t=$m();return(0,Rte.useMemo)(()=>e.filter(r=>{let n=te.getParentChain(r.networkID);return n?t.includes(n):!1}),[e,t])};l();d();var cre=re(jre()),F6=re(Fr());l();d();var Kr=re(Fr(),1),t1=e=>e.type==="checkbox",Zm=e=>e instanceof Date,Fo=e=>e==null,$te=e=>typeof e=="object",li=e=>!Fo(e)&&!Array.isArray(e)&&$te(e)&&!Zm(e),Yte=e=>li(e)&&e.target?t1(e.target)?e.target.checked:e.target.value:e,w9e=e=>e.substring(0,e.search(/.\d/))||e,Zte=(e,t)=>[...e].some(r=>w9e(t)===r),L6=e=>e.filter(Boolean),gn=e=>e===void 0,ve=(e,t,r)=>{if(!t||!li(e))return r;let n=L6(t.split(/[,[\].]+?/)).reduce((i,o)=>Fo(i)?i:i[o],e);return gn(n)||n===e?gn(e[t])?r:e[t]:n},YN={BLUR:"blur",CHANGE:"change"},sc={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},df={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},XN=(e,t)=>{let r=Object.assign({},e);return delete r[t],r},S9e=Kr.default.createContext(null),QN=()=>Kr.default.useContext(S9e);var Jte=(e,t,r,n=!0)=>{function i(s){return()=>{if(s in e)return t[s]!==sc.all&&(t[s]=!n||sc.all),r&&(r[s]=!0),e[s]}}let o={};for(let s in e)Object.defineProperty(o,s,{get:i(s)});return o},ms=e=>li(e)&&!Object.keys(e).length,Xte=(e,t,r)=>{let n=XN(e,"name");return ms(n)||Object.keys(n).length>=Object.keys(t).length||Object.keys(n).find(i=>t[i]===(!r||sc.all))},M6=e=>Array.isArray(e)?e:[e],Qte=(e,t,r)=>r&&t?e===t:!e||!t||e===t||M6(e).some(n=>n&&(n.startsWith(t)||t.startsWith(n)));function eM(e){let t=Kr.default.useRef(e);t.current=e,Kr.default.useEffect(()=>{let r=i=>{i&&i.unsubscribe()},n=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>r(n)},[e.disabled])}function v9e(e){let t=QN(),{control:r=t.control,disabled:n,name:i,exact:o}=e||{},[s,a]=Kr.default.useState(r._formState),c=Kr.default.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=Kr.default.useRef(i),h=Kr.default.useRef(!0);u.current=i;let f=Kr.default.useCallback(m=>h.current&&Qte(u.current,m.name,o)&&Xte(m,c.current)&&a(Object.assign(Object.assign({},r._formState),m)),[r,o]);return eM({disabled:n,callback:f,subject:r._subjects.state}),Kr.default.useEffect(()=>()=>{h.current=!1},[]),Jte(s,r._proxyFormState,c.current,!1)}var Qc=e=>typeof e=="string",ere=(e,t,r,n)=>{let i=Array.isArray(e);return Qc(e)?(n&&t.watch.add(e),ve(r,e)):i?e.map(o=>(n&&t.watch.add(o),ve(r,o))):(n&&(t.watchAll=!0),r)},V6=e=>typeof e=="function",tM=e=>{for(let t in e)if(V6(e[t]))return!0;return!1};function A9e(e){let t=QN(),{control:r=t.control,name:n,defaultValue:i,disabled:o,exact:s}=e||{},a=Kr.default.useRef(n);a.current=n;let c=Kr.default.useCallback(f=>{if(Qte(a.current,f.name,s)){let m=ere(a.current,r._names,f.values||r._formValues);h(gn(a.current)||li(m)&&!tM(m)?Object.assign({},m):Array.isArray(m)?[...m]:gn(m)?i:m)}},[r,s,i]);eM({disabled:o,subject:r._subjects.watch,callback:c});let[u,h]=Kr.default.useState(gn(i)?r._getWatch(n):i);return Kr.default.useEffect(()=>{r._removeUnmounted()}),u}function E9e(e){let t=QN(),{name:r,control:n=t.control,shouldUnregister:i}=e,o=Zte(n._names.array,r),s=A9e({control:n,name:r,defaultValue:ve(n._formValues,r,ve(n._defaultValues,r,e.defaultValue)),exact:!o}),a=v9e({control:n,name:r}),c=Kr.default.useRef(n.register(r,Object.assign(Object.assign({},e.rules),{value:s})));return Kr.default.useEffect(()=>{let u=(h,f)=>{let m=ve(n._fields,h);m&&(m._f.mount=f)};return u(r,!0),()=>{let h=n._options.shouldUnregister||i;o?h&&n._stateFlags.action:h?n.unregister(r):u(r,!1)}},[r,n,o,i]),{field:{name:r,value:s,onChange:Kr.default.useCallback(u=>{c.current.onChange({target:{value:Yte(u),name:r},type:YN.CHANGE})},[r]),onBlur:Kr.default.useCallback(()=>{c.current.onBlur({target:{value:ve(n._formValues,r),name:r},type:YN.BLUR})},[r,n]),ref:Kr.default.useCallback(u=>{let h=ve(n._fields,r);u&&h&&u.focus&&(h._f.ref={focus:()=>u.focus(),setCustomValidity:f=>u.setCustomValidity(f),reportValidity:()=>u.reportValidity()})},[r,n])},formState:a,fieldState:{invalid:!!ve(a.errors,r),isDirty:!!ve(a.dirtyFields,r),isTouched:!!ve(a.touchedFields,r),error:ve(a.errors,r)}}}var tre=e=>e.render(E9e(e)),I9e=(e,t,r,n,i)=>t?Object.assign(Object.assign({},r[e]),{types:Object.assign(Object.assign({},r[e]&&r[e].types?r[e].types:{}),{[n]:i||!0})}):{},rM=e=>/^\w*$/.test(e),rre=e=>L6(e.replace(/["|']|\]/g,"").split(/\.|\[/));function Pn(e,t,r){let n=-1,i=rM(t)?[t]:rre(t),o=i.length,s=o-1;for(;++n<o;){let a=i[n],c=r;if(n!==s){let u=e[a];c=li(u)||Array.isArray(u)?u:isNaN(+i[n+1])?{}:[]}e[a]=c,e=e[a]}return e}var ZN=(e,t,r)=>{for(let n of r||Object.keys(e)){let i=ve(e,n);if(i){let o=i._f,s=XN(i,"_f");if(o&&t(o.name)){if(o.ref.focus&&gn(o.ref.focus()))break;if(o.refs){o.refs[0].focus();break}}else li(s)&&ZN(s,t)}}};var Lte=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));function Qw(e){let t,r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(r||li(e)){t=r?[]:{};for(let n in e){if(V6(e[n])){t=e;break}t[n]=Qw(e[n])}}else return e;return t}function zN(){let e=[];return{get observers(){return e},next:i=>{for(let o of e)o.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(o=>o!==i)}}),unsubscribe:()=>{e=[]}}}var O6=e=>Fo(e)||!$te(e);function Jm(e,t){if(O6(e)||O6(t))return e===t;if(Zm(e)&&Zm(t))return e.getTime()===t.getTime();let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i of r){let o=e[i];if(!n.includes(i))return!1;if(i!=="ref"){let s=t[i];if(Zm(o)&&Zm(s)||li(o)&&li(s)||Array.isArray(o)&&Array.isArray(s)?!Jm(o,s):o!==s)return!1}}return!0}var Vte=e=>({isOnSubmit:!e||e===sc.onSubmit,isOnBlur:e===sc.onBlur,isOnChange:e===sc.onChange,isOnAll:e===sc.all,isOnTouch:e===sc.onTouched}),e1=e=>typeof e=="boolean",nM=e=>e.type==="file",JN=e=>e instanceof HTMLElement,nre=e=>e.type==="select-multiple",iM=e=>e.type==="radio",k9e=e=>iM(e)||t1(e),Kte=typeof self<"u"&&typeof self.HTMLElement<"u"&&typeof document<"u",GN=e=>JN(e)&&e.isConnected;function T9e(e,t){let r=t.slice(0,-1).length,n=0;for(;n<r;)e=gn(e)?n++:e[t[n++]];return e}function wo(e,t){let r=rM(t)?[t]:rre(t),n=r.length==1?e:T9e(e,r),i=r[r.length-1],o;n&&delete n[i];for(let s=0;s<r.slice(0,-1).length;s++){let a=-1,c,u=r.slice(0,-(s+1)),h=u.length-1;for(s>0&&(o=e);++a<u.length;){let f=u[a];c=c?c[f]:e[f],h===a&&(li(c)&&ms(c)||Array.isArray(c)&&!c.filter(m=>li(m)&&!ms(m)||e1(m)).length)&&(o?delete o[f]:delete e[f]),o=c}}return e}function U6(e,t={}){let r=Array.isArray(e);if(li(e)||r)for(let n in e)Array.isArray(e[n])||li(e[n])&&!tM(e[n])?(t[n]=Array.isArray(e[n])?[]:{},U6(e[n],t[n])):Fo(e[n])||(t[n]=!0);return t}function ire(e,t,r){let n=Array.isArray(e);if(li(e)||n)for(let i in e)Array.isArray(e[i])||li(e[i])&&!tM(e[i])?gn(t)||O6(r[i])?r[i]=Array.isArray(e[i])?U6(e[i],[]):Object.assign({},U6(e[i])):ire(e[i],Fo(t)?{}:t[i],r[i]):r[i]=!Jm(e[i],t[i]);return r}var Fte=(e,t)=>ire(e,t,U6(t)),Hte={value:!1,isValid:!1},qte={value:!0,isValid:!0},ore=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!gn(e[0].attributes.value)?gn(e[0].value)||e[0].value===""?qte:{value:e[0].value,isValid:!0}:qte:Hte}return Hte},sre=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>gn(e)?e:t?e===""?NaN:+e:r&&Qc(e)?new Date(e):n?n(e):e,jte={isValid:!1,value:null},are=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,jte):jte;function $N(e){let t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return nM(t)?t.files:iM(t)?are(e.refs).value:nre(t)?[...t.selectedOptions].map(({value:r})=>r):t1(t)?ore(e.refs).value:sre(gn(t.value)?e.ref.value:t.value,e)}var P9e=(e,t,r,n)=>{let i={};for(let o of e){let s=ve(t,o);s&&Pn(i,o,s._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:n}},R6=e=>e instanceof RegExp,Xw=e=>gn(e)?void 0:R6(e)?e.source:li(e)?R6(e.value)?e.value.source:e.value:e,B9e=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function Wte(e,t,r){let n=ve(e,r);if(n||rM(r))return{error:n,name:r};let i=r.split(".");for(;i.length;){let o=i.join("."),s=ve(t,o),a=ve(e,o);if(s&&!Array.isArray(s)&&r!==o)return{name:r};if(a&&a.type)return{name:o,error:a};i.pop()}return{name:r}}var _9e=(e,t,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(t||e):(r?n.isOnBlur:i.isOnBlur)?!e:(r?n.isOnChange:i.isOnChange)?e:!0,C9e=(e,t)=>!L6(ve(e,t)).length&&wo(e,t),D6=e=>Qc(e)||Kr.default.isValidElement(e);function zte(e,t,r="validate"){if(D6(e)||Array.isArray(e)&&e.every(D6)||e1(e)&&!e)return{type:r,message:D6(e)?e:"",ref:t}}var Ym=e=>li(e)&&!R6(e)?e:{value:e,message:""},Gte=async(e,t,r,n)=>{let{ref:i,refs:o,required:s,maxLength:a,minLength:c,min:u,max:h,pattern:f,validate:m,name:b,valueAsNumber:w,mount:S,disabled:P}=e._f;if(!S||P)return{};let N=o?o[0]:i,O=B=>{n&&N.reportValidity&&(N.setCustomValidity(e1(B)?"":B||" "),N.reportValidity())},C={},L=iM(i),V=t1(i),j=L||V,$=(w||nM(i))&&!i.value||t===""||Array.isArray(t)&&!t.length,H=I9e.bind(null,b,r,C),Y=(B,p,g,x=df.maxLength,A=df.minLength)=>{let v=B?p:g;C[b]=Object.assign({type:B?x:A,message:v,ref:i},H(B?x:A,v))};if(s&&(!j&&($||Fo(t))||e1(t)&&!t||V&&!ore(o).isValid||L&&!are(o).isValid)){let{value:B,message:p}=D6(s)?{value:!!s,message:s}:Ym(s);if(B&&(C[b]=Object.assign({type:df.required,message:p,ref:N},H(df.required,p)),!r))return O(p),C}if(!$&&(!Fo(u)||!Fo(h))){let B,p,g=Ym(h),x=Ym(u);if(isNaN(t)){let A=i.valueAsDate||new Date(t);Qc(g.value)&&(B=A>new Date(g.value)),Qc(x.value)&&(p=A<new Date(x.value))}else{let A=i.valueAsNumber||parseFloat(t);Fo(g.value)||(B=A>g.value),Fo(x.value)||(p=A<x.value)}if((B||p)&&(Y(!!B,g.message,x.message,df.max,df.min),!r))return O(C[b].message),C}if((a||c)&&!$&&Qc(t)){let B=Ym(a),p=Ym(c),g=!Fo(B.value)&&t.length>B.value,x=!Fo(p.value)&&t.length<p.value;if((g||x)&&(Y(g,B.message,p.message),!r))return O(C[b].message),C}if(f&&!$&&Qc(t)){let{value:B,message:p}=Ym(f);if(R6(B)&&!t.match(B)&&(C[b]=Object.assign({type:df.pattern,message:p,ref:i},H(df.pattern,p)),!r))return O(p),C}if(m){if(V6(m)){let B=await m(t),p=zte(B,N);if(p&&(C[b]=Object.assign(Object.assign({},p),H(df.validate,p.message)),!r))return O(p.message),C}else if(li(m)){let B={};for(let p in m){if(!ms(B)&&!r)break;let g=zte(await m[p](t),N,p);g&&(B=Object.assign(Object.assign({},g),H(p,g.message)),O(g.message),r&&(C[b]=B))}if(!ms(B)&&(C[b]=Object.assign({ref:N},B),!r))return C}}return O(!0),C},N9e={mode:sc.onSubmit,reValidateMode:sc.onChange,shouldFocusError:!0};function M9e(e={}){let t=Object.assign(Object.assign({},N9e),e),r={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},n={},i=t.defaultValues||{},o=t.shouldUnregister?{}:Qw(i),s={action:!1,mount:!1,watch:!1},a={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0,h={},f={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},m={watch:zN(),array:zN(),state:zN()},b=Vte(t.mode),w=Vte(t.reValidateMode),S=t.criteriaMode===sc.all,P=(U,G)=>(...Z)=>{clearTimeout(u),u=self.setTimeout(()=>U(...Z),G)},N=async U=>{let G=!1;return f.isValid&&(G=t.resolver?ms((await $()).errors):await Y(n,!0),!U&&G!==r.isValid&&(r.isValid=G,m.state.next({isValid:G}))),G},O=(U,G,Z,ee=[],fe=!0,Q=!0)=>{if(s.action=!0,Q&&Array.isArray(ve(n,U))){let se=G(ve(n,U),Z.argA,Z.argB);fe&&Pn(n,U,se)}if(f.errors&&Q&&Array.isArray(ve(r.errors,U))){let se=G(ve(r.errors,U),Z.argA,Z.argB);fe&&Pn(r.errors,U,se),C9e(r.errors,U)}if(f.touchedFields&&Array.isArray(ve(r.touchedFields,U))){let se=G(ve(r.touchedFields,U),Z.argA,Z.argB);fe&&Pn(r.touchedFields,U,se)}f.dirtyFields&&(r.dirtyFields=Fte(i,o)),m.state.next({isDirty:p(U,ee),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})},C=(U,G)=>(Pn(r.errors,U,G),m.state.next({errors:r.errors})),L=(U,G,Z,ee)=>{let fe=ve(n,U);if(fe){let Q=ve(o,U,gn(Z)?ve(i,U):Z);gn(Q)||ee&&ee.defaultChecked||G?Pn(o,U,G?Q:$N(fe._f)):A(U,Q),s.mount&&N()}},V=(U,G,Z,ee,fe)=>{let Q=!1,se={name:U},gt=ve(r.touchedFields,U);if(f.isDirty){let Pe=r.isDirty;r.isDirty=se.isDirty=p(),Q=Pe!==se.isDirty}if(f.dirtyFields&&(!Z||ee)){let Pe=ve(r.dirtyFields,U);Jm(ve(i,U),G)?wo(r.dirtyFields,U):Pn(r.dirtyFields,U,!0),se.dirtyFields=r.dirtyFields,Q=Q||Pe!==ve(r.dirtyFields,U)}return Z&&!gt&&(Pn(r.touchedFields,U,Z),se.touchedFields=r.touchedFields,Q=Q||f.touchedFields&&gt!==Z),Q&&fe&&m.state.next(se),Q?se:{}},j=async(U,G,Z,ee,fe)=>{let Q=ve(r.errors,G),se=f.isValid&&r.isValid!==Z;if(e.delayError&&ee?(c=c||P(C,e.delayError),c(G,ee)):(clearTimeout(u),ee?Pn(r.errors,G,ee):wo(r.errors,G)),((ee?!Jm(Q,ee):Q)||!ms(fe)||se)&&!U){let gt=Object.assign(Object.assign(Object.assign({},fe),se?{isValid:Z}:{}),{errors:r.errors,name:G});r=Object.assign(Object.assign({},r),gt),m.state.next(gt)}h[G]--,f.isValidating&&!h[G]&&(m.state.next({isValidating:!1}),h={})},$=async U=>t.resolver?await t.resolver(Object.assign({},o),t.context,P9e(U||a.mount,n,t.criteriaMode,t.shouldUseNativeValidation)):{},H=async U=>{let{errors:G}=await $();if(U)for(let Z of U){let ee=ve(G,Z);ee?Pn(r.errors,Z,ee):wo(r.errors,Z)}else r.errors=G;return G},Y=async(U,G,Z={valid:!0})=>{for(let ee in U){let fe=U[ee];if(fe){let Q=fe._f,se=XN(fe,"_f");if(Q){let gt=await Gte(fe,ve(o,Q.name),S,t.shouldUseNativeValidation);if(gt[Q.name]&&(Z.valid=!1,G))break;G||(gt[Q.name]?Pn(r.errors,Q.name,gt[Q.name]):wo(r.errors,Q.name))}se&&await Y(se,G,Z)}}return Z.valid},B=()=>{for(let U of a.unMount){let G=ve(n,U);G&&(G._f.refs?G._f.refs.every(Z=>!GN(Z)):!GN(G._f.ref))&&F(U)}a.unMount=new Set},p=(U,G)=>(U&&G&&Pn(o,U,G),!Jm(y(),i)),g=(U,G,Z)=>{let ee=Object.assign({},s.mount?o:gn(G)?i:Qc(U)?{[U]:G}:G);return ere(U,a,ee,Z)},x=U=>L6(ve(s.mount?o:i,U,e.shouldUnregister?ve(i,U,[]):[])),A=(U,G,Z={})=>{let ee=ve(n,U),fe=G;if(ee){let Q=ee._f;Q&&(!Q.disabled&&Pn(o,U,sre(G,Q)),fe=Kte&&JN(Q.ref)&&Fo(G)?"":G,nre(Q.ref)?[...Q.ref.options].forEach(se=>se.selected=fe.includes(se.value)):Q.refs?t1(Q.ref)?Q.refs.length>1?Q.refs.forEach(se=>se.checked=Array.isArray(fe)?!!fe.find(gt=>gt===se.value):fe===se.value):Q.refs[0]&&(Q.refs[0].checked=!!fe):Q.refs.forEach(se=>se.checked=se.value===fe):nM(Q.ref)||(Q.ref.value=fe,Q.ref.type||m.watch.next({name:U})))}(Z.shouldDirty||Z.shouldTouch)&&V(U,fe,Z.shouldTouch,Z.shouldDirty,!0),Z.shouldValidate&&T(U)},v=(U,G,Z)=>{for(let ee in G){let fe=G[ee],Q=`${U}.${ee}`,se=ve(n,Q);(a.array.has(U)||!O6(fe)||se&&!se._f)&&!Zm(fe)?v(Q,fe,Z):A(Q,fe,Z)}},_=(U,G,Z={})=>{let ee=ve(n,U),fe=a.array.has(U);Pn(o,U,G),fe?(m.array.next({name:U,values:o}),(f.isDirty||f.dirtyFields)&&Z.shouldDirty&&(r.dirtyFields=Fte(i,o),m.state.next({name:U,dirtyFields:r.dirtyFields,isDirty:p(U,G)}))):ee&&!ee._f&&!Fo(G)?v(U,G,Z):A(U,G,Z),Lte(U,a)&&m.state.next({}),m.watch.next({name:U})},D=async U=>{let G=U.target,Z=G.name,ee=ve(n,Z);if(ee){let fe,Q,se=G.type?$N(ee._f):Yte(U),gt=U.type===YN.BLUR,Pe=!B9e(ee._f)&&!t.resolver&&!ve(r.errors,Z)&&!ee._f.deps||_9e(gt,ve(r.touchedFields,Z),r.isSubmitted,w,b),Oe=Lte(Z,a,gt);Pn(o,Z,se),gt?ee._f.onBlur&&ee._f.onBlur(U):ee._f.onChange&&ee._f.onChange(U);let gs=V(Z,se,gt,!1),Ke=!ms(gs)||Oe;if(!gt&&m.watch.next({name:Z,type:U.type}),Pe)return Ke&&m.state.next(Object.assign({name:Z},Oe?{}:gs));if(!gt&&Oe&&m.state.next({}),h[Z]=(h[Z],1),f.isValidating&&m.state.next({isValidating:!0}),t.resolver){let{errors:Ue}=await $([Z]),ac=Wte(r.errors,n,Z),Re=Wte(Ue,n,ac.name||Z);fe=Re.error,Z=Re.name,Q=ms(Ue)}else fe=(await Gte(ee,ve(o,Z),S,t.shouldUseNativeValidation))[Z],Q=await N(!0);ee._f.deps&&T(ee._f.deps),j(!1,Z,Q,fe,gs)}},T=async(U,G={})=>{let Z,ee,fe=M6(U);if(m.state.next({isValidating:!0}),t.resolver){let Q=await H(gn(U)?U:fe);Z=ms(Q),ee=U?!fe.some(se=>ve(Q,se)):Z}else U?(ee=(await Promise.all(fe.map(async Q=>{let se=ve(n,Q);return await Y(se&&se._f?{[Q]:se}:se)}))).every(Boolean),!(!ee&&!r.isValid)&&N()):ee=Z=await Y(n);return m.state.next(Object.assign(Object.assign(Object.assign({},!Qc(U)||f.isValid&&Z!==r.isValid?{}:{name:U}),t.resolver?{isValid:Z}:{}),{errors:r.errors,isValidating:!1})),G.shouldFocus&&!ee&&ZN(n,Q=>ve(r.errors,Q),U?fe:a.mount),ee},y=U=>{let G=Object.assign(Object.assign({},i),s.mount?o:{});return gn(U)?G:Qc(U)?ve(G,U):U.map(Z=>ve(G,Z))},I=U=>{U?M6(U).forEach(G=>wo(r.errors,G)):r.errors={},m.state.next({errors:r.errors})},q=(U,G,Z)=>{let ee=(ve(n,U,{_f:{}})._f||{}).ref;Pn(r.errors,U,Object.assign(Object.assign({},G),{ref:ee})),m.state.next({name:U,errors:r.errors,isValid:!1}),Z&&Z.shouldFocus&&ee&&ee.focus&&ee.focus()},K=(U,G)=>V6(U)?m.watch.subscribe({next:Z=>U(g(void 0,G),Z)}):g(U,G,!0),F=(U,G={})=>{for(let Z of U?M6(U):a.mount)a.mount.delete(Z),a.array.delete(Z),ve(n,Z)&&(G.keepValue||(wo(n,Z),wo(o,Z)),!G.keepError&&wo(r.errors,Z),!G.keepDirty&&wo(r.dirtyFields,Z),!G.keepTouched&&wo(r.touchedFields,Z),!t.shouldUnregister&&!G.keepDefaultValue&&wo(i,Z));m.watch.next({}),m.state.next(Object.assign(Object.assign({},r),G.keepDirty?{isDirty:p()}:{})),!G.keepIsValid&&N()},J=(U,G={})=>{let Z=ve(n,U),ee=e1(G.disabled);return Pn(n,U,{_f:Object.assign(Object.assign(Object.assign({},Z&&Z._f?Z._f:{ref:{name:U}}),{name:U,mount:!0}),G)}),a.mount.add(U),Z?ee&&Pn(o,U,G.disabled?void 0:ve(o,U,$N(Z._f))):L(U,!0,G.value),Object.assign(Object.assign(Object.assign({},ee?{disabled:G.disabled}:{}),t.shouldUseNativeValidation?{required:!!G.required,min:Xw(G.min),max:Xw(G.max),minLength:Xw(G.minLength),maxLength:Xw(G.maxLength),pattern:Xw(G.pattern)}:{}),{name:U,onChange:D,onBlur:D,ref:fe=>{if(fe){J(U,G),Z=ve(n,U);let Q=gn(fe.value)&&fe.querySelectorAll&&fe.querySelectorAll("input,select,textarea")[0]||fe,se=k9e(Q),gt=Z._f.refs||[];if(se?gt.find(Pe=>Pe===Q):Q===Z._f.ref)return;Pn(n,U,{_f:Object.assign(Object.assign({},Z._f),se?{refs:gt.concat(Q).filter(GN),ref:{type:Q.type,name:U}}:{ref:Q})}),L(U,!1,void 0,Q)}else Z=ve(n,U,{}),Z._f&&(Z._f.mount=!1),(t.shouldUnregister||G.shouldUnregister)&&!(Zte(a.array,U)&&s.action)&&a.unMount.add(U)}})};return{control:{register:J,unregister:F,_executeSchema:$,_getWatch:g,_getDirty:p,_updateValid:N,_removeUnmounted:B,_updateFieldArray:O,_getFieldArray:x,_subjects:m,_proxyFormState:f,get _fields(){return n},set _fields(U){n=U},get _formValues(){return o},set _formValues(U){o=U},get _stateFlags(){return s},set _stateFlags(U){s=U},get _defaultValues(){return i},set _defaultValues(U){i=U},get _names(){return a},set _names(U){a=U},get _formState(){return r},set _formState(U){r=U},get _options(){return t},set _options(U){t=Object.assign(Object.assign({},t),U)}},trigger:T,register:J,handleSubmit:(U,G)=>async Z=>{Z&&(Z.preventDefault&&Z.preventDefault(),Z.persist&&Z.persist());let ee=!0,fe=t.shouldUnregister?Qw(o):Object.assign({},o);m.state.next({isSubmitting:!0});try{if(t.resolver){let{errors:Q,values:se}=await $();r.errors=Q,fe=se}else await Y(n);ms(r.errors)&&Object.keys(r.errors).every(Q=>ve(fe,Q))?(m.state.next({errors:{},isSubmitting:!0}),await U(fe,Z)):(G&&await G(r.errors,Z),t.shouldFocusError&&ZN(n,Q=>ve(r.errors,Q),a.mount))}catch(Q){throw ee=!1,Q}finally{r.isSubmitted=!0,m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ms(r.errors)&&ee,submitCount:r.submitCount+1,errors:r.errors})}},watch:K,setValue:_,getValues:y,reset:(U,G={})=>{let Z=U||i,ee=Qw(Z),fe=U&&!ms(U)?ee:i;if(G.keepDefaultValues||(i=Z),!G.keepValues){if(Kte&&gn(U))for(let Q of a.mount){let se=ve(n,Q);if(se&&se._f){let gt=Array.isArray(se._f.refs)?se._f.refs[0]:se._f.ref;try{JN(gt)&&gt.closest("form").reset();break}catch{}}}o=e.shouldUnregister?G.keepDefaultValues?Qw(i):{}:ee,n={},m.array.next({values:fe}),m.watch.next({values:fe})}a={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},s.mount=!f.isValid||!!G.keepIsValid,s.watch=!!e.shouldUnregister,m.state.next({submitCount:G.keepSubmitCount?r.submitCount:0,isDirty:G.keepDirty?r.isDirty:G.keepDefaultValues?!Jm(U,i):!1,isSubmitted:G.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:G.keepDirty?r.dirtyFields:G.keepDefaultValues&&U?Object.entries(U).reduce((Q,[se,gt])=>Object.assign(Object.assign({},Q),{[se]:gt!==ve(i,se)}),{}):{},touchedFields:G.keepTouched?r.touchedFields:{},errors:G.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},resetField:(U,G={})=>{ve(n,U)&&(gn(G.defaultValue)?_(U,ve(i,U)):(_(U,G.defaultValue),Pn(i,U,G.defaultValue)),G.keepTouched||wo(r.touchedFields,U),G.keepDirty||(wo(r.dirtyFields,U),r.isDirty=G.defaultValue?p(U,ve(i,U)):p()),G.keepError||(wo(r.errors,U),f.isValid&&N()),m.state.next(Object.assign({},r)))},clearErrors:I,unregister:F,setError:q,setFocus:U=>{let G=ve(n,U)._f;(G.ref.focus?G.ref:G.refs[0]).focus()}}}function K6(e={}){let t=Kr.default.useRef(),[r,n]=Kr.default.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});t.current?t.current.control._options=e:t.current=Object.assign(Object.assign({},M9e(e)),{formState:r});let i=t.current.control,o=Kr.default.useCallback(s=>{Xte(s,i._proxyFormState,!0)&&(i._formState=Object.assign(Object.assign({},i._formState),s),n(Object.assign({},i._formState)))},[i]);return eM({subject:i._subjects.state,callback:o}),Kr.default.useEffect(()=>{i._stateFlags.mount||(i._proxyFormState.isValid&&i._updateValid(),i._stateFlags.mount=!0),i._stateFlags.watch&&(i._stateFlags.watch=!1,i._subjects.state.next({})),i._removeUnmounted()}),t.current.formState=Jte(r,i._proxyFormState),t.current}var D9e=({accounts:e,enabledAddressTypes:t,enableAddressTypes:r,editableAccountMetadata:n,addReadOnlyAccount:i,fetchDomainOwner:o})=>{let s=ir(),{t:a}=hu(),c=Ei(),u=n?.networkID||Ot.Solana.Mainnet,{formState:{errors:h},control:f,clearErrors:m,getValues:b,setValue:w,register:S,handleSubmit:P,watch:N,trigger:O}=K6({mode:"all"}),{networkID:C,name:L,address:V,resolvedAddress:j}=N(),$={required:!0},H=(0,F6.useMemo)(()=>({required:{value:!0,message:a("addAccountImportAccountPublicKeyRequired")},validate:(0,cre.default)(async p=>{if(p==="")return!0;if(!vE(p,C||u))try{let v=(await o(p,C,s,c))?.owner;return v?(w("resolvedAddress",v),e.find(D=>D.addresses.map(T=>T.address).includes(v))?a("addAccountImportAccountDuplicateAddress"):!0):a("addAccountImportAccountIncorrectFormat")}catch{return a("sendFormErrorInvalidDomain")}return w("resolvedAddress",p),e.find(A=>A.addresses.map(v=>v.address).includes(p))?a("addAccountImportAccountDuplicateAddress"):!0},500)}),[a,C,u,w,e,o,s,c]),Y=L&&j&&!h.name&&!h.address,B=(0,F6.useCallback)(async({networkID:p,name:g,resolvedAddress:x},A)=>{let v=Uc(p,x);t.includes(v)||await r({addressTypes:[v]});let _={};_[v]=x,i({name:g,addresses:_,icon:n?.icon}),A(),c.capture("addReadOnlyAccount",{data:{networkID:p,chainType:v}})},[i,n?.icon,r,t,c]);return{Controller:tre,canSubmit:Y,control:f,errors:h,nameValidations:$,address:V,addressValidations:H,clearErrors:m,getValues:b,handleSubmit:P,onSubmit:B,register:S,setValue:w,trigger:O}};l();d();function O9e(e){let t=Tte();return e.map(r=>Bx.get(r.networkID).addressTooltipNetworkName?.(r.networkID,r.address,t)??te.getNetworkName(r.networkID))}l();d();l();d();l();d();l();d();var U9e=()=>{let{data:e}=Ka(),t=l1(),r=e?.username;return Yt({queryKey:kn.userProfileAttributeEffect(r),queryFn:async()=>(r&&(Ci.setSubjectAttributes({username:r}),await t()),!0)}),r};l();d();var fre=re(Fr());l();d();var R9e=/^https?:\/\/.+$/,ure=e=>L9e(e?.icon),L9e=e=>e?e.match(R9e)?{type:kx.Image,imageUrl:e}:{type:kx.Emoji,unicode:e}:{type:kx.Default};var V9e=()=>{let{data:e}=Ka();return(0,fre.useMemo)(()=>ure(e),[e])};l();d();var lre=re(Fr());var K9e=()=>{let{data:e}=Ka();return(0,lre.useMemo)(()=>e?.privacyState??"public",[e?.privacyState])};l();d();var dre=re(Fr());var F9e=()=>{let{data:e}=Ka();return(0,dre.useMemo)(()=>e?.addresses,[e?.addresses])};l();d();l();d();var hre=re(Fr());var H9e=0,q9e=e=>e!==null?e.split("@")[H9e]:null,j9e=async(e,t)=>{let r=await e.getUser();if(!r)throw new Error("no user");let n=await t.getUserProfile();return{userID:r.userID,username:n?.username??null,email:q9e(r.email??null)}},W9e=()=>{let e=M0(),t=ir(),{data:r={}}=KM();return(0,hre.useCallback)(async()=>{try{return{...await j9e(e,t),authFactors:r}}catch{return{userID:null,username:null,email:null,authFactors:r}}},[r,e,t])};var G9e=re(Fr());l();d();var pre=re(Fr());var $9e=()=>{let{data:e}=ta(),t=(0,pre.useMemo)(()=>{if(!e||!e.addresses.length)return te.getChainID("solana:101");let r=e.addresses[0];return te.getChainID(r.networkID)},[e]);return{caip19:SE(AE(t)),tokenName:te.getChainName(t),tokenSymbol:te.getTokenSymbol(t)}};l();d();var Y9e=()=>{let{data:[e]}=uc(["enable-sui-testnet"]);return Sx(e)};l();d();l();d();var mre=re(Fr());l();d();var yre=()=>{let{data:e}=oc(),{data:t}=P0(),{data:r}=Ka(),{data:[n]}=uc(["enable-auto-patch-chains"]);return Yt({queryKey:yt.patchProfileAddresses({chainAvailability:e?.enabledNetworkIDs,accountIdentifiers:t?.map(i=>i.identifier),user:r,isAutoPatchEnabled:n}),queryFn:e&&t&&r?()=>{let{enabledNetworkIDs:i}=e,o=i?.reduce((f,m)=>{let b=t.find(w=>w.addresses.some(S=>S.networkID===m))?.addresses.find(w=>w.networkID===m)?.address;return b&&(f[m]=b),f},{})??{},s=r?.addresses,a=s?Object.keys(s).filter(te.isNetworkID):[],c=(i??[]).filter(f=>!a.includes(f)).reduce((f,m)=>{let b=o[m];return b&&(f[m]=b),f},{});return Object.keys(c).length>0?{addresses:{...c,...s},addedAddresses:c}:null}:_M})};var Z9e=()=>{let{data:e}=yre(),{mutate:t}=YB(),r=Ei();(0,mre.useEffect)(()=>{if(e){let{addresses:n,addedAddresses:i}=e,o=Object.keys(i);r.capture("autoSyncUsernameAddresses",{data:{addedChains:o}}),t({addresses:n})}},[e,t,r])};l();d();var gre=re(Fr());var J9e=e=>{let t=(0,gre.useCallback)(r=>r.addresses.find(n=>e===te.getChainID(n.networkID))?.networkID,[e]);return ta({select:t})};l();d();var bre=re(Fr());var X9e=()=>{let{data:e=[]}=Jw("local-only"),{data:t=[]}=Jw("recoverable-only");return(0,bre.useMemo)(()=>e.length+t.length>1,[e.length,t.length])};l();d();l();d();l();d();var So=re(Fr());function Q9e(e){let t,r=new Set,n=(u,h)=>{let f=typeof u=="function"?u(t):u;if(f!==t){let m=t;t=h?f:Object.assign({},t,f),r.forEach(b=>b(t,m))}},i=()=>t,o=(u,h=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=h(t);function b(){let w=h(t);if(!f(m,w)){let S=m;u(m=w,S)}}return r.add(b),()=>r.delete(b)},c={setState:n,getState:i,subscribe:(u,h,f)=>h||f?o(u,h,f):(r.add(u),()=>r.delete(u)),destroy:()=>r.clear()};return t=e(n,i,c),c}var e7e=typeof self>"u"||!self.navigator||/ServerSideRendering|^Deno\//.test(self.navigator.userAgent),xre=e7e?So.useEffect:So.useLayoutEffect;function H6(e){let t=typeof e=="function"?Q9e(e):e,r=(n=t.getState,i=Object.is)=>{let[,o]=(0,So.useReducer)(P=>P+1,0),s=t.getState(),a=(0,So.useRef)(s),c=(0,So.useRef)(n),u=(0,So.useRef)(i),h=(0,So.useRef)(!1),f=(0,So.useRef)();f.current===void 0&&(f.current=n(s));let m,b=!1;(a.current!==s||c.current!==n||u.current!==i||h.current)&&(m=n(s),b=!i(f.current,m)),xre(()=>{b&&(f.current=m),a.current=s,c.current=n,u.current=i,h.current=!1});let w=(0,So.useRef)(s);xre(()=>{let P=()=>{try{let O=t.getState(),C=c.current(O);u.current(f.current,C)||(a.current=O,f.current=C,o())}catch{h.current=!0,o()}},N=t.subscribe(P);return t.getState()!==w.current&&P(),N},[]);let S=b?m:f.current;return(0,So.useDebugValue)(S),S};return Object.assign(r,t),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");let n=[r,t];return{next(){let i=n.length<=0;return{value:n.shift(),done:i}}}},r}var t7e={editableAccountMetadata:void 0,setEditableAccountMetadata:()=>{}},q6=H6(e=>({...t7e,setEditableAccountMetadata:t=>{e({editableAccountMetadata:t})}}));l();d();var wre={username:"",available:null,icon:null,secretIdentifiers:[],accountIdentifiersToSync:[],addresses:{}},Sre=H6((e,t)=>({...wre,setUsername:r=>e({username:r}),setAvailable:r=>e({available:r}),setIcon:r=>e({icon:r}),addSecretIdentifier:r=>{let n=[...t().secretIdentifiers];n.includes(r)||n.push(r),e({secretIdentifiers:n})},removeSecretIdentifier:r=>{e({secretIdentifiers:t().secretIdentifiers.filter(n=>n!==r)})},addAccountIdentifierToSync:r=>{let n=[...t().accountIdentifiersToSync];n.includes(r)||n.push(r),e({accountIdentifiersToSync:n})},removeAccountIdentifierToSync:r=>{e({accountIdentifiersToSync:t().accountIdentifiersToSync.filter(n=>n!==r)})},clearAccountIdentifiersToSync:()=>e({accountIdentifiersToSync:[]}),setAccountIdentifiersToSync:r=>e({accountIdentifiersToSync:r}),addAddress:(r,n)=>{let i={...t().addresses};i[r]=n,e({addresses:i})},removeAddress:(r,n)=>{let i={...t().addresses};i[r]===n&&delete i[r],e({addresses:i})},clearAddresses:()=>{e({addresses:{}})},reset:()=>{e(wre)}}));l();d();var r7e=re(Fr());l();d();var vre=re(Ho()),eu=re(Fr());var n7e=({importPrivateKeyCallback:e,existingAccounts:t,editableAccountMetadata:r,analytics:n})=>{let{t:i}=hu(),{formState:{errors:o},control:s,clearErrors:a,getValues:c,setValue:u,register:h,handleSubmit:f,watch:m,trigger:b}=K6({mode:"all",defaultValues:{addressType:r?.addressType||"solana",networkID:r?.networkID||Ot.Solana.Mainnet}}),[w,S]=(0,eu.useState)(null),P=q6(g=>g.setEditableAccountMetadata),{name:N}=m(),O=r?.secrets,C=c("networkID"),L=c("addressType"),V=c("privateKey"),j=(0,eu.useMemo)(()=>new Lb,[]),$={required:!0},H=(0,eu.useMemo)(()=>({required:{value:!0,message:i("addAccountImportAccountPrivateKeyRequired")},onChange:g=>{g.target.value||S(null)},validate:g=>{try{let x=c("networkID"),A=c("addressType");if(/\s/.test(g)||!A)return i("addAccountImportAccountIncorrectFormat");let v=te.getNetworkDefinition(x).value,_=Kb({privateKey:g,addressType:A,networkIDValue:v});P({...r,secrets:_});let D=j.generateKeypairFromPrivateKey(_,A);return t.find(y=>!y.isReadOnly&&(y.addresses.map(I=>I.address).includes(oi({publicKey:D.publicKey,addressType:A,networkID:x}))||y.addresses.filter(I=>"publicKey"in I).map(I=>I.publicKey).find(I=>I?Buffer.from(I).equals(Buffer.from(D.publicKey)):!1)))?i("addAccountImportAccountDuplicatePrivateKey"):!0}catch{return i("addAccountImportAccountIncorrectFormat")}}}),[i,j,t,r,P,c]);(0,eu.useEffect)(()=>{if(o.privateKey){S(null);return}if(V||O)try{let g=te.getNetworkDefinition(C).value,x=O||Kb({privateKey:V,addressType:L,networkIDValue:g}),A=j.generateKeypairFromPrivateKey(x,L);if(!V){let v="";switch(L){case"solana":{v=vre.default.encode(A.privateKey);break}case"eip155":{v="0x"+Buffer.from(A.privateKey).toString("hex");break}case"sui":{v=f1(A.privateKey);break}}u("privateKey",v)}S(oi({publicKey:A.publicKey,addressType:L,networkID:C}))}catch{S(null)}},[o.privateKey,L,j,V,O,u,C]);let Y=(0,eu.useMemo)(()=>!!(N&&V&&!o.name&&!o.privateKey),[o.name,o.privateKey,N,V]),B=(0,eu.useCallback)(async({networkID:g,name:x,privateKey:A,addressType:v})=>{let _=te.getNetworkDefinition(g).value,D=Kb({privateKey:A,addressType:v,networkIDValue:_});await e({chainType:v,name:x,icon:r?.icon,privateKey:D}),n.capture("addPrivateKeyAccount",{data:{networkID:g,chainType:v}})},[e,r?.icon,n]);return{formOnSubmitHandler:f(g=>B(g)),canSubmit:Y,control:s,getValues:c,register:h,setValue:u,trigger:b,errors:o,clearErrors:a,nameValidations:$,privateKey:V,privateKeyValidations:H,addressPreview:w}};l();d();var i7e=async(e,t,r)=>{let{enabledAddressTypes:n,enabledChainIDs:i,enabledMainnetOnlyNetworkIDs:o}=r,[s,a]=await Promise.all([t.get("developerMode"),Oy(t)]),c=await e.fetchAllAccounts(),u=await Qu(c,t),h=await Fx(t,u.identifier),f={name:h.name,icon:h.icon,identifier:u.identifier,addresses:Ox(u,o,n,i,a,s?.isDeveloperMode??!1)};return u.type==="seed"?{...f,type:"seed",seedIdentifier:u.seedIdentifier,isReadOnly:!1}:u.type==="seedless"?{...f,type:"seedless",seedIdentifier:u.seedIdentifier,isReadOnly:!1}:u.type==="readOnly"?{...f,type:"readOnly",isReadOnly:!0}:u.type==="privateKey"?{...f,privateKeyIdentifier:u.privateKeyIdentifier,type:"privateKey",isReadOnly:!1}:{...f,type:u.type,isReadOnly:!1}};l();d();export{BD as a,CD as b,dg as c,L4 as d,jD as e,hO as f,J0 as g,eI as h,vO as i,tI as j,nI as k,IO as l,iI as m,sI as n,TO as o,BO as p,lI as q,$2 as r,uR as s,lR as t,jI as u,jU as v,As as w,WI as x,dp as y,zI as z,GI as A,XU as B,QU as C,eR as D,tR as E,nR as F,iR as G,oR as H,sR as I,mfe as J,ko as K,$o as L,pk as M,Kle as N,yk as O,mk as P,gk as Q,Li as R,we as S,zR as T,Jf as U,Vi as V,Be as W,hUe as X,Bu as Y,YR as Z,mb as _,yb as $,Xf as aa,XR as ba,BS as ca,gb as da,tL as ea,Yle as fa,Zle as ga,wk as ha,Jle as ia,Xle as ja,Qle as ka,ti as la,cL as ma,vp as na,Ek as oa,nde as pa,vde as qa,Ade as ra,Ep as sa,Bk as ta,Ck as ua,Fk as va,Wk as wa,zk as xa,uVe as ya,rl as za,gT as Aa,Hp as Ba,Nb as Ca,Lb as Da,Qp as Ea,zv as Fa,Hye as Ga,Kb as Ha,nA as Ia,sP as Ja,kP as Ka,DP as La,Bj as Ma,hx as Na,oi as Oa,Fl as Pa,mB as Qa,wy as Ra,Sy as Sa,Hl as Ta,ql as Ua,Wl as Va,zl as Wa,PB as Xa,te as Ya,lW as Za,Ot as _a,Yu as $a,sW as ab,Gl as bb,uW as cb,fW as db,SE as eb,dW as fb,hW as gb,pW as hb,yW as ib,mW as jb,gW as kb,bW as lb,xW as mb,wW as nb,SW as ob,vW as pb,AW as qb,vE as rb,Uc as sb,AE as tb,EW as ub,IW as vb,DB as wb,OB as xb,wx as yb,TW as zb,W2e as Ab,z2e as Bb,G2e as Cb,$2e as Db,Rh as Eb,RB as Fb,Zu as Gb,tSe as Hb,rSe as Ib,LB as Jb,La as Kb,iSe as Lb,oSe as Mb,UE as Nb,Bx as Ob,GSe as Pb,nve as Qb,Ux as Rb,ZB as Sb,QB as Tb,ive as Ub,t_ as Vb,ave as Wb,cve as Xb,sz as Yb,uve as Zb,LE as _b,vx as $b,sSe as ac,cSe as bc,uSe as cc,fve as dc,lve as ec,dve as fc,az as gc,qB as hc,Lh as ic,$W as jc,YW as kc,SSe as lc,OSe as mc,fSe as nc,Ei as oc,lSe as pc,ir as qc,USe as rc,RSe as sc,Px as tc,Ka as uc,tz as vc,HSe as wc,YB as xc,qSe as yc,jSe as zc,WSe as Ac,fdt as Bc,jh as Cc,_ve as Dc,Cve as Ec,Nve as Fc,Mve as Gc,lG as Hc,$Ee as Ic,YEe as Jc,jE as Kc,nw as Lc,$9 as Mc,Y9 as Nc,cr as Oc,qJ as Pc,g0 as Qc,q7 as Rc,sQ as Sc,cQ as Tc,lQ as Uc,CQ as Vc,DQ as Wc,yee as Xc,o6 as Yc,mee as Zc,nBe as _c,k0 as $c,Nee as ad,vN as bd,O_e as cd,I6 as dd,xo as ed,U_e as fd,R_e as gd,oc as hd,ON as id,L_e as jd,V_e as kd,Ir as ld,UN as md,K_e as nd,F_e as od,Tte as pd,$m as qd,kPt as rd,TPt as sd,PPt as td,BPt as ud,_Pt as vd,CPt as wd,j_e as xd,W_e as yd,P0 as zd,n9e as Ad,lr as Bd,N6 as Cd,i9e as Dd,o9e as Ed,Jw as Fd,Y_e as Gd,WN as Hd,Mte as Id,s9e as Jd,a9e as Kd,c9e as Ld,u9e as Md,f9e as Nd,l9e as Od,d9e as Pd,ta as Qd,J_e as Rd,h9e as Sd,p9e as Td,y9e as Ud,m9e as Vd,g9e as Wd,Zw as Xd,b9e as Yd,x9e as Zd,E9e as _d,tre as $d,K6 as ae,D9e as be,O9e as ce,U9e as de,V9e as ee,K9e as fe,F9e as ge,W9e as he,$9e as ie,Y9e as je,X_e as ke,Q_e as le,Z9e as me,e9e as ne,J9e as oe,r9e as pe,X9e as qe,H6 as re,q6 as se,Sre as te,n7e as ue,i7e as ve};
/*! Bundled license information:

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/ed25519/lib/index.js:
  (*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@solana/buffer-layout/lib/Layout.js:
  (**
   * Support for translating between Uint8Array instances and JavaScript
   * native types.
   *
   * {@link module:Layout~Layout|Layout} is the basis of a class
   * hierarchy that associates property names with sequences of encoded
   * bytes.
   *
   * Layouts are supported for these scalar (numeric) types:
   * * {@link module:Layout~UInt|Unsigned integers in little-endian
   *   format} with {@link module:Layout.u8|8-bit}, {@link
   *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},
   *   {@link module:Layout.u32|32-bit}, {@link
   *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~UIntBE|Unsigned integers in big-endian
   *   format} with {@link module:Layout.u16be|16-bit}, {@link
   *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},
   *   {@link module:Layout.u40be|40-bit}, and {@link
   *   module:Layout.u48be|48-bit} representation ranges;
   * * {@link module:Layout~Int|Signed integers in little-endian
   *   format} with {@link module:Layout.s8|8-bit}, {@link
   *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},
   *   {@link module:Layout.s32|32-bit}, {@link
   *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~IntBE|Signed integers in big-endian format}
   *   with {@link module:Layout.s16be|16-bit}, {@link
   *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},
   *   {@link module:Layout.s40be|40-bit}, and {@link
   *   module:Layout.s48be|48-bit} representation ranges;
   * * 64-bit integral values that decode to an exact (if magnitude is
   *   less than 2^53) or nearby integral Number in {@link
   *   module:Layout.nu64|unsigned little-endian}, {@link
   *   module:Layout.nu64be|unsigned big-endian}, {@link
   *   module:Layout.ns64|signed little-endian}, and {@link
   *   module:Layout.ns64be|unsigned big-endian} encodings;
   * * 32-bit floating point values with {@link
   *   module:Layout.f32|little-endian} and {@link
   *   module:Layout.f32be|big-endian} representations;
   * * 64-bit floating point values with {@link
   *   module:Layout.f64|little-endian} and {@link
   *   module:Layout.f64be|big-endian} representations;
   * * {@link module:Layout.const|Constants} that take no space in the
   *   encoded expression.
   *
   * and for these aggregate types:
   * * {@link module:Layout.seq|Sequence}s of instances of a {@link
   *   module:Layout~Layout|Layout}, with JavaScript representation as
   *   an Array and constant or data-dependent {@link
   *   module:Layout~Sequence#count|length};
   * * {@link module:Layout.struct|Structure}s that aggregate a
   *   heterogeneous sequence of {@link module:Layout~Layout|Layout}
   *   instances, with JavaScript representation as an Object;
   * * {@link module:Layout.union|Union}s that support multiple {@link
   *   module:Layout~VariantLayout|variant layouts} over a fixed
   *   (padded) or variable (not padded) span of bytes, using an
   *   unsigned integer at the start of the data or a separate {@link
   *   module:Layout.unionLayoutDiscriminator|layout element} to
   *   determine which layout to use when interpreting the buffer
   *   contents;
   * * {@link module:Layout.bits|BitStructure}s that contain a sequence
   *   of individual {@link
   *   module:Layout~BitStructure#addField|BitField}s packed into an 8,
   *   16, 24, or 32-bit unsigned integer starting at the least- or
   *   most-significant bit;
   * * {@link module:Layout.cstr|C strings} of varying length;
   * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link
   *   module:Layout~Blob#length|length} raw data.
   *
   * All {@link module:Layout~Layout|Layout} instances are immutable
   * after construction, to prevent internal state from becoming
   * inconsistent.
   *
   * @local Layout
   * @local ExternalLayout
   * @local GreedyCount
   * @local OffsetLayout
   * @local UInt
   * @local UIntBE
   * @local Int
   * @local IntBE
   * @local NearUInt64
   * @local NearUInt64BE
   * @local NearInt64
   * @local NearInt64BE
   * @local Float
   * @local FloatBE
   * @local Double
   * @local DoubleBE
   * @local Sequence
   * @local Structure
   * @local UnionDiscriminator
   * @local UnionLayoutDiscriminator
   * @local Union
   * @local VariantLayout
   * @local BitStructure
   * @local BitField
   * @local Boolean
   * @local Blob
   * @local CString
   * @local Constant
   * @local bindConstructorLayout
   * @module Layout
   * @license MIT
   * @author Peter A. Bigot
   * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}
   *)

@babel/runtime/helpers/regeneratorRuntime.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE *)

@noble/secp256k1/lib/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

assert/build/internal/util/comparisons.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
   * @license  MIT
   *)

@noble/ed25519/lib/esm/index.js:
  (*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/secp256k1/lib/esm/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@scure/bip39/esm/index.js:
  (*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@scure/base/lib/esm/index.js:
  (*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@scure/btc-signer/index.js:
  (*! scure-btc-signer - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-3GZCHS7Y.js.map
