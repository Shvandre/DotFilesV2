import{Oa as ye,Qa as fe,Ra as xe,S as ue,o as $,xa as V,ya as ge}from"./chunk-YNOMEZGR.js";import{a as M}from"./chunk-Z2IREGI3.js";import{g as pe}from"./chunk-3NW35I2P.js";import{a as he}from"./chunk-7TOQ3J6S.js";import{p as R}from"./chunk-I6U22RLL.js";import{ya as de,za as me}from"./chunk-5HSK4GMQ.js";import{ld as j}from"./chunk-HKKBRKQE.js";import{Qd as ae,eb as z}from"./chunk-3GZCHS7Y.js";import{F as m,H as x,K as se,L as le,M as p,R as N,T as ce,ra as q,x as ie}from"./chunk-BY5XXL4W.js";import{A as re}from"./chunk-WP4K54AS.js";import{J as te,O as oe,ga as ne,t as ee}from"./chunk-NL7NWYRL.js";import{a as W}from"./chunk-57IY32VM.js";import{f as O,h as E,n as P}from"./chunk-3KENBVE7.js";E();P();var e=O(W());E();P();var s=O(W());E();P();var w=O(W());var Se=t=>{if(typeof t=="number")return t;switch(t??"small"){case"normal":return 48;case"small":return 32;case"xsmall":return 24;case"xxsmall":return 16}},$e=t=>{switch(t){case"square":return 6;case"circle":default:return 0}},Ve=R.div`
  width: ${t=>t.width}px;
  height: ${t=>t.height}px;
  align-items: center;
  justify-content: center;
  background-color: ${t=>oe(t.color,t.alpha??.1)};
`,H=({src:t,fallback:o,alt:r,size:n="normal",shape:a="circle",style:l,onDragStart:h})=>{let u=o??w.default.createElement(Fe,null,"?"),d=Se(n),y=Se(n),b=$e(a);return a==="circle"?w.default.createElement(he,{color:x.colors.legacy.bgWallet,diameter:d,style:l},w.default.createElement(q,{src:t,fallback:u,alt:r||void 0,width:d,height:y,borderRadius:b,onDragStart:h,loader:w.default.createElement(M,{borderRadius:`${b}px`,width:`${d}px`,height:`${y}px`})})):w.default.createElement(Ve,{color:x.colors.legacy.bgWallet,width:d,height:y,style:l},w.default.createElement(q,{src:t,fallback:u,alt:r||"",width:d,height:y,borderRadius:b,onDragStart:h,loader:w.default.createElement(M,{borderRadius:`${b}px`,width:`${d}px`,height:`${y}px`})}))},Fe=R.div`
  font-size: 22px;
  line-height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
`;var Oe=({item:t,index:o,onClick:r})=>{let n=t.type==="token"?t.data.data.symbol:t.data.name,a=(0,s.useCallback)(u=>{u.preventDefault()},[]),l=t.type==="token"?s.default.createElement($,{image:{type:"fungible",src:t.data.data.logoUri,fallback:t.data.data.symbol??""},tokenType:t.data.type,chainMeta:t.data.data.chain,size:36}):t.type==="dapp"?s.default.createElement(H,{src:t.data.imageUrl,size:36,shape:"square",onDragStart:a}):null,h=(0,s.useCallback)(()=>{r(o,t)},[o,r,t]);return s.default.createElement("div",{className:F.buttonContainer},s.default.createElement("div",{className:F.button,onClick:h},l,s.default.createElement(p,{className:F.text,color:"white",children:n??""})))},Ce=({items:t,onClick:o})=>{let r=ce(0),n=(0,s.useRef)(null),[a,l]=(0,s.useState)(0),h=(0,s.useMemo)(()=>{let u=self.innerWidth-a;return Math.min(0,u)},[a]);return(0,s.useEffect)(()=>{n.current&&l(n.current.scrollWidth)},[t]),s.default.createElement(le,{overflow:"hidden"},s.default.createElement(N.div,{ref:n},s.default.createElement(N.div,{className:F.scrollView,style:{x:r},drag:"x",dragConstraints:{left:h,right:0}},t.map((u,d)=>s.default.createElement(Oe,{key:d,item:u,index:d,onClick:o})))))},F={scrollView:m({paddingTop:8,display:"flex",flexDirection:"row",paddingLeft:8}),buttonContainer:m({paddingRight:10}),button:m({display:"flex",flexDirection:"row",alignItems:"center",backgroundColor:{base:"bgRow",hover:"bgButton"},cursor:"pointer",borderRadius:12,paddingX:6,paddingY:6,height:48}),text:m({font:"body",color:"white",paddingLeft:6,whiteSpace:"nowrap"})};var We=R.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: solid 1px;
  width: 100%;
  padding: 10px 0;
  padding-right: 16px;
  flex: 1;
  overflow: hidden;
  border-color: ${t=>t.isLast?x.colors.legacy.bgWallet:x.colors.legacy.borderSecondary};
`,C={searchResultsContainer:m({marginTop:16,width:"100%"}),searchResultsHeaderContainer:m({paddingX:16,paddingY:4,display:"flex",alignItems:"center",justifyContent:"space-between"}),searchResult:m({display:"flex",alignItems:"center",paddingLeft:16,gap:16,height:56,maxHeight:56,cursor:"pointer",width:"100%",maxWidth:"100%"}),searchResultTextContainer:m({display:"flex",flexDirection:"column",minWidth:0,flex:1,marginRight:8}),hover:m({cursor:"pointer"}),picturePlaceholder:m({borderRadius:6,height:32,width:32}),noResultsContainer:m({position:"absolute",top:64,right:0,bottom:0,left:0,display:"flex",justifyContent:"center",alignItems:"center",paddingBottom:56}),tokenSecondaryContainer:m({display:"flex",gap:4,alignItems:"center"}),dotContainer:m({display:"flex",justifyContent:"center",alignItems:"center",width:8}),dot:m({backgroundColor:"textSecondary",width:4,height:4,borderRadius:"circle"}),secondaryAction:m({display:"flex",justifyContent:"center",alignItems:"center",width:32,height:32,borderRadius:10,padding:6})},Ie=(t,o,{priceMap:r,isPriceMapLoading:n,isReadOnlyAccount:a,entryPoint:l,navigateToSwapper:h,handleHideModalVisibility:u,addRecentlySearchedItem:d,dappsItems:y,pushDetailView:b})=>{let c=z(j(t)),I=r[c],A=I?.price,D=A!==void 0,g=I?.usd_24h_change,S=g!==void 0,T=D||S;return{type:"generic",key:c,"data-testid":`search-result-token-${t.data.symbol}`,image:e.default.createElement($,{image:{type:"fungible",src:t.data.logoUri,fallback:t.data.symbol??""},tokenType:t.type,chainMeta:t.data.chain,size:32}),textMain:e.default.createElement(p,{children:ee(t.data.name||"",25),font:"body"}),textSecondary:e.default.createElement("div",{className:C.tokenSecondaryContainer},e.default.createElement(p,{children:t.data.symbol||"",font:"caption",color:"textSecondary"}),n?e.default.createElement(e.default.Fragment,null,e.default.createElement(M,{width:"36px",height:"14px",borderRadius:"8px"}),e.default.createElement(M,{width:"48px",height:"14px",borderRadius:"8px"})):e.default.createElement(e.default.Fragment,null,T?e.default.createElement("div",{className:C.dotContainer},e.default.createElement("div",{className:C.dot})):null,D?e.default.createElement(ue,{value:A,font:"caption",color:"textSecondary"}):null,S?e.default.createElement(p,{children:`${ne(g,{includePlusPrefix:!0})}%`,font:"caption",color:g>=0?"accentSuccess":"accentAlert",truncate:"ellipsis"}):null)),secondaryAction:a?void 0:{icon:e.default.createElement(se.Swap,null),onClick:k=>{k.stopPropagation(),h({buyFungibleCaip19:c}),l==="home"&&setTimeout(()=>{u("searchPage")},50)}},onClick:async()=>{we({addRecentlySearchedItem:d,token:t,position:y.length+o+1,entryPoint:l,handleHideModalVisibility:u,pushDetailView:b})}}},Tt=({searchedDapps:t,tokens:o,trendingTokens:r,priceMap:n,isPriceMapLoading:a,showMoreDapps:l,setShowMoreDapps:h,renderShowMoreDappsButton:u,showMoreTokens:d,setShowMoreTokens:y,renderShowMoreTokensButton:b,entryPoint:c,recentlyViewedSearchItems:I=[],searchQuery:A,categories:D})=>{let{t:g}=ie(),{pushDetailView:S}=pe(),T=ye(),{handleHideModalVisibility:k}=xe(),X=c==="home",J=re(),{mutate:v}=de(J),{mutate:G}=me(J),{data:Te}=ae(),U=!!Te?.isReadOnly,L=(0,e.useMemo)(()=>t.map((i,f)=>({type:"generic",key:i.id,"data-testid":`search-result-dapp-${i.name}`,image:e.default.createElement(H,{src:i.imageUrl,size:"small",shape:"square"}),textMain:e.default.createElement(p,{children:i.name,font:"body"}),textSecondary:e.default.createElement(p,{children:i.category||"",font:"caption",color:"textSecondary"}),onClick:async()=>{ke({addRecentlySearchedItem:v,dapp:i,position:f+1,entryPoint:c})}})),[t,v,c]),Y=(0,e.useMemo)(()=>o.map((i,f)=>Ie(i,f,{priceMap:n,isPriceMapLoading:a,isReadOnlyAccount:U,entryPoint:c,navigateToSwapper:T,handleHideModalVisibility:k,addRecentlySearchedItem:v,dappsItems:L,pushDetailView:S})),[o,n,a,U,c,T,k,v,L,S]),_=(0,e.useMemo)(()=>r.map((i,f)=>Ie(i,f,{priceMap:n,isPriceMapLoading:a,isReadOnlyAccount:U,entryPoint:c,navigateToSwapper:T,handleHideModalVisibility:k,addRecentlySearchedItem:v,dappsItems:L,pushDetailView:S})),[r,n,a,U,c,T,k,v,L,S]),Q=(0,e.useMemo)(()=>(D||[]).map((i,f)=>({type:"generic",key:i.id,"data-testid":`search-result-category-${i.name}`,image:e.default.createElement(H,{src:i.imageUri,size:"small",shape:"square"}),textMain:e.default.createElement(p,{children:i.name,font:"body"}),textSecondary:e.default.createElement(p,{children:g("fungibleCategoriesNumTokens",{numTokens:i.numTokens}),font:"caption",color:"textSecondary"}),onClick:()=>{S(e.default.createElement(ge,{id:i.id})),V.onExploreListItemClickedByUser({datasourceId:"",listName:"token-categories",context:"explore",itemDetails:{position:f,title:i.name,id:i.id}})}})),[D,g,S]),Le=(0,e.useMemo)(()=>({type:"recentSearchItems",key:"recentSearchItems",items:I,onClick:async(i,f)=>{if(f.type==="token")we({addRecentlySearchedItem:v,token:f.data,position:i,entryPoint:c,handleHideModalVisibility:k,pushDetailView:S});else if(f.type==="dapp")ke({addRecentlySearchedItem:v,dapp:f.data,position:i,entryPoint:c});else throw new Error("Unknown item type")}}),[v,k,c,S,I]),Ee=I.length?g("commandClear"):void 0,Pe=(0,e.useCallback)(()=>{G()},[G]),Me=b?g(d?"exploreShowLess":"exploreShowMore"):void 0,Ae=(0,e.useCallback)(()=>{y(!d)},[y,d]),De=u?g(l?"exploreShowLess":"exploreShowMore"):void 0,Ne=(0,e.useCallback)(()=>{h(!l)},[h,l]);if(!t.length&&!o.length)return e.default.createElement("div",{className:C.noResultsContainer,"data-testid":"explore-search-results-nodata"},e.default.createElement(p,{children:g("dappBrowserSearchNoAppsTokens"),font:"bodyMedium",color:"textSecondary"}));let K=A==null||A.length===0,Re=I.length&&K?e.default.createElement(B,{testId:"explore-search-results",title:e.default.createElement(p,{children:g("dAppBrowserRecents"),font:"title1Semibold"}),items:[Le],accessoryText:Ee,accessoryOnPress:Pe}):null,He=Q.length?e.default.createElement(B,{testId:"explore-search-results-categories",title:e.default.createElement(p,{children:g("exploreCategories"),font:"title1Semibold"}),items:Q}):null,Z=L.length?e.default.createElement(B,{testId:"explore-search-results",title:e.default.createElement(p,{children:g("exploreSites"),font:"title1Semibold"}),items:L,accessoryText:De,accessoryOnPress:Ne}):null,Be=Y.length?e.default.createElement(B,{testId:"explore-search-results",title:e.default.createElement(p,{children:g("exploreTokens"),font:"title1Semibold"}),items:Y,accessoryText:Me,accessoryOnPress:Ae}):null,Ue=K&&_.length?e.default.createElement(B,{testId:"explore-search-results",title:e.default.createElement(p,{children:g("exploreTrendingTokens"),font:"title1Semibold"}),items:_}):null;return e.default.createElement(e.default.Fragment,null,Re,X?void 0:Z,Ue,Be,He,X?Z:void 0)},ve=({hoverColor:t,baseColor:o,...r})=>e.default.createElement(N.div,{...r,whileHover:{background:t},style:{background:o},transition:{ease:[.5,1,.89,1],duration:.1}}),B=({items:t,title:o,testId:r,accessoryText:n,accessoryOnPress:a})=>e.default.createElement("div",{className:C.searchResultsContainer,"data-testid":r},e.default.createElement("div",{className:C.searchResultsHeaderContainer},o,n?e.default.createElement(p,{className:C.hover,children:n,font:"caption",color:"textSecondary",onPress:a}):null),t.map((l,h)=>e.default.createElement(ze,{...l,isLast:h===t.length-1}))),ze=t=>{let[o,r]=(0,e.useState)(!1),[n,a]=(0,e.useState)(!1);if(t.type==="recentSearchItems")return e.default.createElement(Ce,{items:t.items,onClick:t.onClick});let{onClick:h,image:u,isLast:d,textMain:y,textSecondary:b,secondaryAction:c,"data-testid":I}=t;return e.default.createElement(ve,{className:C.searchResult,onClick:h,"data-testid":I,baseColor:x.colors.legacy.bgWallet,hoverColor:n?x.colors.legacy.bgWallet:x.colors.legacy.bgButton,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1)},e.default.createElement("div",null,u),e.default.createElement(We,{isLast:d},e.default.createElement("div",{className:C.searchResultTextContainer},y,b),c?e.default.createElement(ve,{className:C.secondaryAction,onClick:c.onClick,baseColor:o?x.colors.legacy.borderPrimary:x.colors.legacy.bgButton,hoverColor:x.colors.legacy.borderPrimary,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1)},c.icon):null))};function ke({addRecentlySearchedItem:t,dapp:o,position:r,entryPoint:n}){t({type:"dapp",data:o}),self.open(te(o.domain).origin),V.searchItemClickedByUser({itemDetails:{position:r,title:o.name,id:o.id,type:"site",uiContext:n}})}function we({addRecentlySearchedItem:t,token:o,position:r,entryPoint:n,pushDetailView:a}){let l=z(j(o));V.searchItemClickedByUser({itemDetails:{position:r,title:o.data.name||o.data.symbol||l,id:l,type:"token",uiContext:n}}),a(e.default.createElement(fe,{caip19:l,title:o.data.name??void 0,entryPoint:"exploreSearch"})),t({type:"token",data:o})}export{Tt as a};
//# sourceMappingURL=chunk-KNTCPGPM.js.map
