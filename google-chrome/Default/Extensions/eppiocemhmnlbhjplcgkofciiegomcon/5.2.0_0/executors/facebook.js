(()=>{function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){s=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return u}}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw a}}}}function n(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var i,o=null!==(i=sessionStorage.getItem("bis_data"))?JSON.parse(i):null,a=o?o.config.facebookConfig.videoDetectorConfigNew:null,u=o?o.id+"_w":null;var l="SCRIPT",s="XML_HTTP_REQUEST",f="INSTREAM_CONFIG",c="MARKETPLACE_VIDEO_AD",E="FEED_VIDEO_AD",v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"",s=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"";return{detectionTime:Date.now()/1e3|0,videoId:e,videoUrl:t,previewImageUrl:r,audioUrl:n,linkDisplay:i,userName:o,adName:a,adLogo:u,videoResolutionId:l,audioResolutionId:s}},A=function(e,t){var n,r=new RegExp(t,"i"),i=e.match(r),o=null===(n=t.match(new RegExp("\\?<(?<groupName>.[^>]*)>")))||void 0===n?void 0:n.groups.groupName;if(!i)return!1;if(i.groups&&o)return 0===i.groups[o].search(/"/)?i.groups[o].replace(/"/,""):i.groups[o];var a=i.filter((function(e){return e}));return!!a[1]&&a[1]},d=function(e,n){try{var r=n.replace(/\}(\r|\n)/g,"}BIS_SEPARATOR").split(/BIS_SEPARATOR/g),i=e.CHECKER;r=r.filter((function(e){return i.some((function(t){return new RegExp(t).test(e)}))}));var o=[];if(r.length){var a,u=t(r);try{for(u.s();!(a=u.n()).done;){var l=a.value,s=l;"string"==typeof l&&(s=JSON.parse(l));var f=O(s,e),c=g(s,e),E=y(s,e),A=T(s,e.PATH_USER_NAME),d=T(s,e.PATH_VIDEO_REPRESENTATION_ID,parseInt(E)),_=T(s,e.PATH_AUDIO_REPRESENTATION_ID,parseInt(E)),h=v(E,f,"",c,"",A,"","",d,_);E&&f&&o.push(h)}}catch(e){u.e(e)}finally{u.f()}o.forEach((function(e){setTimeout(P(e,"FACEBOOK_VIDEO_DATA"),0)}))}}catch(e){}},_=function(e,n,r){var i=[],o=[];try{i.push(JSON.parse(n)),setTimeout(P({url:r,requestMethod:"POST",content:i},"FACEBOOK_INSTREAM_DATA"),0)}catch(a){(i="".concat(n).replace(/\}(\r|\n)/g,"}BIS_SEPARATOR").split(/BIS_SEPARATOR/g)).forEach((function(n,r){if(!(n.length<=3)&&e.CHECKER.some((function(e){return n.includes(e)}))){var i,a=JSON.parse(n),u=a,l=a,s=t(e.PATH_NODES);try{for(s.s();!(i=s.n()).done;){var f=i.value,c=e.PATH_NODES.indexOf(f),E=e.PATH_NODES.length-1;c!==E&&u[f]&&(u=u[f]),c===E&&u[f]&&((u=u[f]).length?u.forEach((function(t){t.bisLinks={aboutPageLink:I(t,e.PATH_USER_ID)},t.video_id=h(t,e.PATH_VIDEO_ID),o.push(t)})):(u.bisLinks={aboutPageLink:I(u,e.PATH_USER_ID)},u.video_id=h(u,e.PATH_VIDEO_ID),o.push(u)))}}catch(e){s.e(e)}finally{s.f()}var v,A=t(e.PATH_ALL_VIDEO);try{var d=function(){var n=v.value,r=e.PATH_ALL_VIDEO.indexOf(n),i=e.PATH_ALL_VIDEO.length-1;if(r!==i&&l[n]&&(l=l[n]),"string"!=typeof n&&r===i&&n.length)if(l.length)l.forEach((function(e,r){var i=o[r];if(i.video_id===e.video_id){var a,u=t(n);try{for(u.s();!(a=u.n()).done;){var l=a.value;if(e[l]){i[l]=e[l];break}}}catch(e){u.e(e)}finally{u.f()}}}));else if(1===o.length){var a=o[0];if(a.video_id===l.video_id){var u,s=t(n);try{for(s.s();!(u=s.n()).done;){var f=u.value;if(l[f]){a[f]=l[f];break}}}catch(e){s.e(e)}finally{s.f()}}}};for(A.s();!(v=A.n()).done;)d()}catch(e){A.e(e)}finally{A.f()}}})),o.forEach((function(e){setTimeout(P({url:r,requestMethod:"POST",content:e},"FACEBOOK_INSTREAM_DATA"),0)}))}},h=function(e,n){var r,i=e,o=null,a=t(n);try{for(a.s();!(r=a.n()).done;){var u=r.value,l=n.indexOf(u),s=n.length-1;l!==s&&i[u]&&(i=i[u]),l===s&&i[u]&&(o=i[u])}}catch(e){a.e(e)}finally{a.f()}return parseInt(o,10)},I=function(e,n){var r,i=e,o=null,a=t(n);try{for(a.s();!(r=a.n()).done;){var u=r.value,l=n.indexOf(u),s=n.length-1;l!==s&&i[u]&&(i=i[u]),l===s&&i[u]&&(o="https://www.facebook.com/".concat(i[u],"/about"))}}catch(e){a.e(e)}finally{a.f()}return o},R=function(e,t){t=t.replace(/ /g,"");var n=A(t,e.VIDEO_ID);if(n){var r=null,i=null,o="",u="",l="",s="",f="";e.VIDEO_HD_URL&&(r=A(t,e.VIDEO_HD_URL)),e.VIDEO_SD_URL&&!r&&(i=A(t,e.VIDEO_SD_URL)),e.LINK_DISPLAY&&(l=A(t,e.LINK_DISPLAY)),a.VIDEO_AUDIO_URL&&(o=(o=A(t,e.VIDEO_AUDIO_URL))?o.split("\\").join(""):o),e.THUMBNAIL&&(u=(u=A(t,e.THUMBNAIL))?u.split("\\").join(""):u),e.VIDEO_REPRESENTATION_ID&&(s=A(t,e.VIDEO_REPRESENTATION_ID)),e.AUDIO_REPRESENTATION_ID&&(f=A(t,e.AUDIO_REPRESENTATION_ID));var c=r||i;if(c){c=c.split("\\").join("");var E=v(n,c,o,u,l,"","","",s,f);setTimeout(P(E,"FACEBOOK_VIDEO_DATA"),0)}}},p=function(e,n){try{var r="".concat(n).replace(/\}(\r|\n)/g,"}BIS_SEPARATOR").split(/BIS_SEPARATOR/g),i=e.CHECKER;r=r.filter((function(e){return i.some((function(t){return new RegExp(t).test(e)}))}));var o=[];if(r.length){var a,u=t(r);try{for(u.s();!(a=u.n()).done;){var l=a.value,s=l;"string"==typeof l&&(s=JSON.parse(l));var f=S(s,e),c=O(s,e),E=g(s,e),A=y(s,e),d=T(s,e.PATH_NAME),_=T(s,e.PATH_LOGO),h=T(s,e.PATH_VIDEO_REPRESENTATION_ID,parseInt(A)),I=T(s,e.PATH_AUDIO_REPRESENTATION_ID,parseInt(A)),R=v(A,c,f,E,"","",d,_,h,I);A&&c&&o.push(R)}}catch(e){u.e(e)}finally{u.f()}o.forEach((function(e){setTimeout(P(e,"FACEBOOK_VIDEO_DATA"),0)}))}}catch(e){}},T=function(n,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a="",u=t(r);try{for(u.s();!(i=u.n()).done;)for(var l=i.value,s=l.length,f=n,c=0;c<s;c++){var E=l[c],v=s-1;if("*"===E&&o){var A=f.filter((function(e){return o===parseInt(e.video_id)}));if(!(f=e(A,1)[0]))break}else if(E<0)f=f.slice(E,f.length)[0];else{if(!f[E])break;if(c===v){a=f[E];break}c!==v&&(f=f[E])}}}catch(e){u.e(e)}finally{u.f()}return a},S=function(e,n){var r,i="",o=t(n.PATH_AUDIO_URL);try{for(o.s();!(r=o.n()).done;)for(var a=r.value,u=a.length,l=e,s=0;s<u;s++){var f=a[s],c=u-1;if(!l[f])break;s!==c&&l[f]&&(l=l[f]),s===c&&l[f]&&(i=l[f])}}catch(e){o.e(e)}finally{o.f()}return i},O=function(n,r){var i,o=null,a=t(r.PATH_VIDEO_URL);try{for(a.s();!(i=a.n()).done;)for(var u=i.value,l=u.length,s=n,f=0;f<l;f++){var c=u[f],E=l-1;if(!s[c]&&c.includes&&!c.includes("%%%"))break;if(f!==E&&s[c]&&(s=s[c]),c.includes&&c.includes("%%%")){var v=e(c.split("%%%"),2),A=v[0],d=v[1];if(s[A]||s[d]){if(f===E){o=s[A]?s[A]:s[d];break}s=s[A]?s[A]:s[d]}}f===E&&s[c]&&(o=s[c])}}catch(e){a.e(e)}finally{a.f()}return o},g=function(e,n){var r,i=null,o=t(n.PATH_THUMBNAIL);try{for(o.s();!(r=o.n()).done;)for(var a=r.value,u=a.length,l=e,s=0;s<u;s++){var f=a[s],c=u-1;if(!l[f])break;s!==c&&l[f]&&(l=l[f]),s===c&&l[f]&&(i=l[f])}}catch(e){o.e(e)}finally{o.f()}return i},y=function(e,n){var r,i=null,o=t(n.PATH_VIDEO_ID);try{for(o.s();!(r=o.n()).done;)for(var a=r.value,u=a.length,l=e,s=0;s<u;s++){var f=a[s],c=u-1;if(!l[f])break;s!==c&&l[f]&&(l=l[f]),s===c&&l[f]&&(i=l[f])}}catch(e){o.e(e)}finally{o.f()}return i},D=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=function(e,t){t=String(t);var n=a.PARSER_CONFIG[e];return n.SEPARATOR?t.split(n.SEPARATOR):[t]}(n,e);i.forEach((function(e){setTimeout((function(){return function(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=t(r?a.PARSERS.filter((function(e){return e.TYPE===r})):a.PARSERS);try{var u=function(){var t=n.value;if(t.CHECKER.some((function(t){return e.includes(t)})))switch(r){case f:setTimeout((function(){return _(t,e,i)}),0);break;case c:setTimeout((function(){return p(t,e,i)}),0);break;case E:setTimeout((function(){return d(t,e,i)}),0);break;default:setTimeout((function(){return R(t,e)}),0)}};for(o.s();!(n=o.n()).done;)u()}catch(e){o.e(e)}finally{o.f()}}(e,n,r)}),0)}))},P=function(e,t){return function(){!function(e,t,n){try{var r={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:n,from:e,to:e.substring(0,e.length-2),content:t};window.postMessage(r)}catch(e){}}(u,e,t)}};if(null!=a&&a.PARSER_CONFIG.SCRIPT.USE){var b=function(){var e,n=t(document.querySelectorAll("script"));try{for(n.s();!(e=n.n()).done;){var r=e.value;r.hasAttribute("bis_use")||(r.setAttribute("bis_use","true"),D(r.innerHTML,l))}}catch(e){n.e(e)}finally{n.f()}};b(),setInterval(b,a.PARSER_CONFIG.SCRIPT.INTERVAL_MS||5e3)}if(null!=a&&a.PARSER_CONFIG.LISTEN_HTTP_REQUESTS){var H=XMLHttpRequest.prototype.open,m=XMLHttpRequest.prototype.setRequestHeader,N=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.setRequestHeader=function(){var e=arguments[0].toLowerCase(),t=arguments[1];this.requestHeaders||(this.requestHeaders={}),this.requestHeaders[e]=t,m.apply(this,arguments)},XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],H.apply(this,arguments)},XMLHttpRequest.prototype.send=function(){var e=this.onreadystatechange;return this.onreadystatechange=function(){var t=this,n=a.MATCH_URLS,r=a.MATCH_HEADERS,i=this.requestHeaders?Object.keys(this.requestHeaders):null,o=a.PARSER_CONFIG.INSTREAM_CONFIG,u=a.PARSER_CONFIG.MARKETPLACE_VIDEO_AD,l=a.PARSER_CONFIG.FEED_VIDEO_AD,v=!1,A=null,d=null;if(i&&(v=i.some((function(e){if(r[e]&&r[e].includes(t.requestHeaders[e]))return A=e,d=t.requestHeaders[e],!0}))),4===this.readyState&&n.filter((function(e){return e.indexOf(t.responseURL)})).length>0)if(v)switch(!0){case o.USE&&o.HEADERS[A].includes(d):setTimeout((function(){return D(t.response,f,t.responseURL)}),0);break;case u.USE&&u.HEADERS[A].includes(d):setTimeout((function(){return D(t.response,c,t.responseURL)}),0);break;case l.USE&&l.HEADERS[A].includes(d):setTimeout((function(){return D(t.response,E,t.responseURL)}),0)}else setTimeout((function(){return D(t.response,s)}),0);if(e)return e.apply(this,arguments)},N.apply(this,arguments)}}window.addEventListener("message",(function(e){if(e.data.attribute&&"bis-text"===e.data.attribute)for(var n=Array.from(document.querySelectorAll(o.config.facebookConfig.QUERY_GET_SPONSORED_CANVAS)),r=null,i=e.data.attribute,a=o.config.facebookConfig.PATH_TO_CANVAS_TEXT,u=0,l=n;u<l.length;u++){var s=l[u];if(!Object.entries(s).some((function(e){if(e[0].search(/reactFiber/)>=0)return r=e[0],!0})))return void s.setAttribute(i,"");var f,c=s[r],E=t(a);try{for(E.s();!(f=E.n()).done;){var v=f.value;c[v]&&(c=c[v])}}catch(e){E.e(e)}finally{E.f()}s.setAttribute(i,c)}}))})();