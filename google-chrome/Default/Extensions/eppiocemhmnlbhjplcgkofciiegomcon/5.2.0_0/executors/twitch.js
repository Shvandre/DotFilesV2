(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e,n,o){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{document.location.host;var r,i="detector",a=n;if(!a&&s)a=null!==(r=s[0])&&void 0!==r&&r.type?s[0].type:null;var c={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"VIDEO_XHR_CANDIDATE",from:i,to:i.substring(0,6),content:{requestMethod:t,url:e,type:a,content:o}};if(s&&s instanceof Promise)return void s.then((function(t){c.content.encodedPostBody=t,c.type="VIDEO_TWITCH_INSTREAM_DATA",window.postMessage(c,"*")}));null!=o&&o.includes("streamPlaybackAccessToken")&&(c.type="VIDEO_TWITCH_INSTREAM_DATA"),window.postMessage(c,"*")}catch(t){}}var n=XMLHttpRequest.prototype.open,o=XMLHttpRequest.prototype.send,s=fetch;XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],n.apply(this,arguments)},XMLHttpRequest.prototype.send=function(){var t=Object.assign(arguments,{}),n=this.onreadystatechange;return this.onreadystatechange=function(){var o,s;if(4!==this.readyState||(o=this.responseURL,(s=document.querySelector("script[data-bis-config]")?JSON.parse(document.querySelector("script[data-bis-config]").getAttribute("data-bis-config")):null)&&s.some((function(t){return o.includes(t)})))||e(this.requestMethod,this.responseURL,this.getResponseHeader("content-type"),this.response,t),n)return n.apply(this,arguments)},o.apply(this,arguments)},fetch=function(){var n,o=this,r=arguments,i=arguments[0]instanceof Request?arguments[0].url:arguments[0],a=arguments[0]instanceof Request?arguments[0].method:null!==(n=arguments[1])&&void 0!==n&&n.method?arguments[1].method:"GET",c="POST"===a?arguments[1].body:null;return"object"===t(i)&&i.href&&(i=i.href),new Promise((function(t,n){s.apply(o,r).then((function(n){if(n.body instanceof ReadableStream){var o=n.headers.get("content-type"),s=n.json;n.json=function(){var t=arguments,r=this;return new Promise((function(u,p){s.apply(r,t).then((function(t){0!==n.url.search(/data:application\/json;base64/)&&e(a,i,o,JSON.stringify(t),c),u(t)})).catch((function(t){p(t)}))}))};var r=n.text;n.text=function(){var t=arguments,s=this;return new Promise((function(u,p){r.apply(s,t).then((function(t){0!==n.url.search(/data:application\/json;base64/)&&e(a,i,o,t,c),u(t)})).catch((function(t){p(t)}))}))},new RegExp("video-edge.*.ts$").test(i)&&"POST"===a&&null!=c&&c.arrayBuffer&&e(a,i,c.type,null,c.text())}t.apply(this,arguments)})).catch((function(t){n.apply(this,arguments)}))}))}})();