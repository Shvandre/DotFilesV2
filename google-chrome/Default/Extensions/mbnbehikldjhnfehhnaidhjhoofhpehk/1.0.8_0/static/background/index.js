var e,t;"function"==typeof(e=globalThis.define)&&(t=e,e=null),function(t,r,a,s,i){var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o="function"==typeof n[s]&&n[s],l=o.cache||{},c="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function h(e,r){if(!l[e]){if(!t[e]){var a="function"==typeof n[s]&&n[s];if(!r&&a)return a(e,!0);if(o)return o(e,!0);if(c&&"string"==typeof e)return c(e);var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}u.resolve=function(r){var a=t[e][1][r];return null!=a?a:r},u.cache={};var p=l[e]=new h.Module(e);t[e][0].call(p.exports,u,p,p.exports,this)}return l[e].exports;function u(e){var t=u.resolve(e);return!1===t?{}:h(t)}}h.isParcelRequire=!0,h.Module=function(e){this.id=e,this.bundle=h,this.exports={}},h.modules=t,h.cache=l,h.parent=o,h.register=function(e,r){t[e]=[function(e,t){t.exports=r},{}]},Object.defineProperty(h,"root",{get:function(){return n[s]}}),n[s]=h;for(var p=0;p<r.length;p++)h(r[p]);if(a){var u=h(a);"object"==typeof exports&&"undefined"!=typeof module?module.exports=u:"function"==typeof e&&e.amd?e(function(){return u}):i&&(this[i]=u)}}({kgW6q:[function(e,t,r){e("../../../background")},{"../../../background":"8VaxY"}],"8VaxY":[function(e,t,r){var a=e("@plasmohq/storage"),s=e("~app/constants"),i=e("~app/helpers/auth"),n=e("~app/helpers/sendMessageToTab");let o=new a.Storage;async function l(e,t){let r=await (0,i.validateFirebaseToken)(e);if(r)return await (0,i.fetchUserData)(e);if(t){console.log("Auth token invalid, attempting refresh");try{let e=await (0,i.refreshAuthToken)(t.refreshToken);return await (0,i.storeAuthData)(e),await l(e.token,null)}catch(t){console.error("Token refresh failed:",t);let e=Error("Authentication session expired");throw e.status=401,e}}}async function c(e){try{console.log("Starting sign in with token");let t=await o.get("authToken"),r=await l(e,t);if(!r)throw Error("No user after sign in");let a={uid:r.userId,email:r.email,displayName:r.username,photoURL:r.photoURL,isSubActive:"active"===r.subscription_status||null,interval:r.interval,subscription_id:r.subscription_id,profile_picture:r.profile_picture,expires_at:r.expires_at,trial_expires_at:r.trial_expires_at,lastLogin:Date.now(),priceId:r.price_id,smartInspections:r.smartInspections,hadTrial:r.hadTrial,subscription_status:r.subscription_status};return await o.set("userData",a),a}catch(e){throw console.error("Sign in error:",e),e}}chrome.runtime.onInstalled.addListener(()=>{chrome.runtime.setUninstallURL&&chrome.runtime.setUninstallURL(s.UNINSTALL_URL)}),chrome.runtime.onInstalled.addListener(async()=>{try{let e=await fetch(chrome.runtime.getURL("file-manifest.json")),t=await e.json(),r=t.inspector;chrome.tabs.query({},e=>{for(let t of e)t.id&&t.url?.startsWith("http")&&chrome.scripting.executeScript({target:{tabId:t.id},files:[r]}).catch(e=>console.log(e))})}catch(e){console.error("Failed to load manifest:",e)}}),chrome.action.onClicked.addListener(async e=>{if(!e.id)return;await o.set("flash",!1);let t=await o.get("isInspectorOpen"),r=await o.get("isSidebarOpen");if(r){await o.set("flash",!0);return}chrome.tabs.sendMessage(e.id,{type:"TOGGLE_INSPECTOR"}),await o.set("isInspectorOpen",!t),await o.set("isPanelOpen",!1)}),chrome.runtime.onMessageExternal.addListener((e,t,r)=>{if(console.log("Received external message:",e),console.log("From sender:",t),"STORE_AUTH_TOKEN"===e.type){let t={token:e.data.token,refreshToken:e.data.refreshToken,expiresAt:e.data.expiresAt||Date.now()+36e5};return o.set("authToken",t).then(()=>(console.log("Token stored successfully"),c(t.token))).then(e=>{console.log("Sign in successful:",e),r({success:!0,userData:e})}).catch(e=>{console.error("Error:",e),r({success:!1,error:e.message})}),!0}}),chrome.runtime.onMessage.addListener((e,t,r)=>{if("SIGN_IN"===e.type)return o.get("authToken").then(e=>{if(!e?.token)throw Error("Please sign in through the website first");return c(e.token)}).then(e=>{r({success:!0,user:e})}).catch(e=>{r({success:!1,error:e.message})}),!0}),chrome.runtime.onMessageExternal.addListener((e,t,r)=>{if("UPDATE_USER"===e.type)return o.get("authToken").then(e=>{if(!e?.token)throw Error("Please sign in through the website first");return c(e.token)}).then(e=>{r({success:!0,user:e})}).catch(e=>{r({success:!1,error:e.message})}),!0}),chrome.runtime.onMessage.addListener((e,t,r)=>{if("OPEN_SIDE_PANEL"===e.type)return chrome.sidePanel?.setOptions?.({enabled:!0}),chrome.sidePanel.open({windowId:t.tab?.windowId}).then(async()=>{await o.set("isPanelOpen",!0),await o.set("isSidebarOpen",!0),chrome.runtime.sendMessage({type:"PANEL_STATE_CHANGED",data:{isPanelOpen:!0,isSidebarOpen:!0}})}).catch(e=>console.error("Error opening side panel:",e)),!0}),chrome.runtime.onConnect.addListener(function(e){"mySidepanel"===e.name&&e.onDisconnect.addListener(async()=>{await (0,n.sendMessageToTab)({type:"CLEANUP"}),await o.set("isSidebarOpen",!1)})}),chrome.runtime.onMessage.addListener((e,t,r)=>{if("CLOSE_SIDE_PANEL"===e.type)return chrome.sidePanel?.setOptions?.({enabled:!1}).then(async()=>{await o.set("isPanelOpen",!1),await o.set("isSidebarOpen",!1),chrome.runtime.sendMessage({type:"PANEL_STATE_CHANGED",data:{isPanelOpen:!1,isSidebarOpen:!1}}),await o.set("isSidebarOpen",!1);let[e]=await chrome.tabs.query({active:!0,currentWindow:!0});e?.id&&chrome.tabs.sendMessage(e.id,{type:"TOGGLE_INSPECTOR"})}).catch(e=>console.error("Error closing side panel:",e)),!0}),chrome.sidePanel?.setOptions?.({enabled:!1}),chrome.runtime.onMessage.addListener((e,t,r)=>{"START_CAPTURE"===e.type&&chrome.tabs.query({active:!0,currentWindow:!0},e=>{e[0]?.id&&chrome.tabs.sendMessage(e[0].id,{type:"START_CAPTURE"})})}),chrome.runtime.onMessage.addListener((e,t,r)=>{"START_CAPTURE_DEFAULT"===e.type&&chrome.tabs.query({active:!0,currentWindow:!0},e=>{e[0]?.id&&chrome.tabs.sendMessage(e[0].id,{type:"START_CAPTURE_DEFAULT"})})}),chrome.runtime.onMessage.addListener(async(e,t,r)=>{if("UPDATE_SMART_INSPECTIONS"===e.type){let{userId:t,smartInspections:r}=e.data,a=await o.get("authToken");try{let e=await fetch("https://csspeeper.com/api/update-inspections",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.token}`},body:JSON.stringify({userId:t,smartInspections:r})});console.log(e,"response")}catch(e){throw console.error("Authentication failed:",e),e}}}),chrome.runtime.onMessage.addListener(async(e,t,r)=>{if("SIGN_OUT"===e.type){try{await o.remove("userData"),await o.remove("authToken"),await o.remove("lastSignInTime")}catch(e){console.error(e),r({success:!1,error:e.message})}return!0}})},{"@plasmohq/storage":"luF8G","~app/constants":"9PdE0","~app/helpers/auth":"7LwQA","~app/helpers/sendMessageToTab":"dew1q"}],luF8G:[function(e,t,r){var a=e("@parcel/transformer-js/src/esmodule-helpers.js");a.defineInteropFlag(r),a.export(r,"BaseStorage",()=>o),a.export(r,"Storage",()=>l);var s=e("pify"),i=a.interopDefault(s),n=()=>{try{let e=globalThis.navigator?.userAgent.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if("Chrome"===e[1])return 100>parseInt(e[2])||globalThis.chrome.runtime?.getManifest()?.manifest_version===2}catch{}return!1},o=class{#e;#t;get primaryClient(){return this.#t}#r;get secondaryClient(){return this.#r}#a;get area(){return this.#a}get hasWebApi(){try{return"u">typeof window&&!!window.localStorage}catch(e){return console.error(e),!1}}#s=new Map;#i;get copiedKeySet(){return this.#i}isCopied=e=>this.hasWebApi&&(this.allCopied||this.copiedKeySet.has(e));#n=!1;get allCopied(){return this.#n}getExtStorageApi=()=>globalThis.browser?.storage||globalThis.chrome?.storage;get hasExtensionApi(){try{return!!this.getExtStorageApi()}catch(e){return console.error(e),!1}}isWatchSupported=()=>this.hasExtensionApi;keyNamespace="";isValidKey=e=>e.startsWith(this.keyNamespace);getNamespacedKey=e=>`${this.keyNamespace}${e}`;getUnnamespacedKey=e=>e.slice(this.keyNamespace.length);serde={serializer:JSON.stringify,deserializer:JSON.parse};constructor({area:e="sync",allCopied:t=!1,copiedKeyList:r=[],serde:a={}}={}){this.setCopiedKeySet(r),this.#a=e,this.#n=t,this.serde={...this.serde,...a};try{this.hasWebApi&&(t||r.length>0)&&(this.#r=window.localStorage)}catch{}try{this.hasExtensionApi&&(this.#e=this.getExtStorageApi(),n()?this.#t=(0,i.default)(this.#e[this.area],{exclude:["getBytesInUse"],errorFirst:!1}):this.#t=this.#e[this.area])}catch{}}setCopiedKeySet(e){this.#i=new Set(e)}rawGetAll=()=>this.#t?.get();getAll=async()=>Object.entries(await this.rawGetAll()).filter(([e])=>this.isValidKey(e)).reduce((e,[t,r])=>(e[this.getUnnamespacedKey(t)]=r,e),{});copy=async e=>{let t=void 0===e;if(!t&&!this.copiedKeySet.has(e)||!this.allCopied||!this.hasExtensionApi)return!1;let r=this.allCopied?await this.rawGetAll():await this.#t.get((t?[...this.copiedKeySet]:[e]).map(this.getNamespacedKey));if(!r)return!1;let a=!1;for(let e in r){let t=r[e],s=this.#r?.getItem(e);this.#r?.setItem(e,t),a||=t!==s}return a};rawGet=async e=>(await this.rawGetMany([e]))[e];rawGetMany=async e=>this.hasExtensionApi?await this.#t.get(e):e.filter(this.isCopied).reduce((e,t)=>(e[t]=this.#r?.getItem(t),e),{});rawSet=async(e,t)=>await this.rawSetMany({[e]:t});rawSetMany=async e=>(this.#r&&Object.entries(e).filter(([e])=>this.isCopied(e)).forEach(([e,t])=>this.#r.setItem(e,t)),this.hasExtensionApi&&await this.#t.set(e),null);clear=async(e=!1)=>{e&&this.#r?.clear(),await this.#t.clear()};rawRemove=async e=>{await this.rawRemoveMany([e])};rawRemoveMany=async e=>{this.#r&&e.filter(this.isCopied).forEach(e=>this.#r.removeItem(e)),this.hasExtensionApi&&await this.#t.remove(e)};removeAll=async()=>{let e=Object.keys(await this.getAll());await this.removeMany(e)};watch=e=>{let t=this.isWatchSupported();return t&&this.#o(e),t};#o=e=>{for(let t in e){let r=this.getNamespacedKey(t),a=this.#s.get(r)?.callbackSet||new Set;if(a.add(e[t]),a.size>1)continue;let s=(e,t)=>{if(t!==this.area||!e[r])return;let a=this.#s.get(r);if(!a)throw Error(`Storage comms does not exist for nsKey: ${r}`);Promise.all([this.parseValue(e[r].newValue),this.parseValue(e[r].oldValue)]).then(([e,r])=>{for(let s of a.callbackSet)s({newValue:e,oldValue:r},t)})};this.#e.onChanged.addListener(s),this.#s.set(r,{callbackSet:a,listener:s})}};unwatch=e=>{let t=this.isWatchSupported();return t&&this.#l(e),t};#l(e){for(let t in e){let r=this.getNamespacedKey(t),a=e[t],s=this.#s.get(r);s&&(s.callbackSet.delete(a),0===s.callbackSet.size&&(this.#s.delete(r),this.#e.onChanged.removeListener(s.listener)))}}unwatchAll=()=>this.#c();#c(){this.#s.forEach(({listener:e})=>this.#e.onChanged.removeListener(e)),this.#s.clear()}async getItem(e){return this.get(e)}async getItems(e){return await this.getMany(e)}async setItem(e,t){await this.set(e,t)}async setItems(e){await await this.setMany(e)}async removeItem(e){return this.remove(e)}async removeItems(e){return await this.removeMany(e)}},l=class extends o{get=async e=>{let t=this.getNamespacedKey(e),r=await this.rawGet(t);return this.parseValue(r)};getMany=async e=>{let t=e.map(this.getNamespacedKey),r=await this.rawGetMany(t),a=await Promise.all(Object.values(r).map(this.parseValue));return Object.keys(r).reduce((e,t,r)=>(e[this.getUnnamespacedKey(t)]=a[r],e),{})};set=async(e,t)=>{let r=this.getNamespacedKey(e),a=this.serde.serializer(t);return this.rawSet(r,a)};setMany=async e=>{let t=Object.entries(e).reduce((e,[t,r])=>(e[this.getNamespacedKey(t)]=this.serde.serializer(r),e),{});return await this.rawSetMany(t)};remove=async e=>{let t=this.getNamespacedKey(e);return this.rawRemove(t)};removeMany=async e=>{let t=e.map(this.getNamespacedKey);return await this.rawRemoveMany(t)};setNamespace=e=>{this.keyNamespace=e};parseValue=async e=>{try{if(void 0!==e)return this.serde.deserializer(e)}catch(e){console.error(e)}}}},{pify:"9arDK","@parcel/transformer-js/src/esmodule-helpers.js":"hbR2Q"}],"9arDK":[function(e,t,r){var a=e("@parcel/transformer-js/src/esmodule-helpers.js");a.defineInteropFlag(r),a.export(r,"default",()=>n);let s=(e,t,r,a)=>function(...s){let i=t.promiseModule;return new i((i,n)=>{t.multiArgs?s.push((...e)=>{t.errorFirst?e[0]?n(e):(e.shift(),i(e)):i(e)}):t.errorFirst?s.push((e,t)=>{e?n(e):i(t)}):s.push(i),Reflect.apply(e,this===r?a:this,s)})},i=new WeakMap;function n(e,t){t={exclude:[/.+(?:Sync|Stream)$/],errorFirst:!0,promiseModule:Promise,...t};let r=typeof e;if(!(null!==e&&("object"===r||"function"===r)))throw TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${null===e?"null":r}\``);let a=(e,r)=>{let a=i.get(e);if(a||(a={},i.set(e,a)),r in a)return a[r];let s=e=>"string"==typeof e||"symbol"==typeof r?r===e:e.test(r),n=Reflect.getOwnPropertyDescriptor(e,r),o=void 0===n||n.writable||n.configurable,l=t.include?t.include.some(e=>s(e)):!t.exclude.some(e=>s(e)),c=l&&o;return a[r]=c,c},n=new WeakMap,o=new Proxy(e,{apply(e,r,a){let i=n.get(e);if(i)return Reflect.apply(i,r,a);let l=t.excludeMain?e:s(e,t,o,e);return n.set(e,l),Reflect.apply(l,r,a)},get(e,r){let i=e[r];if(!a(e,r)||i===Function.prototype[r])return i;let l=n.get(i);if(l)return l;if("function"==typeof i){let r=s(i,t,o,e);return n.set(i,r),r}return i}});return o}},{"@parcel/transformer-js/src/esmodule-helpers.js":"hbR2Q"}],hbR2Q:[function(e,t,r){r.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},r.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.exportAll=function(e,t){return Object.keys(e).forEach(function(r){"default"===r||"__esModule"===r||t.hasOwnProperty(r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})}),t},r.export=function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:r})}},{}],"9PdE0":[function(e,t,r){var a=e("@parcel/transformer-js/src/esmodule-helpers.js");a.defineInteropFlag(r),a.export(r,"PLASMO_ID",()=>s),a.export(r,"tabs",()=>i),a.export(r,"notificationMessage",()=>n),a.export(r,"FONT_WEIGHT_MAP",()=>o),a.export(r,"PEEPER_WIDTH",()=>l),a.export(r,"INTERACTIVE_TAGS",()=>c),a.export(r,"TEXT_TAGS",()=>h),a.export(r,"THEME_OPTIONS",()=>p),a.export(r,"COLOR_OPTIONS",()=>u),a.export(r,"FONT_OPTIONS",()=>d),a.export(r,"TypoPreviewDataH1",()=>f),a.export(r,"TypoPreviewDataP",()=>m),a.export(r,"cardVariants",()=>g),a.export(r,"contentVariants",()=>y),a.export(r,"LANDING_LINKS",()=>T),a.export(r,"BLOCK_MESSAGES",()=>b),a.export(r,"excludedElements",()=>S),a.export(r,"UNINSTALL_URL",()=>x);let s="plasmo-inspector",i={OVERVIEW:"Overview",COLORS_TAB:"Colors",ASSETS_TAB:"Assets",ACCOUNT_TAB:"Account",TYPOGRAPHY:"Typography"},n="Copied to clipboard",o={100:"Thin",200:"Extra Light",300:"Light",400:"Regular",500:"Medium",600:"Semi Bold",700:"Bold",800:"Extra Bold",900:"Heavy"},l="451",c=["A","BUTTON","INPUT","SELECT","TEXTAREA"],h=["P","SPAN","H1","H2","H3","H4","H5","H6","STRONG","EM","B","I","SMALL","LABEL","TEXT"],p=[{label:"Theme",value:"Auto"},{label:"Theme",value:"Light"},{label:"Theme",value:"Dark"}],u=[{label:"ColorCode",value:"Hex"},{label:"ColorCode",value:"HSL"},{label:"ColorCode",value:"RGB"}],d=[{label:"FontUnit",value:"px"},{label:"FontUnit",value:"rem"}],f={count:14,tag:"h1",baseStyles:{fontFamily:"Inter, sans-serif",fontSize:"24px",fontWeight:"600",lineHeight:"24px",letterSpacing:"normal",color:"rgb(14, 14, 14)",contrast:17.706804889103736,parentBackground:"rgb(245, 245, 245)",styleTagKey:"p-color:rgb(14, 14, 14)|contrast:17.706804889103736|fontFamily:Inter, sans-serif|fontSize:16px|fontWeight:400|letterSpacing:normal|lineHeight:24px|parentBackground:rgb(245, 245, 245)"}},m={count:16,tag:"p",baseStyles:{fontFamily:"Inter, sans-serif",fontSize:"16px",fontWeight:"400",lineHeight:"24px",letterSpacing:"normal",color:"rgb(14, 14, 14)",contrast:17.706804889103736,parentBackground:"rgb(245, 245, 245)",styleTagKey:"p-color:rgb(14, 14, 14)|contrast:17.706804889103736|fontFamily:Inter, sans-serif|fontSize:16px|fontWeight:400|letterSpacing:normal|lineHeight:24px|parentBackground:rgb(245, 245, 245)"}},g={initial:{opacity:0,y:20},animate:{opacity:1,y:0}},y={initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0}},w="https://csspeeper.com/",T={accountSettings:`${w}account`,managePlan:`${w}account/manage-plan`,privacy:`${w}/privacy-policy`,terms:`${w}/terms-and-conditions`,login:`${w}/login?extension`,pricing:`${w}/pricing`},b={trial:"Start 7-day free trial",afterTrial:"Upgrade Now"},S=["meta","body","path","plasmo-csui","html","head","script","title","link","noscript","style","iframe","path","mask","g","rect","svg","SCRIPT","defs","clipPath","source"],x="https://csspeeper.com/uninstall-feedback"},{"@parcel/transformer-js/src/esmodule-helpers.js":"hbR2Q"}],"7LwQA":[function(e,t,r){var a=e("@parcel/transformer-js/src/esmodule-helpers.js");a.defineInteropFlag(r),a.export(r,"validateFirebaseToken",()=>n),a.export(r,"storeAuthData",()=>o),a.export(r,"fetchUserData",()=>l),a.export(r,"refreshAuthToken",()=>c);var s=e("@plasmohq/storage");let i=new s.Storage;async function n(e){let t=await fetch("https://identitytoolkit.googleapis.com/v1/accounts:lookup?key=AIzaSyCT2qasBgLo6WclPfLg7NaE2yGx8GmVJak",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idToken:e})});return t.ok}async function o(e){await i.set("authToken",{token:e.token,refreshToken:e.refreshToken,expiresAt:Date.now()+1e3*e.expiresIn})}async function l(e){let t=await fetch("https://csspeeper.com/api/user-by-token",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok){let e=await t.json(),r=Error(e.error||"Failed to fetch user data");throw r.status=t.status,r}let r=await t.json();return r.user}async function c(e){try{let t=await fetch("https://securetoken.googleapis.com/v1/token?key=AIzaSyCT2qasBgLo6WclPfLg7NaE2yGx8GmVJak",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`grant_type=refresh_token&refresh_token=${e}`});if(!t.ok){let e=await t.json();throw Error(e.error?.message||"Failed to refresh token")}let r=await t.json();return{token:r.access_token,refreshToken:r.refresh_token||e,expiresIn:r.expires_in}}catch(e){throw console.error("Token refresh failed:",e),e}}},{"@plasmohq/storage":"luF8G","@parcel/transformer-js/src/esmodule-helpers.js":"hbR2Q"}],dew1q:[function(e,t,r){var a=e("@parcel/transformer-js/src/esmodule-helpers.js");a.defineInteropFlag(r),a.export(r,"sendMessageToTab",()=>s);let s=async e=>chrome?.tabs?new Promise(t=>{chrome.tabs.query({active:!0,currentWindow:!0},r=>{let a=r[0];a?.id?chrome.tabs.sendMessage(a.id,e,e=>{t(e||{success:!1,message:"No response from content script"})}):t({success:!1,message:"No active tab found"})})}):{success:!1,message:"Chrome API not available"}},{"@parcel/transformer-js/src/esmodule-helpers.js":"hbR2Q"}]},["kgW6q"],"kgW6q","parcelRequire220b"),globalThis.define=t;